<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: mutt_attach.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2021-02-05-647-g5d4e00</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mutt__attach_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mutt_attach.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handling of email attachments.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for mutt_attach.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h__incl.svg" width="184" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h__dep__incl.svg" width="1658" height="187"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="mutt__attach_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a5dd95d385576ba1b957d7e9c523ec946"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946">ViewAttachMode</a> { <a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a> = 1, 
<a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67">MUTT_VA_MAILCAP</a>, 
<a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a>, 
<a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a>
 }<tr class="memdesc:a5dd95d385576ba1b957d7e9c523ec946"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options for <a class="el" href="mutt__attach_8h.html#accdda994ba4457544dcf9ae681cfb6b9" title="View an attachment. ">mutt_view_attachment()</a>  <a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a5dd95d385576ba1b957d7e9c523ec946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5675c7a41890711ec4871b592c840faa"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a> { <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a> = 0, 
<a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c">MUTT_SAVE_APPEND</a>, 
<a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7">MUTT_SAVE_OVERWRITE</a>
 }<tr class="memdesc:a5675c7a41890711ec4871b592c840faa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options for saving attachments.  <a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a5675c7a41890711ec4871b592c840faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a86305a7b86a230165ada61d110743699"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a86305a7b86a230165ada61d110743699">attach_tag</a> (struct <a class="el" href="structMenu.html">Menu</a> *menu, int sel, int act)</td></tr>
<tr class="memdesc:a86305a7b86a230165ada61d110743699"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structTag.html" title="LinkedList Tag Element. ">Tag</a> an attachment - Implements <a class="el" href="structMenu.html#a9f56131f02aaece633d13c8b2007476a" title="Tag some menu items. ">Menu::tag()</a>  <a href="#a86305a7b86a230165ada61d110743699">More...</a><br /></td></tr>
<tr class="separator:a86305a7b86a230165ada61d110743699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72c9e19b893d8d4afc5593d9d2b399ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a72c9e19b893d8d4afc5593d9d2b399ff">mutt_attach_display_loop</a> (struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub, struct <a class="el" href="structMenu.html">Menu</a> *menu, int op, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *actx, bool recv)</td></tr>
<tr class="memdesc:a72c9e19b893d8d4afc5593d9d2b399ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event loop for the Attachment menu.  <a href="#a72c9e19b893d8d4afc5593d9d2b399ff">More...</a><br /></td></tr>
<tr class="separator:a72c9e19b893d8d4afc5593d9d2b399ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b47c498759b3b7d7d8b1e111a034df8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a2b47c498759b3b7d7d8b1e111a034df8">mutt_save_attachment_list</a> (struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *actx, FILE *fp, bool tag, struct <a class="el" href="structBody.html">Body</a> *top, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structMenu.html">Menu</a> *menu)</td></tr>
<tr class="memdesc:a2b47c498759b3b7d7d8b1e111a034df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a list of attachments.  <a href="#a2b47c498759b3b7d7d8b1e111a034df8">More...</a><br /></td></tr>
<tr class="separator:a2b47c498759b3b7d7d8b1e111a034df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed2bd717b168fbcb6d7c65c0943ef34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a8ed2bd717b168fbcb6d7c65c0943ef34">mutt_pipe_attachment_list</a> (struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *actx, FILE *fp, bool tag, struct <a class="el" href="structBody.html">Body</a> *top, bool filter)</td></tr>
<tr class="memdesc:a8ed2bd717b168fbcb6d7c65c0943ef34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pipe a list of attachments to a command.  <a href="#a8ed2bd717b168fbcb6d7c65c0943ef34">More...</a><br /></td></tr>
<tr class="separator:a8ed2bd717b168fbcb6d7c65c0943ef34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf1dd9e8d7f5246ed4030d38a360b29b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#adf1dd9e8d7f5246ed4030d38a360b29b">mutt_print_attachment_list</a> (struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *actx, FILE *fp, bool tag, struct <a class="el" href="structBody.html">Body</a> *top)</td></tr>
<tr class="memdesc:adf1dd9e8d7f5246ed4030d38a360b29b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a list of Attachments.  <a href="#adf1dd9e8d7f5246ed4030d38a360b29b">More...</a><br /></td></tr>
<tr class="separator:adf1dd9e8d7f5246ed4030d38a360b29b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accdda994ba4457544dcf9ae681cfb6b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#accdda994ba4457544dcf9ae681cfb6b9">mutt_view_attachment</a> (FILE *fp, struct <a class="el" href="structBody.html">Body</a> *a, enum <a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946">ViewAttachMode</a> mode, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *actx, struct <a class="el" href="structMuttWindow.html">MuttWindow</a> *win)</td></tr>
<tr class="memdesc:accdda994ba4457544dcf9ae681cfb6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">View an attachment.  <a href="#accdda994ba4457544dcf9ae681cfb6b9">More...</a><br /></td></tr>
<tr class="separator:accdda994ba4457544dcf9ae681cfb6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a97d711180c816108d8866ef7b120cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a1a97d711180c816108d8866ef7b120cc">mutt_check_lookup_list</a> (struct <a class="el" href="structBody.html">Body</a> *b, char *type, size_t len)</td></tr>
<tr class="memdesc:a1a97d711180c816108d8866ef7b120cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the mime type.  <a href="#a1a97d711180c816108d8866ef7b120cc">More...</a><br /></td></tr>
<tr class="separator:a1a97d711180c816108d8866ef7b120cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4b24753bffc9e93f0ec9c157c850fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#acf4b24753bffc9e93f0ec9c157c850fe">mutt_compose_attachment</a> (struct <a class="el" href="structBody.html">Body</a> *a)</td></tr>
<tr class="memdesc:acf4b24753bffc9e93f0ec9c157c850fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an attachment.  <a href="#acf4b24753bffc9e93f0ec9c157c850fe">More...</a><br /></td></tr>
<tr class="separator:acf4b24753bffc9e93f0ec9c157c850fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fd33255a2295a8ec36d8afd7c9c53df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a4fd33255a2295a8ec36d8afd7c9c53df">mutt_decode_save_attachment</a> (FILE *fp, struct <a class="el" href="structBody.html">Body</a> *m, const char *path, int displaying, enum <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a> opt)</td></tr>
<tr class="memdesc:a4fd33255a2295a8ec36d8afd7c9c53df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode, then save an attachment.  <a href="#a4fd33255a2295a8ec36d8afd7c9c53df">More...</a><br /></td></tr>
<tr class="separator:a4fd33255a2295a8ec36d8afd7c9c53df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adef1563a136b685ed418f12a6228ef42"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#adef1563a136b685ed418f12a6228ef42">mutt_edit_attachment</a> (struct <a class="el" href="structBody.html">Body</a> *a)</td></tr>
<tr class="memdesc:adef1563a136b685ed418f12a6228ef42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit an attachment.  <a href="#adef1563a136b685ed418f12a6228ef42">More...</a><br /></td></tr>
<tr class="separator:adef1563a136b685ed418f12a6228ef42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac18a72e3cc5fd8ed7b255817efe0fb3d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#ac18a72e3cc5fd8ed7b255817efe0fb3d">mutt_get_tmp_attachment</a> (struct <a class="el" href="structBody.html">Body</a> *a)</td></tr>
<tr class="memdesc:ac18a72e3cc5fd8ed7b255817efe0fb3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a temporary copy of an attachment.  <a href="#ac18a72e3cc5fd8ed7b255817efe0fb3d">More...</a><br /></td></tr>
<tr class="separator:ac18a72e3cc5fd8ed7b255817efe0fb3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d463fe47dc745c39cddb1e4d1c10982"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a0d463fe47dc745c39cddb1e4d1c10982">mutt_pipe_attachment</a> (FILE *fp, struct <a class="el" href="structBody.html">Body</a> *b, const char *path, char *outfile)</td></tr>
<tr class="memdesc:a0d463fe47dc745c39cddb1e4d1c10982"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pipe an attachment to a command.  <a href="#a0d463fe47dc745c39cddb1e4d1c10982">More...</a><br /></td></tr>
<tr class="separator:a0d463fe47dc745c39cddb1e4d1c10982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e06a71a4e4180b7279d5eb5439d9d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#a55e06a71a4e4180b7279d5eb5439d9d5">mutt_print_attachment</a> (FILE *fp, struct <a class="el" href="structBody.html">Body</a> *a)</td></tr>
<tr class="memdesc:a55e06a71a4e4180b7279d5eb5439d9d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print out an attachment.  <a href="#a55e06a71a4e4180b7279d5eb5439d9d5">More...</a><br /></td></tr>
<tr class="separator:a55e06a71a4e4180b7279d5eb5439d9d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb94477fad8521799cd4a94ec0e3eecf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a> (FILE *fp, struct <a class="el" href="structBody.html">Body</a> *m, const char *path, enum <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a> opt, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:adb94477fad8521799cd4a94ec0e3eecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save an attachment.  <a href="#adb94477fad8521799cd4a94ec0e3eecf">More...</a><br /></td></tr>
<tr class="separator:adb94477fad8521799cd4a94ec0e3eecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc6c49a75e5a6fce41d18c1d95a45948"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#acc6c49a75e5a6fce41d18c1d95a45948">mutt_add_temp_attachment</a> (const char *filename)</td></tr>
<tr class="memdesc:acc6c49a75e5a6fce41d18c1d95a45948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add file to list of temporary attachments.  <a href="#acc6c49a75e5a6fce41d18c1d95a45948">More...</a><br /></td></tr>
<tr class="separator:acc6c49a75e5a6fce41d18c1d95a45948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad17742bb1239d32b203e93e082bfa903"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__attach_8h.html#ad17742bb1239d32b203e93e082bfa903">mutt_unlink_temp_attachments</a> (void)</td></tr>
<tr class="memdesc:ad17742bb1239d32b203e93e082bfa903"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all temporary attachments.  <a href="#ad17742bb1239d32b203e93e082bfa903">More...</a><br /></td></tr>
<tr class="separator:ad17742bb1239d32b203e93e082bfa903"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handling of email attachments. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Michael R. Elkins</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="mutt__attach_8h_source.html">mutt_attach.h</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a5dd95d385576ba1b957d7e9c523ec946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd95d385576ba1b957d7e9c523ec946">&#9670;&nbsp;</a></span>ViewAttachMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946">ViewAttachMode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Options for <a class="el" href="mutt__attach_8h.html#accdda994ba4457544dcf9ae681cfb6b9" title="View an attachment. ">mutt_view_attachment()</a> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b"></a>MUTT_VA_REGULAR&#160;</td><td class="fielddoc"><p>View using default method. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67"></a>MUTT_VA_MAILCAP&#160;</td><td class="fielddoc"><p>Force viewing using mailcap entry. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79"></a>MUTT_VA_AS_TEXT&#160;</td><td class="fielddoc"><p>Force viewing as text. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc"></a>MUTT_VA_PAGER&#160;</td><td class="fielddoc"><p>View attachment in pager using copiousoutput mailcap. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8h_source.html#l00041">41</a> of file <a class="el" href="mutt__attach_8h_source.html">mutt_attach.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a> = 1, </div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67">MUTT_VA_MAILCAP</a>,     </div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a>,     </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a>,       </div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;};</div><div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a></div><div class="ttdoc">Force viewing as text. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00045">mutt_attach.h:45</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a></div><div class="ttdoc">View using default method. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00043">mutt_attach.h:43</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a></div><div class="ttdoc">View attachment in pager using copiousoutput mailcap. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00046">mutt_attach.h:46</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67">MUTT_VA_MAILCAP</a></div><div class="ttdoc">Force viewing using mailcap entry. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00044">mutt_attach.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5675c7a41890711ec4871b592c840faa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5675c7a41890711ec4871b592c840faa">&#9670;&nbsp;</a></span>SaveAttach</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Options for saving attachments. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mutt__attach_8h.html#adb94477fad8521799cd4a94ec0e3eecf" title="Save an attachment. ">mutt_save_attachment()</a>, <a class="el" href="mutt__attach_8h.html#a4fd33255a2295a8ec36d8afd7c9c53df" title="Decode, then save an attachment. ">mutt_decode_save_attachment()</a>, <a class="el" href="mutt__attach_8c.html#a79d67a7fd5f21b0d899467aa8991ad02" title="Open a file to write an attachment to. ">save_attachment_open()</a>, <a class="el" href="muttlib_8c.html#ae34cbb3670824b1838c0973c88aab15b" title="Ask the user if overwriting is necessary. ">mutt_check_overwrite()</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224"></a>MUTT_SAVE_NO_FLAGS&#160;</td><td class="fielddoc"><p>No flags set. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c"></a>MUTT_SAVE_APPEND&#160;</td><td class="fielddoc"><p>Append to existing file. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7"></a>MUTT_SAVE_OVERWRITE&#160;</td><td class="fielddoc"><p>Overwrite existing file. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8h_source.html#l00055">55</a> of file <a class="el" href="mutt__attach_8h_source.html">mutt_attach.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a> = 0, </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c">MUTT_SAVE_APPEND</a>,       </div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7">MUTT_SAVE_OVERWRITE</a>,    </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;};</div><div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a></div><div class="ttdoc">No flags set. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00057">mutt_attach.h:57</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7">MUTT_SAVE_OVERWRITE</a></div><div class="ttdoc">Overwrite existing file. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00059">mutt_attach.h:59</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c">MUTT_SAVE_APPEND</a></div><div class="ttdoc">Append to existing file. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00058">mutt_attach.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a86305a7b86a230165ada61d110743699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86305a7b86a230165ada61d110743699">&#9670;&nbsp;</a></span>attach_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int attach_tag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMenu.html">Menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>act</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="structTag.html" title="LinkedList Tag Element. ">Tag</a> an attachment - Implements <a class="el" href="structMenu.html#a9f56131f02aaece633d13c8b2007476a" title="Tag some menu items. ">Menu::tag()</a> </p>

<p class="definition">Definition at line <a class="el" href="recvattach_8c_source.html#l00519">519</a> of file <a class="el" href="recvattach_8c_source.html">recvattach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;{</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keyword">struct </span><a class="code" href="structAttachCtx.html">AttachCtx</a> *actx = menu-&gt;<a class="code" href="structMenu.html#adc6d277fec333aca5b57f1156e6dabfc">mdata</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBody.html">Body</a> *cur = actx-&gt;<a class="code" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[actx-&gt;<a class="code" href="structAttachCtx.html#af3d254a510a44c1a2f55eef4a27908fc">v2r</a>[sel]]-&gt;<a class="code" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">bool</span> ot = cur-&gt;<a class="code" href="structBody.html#aaaa97781986925aa1f10f24be18243ab">tagged</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  cur-&gt;<a class="code" href="structBody.html#aaaa97781986925aa1f10f24be18243ab">tagged</a> = ((act &gt;= 0) ? act : !cur-&gt;<a class="code" href="structBody.html#aaaa97781986925aa1f10f24be18243ab">tagged</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">return</span> cur-&gt;<a class="code" href="structBody.html#aaaa97781986925aa1f10f24be18243ab">tagged</a> - ot;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div><div class="ttc" id="structBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00034">body.h:34</a></div></div>
<div class="ttc" id="structBody_html_aaaa97781986925aa1f10f24be18243ab"><div class="ttname"><a href="structBody.html#aaaa97781986925aa1f10f24be18243ab">Body::tagged</a></div><div class="ttdeci">bool tagged</div><div class="ttdoc">This attachment is tagged. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00070">body.h:70</a></div></div>
<div class="ttc" id="structMenu_html_adc6d277fec333aca5b57f1156e6dabfc"><div class="ttname"><a href="structMenu.html#adc6d277fec333aca5b57f1156e6dabfc">Menu::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Private data. </div><div class="ttdef"><b>Definition:</b> <a href="menu_2lib_8h_source.html#l00136">lib.h:136</a></div></div>
<div class="ttc" id="structAttachCtx_html_af3d254a510a44c1a2f55eef4a27908fc"><div class="ttname"><a href="structAttachCtx.html#af3d254a510a44c1a2f55eef4a27908fc">AttachCtx::v2r</a></div><div class="ttdeci">short * v2r</div><div class="ttdoc">Mapping from virtual to real attachment. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00058">attach.h:58</a></div></div>
<div class="ttc" id="structAttachCtx_html"><div class="ttname"><a href="structAttachCtx.html">AttachCtx</a></div><div class="ttdoc">A set of attachments. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00049">attach.h:49</a></div></div>
<div class="ttc" id="structAttachCtx_html_a8954cda6f07f33628b3addf8bc2621fd"><div class="ttname"><a href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">AttachCtx::idx</a></div><div class="ttdeci">struct AttachPtr ** idx</div><div class="ttdoc">Array of attachments. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00054">attach.h:54</a></div></div>
<div class="ttc" id="structAttachPtr_html_a0546c0753a6155ae9555c290b80d0356"><div class="ttname"><a href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">AttachPtr::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">Attachment. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00036">attach.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a86305a7b86a230165ada61d110743699_icgraph.svg" width="320" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a72c9e19b893d8d4afc5593d9d2b399ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72c9e19b893d8d4afc5593d9d2b399ff">&#9670;&nbsp;</a></span>mutt_attach_display_loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_attach_display_loop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMenu.html">Menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *&#160;</td>
          <td class="paramname"><em>actx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event loop for the Attachment menu. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
    <tr><td class="paramname">menu</td><td><a class="el" href="structMenu.html" title="GUI selectable list of items. ">Menu</a> listing Attachments </td></tr>
    <tr><td class="paramname">op</td><td>Operation, e.g. OP_VIEW_ATTACH </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> </td></tr>
    <tr><td class="paramname">actx</td><td>Attachment context </td></tr>
    <tr><td class="paramname">recv</td><td>true if these are received attachments (rather than in compose) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Operation performed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="recvattach_8c_source.html#l01373">1373</a> of file <a class="el" href="recvattach_8c_source.html">recvattach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;{</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">switch</span> (op)</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="keywordflow">case</span> OP_DISPLAY_HEADERS:</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <a class="code" href="bool_8c.html#a5ef0a3002d75e9d9a91cda84336c13f5">bool_str_toggle</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;weed&quot;</span>, NULL);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="comment">/* fallthrough */</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="keywordflow">case</span> OP_VIEW_ATTACH:</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keyword">struct </span><a class="code" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code" href="recvattach_8c.html#a20214b4a23880e9b23ba3ff9eb6fdedf">current_attachment</a>(actx, menu);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        op = <a class="code" href="mutt__attach_8c.html#accdda994ba4457544dcf9ae681cfb6b9">mutt_view_attachment</a>(cur_att-&gt;<a class="code" href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">fp</a>, cur_att-&gt;<a class="code" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a>,</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                                  e, actx, menu-&gt;<a class="code" href="structMenu.html#a03edef68cc4422dea828bc89332f3020">win</a>);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      }</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="keywordflow">case</span> OP_NEXT_ENTRY:</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="keywordflow">case</span> OP_MAIN_NEXT_UNDELETED: <span class="comment">/* hack */</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> index = <a class="code" href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a>(menu) + 1;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="keywordflow">if</span> (index &lt; menu-&gt;max)</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;          <a class="code" href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a>(menu, index);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;          op = OP_VIEW_ATTACH;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;          op = OP_NULL;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <span class="keywordflow">case</span> OP_PREV_ENTRY:</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="keywordflow">case</span> OP_MAIN_PREV_UNDELETED: <span class="comment">/* hack */</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      {</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> index = <a class="code" href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a>(menu) - 1;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">if</span> (index &gt;= 0)</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;          <a class="code" href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a>(menu, index);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;          op = OP_VIEW_ATTACH;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;          op = OP_NULL;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      }</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="keywordflow">case</span> OP_EDIT_TYPE:</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keyword">struct </span><a class="code" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code" href="recvattach_8c.html#a20214b4a23880e9b23ba3ff9eb6fdedf">current_attachment</a>(actx, menu);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="comment">/* when we edit the content-type, we should redisplay the attachment</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">         * immediately */</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <a class="code" href="commands_8c.html#a9b5874c3558cb300404bb50f60fc6a31">mutt_edit_content_type</a>(e, cur_att-&gt;<a class="code" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, cur_att-&gt;<a class="code" href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">fp</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">if</span> (recv)</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;          <a class="code" href="recvattach_8c.html#aaf526e8ee68249faedfcba0c417a0adc">recvattach_edit_content_type</a>(sub, actx, menu, e);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;          <a class="code" href="commands_8c.html#a9b5874c3558cb300404bb50f60fc6a31">mutt_edit_content_type</a>(e, cur_att-&gt;<a class="code" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, cur_att-&gt;<a class="code" href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">fp</a>);</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <a class="code" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(menu, <a class="code" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        op = OP_VIEW_ATTACH;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      }</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <span class="comment">/* functions which are passed through from the pager */</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keywordflow">case</span> OP_CHECK_TRADITIONAL:</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) || (e &amp;&amp; e-&gt;<a class="code" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code" href="ncrypt_2lib_8h.html#a3c4cec129dc84794f15f44382c25fc36">PGP_TRADITIONAL_CHECKED</a>))</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        {</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;          op = OP_NULL;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="comment">/* fallthrough */</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="keywordflow">case</span> OP_ATTACH_COLLAPSE:</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="keywordflow">if</span> (recv)</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;          <span class="keywordflow">return</span> op;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="comment">/* fallthrough */</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        op = OP_NULL;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  } <span class="keywordflow">while</span> (op != OP_NULL);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">return</span> op;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;}</div><div class="ttc" id="structAttachPtr_html"><div class="ttname"><a href="structAttachPtr.html">AttachPtr</a></div><div class="ttdoc">An email to which things will be attached. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00034">attach.h:34</a></div></div>
<div class="ttc" id="ncrypt_2lib_8h_html_ad980bff69bb614893ad8e7e1c28a5023"><div class="ttname"><a href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a></div><div class="ttdeci">#define WithCrypto</div><div class="ttdef"><b>Definition:</b> <a href="ncrypt_2lib_8h_source.html#l00113">lib.h:113</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_a5a9733924cc01176ee916515a3683268"><div class="ttname"><a href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a></div><div class="ttdeci">void menu_queue_redraw(struct Menu *menu, MenuRedrawFlags redraw)</div><div class="ttdoc">Queue a request for a redraw. </div><div class="ttdef"><b>Definition:</b> <a href="menu_8c_source.html#l00629">menu.c:629</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_a294a94cf45be93fa7677adb7116ce60b"><div class="ttname"><a href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a></div><div class="ttdeci">#define MENU_REDRAW_INDEX</div><div class="ttdoc">Redraw the index. </div><div class="ttdef"><b>Definition:</b> <a href="menu_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a></div><div class="ttdoc">View using default method. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00043">mutt_attach.h:43</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_a67ee9260e41986eb4487124b004cff18"><div class="ttname"><a href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a></div><div class="ttdeci">int menu_get_index(struct Menu *menu)</div><div class="ttdoc">Get the current selection in the Menu. </div><div class="ttdef"><b>Definition:</b> <a href="menu_8c_source.html#l00605">menu.c:605</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_ae279bb826b97fcc88c0714b2a6383851"><div class="ttname"><a href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a></div><div class="ttdeci">MenuRedrawFlags menu_set_index(struct Menu *menu, int index)</div><div class="ttdoc">Set the current selection in the Menu. </div><div class="ttdef"><b>Definition:</b> <a href="menu_8c_source.html#l00619">menu.c:619</a></div></div>
<div class="ttc" id="structMenu_html_a03edef68cc4422dea828bc89332f3020"><div class="ttname"><a href="structMenu.html#a03edef68cc4422dea828bc89332f3020">Menu::win</a></div><div class="ttdeci">struct MuttWindow * win</div><div class="ttdoc">Window holding the Menu. </div><div class="ttdef"><b>Definition:</b> <a href="menu_2lib_8h_source.html#l00072">lib.h:72</a></div></div>
<div class="ttc" id="bool_8c_html_a5ef0a3002d75e9d9a91cda84336c13f5"><div class="ttname"><a href="bool_8c.html#a5ef0a3002d75e9d9a91cda84336c13f5">bool_str_toggle</a></div><div class="ttdeci">int bool_str_toggle(struct ConfigSubset *sub, const char *name, struct Buffer *err)</div><div class="ttdoc">Toggle the value of a bool. </div><div class="ttdef"><b>Definition:</b> <a href="bool_8c_source.html#l00214">bool.c:214</a></div></div>
<div class="ttc" id="ncrypt_2lib_8h_html_a587e679a4c9cc44f11f0c467bb22b0af"><div class="ttname"><a href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a></div><div class="ttdeci">#define APPLICATION_PGP</div><div class="ttdoc">Use PGP to encrypt/sign. </div><div class="ttdef"><b>Definition:</b> <a href="ncrypt_2lib_8h_source.html#l00087">lib.h:87</a></div></div>
<div class="ttc" id="recvattach_8c_html_a20214b4a23880e9b23ba3ff9eb6fdedf"><div class="ttname"><a href="recvattach_8c.html#a20214b4a23880e9b23ba3ff9eb6fdedf">current_attachment</a></div><div class="ttdeci">static struct AttachPtr * current_attachment(struct AttachCtx *actx, struct Menu *menu)</div><div class="ttdoc">Get the current attachment. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l00128">recvattach.c:128</a></div></div>
<div class="ttc" id="recvattach_8c_html_aaf526e8ee68249faedfcba0c417a0adc"><div class="ttname"><a href="recvattach_8c.html#aaf526e8ee68249faedfcba0c417a0adc">recvattach_edit_content_type</a></div><div class="ttdeci">static void recvattach_edit_content_type(struct ConfigSubset *sub, struct AttachCtx *actx, struct Menu *menu, struct Email *e)</div><div class="ttdoc">Edit the content type of an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l01341">recvattach.c:1341</a></div></div>
<div class="ttc" id="structAttachPtr_html_a776ea6f490cedf7dc47accba055d964c"><div class="ttname"><a href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">AttachPtr::fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdoc">Used in the recvattach menu. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00037">attach.h:37</a></div></div>
<div class="ttc" id="structEmail_html_a570a81cd747437c9ea4357947731ae10"><div class="ttname"><a href="structEmail.html#a570a81cd747437c9ea4357947731ae10">Email::security</a></div><div class="ttdeci">SecurityFlags security</div><div class="ttdoc">bit 0-10: flags, bit 11,12: application, bit 13: traditional pgp See: ncrypt/lib.h pgplib...</div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00039">email.h:39</a></div></div>
<div class="ttc" id="ncrypt_2lib_8h_html_a3c4cec129dc84794f15f44382c25fc36"><div class="ttname"><a href="ncrypt_2lib_8h.html#a3c4cec129dc84794f15f44382c25fc36">PGP_TRADITIONAL_CHECKED</a></div><div class="ttdeci">#define PGP_TRADITIONAL_CHECKED</div><div class="ttdoc">Email has a traditional (inline) signature. </div><div class="ttdef"><b>Definition:</b> <a href="ncrypt_2lib_8h_source.html#l00089">lib.h:89</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="commands_8c_html_a9b5874c3558cb300404bb50f60fc6a31"><div class="ttname"><a href="commands_8c.html#a9b5874c3558cb300404bb50f60fc6a31">mutt_edit_content_type</a></div><div class="ttdeci">bool mutt_edit_content_type(struct Email *e, struct Body *b, FILE *fp)</div><div class="ttdoc">Edit the content type of an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="commands_8c_source.html#l01433">commands.c:1433</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_accdda994ba4457544dcf9ae681cfb6b9"><div class="ttname"><a href="mutt__attach_8c.html#accdda994ba4457544dcf9ae681cfb6b9">mutt_view_attachment</a></div><div class="ttdeci">int mutt_view_attachment(FILE *fp, struct Body *a, enum ViewAttachMode mode, struct Email *e, struct AttachCtx *actx, struct MuttWindow *win)</div><div class="ttdoc">View an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l00415">mutt_attach.c:415</a></div></div>
<div class="ttc" id="structAttachPtr_html_a0546c0753a6155ae9555c290b80d0356"><div class="ttname"><a href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">AttachPtr::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">Attachment. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00036">attach.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a72c9e19b893d8d4afc5593d9d2b399ff_cgraph.svg" width="868" height="392"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a72c9e19b893d8d4afc5593d9d2b399ff_icgraph.svg" width="420" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2b47c498759b3b7d7d8b1e111a034df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b47c498759b3b7d7d8b1e111a034df8">&#9670;&nbsp;</a></span>mutt_save_attachment_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_save_attachment_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *&#160;</td>
          <td class="paramname"><em>actx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMenu.html">Menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save a list of attachments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">actx</td><td>Attachment context </td></tr>
    <tr><td class="paramname">fp</td><td>File handle for the attachment (OPTIONAL) </td></tr>
    <tr><td class="paramname">tag</td><td>If true, only save the tagged attachments </td></tr>
    <tr><td class="paramname">top</td><td>First Attachment </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> </td></tr>
    <tr><td class="paramname">menu</td><td><a class="el" href="structMenu.html" title="GUI selectable list of items. ">Menu</a> listing attachments </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="recvattach_8c_source.html#l00788">788</a> of file <a class="el" href="recvattach_8c_source.html">recvattach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;{</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordtype">char</span> *directory = NULL;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordtype">int</span> rc = 1;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordtype">int</span> last = <a class="code" href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a>(menu);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  FILE *fp_out = NULL;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordtype">int</span> saved_attachments = 0;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *buf = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *tfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_attach_split = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;attach_split&quot;</span>);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_attach_sep = <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;attach_sep&quot;</span>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_attach_save_without_prompting =</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;attach_save_without_prompting&quot;</span>);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; !tag || (i &lt; actx-&gt;<a class="code" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>); i++)</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">if</span> (tag)</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      fp = actx-&gt;<a class="code" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code" href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">fp</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      top = actx-&gt;<a class="code" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (!tag || top-&gt;<a class="code" href="structBody.html#aaaa97781986925aa1f10f24be18243ab">tagged</a>)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">if</span> (!c_attach_split)</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="buffer_8c.html#a2d7c4a32422377609be66b0f620c4971">mutt_buffer_is_empty</a>(buf))</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;          <span class="keyword">enum</span> <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a> opt = <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(buf, <a class="code" href="mutt_2path_8c.html#a39d221597eb8f311c7cdaa7261a6319b">mutt_path_basename</a>(<a class="code" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(top-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>)));</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;          <a class="code" href="recvattach_8c.html#a7ead8fceb1c2b8c8c8a86b08e73a1191">prepend_savedir</a>(buf);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="curs__lib_8c.html#a89ddceeb9356040360c64ff0c9463480">mutt_buffer_get_field</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Save to file: &quot;</span>), buf, <a class="code" href="mutt_8h.html#af03a3b6aab3f2f7caf8945357ebd6419">MUTT_FILE</a> | <a class="code" href="mutt_8h.html#a172560a328e2ed4c8e0e786e9b9d6e17">MUTT_CLEAR</a>,</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                                     <span class="keyword">false</span>, NULL, NULL, NULL) != 0) ||</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;              <a class="code" href="buffer_8c.html#a2d7c4a32422377609be66b0f620c4971">mutt_buffer_is_empty</a>(buf))</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;          {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="keywordflow">goto</span> cleanup;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;          }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          <a class="code" href="muttlib_8c.html#a21df22e3d202586bf463caf3c9e718cc">mutt_buffer_expand_path</a>(buf);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="muttlib_8c.html#ae34cbb3670824b1838c0973c88aab15b">mutt_check_overwrite</a>(top-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf), tfile, &amp;opt, NULL))</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="keywordflow">goto</span> cleanup;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;          rc = <a class="code" href="recvattach_8c.html#a3c36223d243ef6b041baf6e0bb54533f">save_attachment_flowed_helper</a>(fp, top, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tfile), opt, e);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;          <span class="keywordflow">if</span> ((rc == 0) &amp;&amp; c_attach_sep &amp;&amp; (fp_out = fopen(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tfile), <span class="stringliteral">&quot;a&quot;</span>)))</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;          {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            fprintf(fp_out, <span class="stringliteral">&quot;%s&quot;</span>, c_attach_sep);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_out);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;          rc = <a class="code" href="recvattach_8c.html#a3c36223d243ef6b041baf6e0bb54533f">save_attachment_flowed_helper</a>(fp, top, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tfile),</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                             <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c">MUTT_SAVE_APPEND</a>, e);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;          <span class="keywordflow">if</span> ((rc == 0) &amp;&amp; c_attach_sep &amp;&amp; (fp_out = fopen(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tfile), <span class="stringliteral">&quot;a&quot;</span>)))</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;          {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            fprintf(fp_out, <span class="stringliteral">&quot;%s&quot;</span>, c_attach_sep);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_out);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;          }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">if</span> (tag &amp;&amp; menu &amp;&amp; top-&gt;<a class="code" href="structBody.html#a7f100009f42fd558aaaaaf89bb2f4156">aptr</a>)</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;          <a class="code" href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a>(menu, top-&gt;<a class="code" href="structBody.html#a7f100009f42fd558aaaaaf89bb2f4156">aptr</a>-&gt;<a class="code" href="structAttachPtr.html#a71db2d33eefd6c1f41f129f6943fe83a">num</a>);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;          <a class="code" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(menu, <a class="code" href="menu_2lib_8h.html#afd1295f0c36408826d642e4771b89a1b">MENU_REDRAW_MOTION</a>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;          <a class="code" href="draw_8c.html#a3da31793ff9ae935dccab75ae653a064">menu_redraw</a>(menu);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> (c_attach_save_without_prompting)</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;          <span class="comment">// Save each file, with no prompting, using the configured &#39;AttachSaveDir&#39;</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          rc = <a class="code" href="recvattach_8c.html#a999be3ce814a6a72a2a5c409b7583521">save_without_prompting</a>(fp, top, e);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;          <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            saved_attachments++;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          <span class="comment">// Save each file, prompting the user for the location each time.</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="recvattach_8c.html#aad56960e0d22f0b6e36dbf18d120d84a">query_save_attachment</a>(fp, top, e, &amp;directory) == -1)</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span> (!tag)</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;directory);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">if</span> (tag &amp;&amp; menu)</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a>(menu, last);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(menu, <a class="code" href="menu_2lib_8h.html#afd1295f0c36408826d642e4771b89a1b">MENU_REDRAW_MOTION</a>);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (!c_attach_split)</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      saved_attachments = 1;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (!c_attach_split || c_attach_save_without_prompting)</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(ngettext(<span class="stringliteral">&quot;Attachment saved&quot;</span>, <span class="stringliteral">&quot;%d attachments saved&quot;</span>, saved_attachments),</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                   saved_attachments);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;cleanup:</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;tfile);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;}</div><div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="string2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00037">string2.h:37</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="mutt_8h_html_a172560a328e2ed4c8e0e786e9b9d6e17"><div class="ttname"><a href="mutt_8h.html#a172560a328e2ed4c8e0e786e9b9d6e17">MUTT_CLEAR</a></div><div class="ttdeci">#define MUTT_CLEAR</div><div class="ttdoc">Clear input if printable character is pressed. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00058">mutt.h:58</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_a5a9733924cc01176ee916515a3683268"><div class="ttname"><a href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a></div><div class="ttdeci">void menu_queue_redraw(struct Menu *menu, MenuRedrawFlags redraw)</div><div class="ttdoc">Queue a request for a redraw. </div><div class="ttdef"><b>Definition:</b> <a href="menu_8c_source.html#l00629">menu.c:629</a></div></div>
<div class="ttc" id="mutt_2path_8c_html_a39d221597eb8f311c7cdaa7261a6319b"><div class="ttname"><a href="mutt_2path_8c.html#a39d221597eb8f311c7cdaa7261a6319b">mutt_path_basename</a></div><div class="ttdeci">const char * mutt_path_basename(const char *f)</div><div class="ttdoc">Find the last component for a pathname. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2path_8c_source.html#l00329">path.c:329</a></div></div>
<div class="ttc" id="curs__lib_8c_html_a89ddceeb9356040360c64ff0c9463480"><div class="ttname"><a href="curs__lib_8c.html#a89ddceeb9356040360c64ff0c9463480">mutt_buffer_get_field</a></div><div class="ttdeci">int mutt_buffer_get_field(const char *field, struct Buffer *buf, CompletionFlags complete, bool multiple, struct Mailbox *m, char ***files, int *numfiles)</div><div class="ttdoc">Ask the user for a string. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00268">curs_lib.c:268</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a></div><div class="ttdoc">No flags set. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00057">mutt_attach.h:57</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="recvattach_8c_html_a7ead8fceb1c2b8c8c8a86b08e73a1191"><div class="ttname"><a href="recvattach_8c.html#a7ead8fceb1c2b8c8c8a86b08e73a1191">prepend_savedir</a></div><div class="ttdeci">static void prepend_savedir(struct Buffer *buf)</div><div class="ttdoc">Add $attach_save_dir to the beginning of a path. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l00533">recvattach.c:533</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="draw_8c_html_a3da31793ff9ae935dccab75ae653a064"><div class="ttname"><a href="draw_8c.html#a3da31793ff9ae935dccab75ae653a064">menu_redraw</a></div><div class="ttdeci">int menu_redraw(struct Menu *menu)</div><div class="ttdoc">Redraw the parts of the screen that have been flagged to be redrawn. </div><div class="ttdef"><b>Definition:</b> <a href="draw_8c_source.html#l00558">draw.c:558</a></div></div>
<div class="ttc" id="structAttachCtx_html_af02af835a67d8b3467f3a52ede4897f0"><div class="ttname"><a href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">AttachCtx::idxlen</a></div><div class="ttdeci">short idxlen</div><div class="ttdoc">Number of attachmentes. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00055">attach.h:55</a></div></div>
<div class="ttc" id="recvattach_8c_html_aad56960e0d22f0b6e36dbf18d120d84a"><div class="ttname"><a href="recvattach_8c.html#aad56960e0d22f0b6e36dbf18d120d84a">query_save_attachment</a></div><div class="ttdeci">static int query_save_attachment(FILE *fp, struct Body *body, struct Email *e, char **directory)</div><div class="ttdoc">Ask the user if we should save the attachment. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l00639">recvattach.c:639</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_a67ee9260e41986eb4487124b004cff18"><div class="ttname"><a href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a></div><div class="ttdeci">int menu_get_index(struct Menu *menu)</div><div class="ttdoc">Get the current selection in the Menu. </div><div class="ttdef"><b>Definition:</b> <a href="menu_8c_source.html#l00605">menu.c:605</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_ae279bb826b97fcc88c0714b2a6383851"><div class="ttname"><a href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a></div><div class="ttdeci">MenuRedrawFlags menu_set_index(struct Menu *menu, int index)</div><div class="ttdoc">Set the current selection in the Menu. </div><div class="ttdef"><b>Definition:</b> <a href="menu_8c_source.html#l00619">menu.c:619</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="menu_2lib_8h_html_afd1295f0c36408826d642e4771b89a1b"><div class="ttname"><a href="menu_2lib_8h.html#afd1295f0c36408826d642e4771b89a1b">MENU_REDRAW_MOTION</a></div><div class="ttdeci">#define MENU_REDRAW_MOTION</div><div class="ttdoc">Redraw after moving the menu list. </div><div class="ttdef"><b>Definition:</b> <a href="menu_2lib_8h_source.html#l00053">lib.h:53</a></div></div>
<div class="ttc" id="structBody_html_aaaa97781986925aa1f10f24be18243ab"><div class="ttname"><a href="structBody.html#aaaa97781986925aa1f10f24be18243ab">Body::tagged</a></div><div class="ttdeci">bool tagged</div><div class="ttdoc">This attachment is tagged. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00070">body.h:70</a></div></div>
<div class="ttc" id="recvattach_8c_html_a999be3ce814a6a72a2a5c409b7583521"><div class="ttname"><a href="recvattach_8c.html#a999be3ce814a6a72a2a5c409b7583521">save_without_prompting</a></div><div class="ttdeci">static int save_without_prompting(FILE *fp, struct Body *body, struct Email *e)</div><div class="ttdoc">Save the attachment, without prompting each time. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l00738">recvattach.c:738</a></div></div>
<div class="ttc" id="structAttachPtr_html_a71db2d33eefd6c1f41f129f6943fe83a"><div class="ttname"><a href="structAttachPtr.html#a71db2d33eefd6c1f41f129f6943fe83a">AttachPtr::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Attachment index number. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00041">attach.h:41</a></div></div>
<div class="ttc" id="structBody_html_a7f100009f42fd558aaaaaf89bb2f4156"><div class="ttname"><a href="structBody.html#a7f100009f42fd558aaaaaf89bb2f4156">Body::aptr</a></div><div class="ttdeci">struct AttachPtr * aptr</div><div class="ttdoc">Menu information, used in recvattach.c. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00057">body.h:57</a></div></div>
<div class="ttc" id="structAttachPtr_html_a776ea6f490cedf7dc47accba055d964c"><div class="ttname"><a href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">AttachPtr::fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdoc">Used in the recvattach menu. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00037">attach.h:37</a></div></div>
<div class="ttc" id="helpers_8c_html_ac477c591155aa4ae0452bbabc0affffe"><div class="ttname"><a href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00317">helpers.c:317</a></div></div>
<div class="ttc" id="mutt_8h_html_af03a3b6aab3f2f7caf8945357ebd6419"><div class="ttname"><a href="mutt_8h.html#af03a3b6aab3f2f7caf8945357ebd6419">MUTT_FILE</a></div><div class="ttdeci">#define MUTT_FILE</div><div class="ttdoc">Do file completion. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00054">mutt.h:54</a></div></div>
<div class="ttc" id="buffer_8c_html_a4bcc481586ae3af02645b4e23e48e0d7"><div class="ttname"><a href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a></div><div class="ttdeci">size_t mutt_buffer_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00312">buffer.c:312</a></div></div>
<div class="ttc" id="muttlib_8c_html_ae34cbb3670824b1838c0973c88aab15b"><div class="ttname"><a href="muttlib_8c.html#ae34cbb3670824b1838c0973c88aab15b">mutt_check_overwrite</a></div><div class="ttdeci">int mutt_check_overwrite(const char *attname, const char *path, struct Buffer *fname, enum SaveAttach *opt, char **directory)</div><div class="ttdoc">Ask the user if overwriting is necessary. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00625">muttlib.c:625</a></div></div>
<div class="ttc" id="muttlib_8c_html_a21df22e3d202586bf463caf3c9e718cc"><div class="ttname"><a href="muttlib_8c.html#a21df22e3d202586bf463caf3c9e718cc">mutt_buffer_expand_path</a></div><div class="ttdeci">void mutt_buffer_expand_path(struct Buffer *buf)</div><div class="ttdoc">Create the canonical path. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00322">muttlib.c:322</a></div></div>
<div class="ttc" id="recvattach_8c_html_a3c36223d243ef6b041baf6e0bb54533f"><div class="ttname"><a href="recvattach_8c.html#a3c36223d243ef6b041baf6e0bb54533f">save_attachment_flowed_helper</a></div><div class="ttdeci">static int save_attachment_flowed_helper(FILE *fp, struct Body *b, const char *path, enum SaveAttach flags, struct Email *e)</div><div class="ttdoc">Helper for unstuffing attachments. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l00592">recvattach.c:592</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c">MUTT_SAVE_APPEND</a></div><div class="ttdoc">Append to existing file. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00058">mutt_attach.h:58</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="buffer_8c_html_a2d7c4a32422377609be66b0f620c4971"><div class="ttname"><a href="buffer_8c.html#a2d7c4a32422377609be66b0f620c4971">mutt_buffer_is_empty</a></div><div class="ttdeci">bool mutt_buffer_is_empty(const struct Buffer *buf)</div><div class="ttdoc">Is the Buffer empty? </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00252">buffer.c:252</a></div></div>
<div class="ttc" id="structAttachCtx_html_a8954cda6f07f33628b3addf8bc2621fd"><div class="ttname"><a href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">AttachCtx::idx</a></div><div class="ttdeci">struct AttachPtr ** idx</div><div class="ttdoc">Array of attachments. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00054">attach.h:54</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faa"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a></div><div class="ttdeci">SaveAttach</div><div class="ttdoc">Options for saving attachments. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00055">mutt_attach.h:55</a></div></div>
<div class="ttc" id="structAttachPtr_html_a0546c0753a6155ae9555c290b80d0356"><div class="ttname"><a href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">AttachPtr::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">Attachment. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00036">attach.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a2b47c498759b3b7d7d8b1e111a034df8_cgraph.svg" width="915" height="1264"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a2b47c498759b3b7d7d8b1e111a034df8_icgraph.svg" width="575" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8ed2bd717b168fbcb6d7c65c0943ef34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed2bd717b168fbcb6d7c65c0943ef34">&#9670;&nbsp;</a></span>mutt_pipe_attachment_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_pipe_attachment_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *&#160;</td>
          <td class="paramname"><em>actx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>filter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pipe a list of attachments to a command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">actx</td><td>Attachment context </td></tr>
    <tr><td class="paramname">fp</td><td>File handle to the attachment (OPTIONAL) </td></tr>
    <tr><td class="paramname">tag</td><td>If true, only save the tagged attachments </td></tr>
    <tr><td class="paramname">top</td><td>First Attachment </td></tr>
    <tr><td class="paramname">filter</td><td>Is this command a filter? </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="recvattach_8c_source.html#l01081">1081</a> of file <a class="el" href="recvattach_8c_source.html">recvattach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;{</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keyword">struct </span><a class="code" href="structState.html">State</a> state = { 0 };</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *buf = NULL;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">if</span> (fp)</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    filter = <span class="keyword">false</span>; <span class="comment">/* sanity check: we can&#39;t filter in the recv case yet */</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  buf = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">/* perform charset conversion on text attachments when piping */</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  state.<a class="code" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> = <a class="code" href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="curs__lib_8c.html#a89ddceeb9356040360c64ff0c9463480">mutt_buffer_get_field</a>((filter ? <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Filter through: &quot;</span>) : <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Pipe to: &quot;</span>)),</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                            buf, <a class="code" href="mutt_8h.html#ab9eedd4dd04bc51834fcc292753a57bf">MUTT_CMD</a>, <span class="keyword">false</span>, NULL, NULL, NULL) != 0)</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">goto</span> cleanup;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="buffer_8c.html#a6929443fb5515bb2ab749f84769d9cc7">mutt_buffer_len</a>(buf) == 0)</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">goto</span> cleanup;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <a class="code" href="muttlib_8c.html#a21df22e3d202586bf463caf3c9e718cc">mutt_buffer_expand_path</a>(buf);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_attach_split = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;attach_split&quot;</span>);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">if</span> (!filter &amp;&amp; !c_attach_split)</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    pid_t pid = <a class="code" href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf), &amp;state.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>, NULL, NULL);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <a class="code" href="recvattach_8c.html#a5966c1c4dd427e245631eb236129a5e2">pipe_attachment_list</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf), actx, fp, tag, top, filter, &amp;state);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;state.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_wait_key = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;wait_key&quot;</span>);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a>(pid) != 0) || c_wait_key)</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="recvattach_8c.html#a5966c1c4dd427e245631eb236129a5e2">pipe_attachment_list</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf), actx, fp, tag, top, filter, &amp;state);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;cleanup:</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;}</div><div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="filter_8c_html_a81a0bae52b713e896cc8b220cc119262"><div class="ttname"><a href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a></div><div class="ttdeci">pid_t filter_create(const char *cmd, FILE **fp_in, FILE **fp_out, FILE **fp_err)</div><div class="ttdoc">Set up filter program. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00206">filter.c:206</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="state_8h_html_a5380aee741459ab7d39708695b18711f"><div class="ttname"><a href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a></div><div class="ttdeci">#define MUTT_CHARCONV</div><div class="ttdoc">Do character set conversions. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00036">state.h:36</a></div></div>
<div class="ttc" id="curs__lib_8c_html_a89ddceeb9356040360c64ff0c9463480"><div class="ttname"><a href="curs__lib_8c.html#a89ddceeb9356040360c64ff0c9463480">mutt_buffer_get_field</a></div><div class="ttdeci">int mutt_buffer_get_field(const char *field, struct Buffer *buf, CompletionFlags complete, bool multiple, struct Mailbox *m, char ***files, int *numfiles)</div><div class="ttdoc">Ask the user for a string. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00268">curs_lib.c:268</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00047">state.h:47</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="structState_html_a5d855f7d518fde2ac4e8e409cbb24ad3"><div class="ttname"><a href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">State::flags</a></div><div class="ttdeci">StateFlags flags</div><div class="ttdoc">Flags, e.g. MUTT_DISPLAY. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00049">state.h:49</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="mutt_8h_html_ab9eedd4dd04bc51834fcc292753a57bf"><div class="ttname"><a href="mutt_8h.html#ab9eedd4dd04bc51834fcc292753a57bf">MUTT_CMD</a></div><div class="ttdeci">#define MUTT_CMD</div><div class="ttdoc">Do completion on previous word. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00056">mutt.h:56</a></div></div>
<div class="ttc" id="curs__lib_8c_html_acd14d074d8b9e6cb21e851dd573cdec2"><div class="ttname"><a href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a></div><div class="ttdeci">void mutt_endwin(void)</div><div class="ttdoc">Shutdown curses/slang. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00422">curs_lib.c:422</a></div></div>
<div class="ttc" id="buffer_8c_html_a6929443fb5515bb2ab749f84769d9cc7"><div class="ttname"><a href="buffer_8c.html#a6929443fb5515bb2ab749f84769d9cc7">mutt_buffer_len</a></div><div class="ttdeci">size_t mutt_buffer_len(const struct Buffer *buf)</div><div class="ttdoc">Calculate the length of a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00356">buffer.c:356</a></div></div>
<div class="ttc" id="recvattach_8c_html_a5966c1c4dd427e245631eb236129a5e2"><div class="ttname"><a href="recvattach_8c.html#a5966c1c4dd427e245631eb236129a5e2">pipe_attachment_list</a></div><div class="ttdeci">static void pipe_attachment_list(const char *command, struct AttachCtx *actx, FILE *fp, bool tag, struct Body *top, bool filter, struct State *state)</div><div class="ttdoc">Pipe a list of attachments to a command. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l01049">recvattach.c:1049</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="muttlib_8c_html_a21df22e3d202586bf463caf3c9e718cc"><div class="ttname"><a href="muttlib_8c.html#a21df22e3d202586bf463caf3c9e718cc">mutt_buffer_expand_path</a></div><div class="ttdeci">void mutt_buffer_expand_path(struct Buffer *buf)</div><div class="ttdoc">Create the canonical path. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00322">muttlib.c:322</a></div></div>
<div class="ttc" id="structState_html"><div class="ttname"><a href="structState.html">State</a></div><div class="ttdoc">Keep track when processing files. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00044">state.h:44</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="filter_8c_html_a22c6912b837b1114c3276c990e73dca3"><div class="ttname"><a href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a></div><div class="ttdeci">int filter_wait(pid_t pid)</div><div class="ttdoc">Wait for the exit of a process and return its status. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00217">filter.c:217</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a8ed2bd717b168fbcb6d7c65c0943ef34_cgraph.svg" width="624" height="646"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a8ed2bd717b168fbcb6d7c65c0943ef34_icgraph.svg" width="572" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="adf1dd9e8d7f5246ed4030d38a360b29b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf1dd9e8d7f5246ed4030d38a360b29b">&#9670;&nbsp;</a></span>mutt_print_attachment_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_print_attachment_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *&#160;</td>
          <td class="paramname"><em>actx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>top</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print a list of Attachments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">actx</td><td>Attachment context </td></tr>
    <tr><td class="paramname">fp</td><td>File handle to the attachment (OPTIONAL) </td></tr>
    <tr><td class="paramname">tag</td><td>Apply to all tagged Attachments </td></tr>
    <tr><td class="paramname">top</td><td>First Attachment </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="recvattach_8c_source.html#l01240">1240</a> of file <a class="el" href="recvattach_8c_source.html">recvattach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;{</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordtype">char</span> prompt[128];</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keyword">struct </span><a class="code" href="structState.html">State</a> state = { 0 };</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordtype">int</span> tagmsgcount = 0;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">if</span> (tag)</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; actx-&gt;<a class="code" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>; i++)</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordflow">if</span> (actx-&gt;<a class="code" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code" href="structBody.html#aaaa97781986925aa1f10f24be18243ab">tagged</a>)</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        tagmsgcount++;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  snprintf(prompt, <span class="keyword">sizeof</span>(prompt),</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;           <span class="comment">/* L10N: Although we now the precise number of tagged messages, we</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">              do not show it to the user.  So feel free to use a &quot;generic</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">              plural&quot; as plural translation if your language has one. */</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;           tag ? ngettext(<span class="stringliteral">&quot;Print tagged attachment?&quot;</span>, <span class="stringliteral">&quot;Print %d tagged attachments?&quot;</span>, tagmsgcount) :</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                 <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Print attachment?&quot;</span>),</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;           tagmsgcount);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_print = <a class="code" href="helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;print&quot;</span>);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="question_2lib_8h.html#ab02047769214ff014b9a8a1782babadc">query_quadoption</a>(c_print, prompt) != <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_attach_split = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;attach_split&quot;</span>);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">if</span> (c_attach_split)</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="recvattach_8c.html#a54f776fcfc922681ca8c99d4aa497198">print_attachment_list</a>(actx, fp, tag, top, &amp;state);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="recvattach_8c.html#aa65ac63b4bb9d0b83b6f4128736ad190">can_print</a>(actx, top, tag))</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_print_command =</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;print_command&quot;</span>);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    pid_t pid = <a class="code" href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a>(<a class="code" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_print_command), &amp;state.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>, NULL, NULL);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <a class="code" href="recvattach_8c.html#a54f776fcfc922681ca8c99d4aa497198">print_attachment_list</a>(actx, fp, tag, top, &amp;state);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;state.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_wait_key = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;wait_key&quot;</span>);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a>(pid) != 0) || c_wait_key)</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div><div class="ttc" id="string2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00037">string2.h:37</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="filter_8c_html_a81a0bae52b713e896cc8b220cc119262"><div class="ttname"><a href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a></div><div class="ttdeci">pid_t filter_create(const char *cmd, FILE **fp_in, FILE **fp_out, FILE **fp_err)</div><div class="ttdoc">Set up filter program. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00206">filter.c:206</a></div></div>
<div class="ttc" id="recvattach_8c_html_a54f776fcfc922681ca8c99d4aa497198"><div class="ttname"><a href="recvattach_8c.html#a54f776fcfc922681ca8c99d4aa497198">print_attachment_list</a></div><div class="ttdeci">static void print_attachment_list(struct AttachCtx *actx, FILE *fp, bool tag, struct Body *top, struct State *state)</div><div class="ttdoc">Print a list of Attachments. </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l01170">recvattach.c:1170</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structAttachCtx_html_af02af835a67d8b3467f3a52ede4897f0"><div class="ttname"><a href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">AttachCtx::idxlen</a></div><div class="ttdeci">short idxlen</div><div class="ttdoc">Number of attachmentes. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00055">attach.h:55</a></div></div>
<div class="ttc" id="structState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00047">state.h:47</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35db"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a></div><div class="ttdeci">QuadOption</div><div class="ttdoc">Possible values for a quad-option. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00035">quad.h:35</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="question_2lib_8h_html_ab02047769214ff014b9a8a1782babadc"><div class="ttname"><a href="question_2lib_8h.html#ab02047769214ff014b9a8a1782babadc">query_quadoption</a></div><div class="ttdeci">enum QuadOption query_quadoption(enum QuadOption opt, const char *prompt)</div><div class="ttdoc">Ask the user a quad-question. </div><div class="ttdef"><b>Definition:</b> <a href="question_8c_source.html#l00347">question.c:347</a></div></div>
<div class="ttc" id="structBody_html_aaaa97781986925aa1f10f24be18243ab"><div class="ttname"><a href="structBody.html#aaaa97781986925aa1f10f24be18243ab">Body::tagged</a></div><div class="ttdeci">bool tagged</div><div class="ttdoc">This attachment is tagged. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00070">body.h:70</a></div></div>
<div class="ttc" id="curs__lib_8c_html_acd14d074d8b9e6cb21e851dd573cdec2"><div class="ttname"><a href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a></div><div class="ttdeci">void mutt_endwin(void)</div><div class="ttdoc">Shutdown curses/slang. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00422">curs_lib.c:422</a></div></div>
<div class="ttc" id="helpers_8c_html_ac477c591155aa4ae0452bbabc0affffe"><div class="ttname"><a href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00317">helpers.c:317</a></div></div>
<div class="ttc" id="recvattach_8c_html_aa65ac63b4bb9d0b83b6f4128736ad190"><div class="ttname"><a href="recvattach_8c.html#aa65ac63b4bb9d0b83b6f4128736ad190">can_print</a></div><div class="ttdeci">static bool can_print(struct AttachCtx *actx, struct Body *top, bool tag)</div><div class="ttdoc">Do we know how to print this attachment type? </div><div class="ttdef"><b>Definition:</b> <a href="recvattach_8c_source.html#l01130">recvattach.c:1130</a></div></div>
<div class="ttc" id="helpers_8c_html_a9154ba713ce99b0937f475eec7c61af9"><div class="ttname"><a href="helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a></div><div class="ttdeci">enum QuadOption cs_subset_quad(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a quad-value config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00218">helpers.c:218</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="structState_html"><div class="ttname"><a href="structState.html">State</a></div><div class="ttdoc">Keep track when processing files. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00044">state.h:44</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="filter_8c_html_a22c6912b837b1114c3276c990e73dca3"><div class="ttname"><a href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a></div><div class="ttdeci">int filter_wait(pid_t pid)</div><div class="ttdoc">Wait for the exit of a process and return its status. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00217">filter.c:217</a></div></div>
<div class="ttc" id="structAttachCtx_html_a8954cda6f07f33628b3addf8bc2621fd"><div class="ttname"><a href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">AttachCtx::idx</a></div><div class="ttdeci">struct AttachPtr ** idx</div><div class="ttdoc">Array of attachments. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00054">attach.h:54</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdoc">User answered &amp;#39;Yes&amp;#39;, or assume &amp;#39;Yes&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
<div class="ttc" id="structAttachPtr_html_a0546c0753a6155ae9555c290b80d0356"><div class="ttname"><a href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">AttachPtr::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">Attachment. </div><div class="ttdef"><b>Definition:</b> <a href="attach_8h_source.html#l00036">attach.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_adf1dd9e8d7f5246ed4030d38a360b29b_cgraph.svg" width="635" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_adf1dd9e8d7f5246ed4030d38a360b29b_icgraph.svg" width="574" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="accdda994ba4457544dcf9ae681cfb6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accdda994ba4457544dcf9ae681cfb6b9">&#9670;&nbsp;</a></span>mutt_view_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_view_attachment </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946">ViewAttachMode</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structAttachCtx.html">AttachCtx</a> *&#160;</td>
          <td class="paramname"><em>actx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMuttWindow.html">MuttWindow</a> *&#160;</td>
          <td class="paramname"><em>win</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>View an attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>Source file stream. Can be NULL </td></tr>
    <tr><td class="paramname">a</td><td>The message body containing the attachment </td></tr>
    <tr><td class="paramname">mode</td><td>How the attachment should be viewed, see <a class="el" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946" title="Options for mutt_view_attachment() ">ViewAttachMode</a> </td></tr>
    <tr><td class="paramname">e</td><td>Current <a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a>. Can be NULL </td></tr>
    <tr><td class="paramname">actx</td><td>Attachment context </td></tr>
    <tr><td class="paramname">win</td><td>Window </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The viewer is run and exited successfully </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
    <tr><td class="paramname">num</td><td>Return value of <a class="el" href="do__pager_8c.html#a9d3af21b7fdf24249c261a9a1aa9f3be" title="Display some page-able text to the user (help or attachment) ">mutt_do_pager()</a> when it is used</td></tr>
  </table>
  </dd>
</dl>
<p>Display a message attachment using the viewer program configured in mailcap. If there is no mailcap entry for a file type, view the image as text. Viewer processes are opened and waited on synchronously so viewing an attachment this way will block the main neomutt process until the viewer process exits. </p>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l00415">415</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;{</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordtype">bool</span> use_mailcap = <span class="keyword">false</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordtype">bool</span> use_pipe = <span class="keyword">false</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordtype">bool</span> use_pager = <span class="keyword">true</span>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">char</span> type[256];</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">char</span> desc[256];</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordtype">char</span> *fname = NULL;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMailcapEntry.html">MailcapEntry</a> *entry = NULL;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordtype">int</span> rc = -1;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordtype">bool</span> has_tempfile = <span class="keyword">false</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordtype">bool</span> unlink_pagerfile = <span class="keyword">false</span>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordtype">bool</span> is_message = <a class="code" href="parse_8c.html#adcc90fb584fec1be116777c533e9b3d4">mutt_is_message_type</a>(a-&gt;<a class="code" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a>, a-&gt;<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; is_message &amp;&amp; a-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a> &amp;&amp;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      (a-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a>-&gt;<a class="code" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>) &amp;&amp; !<a class="code" href="crypt_8c.html#a4ee7f1419a7e39b0e9f1f9d550f4de43">crypt_valid_passphrase</a>(a-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a>-&gt;<a class="code" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a>))</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *tmpfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *pagerfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *cmd = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  use_mailcap = ((mode == <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67">MUTT_VA_MAILCAP</a>) ||</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                 ((mode == <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a>) &amp;&amp; <a class="code" href="muttlib_8c.html#a408880eb332fd5a312dcae1df22ff688">mutt_needs_mailcap</a>(a)) ||</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                 (mode == <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a>));</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  snprintf(type, <span class="keyword">sizeof</span>(type), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a>(a), a-&gt;<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordtype">char</span> columns[16];</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  snprintf(columns, <span class="keyword">sizeof</span>(columns), <span class="stringliteral">&quot;%d&quot;</span>, win-&gt;<a class="code" href="structMuttWindow.html#a406b976fc50b1cb5beca6c85e7a3be7f">state</a>.<a class="code" href="structWindowState.html#a557cf2197f9df8fe60f6e1dbfd49ec43">cols</a>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="envlist_8c.html#a9a8f68ff46021b57741a8c5d10c08f6d">mutt_envlist_set</a>(<span class="stringliteral">&quot;COLUMNS&quot;</span>, columns, <span class="keyword">true</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">if</span> (use_mailcap)</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    entry = <a class="code" href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a>();</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">enum</span> <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1">MailcapLookup</a> mailcap_opt =</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        (mode == <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a>) ? <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a685052e871afa17028f0e1c11e056a60">MUTT_MC_AUTOVIEW</a> : <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1abe09e527550677b514f34f0fd421d8f8">MUTT_MC_NO_FLAGS</a>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a>(a, type, <span class="keyword">sizeof</span>(type), entry, mailcap_opt))</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> ((mode == <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a>) || (mode == <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a>))</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">/* fallback to view as text */</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No matching mailcap entry found.  Viewing as text.&quot;</span>));</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        mode = <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        use_mailcap = <span class="keyword">false</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordflow">if</span> (use_mailcap)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (!entry-&gt;<a class="code" href="structMailcapEntry.html#ad682bf5b0b80e72f2a9b9196728514e3">command</a>)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;MIME type not defined.  Can&#39;t view attachment.&quot;</span>));</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(cmd, entry-&gt;<a class="code" href="structMailcapEntry.html#ad682bf5b0b80e72f2a9b9196728514e3">command</a>);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    fname = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">/* In send mode(!fp), we allow slashes because those are part of</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">     * the tmpfile.  The path will be removed in expand_filename */</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="file_8c.html#a4deebaf3a646b3075a2b51eda5dc03ca">mutt_file_sanitize_filename</a>(fname, fp ? <span class="keyword">true</span> : <span class="keyword">false</span>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a>(entry-&gt;<a class="code" href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">nametemplate</a>, fname, tmpfile);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;fname);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mutt__attach_8c.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a>(fp, a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile), 0, NULL) == -1)</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    has_tempfile = <span class="keyword">true</span>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a>(a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile));</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    use_pipe = <a class="code" href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a>(a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile), type, cmd);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    use_pager = entry-&gt;<a class="code" href="structMailcapEntry.html#adcea89b25743514d268e8fde508d6295">copiousoutput</a>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (use_pager)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (fp &amp;&amp; !use_mailcap &amp;&amp; a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>)</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="comment">/* recv case */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(pagerfile, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <a class="code" href="muttlib_8c.html#acf3a46e57ab84223b270c763ccb166ca">mutt_adv_mktemp</a>(pagerfile);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a>(pagerfile);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">if</span> (use_mailcap)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    pid_t pid = 0;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordtype">int</span> fd_temp = -1, fd_pager = -1;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (!use_pager)</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_wait_key = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;wait_key&quot;</span>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (use_pager || use_pipe)</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="keywordflow">if</span> (use_pager &amp;&amp; ((fd_pager = <a class="code" href="file_8c.html#a19e7688227f4eea96b9aff180bd0a904">mutt_file_open</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile),</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                                                   O_CREAT | O_EXCL | O_WRONLY)) == -1))</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;open&quot;</span>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      unlink_pagerfile = <span class="keyword">true</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">if</span> (use_pipe &amp;&amp; ((fd_temp = open(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile), 0)) == -1))</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">if</span> (fd_pager != -1)</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;          close(fd_pager);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;open&quot;</span>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      unlink_pagerfile = <span class="keyword">true</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      pid = <a class="code" href="filter_8c.html#ab135f1182014687e686263f6e9613be5">filter_create_fd</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd), NULL, NULL, NULL,</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                             use_pipe ? fd_temp : -1, use_pager ? fd_pager : -1, -1);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">if</span> (pid == -1)</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">if</span> (fd_pager != -1)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          close(fd_pager);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">if</span> (fd_temp != -1)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          close(fd_temp);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t create filter&quot;</span>));</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">if</span> (use_pager)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> (a-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>)</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;          snprintf(desc, <span class="keyword">sizeof</span>(desc), <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;---Command: %-20.20s Description: %s&quot;</span>),</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                   <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd), a-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;          snprintf(desc, <span class="keyword">sizeof</span>(desc), <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;---Command: %-30.30s Attachment: %s&quot;</span>),</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                   <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd), type);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a>(pid);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mutt__attach_8c.html#a6e3181c7c2c23232e591fd65c2b431da">wait_interactive_filter</a>(pid) || (entry-&gt;<a class="code" href="structMailcapEntry.html#a4cc66616bac929499b83944fb8e2911d">needsterminal</a> &amp;&amp; c_wait_key))</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">if</span> (fd_temp != -1)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        close(fd_temp);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">if</span> (fd_pager != -1)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        close(fd_pager);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="comment">/* interactive cmd */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordtype">int</span> rv = <a class="code" href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd));</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> (rv == -1)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Error running \&quot;%s\&quot;&quot;</span>, cmd-&gt;<a class="code" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">if</span> ((rv != 0) || (entry-&gt;<a class="code" href="structMailcapEntry.html#a4cc66616bac929499b83944fb8e2911d">needsterminal</a> &amp;&amp; c_wait_key))</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">/* Don&#39;t use mailcap; the attachment is viewed in the pager */</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (mode == <a class="code" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a>)</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="comment">/* just let me see the raw data */</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">if</span> (fp)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="comment">/* Viewing from a received message.</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">         * Don&#39;t use mutt_save_attachment() because we want to perform charset</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">         * conversion since this will be displayed by the internal pager.  */</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keyword">struct </span><a class="code" href="structState.html">State</a> decode_state = { 0 };</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        decode_state.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">if</span> (!decode_state.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;mutt_file_fopen(%s) errno=%d %s\n&quot;</span>,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                     <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile), errno, strerror(errno));</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;          <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile));</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        decode_state.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fp;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        decode_state.<a class="code" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> = <a class="code" href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="handler_8c.html#a8dc0c14a81bb73f86986adc9745dd192">mutt_decode_attachment</a>(a, &amp;decode_state);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;decode_state.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>) == EOF)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;fclose(%s) errno=%d %s\n&quot;</span>,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                     <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile), errno, strerror(errno));</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="comment">/* in compose mode, just copy the file.  we can&#39;t use</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">         * mutt_decode_attachment() since it assumes the content-encoding has</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">         * already been applied */</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mutt__attach_8c.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a>(fp, a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile), <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a>, NULL))</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        unlink_pagerfile = <span class="keyword">true</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <a class="code" href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a>(a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile));</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="comment">/* Use built-in handler */</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <a class="code" href="options_8h.html#abdfb908fdaf1711345ab7b6a1109c5b0">OptViewAttach</a> = <span class="keyword">true</span>; <span class="comment">/* disable the &quot;use &#39;v&#39; to view this part&quot;</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">                             * message in case of error */</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="mutt__attach_8c.html#a4fd33255a2295a8ec36d8afd7c9c53df">mutt_decode_save_attachment</a>(fp, a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile),</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                      <a class="code" href="state_8h.html#a5f9dc9c8012c0aeeacaa122b882c65a6">MUTT_DISPLAY</a>, <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a>))</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="options_8h.html#abdfb908fdaf1711345ab7b6a1109c5b0">OptViewAttach</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">goto</span> return_error;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      unlink_pagerfile = <span class="keyword">true</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <a class="code" href="options_8h.html#abdfb908fdaf1711345ab7b6a1109c5b0">OptViewAttach</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span> (a-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>)</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <a class="code" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(desc, a-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>, <span class="keyword">sizeof</span>(desc));</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>)</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      snprintf(desc, <span class="keyword">sizeof</span>(desc), <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;---Attachment: %s: %s&quot;</span>), a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, type);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      snprintf(desc, <span class="keyword">sizeof</span>(desc), <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;---Attachment: %s&quot;</span>), type);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="comment">/* We only reach this point if there have been no errors */</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">if</span> (use_pager)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keyword">struct </span><a class="code" href="structPagerData.html">PagerData</a> pdata = { 0 };</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keyword">struct </span><a class="code" href="structPagerView.html">PagerView</a> pview = { &amp;pdata };</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    pdata.<a class="code" href="structPagerData.html#ac3d3557c153f3bd6614896865b29a943">actx</a> = actx;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    pdata.<a class="code" href="structPagerData.html#a926094814a0a9c0c7de62f1e2532ab8a">body</a> = a;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    pdata.<a class="code" href="structPagerData.html#a00d514b3bce57dcd4d5e1e493045ae5e">fname</a> = <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    pdata.<a class="code" href="structPagerData.html#a75f5f2991771544bd5c9298eb5a4832d">fp</a> = fp;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    pview.<a class="code" href="structPagerView.html#a90f35bb89f5efbd6cb5c23226f316e17">banner</a> = desc;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    pview.<a class="code" href="structPagerView.html#a8e4d312c9fefeba6f1c4fd8cf84eb101">flags</a> = <a class="code" href="pager_2lib_8h.html#aea42b8def2b025d157e3da6a1be2b20e">MUTT_PAGER_ATTACHMENT</a> |</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                  (is_message ? <a class="code" href="pager_2lib_8h.html#ac14f9120c844296965a8a2c87dc5f541">MUTT_PAGER_MESSAGE</a> : <a class="code" href="pager_2lib_8h.html#a0a536da5cd7ad9b881a8079052853818">MUTT_PAGER_NO_FLAGS</a>) |</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                  ((use_mailcap &amp;&amp; entry-&gt;<a class="code" href="structMailcapEntry.html#af97dc2368515b5451ce9212d681f30f4">xneomuttnowrap</a>) ? <a class="code" href="pager_2lib_8h.html#a325eecb6e92fd9ea24c0ea630a84df6f">MUTT_PAGER_NOWRAP</a> :</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                                            <a class="code" href="pager_2lib_8h.html#a0a536da5cd7ad9b881a8079052853818">MUTT_PAGER_NO_FLAGS</a>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    pview.<a class="code" href="structPagerView.html#a4f7074be59cdcb518630e81e5ef8c3b7">mode</a> = <a class="code" href="pager_2lib_8h.html#a97661d5482310b15dc29f620e955991aadd398541040aaa71d6e0c4cbb3d4bfa6">PAGER_MODE_ATTACH</a>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    rc = <a class="code" href="do__pager_8c.html#a9d3af21b7fdf24249c261a9a1aa9f3be">mutt_do_pager</a>(&amp;pview, e);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a>(pagerfile);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    unlink_pagerfile = <span class="keyword">false</span>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    rc = 0;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;return_error:</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordflow">if</span> (!entry || !entry-&gt;<a class="code" href="structMailcapEntry.html#af711c81e4798bf4790fb6dd58d739d68">xneomuttkeep</a>)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> ((fp &amp;&amp; !<a class="code" href="buffer_8c.html#a2d7c4a32422377609be66b0f620c4971">mutt_buffer_is_empty</a>(tmpfile)) || has_tempfile)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="comment">/* add temporary file to TempAttachmentsList to be deleted on timeout hook */</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="mutt__attach_8c.html#acc6c49a75e5a6fce41d18c1d95a45948">mutt_add_temp_attachment</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile));</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (unlink_pagerfile)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(pagerfile));</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;tmpfile);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;pagerfile);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;cmd);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="envlist_8c.html#a4a1b224a757e2cbdc5af25d8090c18c8">mutt_envlist_unset</a>(<span class="stringliteral">&quot;COLUMNS&quot;</span>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="ttc" id="structMailcapEntry_html_af711c81e4798bf4790fb6dd58d739d68"><div class="ttname"><a href="structMailcapEntry.html#af711c81e4798bf4790fb6dd58d739d68">MailcapEntry::xneomuttkeep</a></div><div class="ttdeci">bool xneomuttkeep</div><div class="ttdoc">do not remove the file on command exit </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00047">mailcap.h:47</a></div></div>
<div class="ttc" id="structMailcapEntry_html"><div class="ttname"><a href="structMailcapEntry.html">MailcapEntry</a></div><div class="ttdoc">A mailcap entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00035">mailcap.h:35</a></div></div>
<div class="ttc" id="handler_8c_html_a8dc0c14a81bb73f86986adc9745dd192"><div class="ttname"><a href="handler_8c.html#a8dc0c14a81bb73f86986adc9745dd192">mutt_decode_attachment</a></div><div class="ttdeci">void mutt_decode_attachment(struct Body *b, struct State *s)</div><div class="ttdoc">Decode an email&amp;#39;s attachment. </div><div class="ttdef"><b>Definition:</b> <a href="handler_8c_source.html#l01861">handler.c:1861</a></div></div>
<div class="ttc" id="mailcap_8c_html_a3c151edde461a4a8fe44b3d7d64cab5e"><div class="ttname"><a href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a></div><div class="ttdeci">struct MailcapEntry * mailcap_entry_new(void)</div><div class="ttdoc">Allocate memory for a new rfc1524 entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00437">mailcap.c:437</a></div></div>
<div class="ttc" id="muttlib_8h_html_a7f1db9db6f710a84cace77248096e2ac"><div class="ttname"><a href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a></div><div class="ttdeci">#define mutt_buffer_mktemp(buf)</div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8h_source.html#l00074">muttlib.h:74</a></div></div>
<div class="ttc" id="state_8h_html_a5f9dc9c8012c0aeeacaa122b882c65a6"><div class="ttname"><a href="state_8h.html#a5f9dc9c8012c0aeeacaa122b882c65a6">MUTT_DISPLAY</a></div><div class="ttdeci">#define MUTT_DISPLAY</div><div class="ttdoc">Output is displayed to the user. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00032">state.h:32</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="buffer_8c_html_adb26acff5f6b9bb7c322669bcb7c48e3"><div class="ttname"><a href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a></div><div class="ttdeci">void mutt_buffer_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00079">buffer.c:79</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="ncrypt_2lib_8h_html_ad980bff69bb614893ad8e7e1c28a5023"><div class="ttname"><a href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a></div><div class="ttdeci">#define WithCrypto</div><div class="ttdef"><b>Definition:</b> <a href="ncrypt_2lib_8h_source.html#l00113">lib.h:113</a></div></div>
<div class="ttc" id="parse_8c_html_adcc90fb584fec1be116777c533e9b3d4"><div class="ttname"><a href="parse_8c.html#adcc90fb584fec1be116777c533e9b3d4">mutt_is_message_type</a></div><div class="ttdeci">bool mutt_is_message_type(int type, const char *subtype)</div><div class="ttdoc">Determine if a mime type matches a message or not. </div><div class="ttdef"><b>Definition:</b> <a href="parse_8c_source.html#l01385">parse.c:1385</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="state_8h_html_a5380aee741459ab7d39708695b18711f"><div class="ttname"><a href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a></div><div class="ttdeci">#define MUTT_CHARCONV</div><div class="ttdoc">Do character set conversions. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00036">state.h:36</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="mailcap_8h_html_a0716f6351a9229990024889ec22b33c1a685052e871afa17028f0e1c11e056a60"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a685052e871afa17028f0e1c11e056a60">MUTT_MC_AUTOVIEW</a></div><div class="ttdoc">Mailcap autoview field. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00060">mailcap.h:60</a></div></div>
<div class="ttc" id="ncrypt_2lib_8h_html_aacaa4abd4c0696e260b7a0f1d466360a"><div class="ttname"><a href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a></div><div class="ttdeci">#define SEC_ENCRYPT</div><div class="ttdoc">Email is encrypted. </div><div class="ttdef"><b>Definition:</b> <a href="ncrypt_2lib_8h_source.html#l00075">lib.h:75</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a></div><div class="ttdoc">No flags set. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00057">mutt_attach.h:57</a></div></div>
<div class="ttc" id="structPagerData_html_a926094814a0a9c0c7de62f1e2532ab8a"><div class="ttname"><a href="structPagerData.html#a926094814a0a9c0c7de62f1e2532ab8a">PagerData::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">Current attachment. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00145">lib.h:145</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="file_8c_html_ae57463c2854c006a3c67b78736e9056e"><div class="ttname"><a href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a></div><div class="ttdeci">void mutt_file_unlink(const char *s)</div><div class="ttdoc">Delete a file, carefully. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00195">file.c:195</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="structPagerView_html"><div class="ttname"><a href="structPagerView.html">PagerView</a></div><div class="ttdoc">Paged view into some data. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00154">lib.h:154</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a4c2560f787bd1226b977992c16860c98"><div class="ttname"><a href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00370">string.c:370</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00047">state.h:47</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a></div><div class="ttdoc">Force viewing as text. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00045">mutt_attach.h:45</a></div></div>
<div class="ttc" id="mailcap_8h_html_a0716f6351a9229990024889ec22b33c1abe09e527550677b514f34f0fd421d8f8"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1abe09e527550677b514f34f0fd421d8f8">MUTT_MC_NO_FLAGS</a></div><div class="ttdoc">No flags set. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00056">mailcap.h:56</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_adb94477fad8521799cd4a94ec0e3eecf"><div class="ttname"><a href="mutt__attach_8c.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a></div><div class="ttdeci">int mutt_save_attachment(FILE *fp, struct Body *m, const char *path, enum SaveAttach opt, struct Email *e)</div><div class="ttdoc">Save an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l00879">mutt_attach.c:879</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a></div><div class="ttdoc">View using default method. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00043">mutt_attach.h:43</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structState_html_a9cf7e1f0c5c12399def5ca38b13054ae"><div class="ttname"><a href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">State::fp_in</a></div><div class="ttdeci">FILE * fp_in</div><div class="ttdoc">File to read from. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00046">state.h:46</a></div></div>
<div class="ttc" id="mailcap_8c_html_a412989a4828da86db98c88a087b2217c"><div class="ttname"><a href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a></div><div class="ttdeci">bool mailcap_lookup(struct Body *a, char *type, size_t typelen, struct MailcapEntry *entry, enum MailcapLookup opt)</div><div class="ttdoc">Find given type in the list of mailcap files. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00475">mailcap.c:475</a></div></div>
<div class="ttc" id="mailcap_8c_html_ac5eff1afc4d8341e095a90c3b9f68104"><div class="ttname"><a href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a></div><div class="ttdeci">int mailcap_expand_command(struct Body *a, const char *filename, const char *type, struct Buffer *command)</div><div class="ttdoc">Expand expandos in a command. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00067">mailcap.c:67</a></div></div>
<div class="ttc" id="mailcap_8c_html_accb5ae6e2f507053e8436a2f00b834ea"><div class="ttname"><a href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a></div><div class="ttdeci">void mailcap_expand_filename(const char *nametemplate, const char *oldfile, struct Buffer *newfile)</div><div class="ttdoc">Expand a new filename from a template or existing filename. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00545">mailcap.c:545</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="structState_html_a5d855f7d518fde2ac4e8e409cbb24ad3"><div class="ttname"><a href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">State::flags</a></div><div class="ttdeci">StateFlags flags</div><div class="ttdoc">Flags, e.g. MUTT_DISPLAY. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00049">state.h:49</a></div></div>
<div class="ttc" id="crypt_8c_html_a4ee7f1419a7e39b0e9f1f9d550f4de43"><div class="ttname"><a href="crypt_8c.html#a4ee7f1419a7e39b0e9f1f9d550f4de43">crypt_valid_passphrase</a></div><div class="ttdeci">bool crypt_valid_passphrase(SecurityFlags flags)</div><div class="ttdoc">Check that we have a usable passphrase, ask if not. </div><div class="ttdef"><b>Definition:</b> <a href="crypt_8c_source.html#l00135">crypt.c:135</a></div></div>
<div class="ttc" id="structPagerData_html"><div class="ttname"><a href="structPagerData.html">PagerData</a></div><div class="ttdoc">Data to be displayed by PagerView. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00143">lib.h:143</a></div></div>
<div class="ttc" id="structMailcapEntry_html_adcea89b25743514d268e8fde508d6295"><div class="ttname"><a href="structMailcapEntry.html#adcea89b25743514d268e8fde508d6295">MailcapEntry::copiousoutput</a></div><div class="ttdeci">bool copiousoutput</div><div class="ttdoc">needs pager, basically </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00046">mailcap.h:46</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="pager_2lib_8h_html_ac14f9120c844296965a8a2c87dc5f541"><div class="ttname"><a href="pager_2lib_8h.html#ac14f9120c844296965a8a2c87dc5f541">MUTT_PAGER_MESSAGE</a></div><div class="ttdeci">#define MUTT_PAGER_MESSAGE</div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00070">lib.h:70</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_a6e3181c7c2c23232e591fd65c2b431da"><div class="ttname"><a href="mutt__attach_8c.html#a6e3181c7c2c23232e591fd65c2b431da">wait_interactive_filter</a></div><div class="ttdeci">static int wait_interactive_filter(pid_t pid)</div><div class="ttdoc">Wait after an interactive filter. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l00382">mutt_attach.c:382</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_acc6c49a75e5a6fce41d18c1d95a45948"><div class="ttname"><a href="mutt__attach_8c.html#acc6c49a75e5a6fce41d18c1d95a45948">mutt_add_temp_attachment</a></div><div class="ttdeci">void mutt_add_temp_attachment(const char *filename)</div><div class="ttdoc">Add file to list of temporary attachments. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l01267">mutt_attach.c:1267</a></div></div>
<div class="ttc" id="file_8c_html_a19e7688227f4eea96b9aff180bd0a904"><div class="ttname"><a href="file_8c.html#a19e7688227f4eea96b9aff180bd0a904">mutt_file_open</a></div><div class="ttdeci">int mutt_file_open(const char *path, uint32_t flags)</div><div class="ttdoc">Open a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00522">file.c:522</a></div></div>
<div class="ttc" id="structMailcapEntry_html_ad682bf5b0b80e72f2a9b9196728514e3"><div class="ttname"><a href="structMailcapEntry.html#ad682bf5b0b80e72f2a9b9196728514e3">MailcapEntry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00037">mailcap.h:37</a></div></div>
<div class="ttc" id="structBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00037">body.h:37</a></div></div>
<div class="ttc" id="structPagerView_html_a4f7074be59cdcb518630e81e5ef8c3b7"><div class="ttname"><a href="structPagerView.html#a4f7074be59cdcb518630e81e5ef8c3b7">PagerView::mode</a></div><div class="ttdeci">enum PagerMode mode</div><div class="ttdoc">Pager mode. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00157">lib.h:157</a></div></div>
<div class="ttc" id="file_8c_html_a4deebaf3a646b3075a2b51eda5dc03ca"><div class="ttname"><a href="file_8c.html#a4deebaf3a646b3075a2b51eda5dc03ca">mutt_file_sanitize_filename</a></div><div class="ttdeci">void mutt_file_sanitize_filename(char *path, bool slash)</div><div class="ttdoc">Replace unsafe characters in a filename. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00618">file.c:618</a></div></div>
<div class="ttc" id="structWindowState_html_a557cf2197f9df8fe60f6e1dbfd49ec43"><div class="ttname"><a href="structWindowState.html#a557cf2197f9df8fe60f6e1dbfd49ec43">WindowState::cols</a></div><div class="ttdeci">short cols</div><div class="ttdoc">Number of columns, can be MUTT_WIN_SIZE_UNLIMITED. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__window_8h_source.html#l00060">mutt_window.h:60</a></div></div>
<div class="ttc" id="structMuttWindow_html_a406b976fc50b1cb5beca6c85e7a3be7f"><div class="ttname"><a href="structMuttWindow.html#a406b976fc50b1cb5beca6c85e7a3be7f">MuttWindow::state</a></div><div class="ttdeci">struct WindowState state</div><div class="ttdoc">Current state of the Window. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__window_8h_source.html#l00123">mutt_window.h:123</a></div></div>
<div class="ttc" id="curs__lib_8c_html_acd14d074d8b9e6cb21e851dd573cdec2"><div class="ttname"><a href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a></div><div class="ttdeci">void mutt_endwin(void)</div><div class="ttdoc">Shutdown curses/slang. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00422">curs_lib.c:422</a></div></div>
<div class="ttc" id="envlist_8c_html_a4a1b224a757e2cbdc5af25d8090c18c8"><div class="ttname"><a href="envlist_8c.html#a4a1b224a757e2cbdc5af25d8090c18c8">mutt_envlist_unset</a></div><div class="ttdeci">bool mutt_envlist_unset(const char *name)</div><div class="ttdoc">Unset an environment variable. </div><div class="ttdef"><b>Definition:</b> <a href="envlist_8c_source.html#l00132">envlist.c:132</a></div></div>
<div class="ttc" id="pager_2lib_8h_html_aea42b8def2b025d157e3da6a1be2b20e"><div class="ttname"><a href="pager_2lib_8h.html#aea42b8def2b025d157e3da6a1be2b20e">MUTT_PAGER_ATTACHMENT</a></div><div class="ttdeci">#define MUTT_PAGER_ATTACHMENT</div><div class="ttdoc">Attachments may exist. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00066">lib.h:66</a></div></div>
<div class="ttc" id="mailcap_8c_html_a49fd88d8bb73a7a56c4cc0fe28dfb645"><div class="ttname"><a href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a></div><div class="ttdeci">void mailcap_entry_free(struct MailcapEntry **ptr)</div><div class="ttdoc">Deallocate an struct MailcapEntry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00446">mailcap.c:446</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_a4fd33255a2295a8ec36d8afd7c9c53df"><div class="ttname"><a href="mutt__attach_8c.html#a4fd33255a2295a8ec36d8afd7c9c53df">mutt_decode_save_attachment</a></div><div class="ttdeci">int mutt_decode_save_attachment(FILE *fp, struct Body *m, const char *path, int displaying, enum SaveAttach opt)</div><div class="ttdoc">Decode, then save an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l01009">mutt_attach.c:1009</a></div></div>
<div class="ttc" id="do__pager_8c_html_a9d3af21b7fdf24249c261a9a1aa9f3be"><div class="ttname"><a href="do__pager_8c.html#a9d3af21b7fdf24249c261a9a1aa9f3be">mutt_do_pager</a></div><div class="ttdeci">int mutt_do_pager(struct PagerView *pview, struct Email *e)</div><div class="ttdoc">Display some page-able text to the user (help or attachment) </div><div class="ttdef"><b>Definition:</b> <a href="do__pager_8c_source.html#l00120">do_pager.c:120</a></div></div>
<div class="ttc" id="structBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00035">buffer.h:35</a></div></div>
<div class="ttc" id="rfc3676_8c_html_aafc5472c7687d8941a25999aa30d2be4"><div class="ttname"><a href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a></div><div class="ttdeci">void mutt_rfc3676_space_unstuff_attachment(struct Body *b, const char *filename)</div><div class="ttdoc">Unstuff attachments. </div><div class="ttdef"><b>Definition:</b> <a href="rfc3676_8c_source.html#l00515">rfc3676.c:515</a></div></div>
<div class="ttc" id="structPagerView_html_a8e4d312c9fefeba6f1c4fd8cf84eb101"><div class="ttname"><a href="structPagerView.html#a8e4d312c9fefeba6f1c4fd8cf84eb101">PagerView::flags</a></div><div class="ttdeci">PagerFlags flags</div><div class="ttdoc">Additional settings to tweak pager&amp;#39;s function. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00158">lib.h:158</a></div></div>
<div class="ttc" id="structBody_html_a90db5151872e23e56a8f31d68925c121"><div class="ttname"><a href="structBody.html#a90db5151872e23e56a8f31d68925c121">Body::description</a></div><div class="ttdeci">char * description</div><div class="ttdoc">content-description </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00040">body.h:40</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="structEmail_html_a570a81cd747437c9ea4357947731ae10"><div class="ttname"><a href="structEmail.html#a570a81cd747437c9ea4357947731ae10">Email::security</a></div><div class="ttdeci">SecurityFlags security</div><div class="ttdoc">bit 0-10: flags, bit 11,12: application, bit 13: traditional pgp See: ncrypt/lib.h pgplib...</div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00039">email.h:39</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a></div><div class="ttdoc">View attachment in pager using copiousoutput mailcap. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00046">mutt_attach.h:46</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67">MUTT_VA_MAILCAP</a></div><div class="ttdoc">Force viewing using mailcap entry. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00044">mutt_attach.h:44</a></div></div>
<div class="ttc" id="buffer_8c_html_a4bcc481586ae3af02645b4e23e48e0d7"><div class="ttname"><a href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a></div><div class="ttdeci">size_t mutt_buffer_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00312">buffer.c:312</a></div></div>
<div class="ttc" id="structBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00065">body.h:65</a></div></div>
<div class="ttc" id="structPagerData_html_ac3d3557c153f3bd6614896865b29a943"><div class="ttname"><a href="structPagerData.html#ac3d3557c153f3bd6614896865b29a943">PagerData::actx</a></div><div class="ttdeci">struct AttachCtx * actx</div><div class="ttdoc">Attachment information. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00147">lib.h:147</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a85835d27aa930e64eef4eae5f9498401"><div class="ttname"><a href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">MailcapEntry::nametemplate</a></div><div class="ttdeci">char * nametemplate</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00043">mailcap.h:43</a></div></div>
<div class="ttc" id="mime_8h_html_ab12186b6fac3d22b88fac67700f07b1d"><div class="ttname"><a href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a></div><div class="ttdeci">#define TYPE(body)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00089">mime.h:89</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination) </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00749">string.c:749</a></div></div>
<div class="ttc" id="structPagerData_html_a75f5f2991771544bd5c9298eb5a4832d"><div class="ttname"><a href="structPagerData.html#a75f5f2991771544bd5c9298eb5a4832d">PagerData::fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdoc">Source stream. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00146">lib.h:146</a></div></div>
<div class="ttc" id="filter_8c_html_ab135f1182014687e686263f6e9613be5"><div class="ttname"><a href="filter_8c.html#ab135f1182014687e686263f6e9613be5">filter_create_fd</a></div><div class="ttdeci">pid_t filter_create_fd(const char *cmd, FILE **fp_in, FILE **fp_out, FILE **fp_err, int fdin, int fdout, int fderr)</div><div class="ttdoc">Run a command on a pipe (optionally connect stdin/stdout) </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00061">filter.c:61</a></div></div>
<div class="ttc" id="muttlib_8c_html_a408880eb332fd5a312dcae1df22ff688"><div class="ttname"><a href="muttlib_8c.html#a408880eb332fd5a312dcae1df22ff688">mutt_needs_mailcap</a></div><div class="ttdeci">bool mutt_needs_mailcap(struct Body *m)</div><div class="ttdoc">Does this type need a mailcap entry do display. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00406">muttlib.c:406</a></div></div>
<div class="ttc" id="mailcap_8h_html_a0716f6351a9229990024889ec22b33c1"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1">MailcapLookup</a></div><div class="ttdeci">MailcapLookup</div><div class="ttdoc">Mailcap actions. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00054">mailcap.h:54</a></div></div>
<div class="ttc" id="pager_2lib_8h_html_a97661d5482310b15dc29f620e955991aadd398541040aaa71d6e0c4cbb3d4bfa6"><div class="ttname"><a href="pager_2lib_8h.html#a97661d5482310b15dc29f620e955991aadd398541040aaa71d6e0c4cbb3d4bfa6">PAGER_MODE_ATTACH</a></div><div class="ttdoc">Pager is invoked via 2nd path. A user-selected attachment (mime part or a nested email) will be shown...</div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00132">lib.h:132</a></div></div>
<div class="ttc" id="muttlib_8c_html_acf3a46e57ab84223b270c763ccb166ca"><div class="ttname"><a href="muttlib_8c.html#acf3a46e57ab84223b270c763ccb166ca">mutt_adv_mktemp</a></div><div class="ttdeci">void mutt_adv_mktemp(struct Buffer *buf)</div><div class="ttdoc">Create a temporary file. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00083">muttlib.c:83</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="structState_html"><div class="ttname"><a href="structState.html">State</a></div><div class="ttdoc">Keep track when processing files. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00044">state.h:44</a></div></div>
<div class="ttc" id="options_8h_html_abdfb908fdaf1711345ab7b6a1109c5b0"><div class="ttname"><a href="options_8h.html#abdfb908fdaf1711345ab7b6a1109c5b0">OptViewAttach</a></div><div class="ttdeci">WHERE bool OptViewAttach</div><div class="ttdoc">(pseudo) signals that we are viewing attachments </div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00054">options.h:54</a></div></div>
<div class="ttc" id="envlist_8c_html_a9a8f68ff46021b57741a8c5d10c08f6d"><div class="ttname"><a href="envlist_8c.html#a9a8f68ff46021b57741a8c5d10c08f6d">mutt_envlist_set</a></div><div class="ttdeci">bool mutt_envlist_set(const char *name, const char *value, bool overwrite)</div><div class="ttdoc">Set an environment variable. </div><div class="ttdef"><b>Definition:</b> <a href="envlist_8c_source.html#l00085">envlist.c:85</a></div></div>
<div class="ttc" id="pager_2lib_8h_html_a325eecb6e92fd9ea24c0ea630a84df6f"><div class="ttname"><a href="pager_2lib_8h.html#a325eecb6e92fd9ea24c0ea630a84df6f">MUTT_PAGER_NOWRAP</a></div><div class="ttdeci">#define MUTT_PAGER_NOWRAP</div><div class="ttdoc">Format for term width, ignore $wrap. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00067">lib.h:67</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="structPagerData_html_a00d514b3bce57dcd4d5e1e493045ae5e"><div class="ttname"><a href="structPagerData.html#a00d514b3bce57dcd4d5e1e493045ae5e">PagerData::fname</a></div><div class="ttdeci">const char * fname</div><div class="ttdoc">Name of the file to read. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00148">lib.h:148</a></div></div>
<div class="ttc" id="file_8c_html_ae1c0c19fec03274220b3ca065ad1e2e5"><div class="ttname"><a href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a></div><div class="ttdeci">FILE * mutt_file_fopen(const char *path, const char *mode)</div><div class="ttdoc">Call fopen() safely. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00589">file.c:589</a></div></div>
<div class="ttc" id="pager_2lib_8h_html_a0a536da5cd7ad9b881a8079052853818"><div class="ttname"><a href="pager_2lib_8h.html#a0a536da5cd7ad9b881a8079052853818">MUTT_PAGER_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_PAGER_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00054">lib.h:54</a></div></div>
<div class="ttc" id="structPagerView_html_a90f35bb89f5efbd6cb5c23226f316e17"><div class="ttname"><a href="structPagerView.html#a90f35bb89f5efbd6cb5c23226f316e17">PagerView::banner</a></div><div class="ttdeci">const char * banner</div><div class="ttdoc">Title to display in status bar. </div><div class="ttdef"><b>Definition:</b> <a href="pager_2lib_8h_source.html#l00159">lib.h:159</a></div></div>
<div class="ttc" id="filter_8c_html_a22c6912b837b1114c3276c990e73dca3"><div class="ttname"><a href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a></div><div class="ttdeci">int filter_wait(pid_t pid)</div><div class="ttdoc">Wait for the exit of a process and return its status. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00217">filter.c:217</a></div></div>
<div class="ttc" id="buffer_8c_html_a2d7c4a32422377609be66b0f620c4971"><div class="ttname"><a href="buffer_8c.html#a2d7c4a32422377609be66b0f620c4971">mutt_buffer_is_empty</a></div><div class="ttdeci">bool mutt_buffer_is_empty(const struct Buffer *buf)</div><div class="ttdoc">Is the Buffer empty? </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00252">buffer.c:252</a></div></div>
<div class="ttc" id="structBody_html_a8e10ba22522218bd12bd3cb38dd3fcc9"><div class="ttname"><a href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">Body::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">header information for message/rfc822 </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00055">body.h:55</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a4cc66616bac929499b83944fb8e2911d"><div class="ttname"><a href="structMailcapEntry.html#a4cc66616bac929499b83944fb8e2911d">MailcapEntry::needsterminal</a></div><div class="ttdeci">bool needsterminal</div><div class="ttdoc">endwin() and system </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00045">mailcap.h:45</a></div></div>
<div class="ttc" id="protos_8h_html_aa1d4ad04b000036513ca3f741059942c"><div class="ttname"><a href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a></div><div class="ttdeci">int mutt_system(const char *cmd)</div><div class="ttdoc">Run an external command. </div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00051">system.c:51</a></div></div>
<div class="ttc" id="structMailcapEntry_html_af97dc2368515b5451ce9212d681f30f4"><div class="ttname"><a href="structMailcapEntry.html#af97dc2368515b5451ce9212d681f30f4">MailcapEntry::xneomuttnowrap</a></div><div class="ttdeci">bool xneomuttnowrap</div><div class="ttdoc">do not wrap the output in the pager </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00048">mailcap.h:48</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_accdda994ba4457544dcf9ae681cfb6b9_cgraph.svg" width="1135" height="2152"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_accdda994ba4457544dcf9ae681cfb6b9_icgraph.svg" width="642" height="114"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a1a97d711180c816108d8866ef7b120cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a97d711180c816108d8866ef7b120cc">&#9670;&nbsp;</a></span>mutt_check_lookup_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_check_lookup_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the mime type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structMessage.html" title="A local copy of an email. ">Message</a> attachment body </td></tr>
    <tr><td class="paramname">type</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> with mime type of attachment in "type/subtype" format </td></tr>
    <tr><td class="paramname">len</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> length </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l00335">335</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keyword">struct </span><a class="code" href="structListNode.html">ListNode</a> *np = NULL;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(np, &amp;MimeLookupList, entries)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> i = <a class="code" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>) - 1;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (((i &gt; 0) &amp;&amp; (np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>[i - 1] == <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; (np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>[i] == <span class="charliteral">&#39;*&#39;</span>) &amp;&amp;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;         <a class="code" href="mutt_2string_8c.html#aefa17bf84a5a1cb4b41afb08cd91ceff">mutt_istrn_equal</a>(type, np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, i)) ||</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(type, np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>))</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keyword">struct </span><a class="code" href="structBody.html">Body</a> tmp = { 0 };</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keyword">enum</span> <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79">ContentType</a> n;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> ((n = <a class="code" href="sendlib_8c.html#a1431e9401865165dfef92315f3ca7ae2">mutt_lookup_mime_type</a>(&amp;tmp, b-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>)) != <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2c4c96a2b998731adad0506fabeb9c17">TYPE_OTHER</a> ||</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          (n = <a class="code" href="sendlib_8c.html#a1431e9401865165dfef92315f3ca7ae2">mutt_lookup_mime_type</a>(&amp;tmp, b-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>)) != <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2c4c96a2b998731adad0506fabeb9c17">TYPE_OTHER</a>)</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        snprintf(<a class="code" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a>, len, <span class="stringliteral">&quot;%s/%s&quot;</span>,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a17e2dc2b6c45bd9d56010ed4aed3fcf4">TYPE_AUDIO</a>)       ? <span class="stringliteral">&quot;audio&quot;</span> :</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a>) ? <span class="stringliteral">&quot;application&quot;</span> :</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a1c84f9cd2b0d05b7d3f7711fcc0caad8">TYPE_IMAGE</a>)       ? <span class="stringliteral">&quot;image&quot;</span> :</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2cbb8dddd761b8bfba754d933a979c1b">TYPE_MESSAGE</a>)     ? <span class="stringliteral">&quot;message&quot;</span> :</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a33cf44e9e129e31bc10bf94ff7d50c03">TYPE_MODEL</a>)       ? <span class="stringliteral">&quot;model&quot;</span> :</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)   ? <span class="stringliteral">&quot;multipart&quot;</span> :</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a>)        ? <span class="stringliteral">&quot;text&quot;</span> :</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                 (n == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79afeeff8542e46439d4b704699ff009323">TYPE_VIDEO</a>)       ? <span class="stringliteral">&quot;video&quot;</span> :</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                           <span class="stringliteral">&quot;other&quot;</span>,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                 tmp.<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;\&quot;%s\&quot; -&gt; %s\n&quot;</span>, b-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <a class="code" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a>);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;tmp.<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;tmp.<a class="code" href="structBody.html#a25c15115b34c11620fc995c13383fd9b">xtype</a>);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79a2c4c96a2b998731adad0506fabeb9c17"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2c4c96a2b998731adad0506fabeb9c17">TYPE_OTHER</a></div><div class="ttdoc">Unknown Content-Type. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00031">mime.h:31</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_aefa17bf84a5a1cb4b41afb08cd91ceff"><div class="ttname"><a href="mutt_2string_8c.html#aefa17bf84a5a1cb4b41afb08cd91ceff">mutt_istrn_equal</a></div><div class="ttdeci">bool mutt_istrn_equal(const char *a, const char *b, size_t num)</div><div class="ttdoc">Check for equality of two strings ignoring case (to a maximum), safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00621">string.c:621</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79a17e2dc2b6c45bd9d56010ed4aed3fcf4"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a17e2dc2b6c45bd9d56010ed4aed3fcf4">TYPE_AUDIO</a></div><div class="ttdoc">Type: &amp;#39;audio/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00032">mime.h:32</a></div></div>
<div class="ttc" id="structBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00034">body.h:34</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79afeeff8542e46439d4b704699ff009323"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79afeeff8542e46439d4b704699ff009323">TYPE_VIDEO</a></div><div class="ttdoc">Type: &amp;#39;video/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00039">mime.h:39</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a29db81d6f5a7dd216cbea75ecf8a5885"><div class="ttname"><a href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a></div><div class="ttdeci">bool mutt_istr_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings, ignoring case. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00916">string.c:916</a></div></div>
<div class="ttc" id="structBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00037">body.h:37</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a></div><div class="ttdoc">Type: &amp;#39;text/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00038">mime.h:38</a></div></div>
<div class="ttc" id="structBody_html_a25c15115b34c11620fc995c13383fd9b"><div class="ttname"><a href="structBody.html#a25c15115b34c11620fc995c13383fd9b">Body::xtype</a></div><div class="ttdeci">char * xtype</div><div class="ttdoc">content-type if x-unknown </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00036">body.h:36</a></div></div>
<div class="ttc" id="queue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00352">queue.h:352</a></div></div>
<div class="ttc" id="structBody_html_a90db5151872e23e56a8f31d68925c121"><div class="ttname"><a href="structBody.html#a90db5151872e23e56a8f31d68925c121">Body::description</a></div><div class="ttdeci">char * description</div><div class="ttdoc">content-description </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00040">body.h:40</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="structBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00065">body.h:65</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79a2cbb8dddd761b8bfba754d933a979c1b"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2cbb8dddd761b8bfba754d933a979c1b">TYPE_MESSAGE</a></div><div class="ttdoc">Type: &amp;#39;message/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00035">mime.h:35</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_acca6786b903b22a5924219f9db96e10d"><div class="ttname"><a href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a></div><div class="ttdeci">size_t mutt_str_len(const char *a)</div><div class="ttdoc">Calculate the length of a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00664">string.c:664</a></div></div>
<div class="ttc" id="structListNode_html_aafe688d670318196766392d8235d00a7"><div class="ttname"><a href="structListNode.html#aafe688d670318196766392d8235d00a7">ListNode::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">String. </div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00036">list.h:36</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a></div><div class="ttdoc">Type: &amp;#39;multipart/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00037">mime.h:37</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="sendlib_8c_html_a1431e9401865165dfef92315f3ca7ae2"><div class="ttname"><a href="sendlib_8c.html#a1431e9401865165dfef92315f3ca7ae2">mutt_lookup_mime_type</a></div><div class="ttdeci">enum ContentType mutt_lookup_mime_type(struct Body *att, const char *path)</div><div class="ttdoc">Find the MIME type for an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="sendlib_8c_source.html#l00564">sendlib.c:564</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79a33cf44e9e129e31bc10bf94ff7d50c03"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a33cf44e9e129e31bc10bf94ff7d50c03">TYPE_MODEL</a></div><div class="ttdoc">Type: &amp;#39;model/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00036">mime.h:36</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79a1c84f9cd2b0d05b7d3f7711fcc0caad8"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a1c84f9cd2b0d05b7d3f7711fcc0caad8">TYPE_IMAGE</a></div><div class="ttdoc">Type: &amp;#39;image/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00034">mime.h:34</a></div></div>
<div class="ttc" id="structListNode_html"><div class="ttname"><a href="structListNode.html">ListNode</a></div><div class="ttdoc">A List node for strings. </div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00034">list.h:34</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a></div><div class="ttdoc">Type: &amp;#39;application/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00033">mime.h:33</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79">ContentType</a></div><div class="ttdeci">ContentType</div><div class="ttdoc">Content-Type. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00029">mime.h:29</a></div></div>
</div><!-- fragment --><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a1a97d711180c816108d8866ef7b120cc_cgraph.svg" width="592" height="150"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a1a97d711180c816108d8866ef7b120cc_icgraph.svg" width="508" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="acf4b24753bffc9e93f0ec9c157c850fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4b24753bffc9e93f0ec9c157c850fe">&#9670;&nbsp;</a></span>mutt_compose_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_compose_attachment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td><a class="el" href="structBody.html" title="The body of an email. ">Body</a> of email </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Require full screen redraw </td></tr>
    <tr><td class="paramname">0</td><td>Otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l00118">118</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordtype">char</span> <a class="code" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a>[256];</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMailcapEntry.html">MailcapEntry</a> *entry = <a class="code" href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a>();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordtype">bool</span> unlink_newfile = <span class="keyword">false</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordtype">int</span> rc = 0;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *cmd = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *newfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *tmpfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  snprintf(type, <span class="keyword">sizeof</span>(type), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a>(a), a-&gt;<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a>(a, type, <span class="keyword">sizeof</span>(type), entry, <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1adf2bd2611de86e55bd3b472569c40ed9">MUTT_MC_COMPOSE</a>))</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structMailcapEntry.html#a365aee1471f7897abec0c347e43426e1">composecommand</a> || entry-&gt;<a class="code" href="structMailcapEntry.html#a9465c493bab0bd5d9ee072025bad7afd">composetypecommand</a>)</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structMailcapEntry.html#a9465c493bab0bd5d9ee072025bad7afd">composetypecommand</a>)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(cmd, entry-&gt;<a class="code" href="structMailcapEntry.html#a9465c493bab0bd5d9ee072025bad7afd">composetypecommand</a>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(cmd, entry-&gt;<a class="code" href="structMailcapEntry.html#a365aee1471f7897abec0c347e43426e1">composecommand</a>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a>(entry-&gt;<a class="code" href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">nametemplate</a>, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, newfile);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;oldfile: %s     newfile: %s\n&quot;</span>, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>,</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                 <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#a8f150fbd8c72f544d733440b861eda9c">mutt_file_symlink</a>(a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile)) == -1)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t match &#39;nametemplate&#39;, continue?&quot;</span>), <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>) != <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(newfile, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        unlink_newfile = <span class="keyword">true</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a>(a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile), type, cmd))</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">/* For now, editing requires a file, no piping */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Mailcap compose entry requires %%s&quot;</span>));</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordtype">int</span> r;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        r = <a class="code" href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd));</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> (r == -1)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;          <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error running \&quot;%s\&quot;&quot;</span>), <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">if</span> ((r != -1) &amp;&amp; entry-&gt;<a class="code" href="structMailcapEntry.html#a9465c493bab0bd5d9ee072025bad7afd">composetypecommand</a>)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          <span class="keyword">struct </span><a class="code" href="structBody.html">Body</a> *b = NULL;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          FILE *fp = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;          <span class="keywordflow">if</span> (!fp)</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Failure to open file to parse headers&quot;</span>));</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          b = <a class="code" href="parse_8c.html#ad373211d5d49e235c1aa9b818f0f10a1">mutt_read_mime_header</a>(fp, 0);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          <span class="keywordflow">if</span> (b)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;b-&gt;<a class="code" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>))</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;              <a class="code" href="parameter_8c.html#ade3b55d0262dc913be1e8307390514a0">mutt_param_free</a>(&amp;a-&gt;<a class="code" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;              a-&gt;<a class="code" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a> = b-&gt;<a class="code" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;              <a class="code" href="queue_8h.html#a449d224023780e46253b83b61e0a50a9">TAILQ_INIT</a>(&amp;b-&gt;<a class="code" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">if</span> (b-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>)</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;              <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;a-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;              a-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a> = b-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;              b-&gt;<a class="code" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a> = NULL;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">if</span> (b-&gt;<a class="code" href="structBody.html#aea3b13e7e6b68ebf707532938601321a">form_name</a>)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;              <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;a-&gt;<a class="code" href="structBody.html#aea3b13e7e6b68ebf707532938601321a">form_name</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;              a-&gt;<a class="code" href="structBody.html#aea3b13e7e6b68ebf707532938601321a">form_name</a> = b-&gt;<a class="code" href="structBody.html#aea3b13e7e6b68ebf707532938601321a">form_name</a>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;              b-&gt;<a class="code" href="structBody.html#aea3b13e7e6b68ebf707532938601321a">form_name</a> = NULL;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="comment">/* Remove headers by copying out data to another file, then</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">             * copying the file back */</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            fseeko(fp, b-&gt;<a class="code" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a>, SEEK_SET);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;b);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a>(tmpfile);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            FILE *fp_tmp = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">if</span> (!fp_tmp)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Failure to open file to strip headers&quot;</span>));</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;              <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;              <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp, fp_tmp);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_tmp);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a>(a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#a8154bfd014904ca57b0ba2cfb31e26bc">mutt_file_rename</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile), a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>) != 0)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;              <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Failure to rename file&quot;</span>));</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;              <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No mailcap compose entry for %s, creating empty file&quot;</span>), type);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    rc = 1;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  rc = 1;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;bailout:</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (unlink_newfile)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;cmd);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;newfile);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;tmpfile);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="ttc" id="structMailcapEntry_html"><div class="ttname"><a href="structMailcapEntry.html">MailcapEntry</a></div><div class="ttdoc">A mailcap entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00035">mailcap.h:35</a></div></div>
<div class="ttc" id="mailcap_8c_html_a3c151edde461a4a8fe44b3d7d64cab5e"><div class="ttname"><a href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a></div><div class="ttdeci">struct MailcapEntry * mailcap_entry_new(void)</div><div class="ttdoc">Allocate memory for a new rfc1524 entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00437">mailcap.c:437</a></div></div>
<div class="ttc" id="muttlib_8h_html_a7f1db9db6f710a84cace77248096e2ac"><div class="ttname"><a href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a></div><div class="ttdeci">#define mutt_buffer_mktemp(buf)</div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8h_source.html#l00074">muttlib.h:74</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="file_8c_html_a8154bfd014904ca57b0ba2cfb31e26bc"><div class="ttname"><a href="file_8c.html#a8154bfd014904ca57b0ba2cfb31e26bc">mutt_file_rename</a></div><div class="ttdeci">int mutt_file_rename(const char *oldfile, const char *newfile)</div><div class="ttdoc">Rename a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01350">file.c:1350</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a9465c493bab0bd5d9ee072025bad7afd"><div class="ttname"><a href="structMailcapEntry.html#a9465c493bab0bd5d9ee072025bad7afd">MailcapEntry::composetypecommand</a></div><div class="ttdeci">char * composetypecommand</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00040">mailcap.h:40</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="file_8c_html_ae57463c2854c006a3c67b78736e9056e"><div class="ttname"><a href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a></div><div class="ttdeci">void mutt_file_unlink(const char *s)</div><div class="ttdoc">Delete a file, carefully. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00195">file.c:195</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="structBody_html_a1969dfeb0a155ccb16153fe777a103b0"><div class="ttname"><a href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">Body::offset</a></div><div class="ttdeci">LOFF_T offset</div><div class="ttdoc">offset where the actual data begins </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00044">body.h:44</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structBody_html_aea3b13e7e6b68ebf707532938601321a"><div class="ttname"><a href="structBody.html#aea3b13e7e6b68ebf707532938601321a">Body::form_name</a></div><div class="ttdeci">char * form_name</div><div class="ttdoc">Content-Disposition form-data name param. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00041">body.h:41</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="structBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00034">body.h:34</a></div></div>
<div class="ttc" id="mailcap_8c_html_a412989a4828da86db98c88a087b2217c"><div class="ttname"><a href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a></div><div class="ttdeci">bool mailcap_lookup(struct Body *a, char *type, size_t typelen, struct MailcapEntry *entry, enum MailcapLookup opt)</div><div class="ttdoc">Find given type in the list of mailcap files. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00475">mailcap.c:475</a></div></div>
<div class="ttc" id="mailcap_8c_html_ac5eff1afc4d8341e095a90c3b9f68104"><div class="ttname"><a href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a></div><div class="ttdeci">int mailcap_expand_command(struct Body *a, const char *filename, const char *type, struct Buffer *command)</div><div class="ttdoc">Expand expandos in a command. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00067">mailcap.c:67</a></div></div>
<div class="ttc" id="mailcap_8c_html_accb5ae6e2f507053e8436a2f00b834ea"><div class="ttname"><a href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a></div><div class="ttdeci">void mailcap_expand_filename(const char *nametemplate, const char *oldfile, struct Buffer *newfile)</div><div class="ttdoc">Expand a new filename from a template or existing filename. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00545">mailcap.c:545</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="mailcap_8h_html_a0716f6351a9229990024889ec22b33c1adf2bd2611de86e55bd3b472569c40ed9"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1adf2bd2611de86e55bd3b472569c40ed9">MUTT_MC_COMPOSE</a></div><div class="ttdoc">Mailcap compose field. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00058">mailcap.h:58</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="queue_8h_html_a449d224023780e46253b83b61e0a50a9"><div class="ttname"><a href="queue_8h.html#a449d224023780e46253b83b61e0a50a9">TAILQ_INIT</a></div><div class="ttdeci">#define TAILQ_INIT(head)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00765">queue.h:765</a></div></div>
<div class="ttc" id="parameter_8c_html_ade3b55d0262dc913be1e8307390514a0"><div class="ttname"><a href="parameter_8c.html#ade3b55d0262dc913be1e8307390514a0">mutt_param_free</a></div><div class="ttdeci">void mutt_param_free(struct ParameterList *pl)</div><div class="ttdoc">Free a ParameterList. </div><div class="ttdef"><b>Definition:</b> <a href="parameter_8c_source.html#l00061">parameter.c:61</a></div></div>
<div class="ttc" id="structBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00037">body.h:37</a></div></div>
<div class="ttc" id="curs__lib_8c_html_acd14d074d8b9e6cb21e851dd573cdec2"><div class="ttname"><a href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a></div><div class="ttdeci">void mutt_endwin(void)</div><div class="ttdoc">Shutdown curses/slang. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00422">curs_lib.c:422</a></div></div>
<div class="ttc" id="mailcap_8c_html_a49fd88d8bb73a7a56c4cc0fe28dfb645"><div class="ttname"><a href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a></div><div class="ttdeci">void mailcap_entry_free(struct MailcapEntry **ptr)</div><div class="ttdoc">Deallocate an struct MailcapEntry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00446">mailcap.c:446</a></div></div>
<div class="ttc" id="email_2body_8c_html_a129af1c316fcbc26b55fb48957bab2cb"><div class="ttname"><a href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a></div><div class="ttdeci">void mutt_body_free(struct Body **ptr)</div><div class="ttdoc">Free a Body. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8c_source.html#l00057">body.c:57</a></div></div>
<div class="ttc" id="structBody_html_a90db5151872e23e56a8f31d68925c121"><div class="ttname"><a href="structBody.html#a90db5151872e23e56a8f31d68925c121">Body::description</a></div><div class="ttdeci">char * description</div><div class="ttdoc">content-description </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00040">body.h:40</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="question_2lib_8h_html_a67a4f6d2c21c9de420130089bb20505c"><div class="ttname"><a href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a></div><div class="ttdeci">enum QuadOption mutt_yesorno(const char *msg, enum QuadOption def)</div><div class="ttdoc">Ask the user a Yes/No question. </div><div class="ttdef"><b>Definition:</b> <a href="question_8c_source.html#l00180">question.c:180</a></div></div>
<div class="ttc" id="buffer_8c_html_a4bcc481586ae3af02645b4e23e48e0d7"><div class="ttname"><a href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a></div><div class="ttdeci">size_t mutt_buffer_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00312">buffer.c:312</a></div></div>
<div class="ttc" id="structBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00065">body.h:65</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a85835d27aa930e64eef4eae5f9498401"><div class="ttname"><a href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">MailcapEntry::nametemplate</a></div><div class="ttdeci">char * nametemplate</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00043">mailcap.h:43</a></div></div>
<div class="ttc" id="mime_8h_html_ab12186b6fac3d22b88fac67700f07b1d"><div class="ttname"><a href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a></div><div class="ttdeci">#define TYPE(body)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00089">mime.h:89</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="file_8c_html_a0a6ff09a685fb6fa1120a582a5a6ef4a"><div class="ttname"><a href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a></div><div class="ttdeci">int mutt_file_copy_stream(FILE *fp_in, FILE *fp_out)</div><div class="ttdoc">Copy the contents of one file into another. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00271">file.c:271</a></div></div>
<div class="ttc" id="structBody_html_a47191eabf16d34d0deb412c898ed629b"><div class="ttname"><a href="structBody.html#a47191eabf16d34d0deb412c898ed629b">Body::unlink</a></div><div class="ttdeci">bool unlink</div><div class="ttdoc">If true, filename should be unlink()ed before free()ing this structure. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00069">body.h:69</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a365aee1471f7897abec0c347e43426e1"><div class="ttname"><a href="structMailcapEntry.html#a365aee1471f7897abec0c347e43426e1">MailcapEntry::composecommand</a></div><div class="ttdeci">char * composecommand</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00039">mailcap.h:39</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="queue_8h_html_ac3c9da7ac712eacbbad5cc54d7a3477e"><div class="ttname"><a href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a></div><div class="ttdeci">#define TAILQ_EMPTY(head)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00721">queue.h:721</a></div></div>
<div class="ttc" id="file_8c_html_a8f150fbd8c72f544d733440b861eda9c"><div class="ttname"><a href="file_8c.html#a8f150fbd8c72f544d733440b861eda9c">mutt_file_symlink</a></div><div class="ttdeci">int mutt_file_symlink(const char *oldpath, const char *newpath)</div><div class="ttdoc">Create a symlink. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00299">file.c:299</a></div></div>
<div class="ttc" id="file_8c_html_ae1c0c19fec03274220b3ca065ad1e2e5"><div class="ttname"><a href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a></div><div class="ttdeci">FILE * mutt_file_fopen(const char *path, const char *mode)</div><div class="ttdoc">Call fopen() safely. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00589">file.c:589</a></div></div>
<div class="ttc" id="structBody_html_a782cee95e0064e3895b88248bdfc781a"><div class="ttname"><a href="structBody.html#a782cee95e0064e3895b88248bdfc781a">Body::parameter</a></div><div class="ttdeci">struct ParameterList parameter</div><div class="ttdoc">parameters of the content-type </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00039">body.h:39</a></div></div>
<div class="ttc" id="protos_8h_html_aa1d4ad04b000036513ca3f741059942c"><div class="ttname"><a href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a></div><div class="ttdeci">int mutt_system(const char *cmd)</div><div class="ttdoc">Run an external command. </div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00051">system.c:51</a></div></div>
<div class="ttc" id="parse_8c_html_ad373211d5d49e235c1aa9b818f0f10a1"><div class="ttname"><a href="parse_8c.html#ad373211d5d49e235c1aa9b818f0f10a1">mutt_read_mime_header</a></div><div class="ttdeci">struct Body * mutt_read_mime_header(FILE *fp, bool digest)</div><div class="ttdoc">Parse a MIME header. </div><div class="ttdef"><b>Definition:</b> <a href="parse_8c_source.html#l01286">parse.c:1286</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdoc">User answered &amp;#39;Yes&amp;#39;, or assume &amp;#39;Yes&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
</div><!-- fragment --><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_acf4b24753bffc9e93f0ec9c157c850fe_cgraph.svg" width="872" height="1075"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_acf4b24753bffc9e93f0ec9c157c850fe_icgraph.svg" width="423" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4fd33255a2295a8ec36d8afd7c9c53df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fd33255a2295a8ec36d8afd7c9c53df">&#9670;&nbsp;</a></span>mutt_decode_save_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_decode_save_attachment </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>displaying</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a>&#160;</td>
          <td class="paramname"><em>opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode, then save an attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>File to read from (OPTIONAL) </td></tr>
    <tr><td class="paramname">m</td><td>Attachment </td></tr>
    <tr><td class="paramname">path</td><td>Path to save the Attachment to </td></tr>
    <tr><td class="paramname">displaying</td><td>Flags, e.g. <a class="el" href="state_8h.html#a5f9dc9c8012c0aeeacaa122b882c65a6" title="Output is displayed to the user. ">MUTT_DISPLAY</a> </td></tr>
    <tr><td class="paramname">opt</td><td>Save option, see <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa" title="Options for saving attachments. ">SaveAttach</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l01009">1009</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;{</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keyword">struct </span><a class="code" href="structState.html">State</a> s = { 0 };</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> saved_encoding = 0;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBody.html">Body</a> *saved_parts = NULL;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e_saved = NULL;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordtype">int</span> rc = 0;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  s.<a class="code" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> = displaying;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">if</span> (opt == <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c">MUTT_SAVE_APPEND</a>)</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = fopen(<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="stringliteral">&quot;a&quot;</span>);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (opt == <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7">MUTT_SAVE_OVERWRITE</a>)</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = fopen(<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">if</span> (!s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>)</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">if</span> (!fp)</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="comment">/* When called from the compose menu, the attachment isn&#39;t parsed,</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">     * so we need to do it here. */</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keyword">struct </span>stat st;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (stat(m-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, &amp;st) == -1)</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;stat&quot;</span>);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fopen(m-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span> (!s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>)</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    saved_encoding = m-&gt;<a class="code" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mime_8h.html#aeaf0dc750233c21ac5b499082c6ff62f">is_multipart</a>(m))</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      m-&gt;<a class="code" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> = <a class="code" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466">ENC_8BIT</a>;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    m-&gt;<a class="code" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a> = st.st_size;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    m-&gt;<a class="code" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a> = 0;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    saved_parts = m-&gt;<a class="code" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    e_saved = m-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="parse_8c.html#a0b38ac4f44b3414d0e18d26324861369">mutt_parse_part</a>(s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>, m);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structBody.html#a2f795dc4337b500fbf2ae6682dc5360b">noconv</a> || <a class="code" href="mime_8h.html#aeaf0dc750233c21ac5b499082c6ff62f">is_multipart</a>(m))</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      s.<a class="code" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> |= <a class="code" href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a>;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  }</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fp;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    s.<a class="code" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> |= <a class="code" href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <a class="code" href="handler_8c.html#adae8bf0eec9bee0bd62f639bbcf8599f">mutt_body_handler</a>(m, &amp;s);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#ae6b2571365b85d78aa796fd220c740ce">mutt_file_fsync_close</a>(&amp;s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>) != 0)</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fclose&quot;</span>);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    rc = -1;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordflow">if</span> (!fp)</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    m-&gt;<a class="code" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a> = 0;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    m-&gt;<a class="code" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> = saved_encoding;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (saved_parts)</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <a class="code" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;m-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a>);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      m-&gt;<a class="code" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a> = saved_parts;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      m-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a> = e_saved;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;}</div><div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="email_2email_8c_html_ae9f719d3fc31d00b92bcf9f77d56ee67"><div class="ttname"><a href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a></div><div class="ttdeci">void email_free(struct Email **ptr)</div><div class="ttdoc">Free an Email. </div><div class="ttdef"><b>Definition:</b> <a href="email_2email_8c_source.html#l00044">email.c:44</a></div></div>
<div class="ttc" id="state_8h_html_a5380aee741459ab7d39708695b18711f"><div class="ttname"><a href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a></div><div class="ttdeci">#define MUTT_CHARCONV</div><div class="ttdoc">Do character set conversions. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00036">state.h:36</a></div></div>
<div class="ttc" id="mime_8h_html_aeaf0dc750233c21ac5b499082c6ff62f"><div class="ttname"><a href="mime_8h.html#aeaf0dc750233c21ac5b499082c6ff62f">is_multipart</a></div><div class="ttdeci">#define is_multipart(body)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00082">mime.h:82</a></div></div>
<div class="ttc" id="file_8c_html_ae6b2571365b85d78aa796fd220c740ce"><div class="ttname"><a href="file_8c.html#ae6b2571365b85d78aa796fd220c740ce">mutt_file_fsync_close</a></div><div class="ttdeci">int mutt_file_fsync_close(FILE **fp)</div><div class="ttdoc">Flush the data, before closing a file (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00169">file.c:169</a></div></div>
<div class="ttc" id="structBody_html_a2f795dc4337b500fbf2ae6682dc5360b"><div class="ttname"><a href="structBody.html#a2f795dc4337b500fbf2ae6682dc5360b">Body::noconv</a></div><div class="ttdeci">bool noconv</div><div class="ttdoc">Don&amp;#39;t do character set conversion. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00073">body.h:73</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa854916bc31aae9f2f9afbc6e15309ae7">MUTT_SAVE_OVERWRITE</a></div><div class="ttdoc">Overwrite existing file. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00059">mutt_attach.h:59</a></div></div>
<div class="ttc" id="structBody_html_a1969dfeb0a155ccb16153fe777a103b0"><div class="ttname"><a href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">Body::offset</a></div><div class="ttdeci">LOFF_T offset</div><div class="ttdoc">offset where the actual data begins </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00044">body.h:44</a></div></div>
<div class="ttc" id="mime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466">ENC_8BIT</a></div><div class="ttdoc">8-bit text </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00050">mime.h:50</a></div></div>
<div class="ttc" id="structState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00047">state.h:47</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="structState_html_a9cf7e1f0c5c12399def5ca38b13054ae"><div class="ttname"><a href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">State::fp_in</a></div><div class="ttdeci">FILE * fp_in</div><div class="ttdoc">File to read from. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00046">state.h:46</a></div></div>
<div class="ttc" id="structBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00034">body.h:34</a></div></div>
<div class="ttc" id="structState_html_a5d855f7d518fde2ac4e8e409cbb24ad3"><div class="ttname"><a href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">State::flags</a></div><div class="ttdeci">StateFlags flags</div><div class="ttdoc">Flags, e.g. MUTT_DISPLAY. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00049">state.h:49</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="structBody_html_ad2f05b8ff24813de41988e63de5d6a31"><div class="ttname"><a href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">Body::encoding</a></div><div class="ttdeci">unsigned int encoding</div><div class="ttdoc">content-transfer-encoding, ContentEncoding </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00066">body.h:66</a></div></div>
<div class="ttc" id="structBody_html_a6f92d7ec8568ca04ae07931c56dd0790"><div class="ttname"><a href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">Body::length</a></div><div class="ttdeci">LOFF_T length</div><div class="ttdoc">length (in bytes) of attachment </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00045">body.h:45</a></div></div>
<div class="ttc" id="structBody_html_a0b87b7bdb6faef44d9aac4854975f805"><div class="ttname"><a href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">Body::parts</a></div><div class="ttdeci">struct Body * parts</div><div class="ttdoc">parts of a multipart or message/rfc822 </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00054">body.h:54</a></div></div>
<div class="ttc" id="parse_8c_html_a0b38ac4f44b3414d0e18d26324861369"><div class="ttname"><a href="parse_8c.html#a0b38ac4f44b3414d0e18d26324861369">mutt_parse_part</a></div><div class="ttdeci">void mutt_parse_part(FILE *fp, struct Body *b)</div><div class="ttdoc">Parse a MIME part. </div><div class="ttdef"><b>Definition:</b> <a href="parse_8c_source.html#l01678">parse.c:1678</a></div></div>
<div class="ttc" id="structEmail_html_ac041599cfe41b49e7b8f9d752d07bb39"><div class="ttname"><a href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">Email::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path of Email (for local Mailboxes) </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00092">email.h:92</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaa3f82d6dcb02891511fe91907b398aa1c">MUTT_SAVE_APPEND</a></div><div class="ttdoc">Append to existing file. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00058">mutt_attach.h:58</a></div></div>
<div class="ttc" id="structState_html"><div class="ttname"><a href="structState.html">State</a></div><div class="ttdoc">Keep track when processing files. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00044">state.h:44</a></div></div>
<div class="ttc" id="handler_8c_html_adae8bf0eec9bee0bd62f639bbcf8599f"><div class="ttname"><a href="handler_8c.html#adae8bf0eec9bee0bd62f639bbcf8599f">mutt_body_handler</a></div><div class="ttdeci">int mutt_body_handler(struct Body *b, struct State *s)</div><div class="ttdoc">Handler for the Body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="handler_8c_source.html#l01604">handler.c:1604</a></div></div>
<div class="ttc" id="file_8c_html_ae1c0c19fec03274220b3ca065ad1e2e5"><div class="ttname"><a href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a></div><div class="ttdeci">FILE * mutt_file_fopen(const char *path, const char *mode)</div><div class="ttdoc">Call fopen() safely. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00589">file.c:589</a></div></div>
<div class="ttc" id="structBody_html_a8e10ba22522218bd12bd3cb38dd3fcc9"><div class="ttname"><a href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">Body::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">header information for message/rfc822 </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00055">body.h:55</a></div></div>
</div><!-- fragment --><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a4fd33255a2295a8ec36d8afd7c9c53df_cgraph.svg" width="623" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a4fd33255a2295a8ec36d8afd7c9c53df_icgraph.svg" width="668" height="206"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="adef1563a136b685ed418f12a6228ef42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adef1563a136b685ed418f12a6228ef42">&#9670;&nbsp;</a></span>mutt_edit_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_edit_attachment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Edit an attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> containing attachment </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Editor found </td></tr>
    <tr><td class="paramname">0</td><td>Editor not found</td></tr>
  </table>
  </dd>
</dl>
<p>Currently, this only works for send mode, as it assumes that the Body-&gt;filename actually contains the information. I'm not sure we want to deal with editing attachments we've already received, so this should be ok.</p>
<p>Returning 0 is useful to tell the calling menu to redraw </p>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l00258">258</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordtype">char</span> type[256];</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMailcapEntry.html">MailcapEntry</a> *entry = <a class="code" href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordtype">bool</span> unlink_newfile = <span class="keyword">false</span>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">int</span> rc = 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *cmd = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *newfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  snprintf(type, <span class="keyword">sizeof</span>(type), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a>(a), a-&gt;<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a>(a, type, <span class="keyword">sizeof</span>(type), entry, <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a573dc2a7dcdf2058404b201a98906fdc">MUTT_MC_EDIT</a>))</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structMailcapEntry.html#ac195e10d836eb0b886580310c2cf0554">editcommand</a>)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(cmd, entry-&gt;<a class="code" href="structMailcapEntry.html#ac195e10d836eb0b886580310c2cf0554">editcommand</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <a class="code" href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a>(entry-&gt;<a class="code" href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">nametemplate</a>, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, newfile);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;oldfile: %s     newfile: %s\n&quot;</span>, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                 <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#a8f150fbd8c72f544d733440b861eda9c">mutt_file_symlink</a>(a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile)) == -1)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t match &#39;nametemplate&#39;, continue?&quot;</span>), <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>) != <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(newfile, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        unlink_newfile = <span class="keyword">true</span>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a>(a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile), type, cmd))</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="comment">/* For now, editing requires a file, no piping */</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Mailcap Edit entry requires %%s&quot;</span>));</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd)) == -1)</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error running \&quot;%s\&quot;&quot;</span>), <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd));</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a>)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">/* On text, default to editor */</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;editor&quot;</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a>(<a class="code" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_editor), a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No mailcap edit entry for %s&quot;</span>), type);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    rc = 0;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">goto</span> bailout;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  rc = 1;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;bailout:</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (unlink_newfile)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    unlink(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;cmd);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;newfile);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div><div class="ttc" id="structMailcapEntry_html"><div class="ttname"><a href="structMailcapEntry.html">MailcapEntry</a></div><div class="ttdoc">A mailcap entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00035">mailcap.h:35</a></div></div>
<div class="ttc" id="mailcap_8c_html_a3c151edde461a4a8fe44b3d7d64cab5e"><div class="ttname"><a href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a></div><div class="ttdeci">struct MailcapEntry * mailcap_entry_new(void)</div><div class="ttdoc">Allocate memory for a new rfc1524 entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00437">mailcap.c:437</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="string2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00037">string2.h:37</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="mailcap_8c_html_a412989a4828da86db98c88a087b2217c"><div class="ttname"><a href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a></div><div class="ttdeci">bool mailcap_lookup(struct Body *a, char *type, size_t typelen, struct MailcapEntry *entry, enum MailcapLookup opt)</div><div class="ttdoc">Find given type in the list of mailcap files. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00475">mailcap.c:475</a></div></div>
<div class="ttc" id="mailcap_8c_html_ac5eff1afc4d8341e095a90c3b9f68104"><div class="ttname"><a href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a></div><div class="ttdeci">int mailcap_expand_command(struct Body *a, const char *filename, const char *type, struct Buffer *command)</div><div class="ttdoc">Expand expandos in a command. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00067">mailcap.c:67</a></div></div>
<div class="ttc" id="mailcap_8c_html_accb5ae6e2f507053e8436a2f00b834ea"><div class="ttname"><a href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a></div><div class="ttdeci">void mailcap_expand_filename(const char *nametemplate, const char *oldfile, struct Buffer *newfile)</div><div class="ttdoc">Expand a new filename from a template or existing filename. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00545">mailcap.c:545</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="structMailcapEntry_html_ac195e10d836eb0b886580310c2cf0554"><div class="ttname"><a href="structMailcapEntry.html#ac195e10d836eb0b886580310c2cf0554">MailcapEntry::editcommand</a></div><div class="ttdeci">char * editcommand</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00041">mailcap.h:41</a></div></div>
<div class="ttc" id="structBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00037">body.h:37</a></div></div>
<div class="ttc" id="curs__lib_8c_html_acd14d074d8b9e6cb21e851dd573cdec2"><div class="ttname"><a href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a></div><div class="ttdeci">void mutt_endwin(void)</div><div class="ttdoc">Shutdown curses/slang. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00422">curs_lib.c:422</a></div></div>
<div class="ttc" id="mailcap_8c_html_a49fd88d8bb73a7a56c4cc0fe28dfb645"><div class="ttname"><a href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a></div><div class="ttdeci">void mailcap_entry_free(struct MailcapEntry **ptr)</div><div class="ttdoc">Deallocate an struct MailcapEntry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00446">mailcap.c:446</a></div></div>
<div class="ttc" id="mime_8h_html_a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a></div><div class="ttdoc">Type: &amp;#39;text/*&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00038">mime.h:38</a></div></div>
<div class="ttc" id="helpers_8c_html_ac477c591155aa4ae0452bbabc0affffe"><div class="ttname"><a href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00317">helpers.c:317</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="question_2lib_8h_html_a67a4f6d2c21c9de420130089bb20505c"><div class="ttname"><a href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a></div><div class="ttdeci">enum QuadOption mutt_yesorno(const char *msg, enum QuadOption def)</div><div class="ttdoc">Ask the user a Yes/No question. </div><div class="ttdef"><b>Definition:</b> <a href="question_8c_source.html#l00180">question.c:180</a></div></div>
<div class="ttc" id="buffer_8c_html_a4bcc481586ae3af02645b4e23e48e0d7"><div class="ttname"><a href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a></div><div class="ttdeci">size_t mutt_buffer_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00312">buffer.c:312</a></div></div>
<div class="ttc" id="structBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00065">body.h:65</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a85835d27aa930e64eef4eae5f9498401"><div class="ttname"><a href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">MailcapEntry::nametemplate</a></div><div class="ttdeci">char * nametemplate</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00043">mailcap.h:43</a></div></div>
<div class="ttc" id="mime_8h_html_ab12186b6fac3d22b88fac67700f07b1d"><div class="ttname"><a href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a></div><div class="ttdeci">#define TYPE(body)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00089">mime.h:89</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="mailcap_8h_html_a0716f6351a9229990024889ec22b33c1a573dc2a7dcdf2058404b201a98906fdc"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a573dc2a7dcdf2058404b201a98906fdc">MUTT_MC_EDIT</a></div><div class="ttdoc">Mailcap edit field. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00057">mailcap.h:57</a></div></div>
<div class="ttc" id="file_8c_html_a8f150fbd8c72f544d733440b861eda9c"><div class="ttname"><a href="file_8c.html#a8f150fbd8c72f544d733440b861eda9c">mutt_file_symlink</a></div><div class="ttdeci">int mutt_file_symlink(const char *oldpath, const char *newpath)</div><div class="ttdoc">Create a symlink. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00299">file.c:299</a></div></div>
<div class="ttc" id="curs__lib_8c_html_a0590f11f42a6242002ea4c842438231b"><div class="ttname"><a href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a></div><div class="ttdeci">void mutt_edit_file(const char *editor, const char *file)</div><div class="ttdoc">Let the user edit a file. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00380">curs_lib.c:380</a></div></div>
<div class="ttc" id="protos_8h_html_aa1d4ad04b000036513ca3f741059942c"><div class="ttname"><a href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a></div><div class="ttdeci">int mutt_system(const char *cmd)</div><div class="ttdoc">Run an external command. </div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00051">system.c:51</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdoc">User answered &amp;#39;Yes&amp;#39;, or assume &amp;#39;Yes&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
</div><!-- fragment --><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_adef1563a136b685ed418f12a6228ef42_cgraph.svg" width="663" height="747"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_adef1563a136b685ed418f12a6228ef42_icgraph.svg" width="594" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac18a72e3cc5fd8ed7b255817efe0fb3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac18a72e3cc5fd8ed7b255817efe0fb3d">&#9670;&nbsp;</a></span>mutt_get_tmp_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_get_tmp_attachment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a temporary copy of an attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Attachment to copy </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l00068">68</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordtype">char</span> type[256];</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keyword">struct </span>stat st;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">if</span> (a-&gt;<a class="code" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a>)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *tmpfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMailcapEntry.html">MailcapEntry</a> *entry = <a class="code" href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a>();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  snprintf(type, <span class="keyword">sizeof</span>(type), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a>(a), a-&gt;<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a>(a, type, <span class="keyword">sizeof</span>(type), entry, <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1abe09e527550677b514f34f0fd421d8f8">MUTT_MC_NO_FLAGS</a>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a>(entry-&gt;<a class="code" href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">nametemplate</a>, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, tmpfile);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">if</span> (stat(a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, &amp;st) == -1)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;tmpfile);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  FILE *fp_in = NULL, *fp_out = NULL;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> ((fp_in = fopen(a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;r&quot;</span>)) &amp;&amp;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      (fp_out = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile), <span class="stringliteral">&quot;w&quot;</span>)))</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp_in, fp_out);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a>(&amp;a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile));</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    a-&gt;<a class="code" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (a-&gt;<a class="code" href="structBody.html#a4fb2c1a3bc453c5451720c0ddcc99c5b">stamp</a> &gt;= st.st_mtime)</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="sendlib_8c.html#a0ee1ea636faabfacf94efbd968b0bea9">mutt_stamp_attachment</a>(a);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(fp_in ? <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(tmpfile) : a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_in);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_out);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;tmpfile);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">return</span> a-&gt;<a class="code" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> ? 0 : -1;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="structMailcapEntry_html"><div class="ttname"><a href="structMailcapEntry.html">MailcapEntry</a></div><div class="ttdoc">A mailcap entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00035">mailcap.h:35</a></div></div>
<div class="ttc" id="mailcap_8c_html_a3c151edde461a4a8fe44b3d7d64cab5e"><div class="ttname"><a href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a></div><div class="ttdeci">struct MailcapEntry * mailcap_entry_new(void)</div><div class="ttdoc">Allocate memory for a new rfc1524 entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00437">mailcap.c:437</a></div></div>
<div class="ttc" id="sendlib_8c_html_a0ee1ea636faabfacf94efbd968b0bea9"><div class="ttname"><a href="sendlib_8c.html#a0ee1ea636faabfacf94efbd968b0bea9">mutt_stamp_attachment</a></div><div class="ttdeci">void mutt_stamp_attachment(struct Body *a)</div><div class="ttdoc">Timestamp an Attachment. </div><div class="ttdef"><b>Definition:</b> <a href="sendlib_8c_source.html#l00892">sendlib.c:892</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mailcap_8h_html_a0716f6351a9229990024889ec22b33c1abe09e527550677b514f34f0fd421d8f8"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1abe09e527550677b514f34f0fd421d8f8">MUTT_MC_NO_FLAGS</a></div><div class="ttdoc">No flags set. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00056">mailcap.h:56</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="mailcap_8c_html_a412989a4828da86db98c88a087b2217c"><div class="ttname"><a href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a></div><div class="ttdeci">bool mailcap_lookup(struct Body *a, char *type, size_t typelen, struct MailcapEntry *entry, enum MailcapLookup opt)</div><div class="ttdoc">Find given type in the list of mailcap files. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00475">mailcap.c:475</a></div></div>
<div class="ttc" id="mailcap_8c_html_accb5ae6e2f507053e8436a2f00b834ea"><div class="ttname"><a href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a></div><div class="ttdeci">void mailcap_expand_filename(const char *nametemplate, const char *oldfile, struct Buffer *newfile)</div><div class="ttdoc">Expand a new filename from a template or existing filename. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00545">mailcap.c:545</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="structBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00037">body.h:37</a></div></div>
<div class="ttc" id="mailcap_8c_html_a49fd88d8bb73a7a56c4cc0fe28dfb645"><div class="ttname"><a href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a></div><div class="ttdeci">void mailcap_entry_free(struct MailcapEntry **ptr)</div><div class="ttdoc">Deallocate an struct MailcapEntry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00446">mailcap.c:446</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a85835d27aa930e64eef4eae5f9498401"><div class="ttname"><a href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">MailcapEntry::nametemplate</a></div><div class="ttdeci">char * nametemplate</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00043">mailcap.h:43</a></div></div>
<div class="ttc" id="mime_8h_html_ab12186b6fac3d22b88fac67700f07b1d"><div class="ttname"><a href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a></div><div class="ttdeci">#define TYPE(body)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00089">mime.h:89</a></div></div>
<div class="ttc" id="file_8c_html_a0a6ff09a685fb6fa1120a582a5a6ef4a"><div class="ttname"><a href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a></div><div class="ttdeci">int mutt_file_copy_stream(FILE *fp_in, FILE *fp_out)</div><div class="ttdoc">Copy the contents of one file into another. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00271">file.c:271</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ae9b6bbaa52b6ce51f2a384fe500e028e"><div class="ttname"><a href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00446">string.c:446</a></div></div>
<div class="ttc" id="structBody_html_a4fb2c1a3bc453c5451720c0ddcc99c5b"><div class="ttname"><a href="structBody.html#a4fb2c1a3bc453c5451720c0ddcc99c5b">Body::stamp</a></div><div class="ttdeci">time_t stamp</div><div class="ttdoc">Time stamp of last encoding update. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00061">body.h:61</a></div></div>
<div class="ttc" id="structBody_html_a47191eabf16d34d0deb412c898ed629b"><div class="ttname"><a href="structBody.html#a47191eabf16d34d0deb412c898ed629b">Body::unlink</a></div><div class="ttdeci">bool unlink</div><div class="ttdoc">If true, filename should be unlink()ed before free()ing this structure. </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00069">body.h:69</a></div></div>
<div class="ttc" id="file_8c_html_ae1c0c19fec03274220b3ca065ad1e2e5"><div class="ttname"><a href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a></div><div class="ttdeci">FILE * mutt_file_fopen(const char *path, const char *mode)</div><div class="ttdoc">Call fopen() safely. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00589">file.c:589</a></div></div>
</div><!-- fragment --><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_ac18a72e3cc5fd8ed7b255817efe0fb3d_cgraph.svg" width="684" height="584"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_ac18a72e3cc5fd8ed7b255817efe0fb3d_icgraph.svg" width="418" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0d463fe47dc745c39cddb1e4d1c10982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d463fe47dc745c39cddb1e4d1c10982">&#9670;&nbsp;</a></span>mutt_pipe_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_pipe_attachment </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outfile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pipe an attachment to a command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>File to pipe into the command </td></tr>
    <tr><td class="paramname">b</td><td>Attachment </td></tr>
    <tr><td class="paramname">path</td><td>Path to command </td></tr>
    <tr><td class="paramname">outfile</td><td>File to save output to </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Success </td></tr>
    <tr><td class="paramname">0</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l00712">712</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  pid_t pid = 0;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordtype">int</span> out = -1, rc = 0;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordtype">bool</span> is_flowed = <span class="keyword">false</span>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordtype">bool</span> unlink_unstuff = <span class="keyword">false</span>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  FILE *fp_filter = NULL, *fp_unstuff = NULL, *fp_in = NULL;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *unstuff_tempfile = NULL;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">if</span> (outfile &amp;&amp; *outfile)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    out = <a class="code" href="file_8c.html#a19e7688227f4eea96b9aff180bd0a904">mutt_file_open</a>(outfile, O_CREAT | O_EXCL | O_WRONLY);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (out &lt; 0)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;open&quot;</span>);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="rfc3676_8c.html#adc6a5cc71d87432efb771f495c6efb9c">mutt_rfc3676_is_format_flowed</a>(b))</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    is_flowed = <span class="keyword">true</span>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    unstuff_tempfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a>(unstuff_tempfile);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">if</span> (outfile &amp;&amp; *outfile)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    pid = <a class="code" href="filter_8c.html#ab135f1182014687e686263f6e9613be5">filter_create_fd</a>(path, &amp;fp_filter, NULL, NULL, -1, out, -1);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    pid = <a class="code" href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a>(path, &amp;fp_filter, NULL, NULL);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">if</span> (pid &lt; 0)</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t create filter&quot;</span>));</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">/* recv case */</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">if</span> (fp)</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keyword">struct </span><a class="code" href="structState.html">State</a> s = { 0 };</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">/* perform charset conversion on text attachments when piping */</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    s.<a class="code" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> = <a class="code" href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (is_flowed)</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      fp_unstuff = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(unstuff_tempfile), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="keywordflow">if</span> (fp_unstuff == NULL)</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;mutt_file_fopen&quot;</span>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      unlink_unstuff = <span class="keyword">true</span>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fp;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = fp_unstuff;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="handler_8c.html#a8dc0c14a81bb73f86986adc9745dd192">mutt_decode_attachment</a>(b, &amp;s);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_unstuff);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a>(b, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(unstuff_tempfile));</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      fp_unstuff = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(unstuff_tempfile), <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">if</span> (fp_unstuff == NULL)</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;mutt_file_fopen&quot;</span>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <a class="code" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp_unstuff, fp_filter);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_unstuff);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fp;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = fp_filter;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="handler_8c.html#a8dc0c14a81bb73f86986adc9745dd192">mutt_decode_attachment</a>(b, &amp;s);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">/* send case */</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *infile = NULL;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">if</span> (is_flowed)</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="mutt__attach_8c.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a>(fp, b, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(unstuff_tempfile),</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                               <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a>, NULL) == -1)</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      unlink_unstuff = <span class="keyword">true</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <a class="code" href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a>(b, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(unstuff_tempfile));</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      infile = <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(unstuff_tempfile);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      infile = b-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    fp_in = fopen(infile, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (!fp_in)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp_in, fp_filter);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_in);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_filter);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  rc = 1;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;bail:</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> (outfile &amp;&amp; *outfile)</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    close(out);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      unlink(outfile);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_flowed)</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <a class="code" href="rfc3676_8c.html#a9cd1b3af0b88c1d0179e890b444c5be0">mutt_rfc3676_space_stuff_attachment</a>(NULL, outfile);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_unstuff);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_filter);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_in);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">if</span> (unlink_unstuff)</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(unstuff_tempfile));</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;unstuff_tempfile);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">/* check for error exit from child process */</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">if</span> ((pid &gt; 0) &amp;&amp; (<a class="code" href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a>(pid) != 0))</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    rc = 0;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_wait_key = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;wait_key&quot;</span>);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">if</span> ((rc == 0) || c_wait_key)</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;}</div><div class="ttc" id="handler_8c_html_a8dc0c14a81bb73f86986adc9745dd192"><div class="ttname"><a href="handler_8c.html#a8dc0c14a81bb73f86986adc9745dd192">mutt_decode_attachment</a></div><div class="ttdeci">void mutt_decode_attachment(struct Body *b, struct State *s)</div><div class="ttdoc">Decode an email&amp;#39;s attachment. </div><div class="ttdef"><b>Definition:</b> <a href="handler_8c_source.html#l01861">handler.c:1861</a></div></div>
<div class="ttc" id="muttlib_8h_html_a7f1db9db6f710a84cace77248096e2ac"><div class="ttname"><a href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a></div><div class="ttdeci">#define mutt_buffer_mktemp(buf)</div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8h_source.html#l00074">muttlib.h:74</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="filter_8c_html_a81a0bae52b713e896cc8b220cc119262"><div class="ttname"><a href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a></div><div class="ttdeci">pid_t filter_create(const char *cmd, FILE **fp_in, FILE **fp_out, FILE **fp_err)</div><div class="ttdoc">Set up filter program. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00206">filter.c:206</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="rfc3676_8c_html_adc6a5cc71d87432efb771f495c6efb9c"><div class="ttname"><a href="rfc3676_8c.html#adc6a5cc71d87432efb771f495c6efb9c">mutt_rfc3676_is_format_flowed</a></div><div class="ttdeci">bool mutt_rfc3676_is_format_flowed(struct Body *b)</div><div class="ttdoc">Is the Email &quot;format-flowed&quot;? </div><div class="ttdef"><b>Definition:</b> <a href="rfc3676_8c_source.html#l00391">rfc3676.c:391</a></div></div>
<div class="ttc" id="state_8h_html_a5380aee741459ab7d39708695b18711f"><div class="ttname"><a href="state_8h.html#a5380aee741459ab7d39708695b18711f">MUTT_CHARCONV</a></div><div class="ttdeci">#define MUTT_CHARCONV</div><div class="ttdoc">Do character set conversions. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00036">state.h:36</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a></div><div class="ttdoc">No flags set. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00057">mutt_attach.h:57</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="file_8c_html_ae57463c2854c006a3c67b78736e9056e"><div class="ttname"><a href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a></div><div class="ttdeci">void mutt_file_unlink(const char *s)</div><div class="ttdoc">Delete a file, carefully. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00195">file.c:195</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00047">state.h:47</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_adb94477fad8521799cd4a94ec0e3eecf"><div class="ttname"><a href="mutt__attach_8c.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a></div><div class="ttdeci">int mutt_save_attachment(FILE *fp, struct Body *m, const char *path, enum SaveAttach opt, struct Email *e)</div><div class="ttdoc">Save an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l00879">mutt_attach.c:879</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structState_html_a9cf7e1f0c5c12399def5ca38b13054ae"><div class="ttname"><a href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">State::fp_in</a></div><div class="ttdeci">FILE * fp_in</div><div class="ttdoc">File to read from. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00046">state.h:46</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="structState_html_a5d855f7d518fde2ac4e8e409cbb24ad3"><div class="ttname"><a href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">State::flags</a></div><div class="ttdeci">StateFlags flags</div><div class="ttdoc">Flags, e.g. MUTT_DISPLAY. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00049">state.h:49</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="file_8c_html_a19e7688227f4eea96b9aff180bd0a904"><div class="ttname"><a href="file_8c.html#a19e7688227f4eea96b9aff180bd0a904">mutt_file_open</a></div><div class="ttdeci">int mutt_file_open(const char *path, uint32_t flags)</div><div class="ttdoc">Open a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00522">file.c:522</a></div></div>
<div class="ttc" id="curs__lib_8c_html_acd14d074d8b9e6cb21e851dd573cdec2"><div class="ttname"><a href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a></div><div class="ttdeci">void mutt_endwin(void)</div><div class="ttdoc">Shutdown curses/slang. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00422">curs_lib.c:422</a></div></div>
<div class="ttc" id="rfc3676_8c_html_aafc5472c7687d8941a25999aa30d2be4"><div class="ttname"><a href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a></div><div class="ttdeci">void mutt_rfc3676_space_unstuff_attachment(struct Body *b, const char *filename)</div><div class="ttdoc">Unstuff attachments. </div><div class="ttdef"><b>Definition:</b> <a href="rfc3676_8c_source.html#l00515">rfc3676.c:515</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="file_8c_html_a0a6ff09a685fb6fa1120a582a5a6ef4a"><div class="ttname"><a href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a></div><div class="ttdeci">int mutt_file_copy_stream(FILE *fp_in, FILE *fp_out)</div><div class="ttdoc">Copy the contents of one file into another. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00271">file.c:271</a></div></div>
<div class="ttc" id="filter_8c_html_ab135f1182014687e686263f6e9613be5"><div class="ttname"><a href="filter_8c.html#ab135f1182014687e686263f6e9613be5">filter_create_fd</a></div><div class="ttdeci">pid_t filter_create_fd(const char *cmd, FILE **fp_in, FILE **fp_out, FILE **fp_err, int fdin, int fdout, int fderr)</div><div class="ttdoc">Run a command on a pipe (optionally connect stdin/stdout) </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00061">filter.c:61</a></div></div>
<div class="ttc" id="structState_html"><div class="ttname"><a href="structState.html">State</a></div><div class="ttdoc">Keep track when processing files. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00044">state.h:44</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="file_8c_html_ae1c0c19fec03274220b3ca065ad1e2e5"><div class="ttname"><a href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a></div><div class="ttdeci">FILE * mutt_file_fopen(const char *path, const char *mode)</div><div class="ttdoc">Call fopen() safely. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00589">file.c:589</a></div></div>
<div class="ttc" id="filter_8c_html_a22c6912b837b1114c3276c990e73dca3"><div class="ttname"><a href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a></div><div class="ttdeci">int filter_wait(pid_t pid)</div><div class="ttdoc">Wait for the exit of a process and return its status. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00217">filter.c:217</a></div></div>
<div class="ttc" id="rfc3676_8c_html_a9cd1b3af0b88c1d0179e890b444c5be0"><div class="ttname"><a href="rfc3676_8c.html#a9cd1b3af0b88c1d0179e890b444c5be0">mutt_rfc3676_space_stuff_attachment</a></div><div class="ttdeci">void mutt_rfc3676_space_stuff_attachment(struct Body *b, const char *filename)</div><div class="ttdoc">Stuff attachments. </div><div class="ttdef"><b>Definition:</b> <a href="rfc3676_8c_source.html#l00536">rfc3676.c:536</a></div></div>
</div><!-- fragment --><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a0d463fe47dc745c39cddb1e4d1c10982_cgraph.svg" width="856" height="976"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a0d463fe47dc745c39cddb1e4d1c10982_icgraph.svg" width="406" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a55e06a71a4e4180b7279d5eb5439d9d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55e06a71a4e4180b7279d5eb5439d9d5">&#9670;&nbsp;</a></span>mutt_print_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_print_attachment </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print out an attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>File to write to </td></tr>
    <tr><td class="paramname">a</td><td>Attachment </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Success </td></tr>
    <tr><td class="paramname">0</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<p>Ok, the difference between send and receive: recv: Body-&gt;filename is a suggested name, and Mailbox|Email points to the attachment in mailbox which is encoded send: Body-&gt;filename points to the un-encoded file which contains the attachment </p>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l01108">1108</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;{</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordtype">char</span> type[256];</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  pid_t pid;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  FILE *<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = NULL, *<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = NULL;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordtype">bool</span> unlink_newfile = <span class="keyword">false</span>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *newfile = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *cmd = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordtype">int</span> rc = 0;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  snprintf(type, <span class="keyword">sizeof</span>(type), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a>(a), a-&gt;<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a>(a, type, <span class="keyword">sizeof</span>(type), NULL, <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a52af6785e1b3d732fe50654ede5041b2">MUTT_MC_PRINT</a>))</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordtype">int</span> piped = <span class="keyword">false</span>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Using mailcap\n&quot;</span>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keyword">struct </span><a class="code" href="structMailcapEntry.html">MailcapEntry</a> *entry = <a class="code" href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a>();</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <a class="code" href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a>(a, type, <span class="keyword">sizeof</span>(type), entry, <a class="code" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a52af6785e1b3d732fe50654ede5041b2">MUTT_MC_PRINT</a>);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a>(entry-&gt;<a class="code" href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">nametemplate</a>, a-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, newfile);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mutt__attach_8c.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a>(fp, a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile),</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                             <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a>, NULL) == -1)</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">goto</span> mailcap_cleanup;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    }</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    unlink_newfile = 1;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a>(a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <a class="code" href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a>(cmd, entry-&gt;<a class="code" href="structMailcapEntry.html#a90972f1dcf7a2510be293e77065e6108">printcommand</a>);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    piped = <a class="code" href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a>(a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile), type, cmd);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_wait_key = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;wait_key&quot;</span>);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">/* interactive program */</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (piped)</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      fp_in = fopen(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile), <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">if</span> (!fp_in)</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">goto</span> mailcap_cleanup;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      pid = <a class="code" href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd), &amp;fp_out, NULL, NULL);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">if</span> (pid &lt; 0)</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t create filter&quot;</span>));</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_in);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="keywordflow">goto</span> mailcap_cleanup;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <a class="code" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp_in, fp_out);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_out);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_in);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a>(pid) || c_wait_key)</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordtype">int</span> rc2 = <a class="code" href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(cmd));</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordflow">if</span> (rc2 == -1)</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Error running \&quot;%s\&quot;&quot;</span>, cmd-&gt;<a class="code" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">if</span> ((rc2 != 0) || c_wait_key)</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    rc = 1;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  mailcap_cleanup:</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">if</span> (unlink_newfile)</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <a class="code" href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <a class="code" href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a>(&amp;entry);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_print_command =</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;print_command&quot;</span>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;text/plain&quot;</span>, type) ||</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <a class="code" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;application/postscript&quot;</span>, type))</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  {</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    rc = (<a class="code" href="mutt__attach_8c.html#a0d463fe47dc745c39cddb1e4d1c10982">mutt_pipe_attachment</a>(fp, a, <a class="code" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_print_command), NULL));</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  }</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="handler_8c.html#ad8ffd2d9dd15e18644b821ec35c7ce52">mutt_can_decode</a>(a))</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  {</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">/* decode and print */</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    fp_in = NULL;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    fp_out = NULL;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a>(newfile);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mutt__attach_8c.html#a4fd33255a2295a8ec36d8afd7c9c53df">mutt_decode_save_attachment</a>(fp, a, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile),</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                    <a class="code" href="state_8h.html#ab79ff0c5d1a6836a4838634233c5a97e">MUTT_PRINTING</a>, <a class="code" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a>) == 0)</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      unlink_newfile = <span class="keyword">true</span>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;successfully decoded %s type attachment to %s\n&quot;</span>,</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                 type, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      fp_in = fopen(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile), <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">if</span> (!fp_in)</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      {</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">goto</span> decode_cleanup;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;successfully opened %s read-only\n&quot;</span>,</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                 <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <a class="code" href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a>();</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      pid = <a class="code" href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a>(<a class="code" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_print_command), &amp;fp_out, NULL, NULL);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keywordflow">if</span> (pid &lt; 0)</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t create filter&quot;</span>));</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="keywordflow">goto</span> decode_cleanup;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      }</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Filter created\n&quot;</span>);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <a class="code" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp_in, fp_out);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_out);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_in);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_wait_key = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;wait_key&quot;</span>);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a>(pid) != 0) || c_wait_key)</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      rc = 1;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  decode_cleanup:</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_in);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_out);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">if</span> (unlink_newfile)</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <a class="code" href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a>(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(newfile));</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;I don&#39;t know how to print that&quot;</span>));</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    rc = 0;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;out:</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;newfile);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;cmd);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;}</div><div class="ttc" id="structMailcapEntry_html"><div class="ttname"><a href="structMailcapEntry.html">MailcapEntry</a></div><div class="ttdoc">A mailcap entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00035">mailcap.h:35</a></div></div>
<div class="ttc" id="mailcap_8c_html_a3c151edde461a4a8fe44b3d7d64cab5e"><div class="ttname"><a href="mailcap_8c.html#a3c151edde461a4a8fe44b3d7d64cab5e">mailcap_entry_new</a></div><div class="ttdeci">struct MailcapEntry * mailcap_entry_new(void)</div><div class="ttdoc">Allocate memory for a new rfc1524 entry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00437">mailcap.c:437</a></div></div>
<div class="ttc" id="muttlib_8h_html_a7f1db9db6f710a84cace77248096e2ac"><div class="ttname"><a href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a></div><div class="ttdeci">#define mutt_buffer_mktemp(buf)</div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8h_source.html#l00074">muttlib.h:74</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="string2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00037">string2.h:37</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="filter_8c_html_a81a0bae52b713e896cc8b220cc119262"><div class="ttname"><a href="filter_8c.html#a81a0bae52b713e896cc8b220cc119262">filter_create</a></div><div class="ttdeci">pid_t filter_create(const char *cmd, FILE **fp_in, FILE **fp_out, FILE **fp_err)</div><div class="ttdoc">Set up filter program. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00206">filter.c:206</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="mutt__attach_8h_html_a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224"><div class="ttname"><a href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faaaed4c57bafee22c671cdc621feed0b224">MUTT_SAVE_NO_FLAGS</a></div><div class="ttdoc">No flags set. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8h_source.html#l00057">mutt_attach.h:57</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="file_8c_html_ae57463c2854c006a3c67b78736e9056e"><div class="ttname"><a href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a></div><div class="ttdeci">void mutt_file_unlink(const char *s)</div><div class="ttdoc">Delete a file, carefully. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00195">file.c:195</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00047">state.h:47</a></div></div>
<div class="ttc" id="state_8h_html_ab79ff0c5d1a6836a4838634233c5a97e"><div class="ttname"><a href="state_8h.html#ab79ff0c5d1a6836a4838634233c5a97e">MUTT_PRINTING</a></div><div class="ttdeci">#define MUTT_PRINTING</div><div class="ttdoc">Are we printing? - MUTT_DISPLAY &quot;light&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00037">state.h:37</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_adb94477fad8521799cd4a94ec0e3eecf"><div class="ttname"><a href="mutt__attach_8c.html#adb94477fad8521799cd4a94ec0e3eecf">mutt_save_attachment</a></div><div class="ttdeci">int mutt_save_attachment(FILE *fp, struct Body *m, const char *path, enum SaveAttach opt, struct Email *e)</div><div class="ttdoc">Save an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l00879">mutt_attach.c:879</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structState_html_a9cf7e1f0c5c12399def5ca38b13054ae"><div class="ttname"><a href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">State::fp_in</a></div><div class="ttdeci">FILE * fp_in</div><div class="ttdoc">File to read from. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00046">state.h:46</a></div></div>
<div class="ttc" id="mailcap_8c_html_a412989a4828da86db98c88a087b2217c"><div class="ttname"><a href="mailcap_8c.html#a412989a4828da86db98c88a087b2217c">mailcap_lookup</a></div><div class="ttdeci">bool mailcap_lookup(struct Body *a, char *type, size_t typelen, struct MailcapEntry *entry, enum MailcapLookup opt)</div><div class="ttdoc">Find given type in the list of mailcap files. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00475">mailcap.c:475</a></div></div>
<div class="ttc" id="mailcap_8c_html_ac5eff1afc4d8341e095a90c3b9f68104"><div class="ttname"><a href="mailcap_8c.html#ac5eff1afc4d8341e095a90c3b9f68104">mailcap_expand_command</a></div><div class="ttdeci">int mailcap_expand_command(struct Body *a, const char *filename, const char *type, struct Buffer *command)</div><div class="ttdoc">Expand expandos in a command. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00067">mailcap.c:67</a></div></div>
<div class="ttc" id="mailcap_8c_html_accb5ae6e2f507053e8436a2f00b834ea"><div class="ttname"><a href="mailcap_8c.html#accb5ae6e2f507053e8436a2f00b834ea">mailcap_expand_filename</a></div><div class="ttdeci">void mailcap_expand_filename(const char *nametemplate, const char *oldfile, struct Buffer *newfile)</div><div class="ttdoc">Expand a new filename from a template or existing filename. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00545">mailcap.c:545</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdoc">Log at debug level 2. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00041">logging.h:41</a></div></div>
<div class="ttc" id="mailcap_8h_html_a0716f6351a9229990024889ec22b33c1a52af6785e1b3d732fe50654ede5041b2"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a52af6785e1b3d732fe50654ede5041b2">MUTT_MC_PRINT</a></div><div class="ttdoc">Mailcap print field. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00059">mailcap.h:59</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a29db81d6f5a7dd216cbea75ecf8a5885"><div class="ttname"><a href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a></div><div class="ttdeci">bool mutt_istr_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings, ignoring case. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00916">string.c:916</a></div></div>
<div class="ttc" id="structBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00037">body.h:37</a></div></div>
<div class="ttc" id="curs__lib_8c_html_acd14d074d8b9e6cb21e851dd573cdec2"><div class="ttname"><a href="curs__lib_8c.html#acd14d074d8b9e6cb21e851dd573cdec2">mutt_endwin</a></div><div class="ttdeci">void mutt_endwin(void)</div><div class="ttdoc">Shutdown curses/slang. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00422">curs_lib.c:422</a></div></div>
<div class="ttc" id="mailcap_8c_html_a49fd88d8bb73a7a56c4cc0fe28dfb645"><div class="ttname"><a href="mailcap_8c.html#a49fd88d8bb73a7a56c4cc0fe28dfb645">mailcap_entry_free</a></div><div class="ttdeci">void mailcap_entry_free(struct MailcapEntry **ptr)</div><div class="ttdoc">Deallocate an struct MailcapEntry. </div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8c_source.html#l00446">mailcap.c:446</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_a4fd33255a2295a8ec36d8afd7c9c53df"><div class="ttname"><a href="mutt__attach_8c.html#a4fd33255a2295a8ec36d8afd7c9c53df">mutt_decode_save_attachment</a></div><div class="ttdeci">int mutt_decode_save_attachment(FILE *fp, struct Body *m, const char *path, int displaying, enum SaveAttach opt)</div><div class="ttdoc">Decode, then save an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l01009">mutt_attach.c:1009</a></div></div>
<div class="ttc" id="handler_8c_html_ad8ffd2d9dd15e18644b821ec35c7ce52"><div class="ttname"><a href="handler_8c.html#ad8ffd2d9dd15e18644b821ec35c7ce52">mutt_can_decode</a></div><div class="ttdeci">bool mutt_can_decode(struct Body *a)</div><div class="ttdoc">Will decoding the attachment produce any output. </div><div class="ttdef"><b>Definition:</b> <a href="handler_8c_source.html#l01821">handler.c:1821</a></div></div>
<div class="ttc" id="structBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00035">buffer.h:35</a></div></div>
<div class="ttc" id="helpers_8c_html_ac477c591155aa4ae0452bbabc0affffe"><div class="ttname"><a href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00317">helpers.c:317</a></div></div>
<div class="ttc" id="rfc3676_8c_html_aafc5472c7687d8941a25999aa30d2be4"><div class="ttname"><a href="rfc3676_8c.html#aafc5472c7687d8941a25999aa30d2be4">mutt_rfc3676_space_unstuff_attachment</a></div><div class="ttdeci">void mutt_rfc3676_space_unstuff_attachment(struct Body *b, const char *filename)</div><div class="ttdoc">Unstuff attachments. </div><div class="ttdef"><b>Definition:</b> <a href="rfc3676_8c_source.html#l00515">rfc3676.c:515</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="buffer_8c_html_a4bcc481586ae3af02645b4e23e48e0d7"><div class="ttname"><a href="buffer_8c.html#a4bcc481586ae3af02645b4e23e48e0d7">mutt_buffer_strcpy</a></div><div class="ttdeci">size_t mutt_buffer_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00312">buffer.c:312</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a90972f1dcf7a2510be293e77065e6108"><div class="ttname"><a href="structMailcapEntry.html#a90972f1dcf7a2510be293e77065e6108">MailcapEntry::printcommand</a></div><div class="ttdeci">char * printcommand</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00042">mailcap.h:42</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="structMailcapEntry_html_a85835d27aa930e64eef4eae5f9498401"><div class="ttname"><a href="structMailcapEntry.html#a85835d27aa930e64eef4eae5f9498401">MailcapEntry::nametemplate</a></div><div class="ttdeci">char * nametemplate</div><div class="ttdef"><b>Definition:</b> <a href="mailcap_8h_source.html#l00043">mailcap.h:43</a></div></div>
<div class="ttc" id="mime_8h_html_ab12186b6fac3d22b88fac67700f07b1d"><div class="ttname"><a href="mime_8h.html#ab12186b6fac3d22b88fac67700f07b1d">TYPE</a></div><div class="ttdeci">#define TYPE(body)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00089">mime.h:89</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="file_8c_html_a0a6ff09a685fb6fa1120a582a5a6ef4a"><div class="ttname"><a href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a></div><div class="ttdeci">int mutt_file_copy_stream(FILE *fp_in, FILE *fp_out)</div><div class="ttdoc">Copy the contents of one file into another. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00271">file.c:271</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="filter_8c_html_a22c6912b837b1114c3276c990e73dca3"><div class="ttname"><a href="filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a></div><div class="ttdeci">int filter_wait(pid_t pid)</div><div class="ttdoc">Wait for the exit of a process and return its status. </div><div class="ttdef"><b>Definition:</b> <a href="filter_8c_source.html#l00217">filter.c:217</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_a0d463fe47dc745c39cddb1e4d1c10982"><div class="ttname"><a href="mutt__attach_8c.html#a0d463fe47dc745c39cddb1e4d1c10982">mutt_pipe_attachment</a></div><div class="ttdeci">int mutt_pipe_attachment(FILE *fp, struct Body *b, const char *path, char *outfile)</div><div class="ttdoc">Pipe an attachment to a command. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l00712">mutt_attach.c:712</a></div></div>
<div class="ttc" id="protos_8h_html_aa1d4ad04b000036513ca3f741059942c"><div class="ttname"><a href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a></div><div class="ttdeci">int mutt_system(const char *cmd)</div><div class="ttdoc">Run an external command. </div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00051">system.c:51</a></div></div>
</div><!-- fragment --><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a55e06a71a4e4180b7279d5eb5439d9d5_cgraph.svg" width="923" height="1274"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_a55e06a71a4e4180b7279d5eb5439d9d5_icgraph.svg" width="392" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="adb94477fad8521799cd4a94ec0e3eecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb94477fad8521799cd4a94ec0e3eecf">&#9670;&nbsp;</a></span>mutt_save_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_save_attachment </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa">SaveAttach</a>&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save an attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>Source file stream. Can be NULL </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> <a class="el" href="structBody.html" title="The body of an email. ">Body</a> </td></tr>
    <tr><td class="paramname">path</td><td>Where to save the attachment </td></tr>
    <tr><td class="paramname">opt</td><td>Save option, see <a class="el" href="mutt__attach_8h.html#a5675c7a41890711ec4871b592c840faa" title="Options for saving attachments. ">SaveAttach</a> </td></tr>
    <tr><td class="paramname">e</td><td>Current <a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a>. Can be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l00879">879</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="keywordflow">if</span> (fp)</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">/* recv mode */</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (e &amp;&amp; m-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a> &amp;&amp; (m-&gt;<a class="code" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> != <a class="code" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a5c90b21fa3f41a7c98c862cb39d4370d">ENC_BASE64</a>) &amp;&amp;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        (m-&gt;<a class="code" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> != <a class="code" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61af96d66ee7716e523971a7b5161f04ded">ENC_QUOTED_PRINTABLE</a>) &amp;&amp; <a class="code" href="parse_8c.html#adcc90fb584fec1be116777c533e9b3d4">mutt_is_message_type</a>(m-&gt;<a class="code" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a>, m-&gt;<a class="code" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="comment">/* message type attachments are written to mail folders. */</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordtype">char</span> buf[8192];</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="keyword">struct </span><a class="code" href="structMessage.html">Message</a> *msg = NULL;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="copy_8h.html#a88a40e8f238a8478b885c90d1ce53e9c">CopyHeaderFlags</a> chflags = <a class="code" href="copy_8h.html#af310a44d7c96b22de90934cb18634b58">CH_NO_FLAGS</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordtype">int</span> rc = -1;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e_new = m-&gt;<a class="code" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      e_new-&gt;<a class="code" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a> = e-&gt;<a class="code" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a>; <span class="comment">/* required for MH/maildir */</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      e_new-&gt;<a class="code" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">if</span> (fseeko(fp, m-&gt;<a class="code" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a>, SEEK_SET) &lt; 0)</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">if</span> (!fgets(buf, <span class="keyword">sizeof</span>(buf), fp))</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keyword">struct </span><a class="code" href="structMailbox.html">Mailbox</a> *m_att = <a class="code" href="mx_8c.html#ab437d031227dc741c63cf2791c6b4562">mx_path_resolve</a>(path);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="mx_8c.html#a6c4f4c51fa0b086d86a8638197c40578">mx_mbox_open</a>(m_att, <a class="code" href="mxapi_8h.html#a6168431d3be24912b33a6c486fa11366">MUTT_APPEND</a> | <a class="code" href="mxapi_8h.html#a75f314042a266df29efcc524d35c4b2d">MUTT_QUIET</a>))</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="mailbox_8c.html#aba915aae97477d1ecc6428a06f92dac9">mailbox_free</a>(&amp;m_att);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      msg = <a class="code" href="mx_8c.html#aebf47a6cd2a8bc442aaf347124d2e18a">mx_msg_open_new</a>(m_att, e_new,</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                            <a class="code" href="from_8c.html#af485f9451b398a9beb14a61aaa68ddeb">is_from</a>(buf, NULL, 0, NULL) ? <a class="code" href="mx_8h.html#a4f461719ebd7d96d0b2f2492c595fc26">MUTT_MSG_NO_FLAGS</a> : <a class="code" href="mx_8h.html#a49087f3940d59f9624011017e42d9444">MUTT_ADD_FROM</a>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">if</span> (!msg)</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      {</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <a class="code" href="mx_8c.html#af9e949965d56e69eb9a6a9aa640614bb">mx_mbox_close</a>(m_att);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keywordflow">if</span> ((m_att-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525">MUTT_MBOX</a>) || (m_att-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374">MUTT_MMDF</a>))</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        chflags = <a class="code" href="copy_8h.html#a3ff472dcfcc60933d0deaba111527d6c">CH_FROM</a> | <a class="code" href="copy_8h.html#a94e818174cb0508df54058debb1c631a">CH_UPDATE_LEN</a>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      chflags |= ((m_att-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dafd4cdaa9851e1c936b2f648b4bdc6ad4">MUTT_MAILDIR</a>) ? <a class="code" href="copy_8h.html#a3f2f99c73b0f831bb2902a0517e91a01">CH_NOSTATUS</a> : <a class="code" href="copy_8h.html#a397b6166af3a14708bddb8ccd0241e11">CH_UPDATE</a>);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="copy_8c.html#ac158be102976481a9c8edc42fcd8cd09">mutt_copy_message_fp</a>(msg-&gt;<a class="code" href="structMessage.html#a11d53ee4319e8735c1677d8780a7b517">fp</a>, fp, e_new, <a class="code" href="copy_8h.html#ac778c083de78e4fb27889f345f242d13">MUTT_CM_NO_FLAGS</a>, chflags, 0) == 0) &amp;&amp;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;          (<a class="code" href="mx_8c.html#add0e192c5f27bf6bd096ae2eb7c0b67b">mx_msg_commit</a>(m_att, msg) == 0))</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        rc = 0;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        rc = -1;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="mx_8c.html#a2172d90c08b5a2b293d22ed13ee0e7a8">mx_msg_close</a>(m_att, &amp;msg);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <a class="code" href="mx_8c.html#af9e949965d56e69eb9a6a9aa640614bb">mx_mbox_close</a>(m_att);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="comment">/* In recv mode, extract from folder and decode */</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keyword">struct </span><a class="code" href="structState.html">State</a> s = { 0 };</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = <a class="code" href="mutt__attach_8c.html#a79d67a7fd5f21b0d899467aa8991ad02">save_attachment_open</a>(path, opt);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">if</span> (!s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      fseeko((s.<a class="code" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fp), m-&gt;<a class="code" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a>, SEEK_SET);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <a class="code" href="handler_8c.html#a8dc0c14a81bb73f86986adc9745dd192">mutt_decode_attachment</a>(m, &amp;s);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#ae6b2571365b85d78aa796fd220c740ce">mutt_file_fsync_close</a>(&amp;s.<a class="code" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>) != 0)</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fclose&quot;</span>);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  }</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>)</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="comment">/* In send mode, just copy file */</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    FILE *fp_old = fopen(m-&gt;<a class="code" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">if</span> (!fp_old)</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    FILE *fp_new = <a class="code" href="mutt__attach_8c.html#a79d67a7fd5f21b0d899467aa8991ad02">save_attachment_open</a>(path, opt);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (!fp_new)</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;fopen&quot;</span>);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_old);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp_old, fp_new) == -1)</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Write fault&quot;</span>));</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_old);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_new);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp_old);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#ae6b2571365b85d78aa796fd220c740ce">mutt_file_fsync_close</a>(&amp;fp_new) != 0)</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Write fault&quot;</span>));</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div><div class="ttc" id="mx_8h_html_a4f461719ebd7d96d0b2f2492c595fc26"><div class="ttname"><a href="mx_8h.html#a4f461719ebd7d96d0b2f2492c595fc26">MUTT_MSG_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_MSG_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8h_source.html#l00041">mx.h:41</a></div></div>
<div class="ttc" id="handler_8c_html_a8dc0c14a81bb73f86986adc9745dd192"><div class="ttname"><a href="handler_8c.html#a8dc0c14a81bb73f86986adc9745dd192">mutt_decode_attachment</a></div><div class="ttdeci">void mutt_decode_attachment(struct Body *b, struct State *s)</div><div class="ttdoc">Decode an email&amp;#39;s attachment. </div><div class="ttdef"><b>Definition:</b> <a href="handler_8c_source.html#l01861">handler.c:1861</a></div></div>
<div class="ttc" id="structBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">when sending a message, this is the file to which this structure refers </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00105">mailbox.h:105</a></div></div>
<div class="ttc" id="mx_8c_html_a6c4f4c51fa0b086d86a8638197c40578"><div class="ttname"><a href="mx_8c.html#a6c4f4c51fa0b086d86a8638197c40578">mx_mbox_open</a></div><div class="ttdeci">bool mx_mbox_open(struct Mailbox *m, OpenMailboxFlags flags)</div><div class="ttdoc">Open a mailbox and parse it. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00304">mx.c:304</a></div></div>
<div class="ttc" id="parse_8c_html_adcc90fb584fec1be116777c533e9b3d4"><div class="ttname"><a href="parse_8c.html#adcc90fb584fec1be116777c533e9b3d4">mutt_is_message_type</a></div><div class="ttdeci">bool mutt_is_message_type(int type, const char *subtype)</div><div class="ttdoc">Determine if a mime type matches a message or not. </div><div class="ttdef"><b>Definition:</b> <a href="parse_8c_source.html#l01385">parse.c:1385</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="file_8c_html_ae6b2571365b85d78aa796fd220c740ce"><div class="ttname"><a href="file_8c.html#ae6b2571365b85d78aa796fd220c740ce">mutt_file_fsync_close</a></div><div class="ttdeci">int mutt_file_fsync_close(FILE **fp)</div><div class="ttdoc">Flush the data, before closing a file (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00169">file.c:169</a></div></div>
<div class="ttc" id="structBody_html_a1969dfeb0a155ccb16153fe777a103b0"><div class="ttname"><a href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">Body::offset</a></div><div class="ttdeci">LOFF_T offset</div><div class="ttdoc">offset where the actual data begins </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00044">body.h:44</a></div></div>
<div class="ttc" id="copy_8h_html_a3ff472dcfcc60933d0deaba111527d6c"><div class="ttname"><a href="copy_8h.html#a3ff472dcfcc60933d0deaba111527d6c">CH_FROM</a></div><div class="ttdeci">#define CH_FROM</div><div class="ttdoc">Retain the &quot;From &quot; message separator? </div><div class="ttdef"><b>Definition:</b> <a href="copy_8h_source.html#l00056">copy.h:56</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="copy_8h_html_a3f2f99c73b0f831bb2902a0517e91a01"><div class="ttname"><a href="copy_8h.html#a3f2f99c73b0f831bb2902a0517e91a01">CH_NOSTATUS</a></div><div class="ttdeci">#define CH_NOSTATUS</div><div class="ttdoc">Suppress the status and x-status fields. </div><div class="ttdef"><b>Definition:</b> <a href="copy_8h_source.html#l00058">copy.h:58</a></div></div>
<div class="ttc" id="structState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00047">state.h:47</a></div></div>
<div class="ttc" id="copy_8h_html_a397b6166af3a14708bddb8ccd0241e11"><div class="ttname"><a href="copy_8h.html#a397b6166af3a14708bddb8ccd0241e11">CH_UPDATE</a></div><div class="ttdeci">#define CH_UPDATE</div><div class="ttdoc">Update the status and x-status fields? </div><div class="ttdef"><b>Definition:</b> <a href="copy_8h_source.html#l00052">copy.h:52</a></div></div>
<div class="ttc" id="mxapi_8h_html_a6168431d3be24912b33a6c486fa11366"><div class="ttname"><a href="mxapi_8h.html#a6168431d3be24912b33a6c486fa11366">MUTT_APPEND</a></div><div class="ttdeci">#define MUTT_APPEND</div><div class="ttdoc">Open mailbox for appending messages. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00062">mxapi.h:62</a></div></div>
<div class="ttc" id="mx_8c_html_af9e949965d56e69eb9a6a9aa640614bb"><div class="ttname"><a href="mx_8c.html#af9e949965d56e69eb9a6a9aa640614bb">mx_mbox_close</a></div><div class="ttdeci">enum MxStatus mx_mbox_close(struct Mailbox *m)</div><div class="ttdoc">Save changes and close mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00610">mx.c:610</a></div></div>
<div class="ttc" id="copy_8h_html_ac778c083de78e4fb27889f345f242d13"><div class="ttname"><a href="copy_8h.html#ac778c083de78e4fb27889f345f242d13">MUTT_CM_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_CM_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="copy_8h_source.html#l00035">copy.h:35</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="structState_html_a9cf7e1f0c5c12399def5ca38b13054ae"><div class="ttname"><a href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">State::fp_in</a></div><div class="ttdeci">FILE * fp_in</div><div class="ttdoc">File to read from. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00046">state.h:46</a></div></div>
<div class="ttc" id="mx_8c_html_a2172d90c08b5a2b293d22ed13ee0e7a8"><div class="ttname"><a href="mx_8c.html#a2172d90c08b5a2b293d22ed13ee0e7a8">mx_msg_close</a></div><div class="ttdeci">int mx_msg_close(struct Mailbox *m, struct Message **msg)</div><div class="ttdoc">Close a message. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01186">mx.c:1186</a></div></div>
<div class="ttc" id="structEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="mx_8c_html_aebf47a6cd2a8bc442aaf347124d2e18a"><div class="ttname"><a href="mx_8c.html#aebf47a6cd2a8bc442aaf347124d2e18a">mx_msg_open_new</a></div><div class="ttdeci">struct Message * mx_msg_open_new(struct Mailbox *m, const struct Email *e, MsgOpenFlags flags)</div><div class="ttdoc">Open a new message. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01054">mx.c:1054</a></div></div>
<div class="ttc" id="mailbox_8c_html_aba915aae97477d1ecc6428a06f92dac9"><div class="ttname"><a href="mailbox_8c.html#aba915aae97477d1ecc6428a06f92dac9">mailbox_free</a></div><div class="ttdeci">void mailbox_free(struct Mailbox **ptr)</div><div class="ttdoc">Free a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00087">mailbox.c:87</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="structBody_html_ad2f05b8ff24813de41988e63de5d6a31"><div class="ttname"><a href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">Body::encoding</a></div><div class="ttdeci">unsigned int encoding</div><div class="ttdoc">content-transfer-encoding, ContentEncoding </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00066">body.h:66</a></div></div>
<div class="ttc" id="mime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a5c90b21fa3f41a7c98c862cb39d4370d"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a5c90b21fa3f41a7c98c862cb39d4370d">ENC_BASE64</a></div><div class="ttdoc">Base-64 encoded text. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00052">mime.h:52</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921dafd4cdaa9851e1c936b2f648b4bdc6ad4"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dafd4cdaa9851e1c936b2f648b4bdc6ad4">MUTT_MAILDIR</a></div><div class="ttdoc">&amp;#39;Maildir&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00051">mailbox.h:51</a></div></div>
<div class="ttc" id="structBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00037">body.h:37</a></div></div>
<div class="ttc" id="structMessage_html"><div class="ttname"><a href="structMessage.html">Message</a></div><div class="ttdoc">A local copy of an email. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00041">mxapi.h:41</a></div></div>
<div class="ttc" id="structMailbox_html"><div class="ttname"><a href="structMailbox.html">Mailbox</a></div><div class="ttdoc">A mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00081">mailbox.h:81</a></div></div>
<div class="ttc" id="copy_8h_html_af310a44d7c96b22de90934cb18634b58"><div class="ttname"><a href="copy_8h.html#af310a44d7c96b22de90934cb18634b58">CH_NO_FLAGS</a></div><div class="ttdeci">#define CH_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="copy_8h_source.html#l00051">copy.h:51</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374">MUTT_MMDF</a></div><div class="ttdoc">&amp;#39;mmdf&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00049">mailbox.h:49</a></div></div>
<div class="ttc" id="copy_8h_html_a94e818174cb0508df54058debb1c631a"><div class="ttname"><a href="copy_8h.html#a94e818174cb0508df54058debb1c631a">CH_UPDATE_LEN</a></div><div class="ttdeci">#define CH_UPDATE_LEN</div><div class="ttdoc">Update Lines: and Content-Length: </div><div class="ttdef"><b>Definition:</b> <a href="copy_8h_source.html#l00062">copy.h:62</a></div></div>
<div class="ttc" id="mxapi_8h_html_a75f314042a266df29efcc524d35c4b2d"><div class="ttname"><a href="mxapi_8h.html#a75f314042a266df29efcc524d35c4b2d">MUTT_QUIET</a></div><div class="ttdeci">#define MUTT_QUIET</div><div class="ttdoc">Do not print any messages. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00064">mxapi.h:64</a></div></div>
<div class="ttc" id="structBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00065">body.h:65</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525">MUTT_MBOX</a></div><div class="ttdoc">&amp;#39;mbox&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00048">mailbox.h:48</a></div></div>
<div class="ttc" id="file_8c_html_a0a6ff09a685fb6fa1120a582a5a6ef4a"><div class="ttname"><a href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a></div><div class="ttdeci">int mutt_file_copy_stream(FILE *fp_in, FILE *fp_out)</div><div class="ttdoc">Copy the contents of one file into another. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00271">file.c:271</a></div></div>
<div class="ttc" id="copy_8h_html_a88a40e8f238a8478b885c90d1ce53e9c"><div class="ttname"><a href="copy_8h.html#a88a40e8f238a8478b885c90d1ce53e9c">CopyHeaderFlags</a></div><div class="ttdeci">uint32_t CopyHeaderFlags</div><div class="ttdoc">Flags for mutt_copy_header(), e.g. CH_UPDATE. </div><div class="ttdef"><b>Definition:</b> <a href="copy_8h_source.html#l00050">copy.h:50</a></div></div>
<div class="ttc" id="mx_8c_html_add0e192c5f27bf6bd096ae2eb7c0b67b"><div class="ttname"><a href="mx_8c.html#add0e192c5f27bf6bd096ae2eb7c0b67b">mx_msg_commit</a></div><div class="ttdeci">int mx_msg_commit(struct Mailbox *m, struct Message *msg)</div><div class="ttdoc">Commit a message to a folder - Wrapper for MxOps::msg_commit() </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01165">mx.c:1165</a></div></div>
<div class="ttc" id="mime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61af96d66ee7716e523971a7b5161f04ded"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61af96d66ee7716e523971a7b5161f04ded">ENC_QUOTED_PRINTABLE</a></div><div class="ttdoc">Quoted-printable text. </div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00051">mime.h:51</a></div></div>
<div class="ttc" id="structMessage_html_a11d53ee4319e8735c1677d8780a7b517"><div class="ttname"><a href="structMessage.html#a11d53ee4319e8735c1677d8780a7b517">Message::fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdoc">pointer to the message data </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00043">mxapi.h:43</a></div></div>
<div class="ttc" id="mx_8c_html_ab437d031227dc741c63cf2791c6b4562"><div class="ttname"><a href="mx_8c.html#ab437d031227dc741c63cf2791c6b4562">mx_path_resolve</a></div><div class="ttdeci">struct Mailbox * mx_path_resolve(const char *path)</div><div class="ttdoc">Get a Mailbox for a path. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01668">mx.c:1668</a></div></div>
<div class="ttc" id="structState_html"><div class="ttname"><a href="structState.html">State</a></div><div class="ttdoc">Keep track when processing files. </div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00044">state.h:44</a></div></div>
<div class="ttc" id="mutt__attach_8c_html_a79d67a7fd5f21b0d899467aa8991ad02"><div class="ttname"><a href="mutt__attach_8c.html#a79d67a7fd5f21b0d899467aa8991ad02">save_attachment_open</a></div><div class="ttdeci">static FILE * save_attachment_open(const char *path, enum SaveAttach opt)</div><div class="ttdoc">Open a file to write an attachment to. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__attach_8c_source.html#l00859">mutt_attach.c:859</a></div></div>
<div class="ttc" id="from_8c_html_af485f9451b398a9beb14a61aaa68ddeb"><div class="ttname"><a href="from_8c.html#af485f9451b398a9beb14a61aaa68ddeb">is_from</a></div><div class="ttdeci">bool is_from(const char *s, char *path, size_t pathlen, time_t *tp)</div><div class="ttdoc">Is a string a &amp;#39;From&amp;#39; header line? </div><div class="ttdef"><b>Definition:</b> <a href="from_8c_source.html#l00048">from.c:48</a></div></div>
<div class="ttc" id="copy_8c_html_ac158be102976481a9c8edc42fcd8cd09"><div class="ttname"><a href="copy_8c.html#ac158be102976481a9c8edc42fcd8cd09">mutt_copy_message_fp</a></div><div class="ttdeci">int mutt_copy_message_fp(FILE *fp_out, FILE *fp_in, struct Email *e, CopyMessageFlags cmflags, CopyHeaderFlags chflags, int wraplen)</div><div class="ttdoc">make a copy of a message from a FILE pointer </div><div class="ttdef"><b>Definition:</b> <a href="copy_8c_source.html#l00629">copy.c:629</a></div></div>
<div class="ttc" id="mx_8h_html_a49087f3940d59f9624011017e42d9444"><div class="ttname"><a href="mx_8h.html#a49087f3940d59f9624011017e42d9444">MUTT_ADD_FROM</a></div><div class="ttdeci">#define MUTT_ADD_FROM</div><div class="ttdoc">add a From_ line </div><div class="ttdef"><b>Definition:</b> <a href="mx_8h_source.html#l00042">mx.h:42</a></div></div>
<div class="ttc" id="structBody_html_a8e10ba22522218bd12bd3cb38dd3fcc9"><div class="ttname"><a href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">Body::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">header information for message/rfc822 </div><div class="ttdef"><b>Definition:</b> <a href="email_2body_8h_source.html#l00055">body.h:55</a></div></div>
<div class="ttc" id="structEmail_html_abd3d551204f4ea232a304c1c4c4c149d"><div class="ttname"><a href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">Email::msgno</a></div><div class="ttdeci">int msgno</div><div class="ttdoc">Number displayed to the user. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00087">email.h:87</a></div></div>
</div><!-- fragment --><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_adb94477fad8521799cd4a94ec0e3eecf_cgraph.svg" width="604" height="771"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_adb94477fad8521799cd4a94ec0e3eecf_icgraph.svg" width="638" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="acc6c49a75e5a6fce41d18c1d95a45948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc6c49a75e5a6fce41d18c1d95a45948">&#9670;&nbsp;</a></span>mutt_add_temp_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_add_temp_attachment </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add file to list of temporary attachments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>filename with full path </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l01267">1267</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;{</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="list_8c.html#ace47a64c8bec9d1b24be6524f650293d">mutt_list_insert_tail</a>(&amp;TempAttachmentsList, <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(filename));</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div><div class="ttc" id="mutt_2string_8c_html_a4c2560f787bd1226b977992c16860c98"><div class="ttname"><a href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00370">string.c:370</a></div></div>
<div class="ttc" id="list_8c_html_ace47a64c8bec9d1b24be6524f650293d"><div class="ttname"><a href="list_8c.html#ace47a64c8bec9d1b24be6524f650293d">mutt_list_insert_tail</a></div><div class="ttdeci">struct ListNode * mutt_list_insert_tail(struct ListHead *h, char *s)</div><div class="ttdoc">Append a string to the end of a List. </div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00064">list.c:64</a></div></div>
</div><!-- fragment --><div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_acc6c49a75e5a6fce41d18c1d95a45948_cgraph.svg" width="418" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_acc6c49a75e5a6fce41d18c1d95a45948_icgraph.svg" width="439" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad17742bb1239d32b203e93e082bfa903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad17742bb1239d32b203e93e082bfa903">&#9670;&nbsp;</a></span>mutt_unlink_temp_attachments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_unlink_temp_attachments </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete all temporary attachments. </p>

<p class="definition">Definition at line <a class="el" href="mutt__attach_8c_source.html#l01275">1275</a> of file <a class="el" href="mutt__attach_8c_source.html">mutt_attach.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;{</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keyword">struct </span><a class="code" href="structListNode.html">ListNode</a> *np = NULL;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <a class="code" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(np, &amp;TempAttachmentsList, entries)</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="file_8c.html#ada903307ff33738359dd9add40bc5c6a">mutt_file_chmod_add</a>(np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, S_IWUSR);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <a class="code" href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a>(np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <a class="code" href="list_8c.html#ab5c53ce94cc2aafa4299dbc81a37f4a4">mutt_list_free</a>(&amp;TempAttachmentsList);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;}</div><div class="ttc" id="file_8c_html_ae57463c2854c006a3c67b78736e9056e"><div class="ttname"><a href="file_8c.html#ae57463c2854c006a3c67b78736e9056e">mutt_file_unlink</a></div><div class="ttdeci">void mutt_file_unlink(const char *s)</div><div class="ttdoc">Delete a file, carefully. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00195">file.c:195</a></div></div>
<div class="ttc" id="list_8c_html_ab5c53ce94cc2aafa4299dbc81a37f4a4"><div class="ttname"><a href="list_8c.html#ab5c53ce94cc2aafa4299dbc81a37f4a4">mutt_list_free</a></div><div class="ttdeci">void mutt_list_free(struct ListHead *h)</div><div class="ttdoc">Free a List AND its strings. </div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00122">list.c:122</a></div></div>
<div class="ttc" id="queue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00352">queue.h:352</a></div></div>
<div class="ttc" id="structListNode_html_aafe688d670318196766392d8235d00a7"><div class="ttname"><a href="structListNode.html#aafe688d670318196766392d8235d00a7">ListNode::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">String. </div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00036">list.h:36</a></div></div>
<div class="ttc" id="file_8c_html_ada903307ff33738359dd9add40bc5c6a"><div class="ttname"><a href="file_8c.html#ada903307ff33738359dd9add40bc5c6a">mutt_file_chmod_add</a></div><div class="ttdeci">int mutt_file_chmod_add(const char *path, mode_t mode)</div><div class="ttdoc">Add permissions to a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01070">file.c:1070</a></div></div>
<div class="ttc" id="structListNode_html"><div class="ttname"><a href="structListNode.html">ListNode</a></div><div class="ttdoc">A List node for strings. </div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00034">list.h:34</a></div></div>
</div><!-- fragment --><div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_ad17742bb1239d32b203e93e082bfa903_cgraph.svg" width="452" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__attach_8h_ad17742bb1239d32b203e93e082bfa903_icgraph.svg" width="442" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
