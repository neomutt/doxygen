<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: mbox_check()</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2021-02-05-647-g5d4e00</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__mx__mbox__check.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mbox_check()<div class="ingroups"><a class="el" href="group__mx__api.html">Mailbox API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Check for new mail.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for mbox_check():</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check.svg" width="272" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabf3eceb782a3061fe668121697cc2e22"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gabf3eceb782a3061fe668121697cc2e22">comp_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gabf3eceb782a3061fe668121697cc2e22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="#gabf3eceb782a3061fe668121697cc2e22">More...</a><br /></td></tr>
<tr class="separator:gabf3eceb782a3061fe668121697cc2e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab274718bd33e0eb6ce4e102d9483d085"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gab274718bd33e0eb6ce4e102d9483d085">imap_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gab274718bd33e0eb6ce4e102d9483d085"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="#gab274718bd33e0eb6ce4e102d9483d085">More...</a><br /></td></tr>
<tr class="separator:gab274718bd33e0eb6ce4e102d9483d085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c83b6e969c6eced44ccaa2fc21360ec"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#ga9c83b6e969c6eced44ccaa2fc21360ec">maildir_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga9c83b6e969c6eced44ccaa2fc21360ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -This function handles arrival of new mail and reopening of maildir folders.  <a href="#ga9c83b6e969c6eced44ccaa2fc21360ec">More...</a><br /></td></tr>
<tr class="separator:ga9c83b6e969c6eced44ccaa2fc21360ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4be54a995c195a42265f6ac32d80355a"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#ga4be54a995c195a42265f6ac32d80355a">mh_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga4be54a995c195a42265f6ac32d80355a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -This function handles arrival of new mail and reopening of mh/maildir folders.  <a href="#ga4be54a995c195a42265f6ac32d80355a">More...</a><br /></td></tr>
<tr class="separator:ga4be54a995c195a42265f6ac32d80355a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb376aac365fa068eeb370915b2d309d"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gafb376aac365fa068eeb370915b2d309d">mbox_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gafb376aac365fa068eeb370915b2d309d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="#gafb376aac365fa068eeb370915b2d309d">More...</a><br /></td></tr>
<tr class="separator:gafb376aac365fa068eeb370915b2d309d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc1020d6388163ca2f05c682fac382b6"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gafc1020d6388163ca2f05c682fac382b6">nntp_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gafc1020d6388163ca2f05c682fac382b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="#gafc1020d6388163ca2f05c682fac382b6">More...</a><br /></td></tr>
<tr class="separator:gafc1020d6388163ca2f05c682fac382b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd9ac1fea250b07e3ea64493021aaa06"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gafd9ac1fea250b07e3ea64493021aaa06">nm_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gafd9ac1fea250b07e3ea64493021aaa06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="#gafd9ac1fea250b07e3ea64493021aaa06">More...</a><br /></td></tr>
<tr class="separator:gafd9ac1fea250b07e3ea64493021aaa06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c3baa1bb7f18e3e64806fd6932290b7"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#ga5c3baa1bb7f18e3e64806fd6932290b7">pop_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga5c3baa1bb7f18e3e64806fd6932290b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="#ga5c3baa1bb7f18e3e64806fd6932290b7">More...</a><br /></td></tr>
<tr class="separator:ga5c3baa1bb7f18e3e64806fd6932290b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Check for new mail. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...">MxStatus</a></td></tr>
  </table>
  </dd>
</dl>
<p><b>Contract</b></p><ul>
<li><em>m</em> is not NULL </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabf3eceb782a3061fe668121697cc2e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf3eceb782a3061fe668121697cc2e22">&#9670;&nbsp;</a></span>comp_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> comp_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...">MxStatus</a></td></tr>
  </table>
  </dd>
</dl>
<p>If the compressed file changes in size but the mailbox hasn't been changed in <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a>, then we can close and reopen the mailbox.</p>
<p>If the mailbox has been changed in <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a>, warn the user. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00579">579</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;{</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordtype">int</span> size = <a class="code" href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">if</span> (size == ci-&gt;<a class="code" href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">size</a>)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a>(m, <span class="keyword">false</span>))</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to lock mailbox&quot;</span>));</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a>(m, ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a>, <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Decompressing %s&quot;</span>));</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a>(m);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a>(m);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">mbox_check</a>(m);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div><div class="ttc" id="file_8c_html_a75f1c8024613a5e8c23f92d229f52101"><div class="ttname"><a href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a></div><div class="ttdeci">long mutt_file_get_size(const char *path)</div><div class="ttdoc">Get the size of a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01498">file.c:1498</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structCompressInfo_html_ae92bc129b9825e39e42d7737197c3297"><div class="ttname"><a href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">CompressInfo::size</a></div><div class="ttdeci">long size</div><div class="ttdoc">size of the compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00051">lib.h:51</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a877acb05482802a48bc56da5e24c8c54"><div class="ttname"><a href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a></div><div class="ttdeci">static void store_size(const struct Mailbox *m)</div><div class="ttdoc">Save the size of the compressed file. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00178">compress.c:178</a></div></div>
<div class="ttc" id="structMxOps_html_af72b7c6ef064d1ca86b71ac9aff3e875"><div class="ttname"><a href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check</a></div><div class="ttdeci">enum MxStatus(* mbox_check)(struct Mailbox *m)</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00180">mxapi.h:180</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_aa35e239a0ed2772ae5824c317276f83a"><div class="ttname"><a href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a></div><div class="ttdeci">static void unlock_realpath(struct Mailbox *m)</div><div class="ttdoc">Unlock the mailbox-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00124">compress.c:124</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a77600af8755fc3921168f6c0727abf18"><div class="ttname"><a href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a></div><div class="ttdeci">static int execute_command(struct Mailbox *m, const char *command, const char *progress)</div><div class="ttdoc">Run a system command. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00319">compress.c:319</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a8c82fa05ac9a30a1cd0e5c5b472ae066"><div class="ttname"><a href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a></div><div class="ttdeci">static bool lock_realpath(struct Mailbox *m, bool excl)</div><div class="ttdoc">Try to lock the ctx-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00085">compress.c:85</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00103">mxapi.h:103</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_gabf3eceb782a3061fe668121697cc2e22_cgraph.svg" width="542" height="214"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_gabf3eceb782a3061fe668121697cc2e22_icgraph.svg" width="344" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="gab274718bd33e0eb6ce4e102d9483d085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab274718bd33e0eb6ce4e102d9483d085">&#9670;&nbsp;</a></span>imap_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> imap_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;0</td><td>Success, e.g. <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4" title="Mailbox was reopened. ">MX_STATUS_REOPENED</a> </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l02169">2169</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;{</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <a class="code" href="imap_2private_8h.html#a2d2129a01a682441eeec2eaaeb4015ce">imap_allow_reopen</a>(m);</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> rc = <a class="code" href="imap_8c.html#acfd4b6567f210cef7e4dcffa45f263ce">imap_check_mailbox</a>(m, <span class="keyword">false</span>);</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="comment">/* NOTE - ctx might have been changed at this point. In particular,</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment">   * m could be NULL. Beware. */</span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <a class="code" href="imap_2private_8h.html#a2f5d2ee95c9fbfcbfda3bc83287a75eb">imap_disallow_reopen</a>(m);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;}</div><div class="ttc" id="imap_2private_8h_html_a2f5d2ee95c9fbfcbfda3bc83287a75eb"><div class="ttname"><a href="imap_2private_8h.html#a2f5d2ee95c9fbfcbfda3bc83287a75eb">imap_disallow_reopen</a></div><div class="ttdeci">void imap_disallow_reopen(struct Mailbox *m)</div><div class="ttdoc">Disallow re-opening a folder upon expunge. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l01034">util.c:1034</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a2d2129a01a682441eeec2eaaeb4015ce"><div class="ttname"><a href="imap_2private_8h.html#a2d2129a01a682441eeec2eaaeb4015ce">imap_allow_reopen</a></div><div class="ttdeci">void imap_allow_reopen(struct Mailbox *m)</div><div class="ttdoc">Allow re-opening a folder upon expunge. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l01021">util.c:1021</a></div></div>
<div class="ttc" id="imap_8c_html_acfd4b6567f210cef7e4dcffa45f263ce"><div class="ttname"><a href="imap_8c.html#acfd4b6567f210cef7e4dcffa45f263ce">imap_check_mailbox</a></div><div class="ttdeci">enum MxStatus imap_check_mailbox(struct Mailbox *m, bool force)</div><div class="ttdoc">use the NOOP or IDLE command to poll for new mail </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01103">imap.c:1103</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a></div><div class="ttdeci">MxStatus</div><div class="ttdoc">Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00075">mxapi.h:75</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_gab274718bd33e0eb6ce4e102d9483d085_cgraph.svg" width="371" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ga9c83b6e969c6eced44ccaa2fc21360ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c83b6e969c6eced44ccaa2fc21360ec">&#9670;&nbsp;</a></span>maildir_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> maildir_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -This function handles arrival of new mail and reopening of maildir folders. </p>
<p>The basic idea here is we check to see if either the new or cur subdirectories have changed, and if so, we scan them for the list of files. We check for newly added messages, and then merge the flags messages we already knew about. We don't treat either subdirectory differently, as mail could be copied directly into the cur directory from another agent. </p>

<p class="definition">Definition at line <a class="el" href="maildir_8c_source.html#l01166">1166</a> of file <a class="el" href="maildir_8c_source.html">maildir.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;{</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keyword">struct </span>stat st_new;         <span class="comment">/* status of the &quot;new&quot; subdirectory */</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keyword">struct </span>stat st_cur;         <span class="comment">/* status of the &quot;cur&quot; subdirectory */</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordtype">int</span> changed = <a class="code" href="maildir_8c.html#aa32d2f8315f63e8e0c4e6712f7317a6e">MMC_NO_DIRS</a>;  <span class="comment">/* which subdirectories have changed */</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keywordtype">bool</span> occult = <span class="keyword">false</span>;        <span class="comment">/* messages were removed from the mailbox */</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordtype">int</span> num_new = 0;            <span class="comment">/* number of new messages added to the mailbox */</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordtype">bool</span> flags_changed = <span class="keyword">false</span>; <span class="comment">/* message flags were changed in the mailbox */</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keyword">struct </span><a class="code" href="structHashTable.html">HashTable</a> *fnames = NULL; <span class="comment">/* hash table for quickly looking up the base filename</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">                                 for a maildir message */</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMaildirMboxData.html">MaildirMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="maildir_2mdata_8c.html#a02bc1414732ddb9065ef531bc7170fb6">maildir_mdata_get</a>(m);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">/* XXX seems like this check belongs in mx_mbox_check() rather than here.  */</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_check_new = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;check_new&quot;</span>);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordflow">if</span> (!c_check_new)</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *buf = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <a class="code" href="buffer_8c.html#ad057ee239ae5bcfd72cab3749036ab02">mutt_buffer_printf</a>(buf, <span class="stringliteral">&quot;%s/new&quot;</span>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordflow">if</span> (stat(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf), &amp;st_new) == -1)</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <a class="code" href="buffer_8c.html#ad057ee239ae5bcfd72cab3749036ab02">mutt_buffer_printf</a>(buf, <span class="stringliteral">&quot;%s/cur&quot;</span>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordflow">if</span> (stat(<a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf), &amp;st_cur) == -1)</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  }</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="comment">/* determine which subdirectories need to be scanned */</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a>(&amp;st_new, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>) &gt; 0)</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    changed = <a class="code" href="maildir_8c.html#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a>;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a>(&amp;st_cur, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;mdata-&gt;<a class="code" href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">mtime_cur</a>) &gt; 0)</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    changed |= <a class="code" href="maildir_8c.html#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a>;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="keywordflow">if</span> (changed == <a class="code" href="maildir_8c.html#aa32d2f8315f63e8e0c4e6712f7317a6e">MMC_NO_DIRS</a>)</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>; <span class="comment">/* nothing to do */</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">/* Update the modification times on the mailbox.</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">   * The monitor code notices changes in the open mailbox too quickly.</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">   * In practice, this sometimes leads to all the new messages not being</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">   * noticed during the SAME group of mtime stat updates.  To work around</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">   * the problem, don&#39;t update the stat times for a monitor caused check. */</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="preprocessor">#ifdef USE_INOTIFY</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="monitor_8c.html#a94e3af91d956b84d21c8b94f67a51bbc">MonitorContextChanged</a>)</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="monitor_8c.html#a94e3af91d956b84d21c8b94f67a51bbc">MonitorContextChanged</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a>(&amp;mdata-&gt;<a class="code" href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">mtime_cur</a>, &amp;st_cur, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>, &amp;st_new, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="comment">/* do a fast scan of just the filenames in</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">   * the subdirectories that have changed.  */</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keyword">struct </span>MdEmailArray mda = <a class="code" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="keywordflow">if</span> (changed &amp; <a class="code" href="maildir_8c.html#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a>)</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="maildir_8c.html#a3998b182ec8b6420eda0d014a473b1ef">maildir_parse_dir</a>(m, &amp;mda, <span class="stringliteral">&quot;new&quot;</span>, NULL);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">if</span> (changed &amp; <a class="code" href="maildir_8c.html#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a>)</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="maildir_8c.html#a3998b182ec8b6420eda0d014a473b1ef">maildir_parse_dir</a>(m, &amp;mda, <span class="stringliteral">&quot;cur&quot;</span>, NULL);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">/* we create a hash table keyed off the canonical (sans flags) filename</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">   * of each message we scanned.  This is used in the loop over the</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">   * existing messages below to do some correlation.  */</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  fnames = <a class="code" href="hash_8c.html#a8bce8d11bb659d44bd796f72069ddb3d">mutt_hash_new</a>(<a class="code" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(&amp;mda), <a class="code" href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a>);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMdEmail.html">MdEmail</a> *md = NULL;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMdEmail.html">MdEmail</a> **mdp = NULL;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <a class="code" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(mdp, &amp;mda)</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    md = *mdp;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="maildir_8c.html#ae0026c4d5bd99be78469095721d1e744">maildir_canon_filename</a>(buf, md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    md-&gt;<a class="code" href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">canon_fname</a> = <a class="code" href="buffer_8c.html#aa43f3cb9584746ca0cf6720ac1fc38e7">mutt_buffer_strdup</a>(buf);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="hash_8c.html#a2bd546db19eed6d3e95ea316c6c782ca">mutt_hash_insert</a>(fnames, md-&gt;<a class="code" href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">canon_fname</a>, md);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">/* check for modifications and adjust flags */</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <a class="code" href="maildir_8c.html#ae0026c4d5bd99be78469095721d1e744">maildir_canon_filename</a>(buf, e-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    md = <a class="code" href="hash_8c.html#a58acf06077aef78a15c60f37c72403ce">mutt_hash_find</a>(fnames, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf));</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (md &amp;&amp; md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>)</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    {</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="comment">/* message already exists, merge flags */</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="comment">/* check to see if the message has moved to a different</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">       * subdirectory.  If so, update the associated filename.  */</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(e-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>))</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <a class="code" href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a>(&amp;e-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="comment">/* if the user hasn&#39;t modified the flags on this message, update</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">       * the flags we just detected.  */</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>)</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="maildir_2lib_8h.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a>(m, e, md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>))</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;          flags_changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> == e-&gt;<a class="code" href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">trash</a>)</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> != md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>)</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        {</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;          e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> = md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;          flags_changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      e-&gt;<a class="code" href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">trash</a> = md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code" href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">trash</a>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="comment">/* this is a duplicate of an existing email, so remove it */</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <a class="code" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="comment">/* This message was not in the list of messages we just scanned.</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">     * Check to see if we have enough information to know if the</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment">     * message has disappeared out from underneath us.  */</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((changed &amp; MMC_NEW_DIR) &amp;&amp; <a class="code" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(e-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="stringliteral">&quot;new/&quot;</span>, 4)) ||</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;             ((changed &amp; MMC_CUR_DIR) &amp;&amp; <a class="code" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(e-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="stringliteral">&quot;cur/&quot;</span>, 4)))</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    {</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="comment">/* This message disappeared, so we need to simulate a &quot;reopen&quot;</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">       * event.  We know it disappeared because we just scanned the</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">       * subdirectory it used to reside in.  */</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      occult = <span class="keyword">true</span>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      e-&gt;<a class="code" href="structEmail.html#a1e108ee29a0c6571211290457ab60756">purge</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="comment">/* This message resides in a subdirectory which was not</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">       * modified, so we assume that it is still present and</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">       * unchanged.  */</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">/* destroy the file name hash */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <a class="code" href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a>(&amp;fnames);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="comment">/* If we didn&#39;t just get new mail, update the tables. */</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="keywordflow">if</span> (occult)</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a>);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="comment">/* do any delayed parsing we need to do. */</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <a class="code" href="maildir_8c.html#adc6b83c9f03a35c0069a66bb739bf199">maildir_delayed_parsing</a>(m, &amp;mda, NULL);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">/* Incorporate new messages */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  num_new = <a class="code" href="maildir_2private_8h.html#ae5a01751195fc99d887bbff650882e8c">maildir_move_to_mailbox</a>(m, &amp;mda);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">if</span> (num_new &gt; 0)</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  }</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;mda);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keywordflow">if</span> (occult)</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a>;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordflow">if</span> (num_new &gt; 0)</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="keywordflow">if</span> (flags_changed)</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;}</div><div class="ttc" id="hash_8c_html_a58acf06077aef78a15c60f37c72403ce"><div class="ttname"><a href="hash_8c.html#a58acf06077aef78a15c60f37c72403ce">mutt_hash_find</a></div><div class="ttdeci">void * mutt_hash_find(const struct HashTable *table, const char *strkey)</div><div class="ttdoc">Find the HashElem data in a Hash Table element using a key. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00354">hash.c:354</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00904">string.c:904</a></div></div>
<div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="hash_8c_html_a2bd546db19eed6d3e95ea316c6c782ca"><div class="ttname"><a href="hash_8c.html#a2bd546db19eed6d3e95ea316c6c782ca">mutt_hash_insert</a></div><div class="ttdeci">struct HashElem * mutt_hash_insert(struct HashTable *table, const char *strkey, void *data)</div><div class="ttdoc">Add a new element to the Hash Table (with string keys) </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00327">hash.c:327</a></div></div>
<div class="ttc" id="maildir_8c_html_ae0026c4d5bd99be78469095721d1e744"><div class="ttname"><a href="maildir_8c.html#ae0026c4d5bd99be78469095721d1e744">maildir_canon_filename</a></div><div class="ttdeci">void maildir_canon_filename(struct Buffer *dest, const char *src)</div><div class="ttdoc">Generate the canonical filename for a Maildir folder. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00727">maildir.c:727</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="structHashTable_html"><div class="ttname"><a href="structHashTable.html">HashTable</a></div><div class="ttdoc">A Hash Table. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8h_source.html#l00087">hash.h:87</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="email_2email_8c_html_ae9f719d3fc31d00b92bcf9f77d56ee67"><div class="ttname"><a href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a></div><div class="ttdeci">void email_free(struct Email **ptr)</div><div class="ttdoc">Free an Email. </div><div class="ttdef"><b>Definition:</b> <a href="email_2email_8c_source.html#l00044">email.c:44</a></div></div>
<div class="ttc" id="maildir_2lib_8h_html_a79713d04e839c3782ef9e0b7bc25e9c0"><div class="ttname"><a href="maildir_2lib_8h.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a></div><div class="ttdeci">bool maildir_update_flags(struct Mailbox *m, struct Email *e_old, struct Email *e_new)</div><div class="ttdoc">Update the mailbox flags. </div><div class="ttdef"><b>Definition:</b> <a href="shared_8c_source.html#l00122">shared.c:122</a></div></div>
<div class="ttc" id="buffer_8c_html_aa43f3cb9584746ca0cf6720ac1fc38e7"><div class="ttname"><a href="buffer_8c.html#aa43f3cb9584746ca0cf6720ac1fc38e7">mutt_buffer_strdup</a></div><div class="ttdeci">char * mutt_buffer_strdup(const struct Buffer *buf)</div><div class="ttdoc">Copy a Buffer&amp;#39;s string. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00432">buffer.c:432</a></div></div>
<div class="ttc" id="hash_8c_html_afa22b7f78bbf1b59a4a2bd4bdd20948b"><div class="ttname"><a href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a></div><div class="ttdeci">void mutt_hash_free(struct HashTable **ptr)</div><div class="ttdoc">Free a hash table. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00449">hash.c:449</a></div></div>
<div class="ttc" id="file_8c_html_a6a21c63cfd81ee58a7e1b111249ef85d"><div class="ttname"><a href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a></div><div class="ttdeci">void mutt_file_get_stat_timespec(struct timespec *dest, struct stat *sb, enum MuttStatType type)</div><div class="ttdoc">Read the stat() time into a time value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01540">file.c:1540</a></div></div>
<div class="ttc" id="maildir_2private_8h_html_ae5a01751195fc99d887bbff650882e8c"><div class="ttname"><a href="maildir_2private_8h.html#ae5a01751195fc99d887bbff650882e8c">maildir_move_to_mailbox</a></div><div class="ttdeci">int maildir_move_to_mailbox(struct Mailbox *m, struct MdEmailArray *mda)</div><div class="ttdoc">Copy the Maildir list to the Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="shared_8c_source.html#l00075">shared.c:75</a></div></div>
<div class="ttc" id="array_8h_html_aaa8805bd90a2015d8f5eb0fe3bb13b3f"><div class="ttname"><a href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a></div><div class="ttdeci">#define ARRAY_FREE(head)</div><div class="ttdoc">Release all memory. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00198">array.h:198</a></div></div>
<div class="ttc" id="array_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00206">array.h:206</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structMailbox_html_a1c10c2f7076d9e5bf58b8c495a6d264d"><div class="ttname"><a href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">Mailbox::mtime</a></div><div class="ttdeci">struct timespec mtime</div><div class="ttdoc">Time Mailbox was last changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00107">mailbox.h:107</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a></div><div class="ttdoc">Nondestructive flags change (IMAP) </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00082">mxapi.h:82</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="structEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00048">email.h:48</a></div></div>
<div class="ttc" id="structMdEmail_html_a6237939d0eb6bb492f79a65a1638a0b2"><div class="ttname"><a href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">MdEmail::canon_fname</a></div><div class="ttdeci">char * canon_fname</div><div class="ttdef"><b>Definition:</b> <a href="mdemail_8h_source.html#l00036">mdemail.h:36</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a></div><div class="ttdoc">Email list was changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00180">mailbox.h:180</a></div></div>
<div class="ttc" id="buffer_8c_html_ad057ee239ae5bcfd72cab3749036ab02"><div class="ttname"><a href="buffer_8c.html#ad057ee239ae5bcfd72cab3749036ab02">mutt_buffer_printf</a></div><div class="ttdeci">int mutt_buffer_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string overwriting a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00160">buffer.c:160</a></div></div>
<div class="ttc" id="maildir_8c_html_ab308421b848b9caed6fc2ac4612b1212"><div class="ttname"><a href="maildir_8c.html#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a></div><div class="ttdeci">#define MMC_NEW_DIR</div><div class="ttdoc">&amp;#39;new&amp;#39; directory changed </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00073">maildir.c:73</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a></div><div class="ttdoc">Mailbox was reopened. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00081">mxapi.h:81</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="structMdEmail_html"><div class="ttname"><a href="structMdEmail.html">MdEmail</a></div><div class="ttdoc">A Maildir Email helper. </div><div class="ttdef"><b>Definition:</b> <a href="mdemail_8h_source.html#l00033">mdemail.h:33</a></div></div>
<div class="ttc" id="array_8h_html_af50a4967d27a0531a1b10a23fc22fe05"><div class="ttname"><a href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a></div><div class="ttdeci">#define ARRAY_HEAD_INITIALIZER</div><div class="ttdoc">Static initializer for arrays. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00054">array.h:54</a></div></div>
<div class="ttc" id="file_8h_html_ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a></div><div class="ttdoc">File/dir&amp;#39;s mtime - last modified time. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00063">file.h:63</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="structEmail_html_ad14bdb707d3b5811734782cfb570d9eb"><div class="ttname"><a href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">Email::trash</a></div><div class="ttdeci">bool trash</div><div class="ttdoc">Message is marked as trashed on disk (used by the maildir_trash option) </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00060">email.h:60</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a></div><div class="ttdoc">Email list needs resorting. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00181">mailbox.h:181</a></div></div>
<div class="ttc" id="structMdEmail_html_a94a29619b71c7e15685ffe4eafc05144"><div class="ttname"><a href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">MdEmail::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdef"><b>Definition:</b> <a href="mdemail_8h_source.html#l00035">mdemail.h:35</a></div></div>
<div class="ttc" id="structEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00059">email.h:59</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="maildir_8c_html_adc6b83c9f03a35c0069a66bb739bf199"><div class="ttname"><a href="maildir_8c.html#adc6b83c9f03a35c0069a66bb739bf199">maildir_delayed_parsing</a></div><div class="ttdeci">void maildir_delayed_parsing(struct Mailbox *m, struct MdEmailArray *mda, struct Progress *progress)</div><div class="ttdoc">This function does the second parsing pass. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00597">maildir.c:597</a></div></div>
<div class="ttc" id="structEmail_html_a1e108ee29a0c6571211290457ab60756"><div class="ttname"><a href="structEmail.html#a1e108ee29a0c6571211290457ab60756">Email::purge</a></div><div class="ttdeci">bool purge</div><div class="ttdoc">Skip trash folder when deleting. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00046">email.h:46</a></div></div>
<div class="ttc" id="file_8c_html_abbb978a1060ce5d0adfe20b798b716bf"><div class="ttname"><a href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a></div><div class="ttdeci">int mutt_file_stat_timespec_compare(struct stat *sba, enum MuttStatType type, struct timespec *b)</div><div class="ttdoc">Compare stat info with a time value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01580">file.c:1580</a></div></div>
<div class="ttc" id="maildir_8c_html_aa32d2f8315f63e8e0c4e6712f7317a6e"><div class="ttname"><a href="maildir_8c.html#aa32d2f8315f63e8e0c4e6712f7317a6e">MMC_NO_DIRS</a></div><div class="ttdeci">#define MMC_NO_DIRS</div><div class="ttdoc">No directories changed. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00072">maildir.c:72</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a6f574867aa9db4d434adbc8af1f5f7e7"><div class="ttname"><a href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a></div><div class="ttdeci">bool mutt_strn_equal(const char *a, const char *b, size_t num)</div><div class="ttdoc">Check for equality of two strings (to a maximum), safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00593">string.c:593</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ae9b6bbaa52b6ce51f2a384fe500e028e"><div class="ttname"><a href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00446">string.c:446</a></div></div>
<div class="ttc" id="structEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00045">email.h:45</a></div></div>
<div class="ttc" id="structMaildirMboxData_html_a432d4f7db70109845edca85319390763"><div class="ttname"><a href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">MaildirMboxData::mtime_cur</a></div><div class="ttdeci">struct timespec mtime_cur</div><div class="ttdef"><b>Definition:</b> <a href="maildir_2mdata_8h_source.html#l00036">mdata.h:36</a></div></div>
<div class="ttc" id="monitor_8c_html_a94e3af91d956b84d21c8b94f67a51bbc"><div class="ttname"><a href="monitor_8c.html#a94e3af91d956b84d21c8b94f67a51bbc">MonitorContextChanged</a></div><div class="ttdeci">bool MonitorContextChanged</div><div class="ttdoc">true after the current mailbox has changed </div><div class="ttdef"><b>Definition:</b> <a href="monitor_8c_source.html#l00052">monitor.c:52</a></div></div>
<div class="ttc" id="structEmail_html_ac041599cfe41b49e7b8f9d752d07bb39"><div class="ttname"><a href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">Email::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path of Email (for local Mailboxes) </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00092">email.h:92</a></div></div>
<div class="ttc" id="structMailbox_html_a12ba98c349220ae172753f4f3294ed59"><div class="ttname"><a href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">Mailbox::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Mailbox has been modified. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00114">mailbox.h:114</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="maildir_8c_html_a3998b182ec8b6420eda0d014a473b1ef"><div class="ttname"><a href="maildir_8c.html#a3998b182ec8b6420eda0d014a473b1ef">maildir_parse_dir</a></div><div class="ttdeci">int maildir_parse_dir(struct Mailbox *m, struct MdEmailArray *mda, const char *subdir, struct Progress *progress)</div><div class="ttdoc">Read a Maildir mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00513">maildir.c:513</a></div></div>
<div class="ttc" id="maildir_8c_html_a71970dc06915beff8deee456e5af5ee4"><div class="ttname"><a href="maildir_8c.html#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a></div><div class="ttdeci">#define MMC_CUR_DIR</div><div class="ttdoc">&amp;#39;cur&amp;#39; directory changed </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00074">maildir.c:74</a></div></div>
<div class="ttc" id="hash_8c_html_a8bce8d11bb659d44bd796f72069ddb3d"><div class="ttname"><a href="hash_8c.html#a8bce8d11bb659d44bd796f72069ddb3d">mutt_hash_new</a></div><div class="ttdeci">struct HashTable * mutt_hash_new(size_t num_elems, HashFlags flags)</div><div class="ttdoc">Create a new Hash Table (with string keys) </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00251">hash.c:251</a></div></div>
<div class="ttc" id="hash_8h_html_a091c40218093334e24d80f897e76a977"><div class="ttname"><a href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_HASH_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8h_source.html#l00100">hash.h:100</a></div></div>
<div class="ttc" id="mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00208">mailbox.c:208</a></div></div>
<div class="ttc" id="structMaildirMboxData_html"><div class="ttname"><a href="structMaildirMboxData.html">MaildirMboxData</a></div><div class="ttdoc">Maildir-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_2mdata_8h_source.html#l00034">mdata.h:34</a></div></div>
<div class="ttc" id="array_8h_html_a7f1bf469a48c0a2618c94b7b8281c5bf"><div class="ttname"><a href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(head)</div><div class="ttdoc">The number of elements stored. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00083">array.h:83</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
<div class="ttc" id="maildir_2mdata_8c_html_a02bc1414732ddb9065ef531bc7170fb6"><div class="ttname"><a href="maildir_2mdata_8c.html#a02bc1414732ddb9065ef531bc7170fb6">maildir_mdata_get</a></div><div class="ttdeci">struct MaildirMboxData * maildir_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the private data for this Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_2mdata_8c_source.html#l00058">mdata.c:58</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_ga9c83b6e969c6eced44ccaa2fc21360ec_cgraph.svg" width="835" height="1219"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_ga9c83b6e969c6eced44ccaa2fc21360ec_icgraph.svg" width="366" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ga4be54a995c195a42265f6ac32d80355a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4be54a995c195a42265f6ac32d80355a">&#9670;&nbsp;</a></span>mh_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> mh_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -This function handles arrival of new mail and reopening of mh/maildir folders. </p>
<p>Things are getting rather complex because we don't have a well-defined "mailbox order", so the tricks from <a class="el" href="mbox_8c.html" title="Mbox local mailbox type. ">mbox.c</a> and <a class="el" href="mx_8c.html" title="Mailbox multiplexor. ">mx.c</a> won't work here.</p>
<p>Don't change this code unless you <em>really</em> understand what happens. </p>

<p class="definition">Definition at line <a class="el" href="mh_8c_source.html#l00885">885</a> of file <a class="el" href="mh_8c_source.html">mh.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;{</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordtype">char</span> buf[<a class="code" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keyword">struct </span>stat st, st_cur;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordtype">bool</span> modified = <span class="keyword">false</span>, occult = <span class="keyword">false</span>, flags_changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordtype">int</span> num_new = 0;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMhSequences.html">MhSequences</a> mhs = { 0 };</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keyword">struct </span><a class="code" href="structHashTable.html">HashTable</a> *fnames = NULL;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMaildirMboxData.html">MaildirMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="maildir_2mdata_8c.html#a02bc1414732ddb9065ef531bc7170fb6">maildir_mdata_get</a>(m);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_check_new = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;check_new&quot;</span>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">if</span> (!c_check_new)</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <a class="code" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(buf, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">if</span> (stat(buf, &amp;st) == -1)</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">/* create .mh_sequences when there isn&#39;t one. */</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/.mh_sequences&quot;</span>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordtype">int</span> rc = stat(buf, &amp;st_cur);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">if</span> ((rc == -1) &amp;&amp; (errno == ENOENT))</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">char</span> *tmp = NULL;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    FILE *fp = NULL;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mh_8c.html#a7e127a63a4d213e3bf15efce2460e818">mh_mkstemp</a>(m, &amp;fp, &amp;tmp))</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#a1cdf183d05e03b173070aa506d192822">mutt_file_safe_rename</a>(tmp, buf) == -1)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        unlink(tmp);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;tmp);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">if</span> ((rc == -1) &amp;&amp; (stat(buf, &amp;st_cur) == -1))</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    modified = <span class="keyword">true</span>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a>(&amp;st, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>) &gt; 0) ||</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      (<a class="code" href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a>(&amp;st_cur, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;mdata-&gt;<a class="code" href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">mtime_cur</a>) &gt; 0))</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    modified = <span class="keyword">true</span>;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordflow">if</span> (!modified)</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">/* Update the modification times on the mailbox.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">     * The monitor code notices changes in the open mailbox too quickly.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">     * In practice, this sometimes leads to all the new messages not being</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">     * noticed during the SAME group of mtime stat updates.  To work around</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">     * the problem, don&#39;t update the stat times for a monitor caused check. */</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="preprocessor">#ifdef USE_INOTIFY</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="monitor_8c.html#a94e3af91d956b84d21c8b94f67a51bbc">MonitorContextChanged</a>)</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="monitor_8c.html#a94e3af91d956b84d21c8b94f67a51bbc">MonitorContextChanged</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a>(&amp;mdata-&gt;<a class="code" href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">mtime_cur</a>, &amp;st_cur, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>, &amp;st, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keyword">struct </span>MdEmailArray mda = <a class="code" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <a class="code" href="mh_8c.html#aec94a56b213ec14d2043468f41785ed1">mh_parse_dir</a>(m, &amp;mda, NULL);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <a class="code" href="mh_8c.html#a3d2701c591b243c3ff1bd487f808987b">mh_delayed_parsing</a>(m, &amp;mda, NULL);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="sequence_8c.html#ad5089c5888bb5f8fba2348be50c943dc">mh_seq_read</a>(&amp;mhs, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m)) &lt; 0)</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="mh_8c.html#a77bdd8a27e35d9feaa1b128307caf80a">mh_update_maildir</a>(&amp;mda, &amp;mhs);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="sequence_8c.html#a86fe1d2831cdac159da58fba06a69349">mh_seq_free</a>(&amp;mhs);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">/* check for modifications and adjust flags */</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  fnames = <a class="code" href="hash_8c.html#a8bce8d11bb659d44bd796f72069ddb3d">mutt_hash_new</a>(<a class="code" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(&amp;mda), <a class="code" href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMdEmail.html">MdEmail</a> *md = NULL;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMdEmail.html">MdEmail</a> **mdp = NULL;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(mdp, &amp;mda)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    md = *mdp;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="comment">/* the hash key must survive past the header, which is freed below. */</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    md-&gt;<a class="code" href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">canon_fname</a> = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="hash_8c.html#a2bd546db19eed6d3e95ea316c6c782ca">mutt_hash_insert</a>(fnames, md-&gt;<a class="code" href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">canon_fname</a>, md);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    md = <a class="code" href="hash_8c.html#a58acf06077aef78a15c60f37c72403ce">mutt_hash_find</a>(fnames, e-&gt;<a class="code" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (md &amp;&amp; md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a> &amp;&amp; <a class="code" href="email_2email_8c.html#a3d20f2e3c0991425b91d9403a038a51e">email_cmp_strict</a>(e, md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>))</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="comment">/* found the right message */</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>)</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="maildir_2lib_8h.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a>(m, e, md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>))</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          flags_changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;md-&gt;<a class="code" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">else</span> <span class="comment">/* message has disappeared */</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      occult = <span class="keyword">true</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">/* destroy the file name hash */</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <a class="code" href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a>(&amp;fnames);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">/* If we didn&#39;t just get new mail, update the tables. */</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">if</span> (occult)</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a>);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">/* Incorporate new messages */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  num_new = <a class="code" href="maildir_2private_8h.html#ae5a01751195fc99d887bbff650882e8c">maildir_move_to_mailbox</a>(m, &amp;mda);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">if</span> (num_new &gt; 0)</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <a class="code" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;mda);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span> (occult)</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">if</span> (num_new &gt; 0)</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">if</span> (flags_changed)</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div><div class="ttc" id="hash_8c_html_a58acf06077aef78a15c60f37c72403ce"><div class="ttname"><a href="hash_8c.html#a58acf06077aef78a15c60f37c72403ce">mutt_hash_find</a></div><div class="ttdeci">void * mutt_hash_find(const struct HashTable *table, const char *strkey)</div><div class="ttdoc">Find the HashElem data in a Hash Table element using a key. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00354">hash.c:354</a></div></div>
<div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="hash_8c_html_a2bd546db19eed6d3e95ea316c6c782ca"><div class="ttname"><a href="hash_8c.html#a2bd546db19eed6d3e95ea316c6c782ca">mutt_hash_insert</a></div><div class="ttdeci">struct HashElem * mutt_hash_insert(struct HashTable *table, const char *strkey, void *data)</div><div class="ttdoc">Add a new element to the Hash Table (with string keys) </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00327">hash.c:327</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="structHashTable_html"><div class="ttname"><a href="structHashTable.html">HashTable</a></div><div class="ttdoc">A Hash Table. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8h_source.html#l00087">hash.h:87</a></div></div>
<div class="ttc" id="email_2email_8c_html_ae9f719d3fc31d00b92bcf9f77d56ee67"><div class="ttname"><a href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a></div><div class="ttdeci">void email_free(struct Email **ptr)</div><div class="ttdoc">Free an Email. </div><div class="ttdef"><b>Definition:</b> <a href="email_2email_8c_source.html#l00044">email.c:44</a></div></div>
<div class="ttc" id="maildir_2lib_8h_html_a79713d04e839c3782ef9e0b7bc25e9c0"><div class="ttname"><a href="maildir_2lib_8h.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a></div><div class="ttdeci">bool maildir_update_flags(struct Mailbox *m, struct Email *e_old, struct Email *e_new)</div><div class="ttdoc">Update the mailbox flags. </div><div class="ttdef"><b>Definition:</b> <a href="shared_8c_source.html#l00122">shared.c:122</a></div></div>
<div class="ttc" id="sequence_8c_html_a86fe1d2831cdac159da58fba06a69349"><div class="ttname"><a href="sequence_8c.html#a86fe1d2831cdac159da58fba06a69349">mh_seq_free</a></div><div class="ttdeci">void mh_seq_free(struct MhSequences *mhs)</div><div class="ttdoc">Free some sequences. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8c_source.html#l00067">sequence.c:67</a></div></div>
<div class="ttc" id="hash_8c_html_afa22b7f78bbf1b59a4a2bd4bdd20948b"><div class="ttname"><a href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a></div><div class="ttdeci">void mutt_hash_free(struct HashTable **ptr)</div><div class="ttdoc">Free a hash table. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00449">hash.c:449</a></div></div>
<div class="ttc" id="file_8c_html_a6a21c63cfd81ee58a7e1b111249ef85d"><div class="ttname"><a href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a></div><div class="ttdeci">void mutt_file_get_stat_timespec(struct timespec *dest, struct stat *sb, enum MuttStatType type)</div><div class="ttdoc">Read the stat() time into a time value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01540">file.c:1540</a></div></div>
<div class="ttc" id="maildir_2private_8h_html_ae5a01751195fc99d887bbff650882e8c"><div class="ttname"><a href="maildir_2private_8h.html#ae5a01751195fc99d887bbff650882e8c">maildir_move_to_mailbox</a></div><div class="ttdeci">int maildir_move_to_mailbox(struct Mailbox *m, struct MdEmailArray *mda)</div><div class="ttdoc">Copy the Maildir list to the Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="shared_8c_source.html#l00075">shared.c:75</a></div></div>
<div class="ttc" id="array_8h_html_aaa8805bd90a2015d8f5eb0fe3bb13b3f"><div class="ttname"><a href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a></div><div class="ttdeci">#define ARRAY_FREE(head)</div><div class="ttdoc">Release all memory. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00198">array.h:198</a></div></div>
<div class="ttc" id="array_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00206">array.h:206</a></div></div>
<div class="ttc" id="structMailbox_html_a1c10c2f7076d9e5bf58b8c495a6d264d"><div class="ttname"><a href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">Mailbox::mtime</a></div><div class="ttdeci">struct timespec mtime</div><div class="ttdoc">Time Mailbox was last changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00107">mailbox.h:107</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a></div><div class="ttdoc">Nondestructive flags change (IMAP) </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00082">mxapi.h:82</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a4c2560f787bd1226b977992c16860c98"><div class="ttname"><a href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00370">string.c:370</a></div></div>
<div class="ttc" id="structEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00048">email.h:48</a></div></div>
<div class="ttc" id="structMdEmail_html_a6237939d0eb6bb492f79a65a1638a0b2"><div class="ttname"><a href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">MdEmail::canon_fname</a></div><div class="ttdeci">char * canon_fname</div><div class="ttdef"><b>Definition:</b> <a href="mdemail_8h_source.html#l00036">mdemail.h:36</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a></div><div class="ttdoc">Email list was changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00180">mailbox.h:180</a></div></div>
<div class="ttc" id="sequence_8c_html_ad5089c5888bb5f8fba2348be50c943dc"><div class="ttname"><a href="sequence_8c.html#ad5089c5888bb5f8fba2348be50c943dc">mh_seq_read</a></div><div class="ttdeci">int mh_seq_read(struct MhSequences *mhs, const char *path)</div><div class="ttdoc">Read a set of MH sequences. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8c_source.html#l00381">sequence.c:381</a></div></div>
<div class="ttc" id="structMhSequences_html"><div class="ttname"><a href="structMhSequences.html">MhSequences</a></div><div class="ttdoc">Set of MH sequence numbers. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00040">sequence.h:40</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a></div><div class="ttdoc">Mailbox was reopened. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00081">mxapi.h:81</a></div></div>
<div class="ttc" id="structMdEmail_html"><div class="ttname"><a href="structMdEmail.html">MdEmail</a></div><div class="ttdoc">A Maildir Email helper. </div><div class="ttdef"><b>Definition:</b> <a href="mdemail_8h_source.html#l00033">mdemail.h:33</a></div></div>
<div class="ttc" id="mh_8c_html_a3d2701c591b243c3ff1bd487f808987b"><div class="ttname"><a href="mh_8c.html#a3d2701c591b243c3ff1bd487f808987b">mh_delayed_parsing</a></div><div class="ttdeci">void mh_delayed_parsing(struct Mailbox *m, struct MdEmailArray *mda, struct Progress *progress)</div><div class="ttdoc">This function does the second parsing pass. </div><div class="ttdef"><b>Definition:</b> <a href="mh_8c_source.html#l00607">mh.c:607</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="array_8h_html_af50a4967d27a0531a1b10a23fc22fe05"><div class="ttname"><a href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a></div><div class="ttdeci">#define ARRAY_HEAD_INITIALIZER</div><div class="ttdoc">Static initializer for arrays. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00054">array.h:54</a></div></div>
<div class="ttc" id="file_8h_html_ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a></div><div class="ttdoc">File/dir&amp;#39;s mtime - last modified time. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00063">file.h:63</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a></div><div class="ttdoc">Email list needs resorting. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00181">mailbox.h:181</a></div></div>
<div class="ttc" id="structMdEmail_html_a94a29619b71c7e15685ffe4eafc05144"><div class="ttname"><a href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">MdEmail::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdef"><b>Definition:</b> <a href="mdemail_8h_source.html#l00035">mdemail.h:35</a></div></div>
<div class="ttc" id="structEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00059">email.h:59</a></div></div>
<div class="ttc" id="mutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00040">mutt.h:40</a></div></div>
<div class="ttc" id="mh_8c_html_a77bdd8a27e35d9feaa1b128307caf80a"><div class="ttname"><a href="mh_8c.html#a77bdd8a27e35d9feaa1b128307caf80a">mh_update_maildir</a></div><div class="ttdeci">void mh_update_maildir(struct MdEmailArray *mda, struct MhSequences *mhs)</div><div class="ttdoc">Update our record of flags. </div><div class="ttdef"><b>Definition:</b> <a href="mh_8c_source.html#l00260">mh.c:260</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="file_8c_html_abbb978a1060ce5d0adfe20b798b716bf"><div class="ttname"><a href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a></div><div class="ttdeci">int mutt_file_stat_timespec_compare(struct stat *sba, enum MuttStatType type, struct timespec *b)</div><div class="ttdoc">Compare stat info with a time value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01580">file.c:1580</a></div></div>
<div class="ttc" id="mh_8c_html_a7e127a63a4d213e3bf15efce2460e818"><div class="ttname"><a href="mh_8c.html#a7e127a63a4d213e3bf15efce2460e818">mh_mkstemp</a></div><div class="ttdeci">bool mh_mkstemp(struct Mailbox *m, FILE **fp, char **tgt)</div><div class="ttdoc">Create a temporary file. </div><div class="ttdef"><b>Definition:</b> <a href="mh_8c_source.html#l00077">mh.c:77</a></div></div>
<div class="ttc" id="email_2email_8c_html_a3d20f2e3c0991425b91d9403a038a51e"><div class="ttname"><a href="email_2email_8c.html#a3d20f2e3c0991425b91d9403a038a51e">email_cmp_strict</a></div><div class="ttdeci">bool email_cmp_strict(const struct Email *e1, const struct Email *e2)</div><div class="ttdoc">Strictly compare message emails. </div><div class="ttdef"><b>Definition:</b> <a href="email_2email_8c_source.html#l00100">email.c:100</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination) </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00749">string.c:749</a></div></div>
<div class="ttc" id="structMaildirMboxData_html_a432d4f7db70109845edca85319390763"><div class="ttname"><a href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">MaildirMboxData::mtime_cur</a></div><div class="ttdeci">struct timespec mtime_cur</div><div class="ttdef"><b>Definition:</b> <a href="maildir_2mdata_8h_source.html#l00036">mdata.h:36</a></div></div>
<div class="ttc" id="monitor_8c_html_a94e3af91d956b84d21c8b94f67a51bbc"><div class="ttname"><a href="monitor_8c.html#a94e3af91d956b84d21c8b94f67a51bbc">MonitorContextChanged</a></div><div class="ttdeci">bool MonitorContextChanged</div><div class="ttdoc">true after the current mailbox has changed </div><div class="ttdef"><b>Definition:</b> <a href="monitor_8c_source.html#l00052">monitor.c:52</a></div></div>
<div class="ttc" id="structEmail_html_ac041599cfe41b49e7b8f9d752d07bb39"><div class="ttname"><a href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">Email::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path of Email (for local Mailboxes) </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00092">email.h:92</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="mh_8c_html_aec94a56b213ec14d2043468f41785ed1"><div class="ttname"><a href="mh_8c.html#aec94a56b213ec14d2043468f41785ed1">mh_parse_dir</a></div><div class="ttdeci">int mh_parse_dir(struct Mailbox *m, struct MdEmailArray *mda, struct Progress *progress)</div><div class="ttdoc">Read a Maildir mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mh_8c_source.html#l00501">mh.c:501</a></div></div>
<div class="ttc" id="structMailbox_html_a12ba98c349220ae172753f4f3294ed59"><div class="ttname"><a href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">Mailbox::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Mailbox has been modified. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00114">mailbox.h:114</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="hash_8c_html_a8bce8d11bb659d44bd796f72069ddb3d"><div class="ttname"><a href="hash_8c.html#a8bce8d11bb659d44bd796f72069ddb3d">mutt_hash_new</a></div><div class="ttdeci">struct HashTable * mutt_hash_new(size_t num_elems, HashFlags flags)</div><div class="ttdoc">Create a new Hash Table (with string keys) </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00251">hash.c:251</a></div></div>
<div class="ttc" id="hash_8h_html_a091c40218093334e24d80f897e76a977"><div class="ttname"><a href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_HASH_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8h_source.html#l00100">hash.h:100</a></div></div>
<div class="ttc" id="mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00208">mailbox.c:208</a></div></div>
<div class="ttc" id="structMaildirMboxData_html"><div class="ttname"><a href="structMaildirMboxData.html">MaildirMboxData</a></div><div class="ttdoc">Maildir-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_2mdata_8h_source.html#l00034">mdata.h:34</a></div></div>
<div class="ttc" id="array_8h_html_a7f1bf469a48c0a2618c94b7b8281c5bf"><div class="ttname"><a href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(head)</div><div class="ttdoc">The number of elements stored. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00083">array.h:83</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
<div class="ttc" id="file_8c_html_a1cdf183d05e03b173070aa506d192822"><div class="ttname"><a href="file_8c.html#a1cdf183d05e03b173070aa506d192822">mutt_file_safe_rename</a></div><div class="ttdeci">int mutt_file_safe_rename(const char *src, const char *target)</div><div class="ttdoc">NFS-safe renaming of files. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00354">file.c:354</a></div></div>
<div class="ttc" id="maildir_2mdata_8c_html_a02bc1414732ddb9065ef531bc7170fb6"><div class="ttname"><a href="maildir_2mdata_8c.html#a02bc1414732ddb9065ef531bc7170fb6">maildir_mdata_get</a></div><div class="ttdeci">struct MaildirMboxData * maildir_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the private data for this Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_2mdata_8c_source.html#l00058">mdata.c:58</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_ga4be54a995c195a42265f6ac32d80355a_cgraph.svg" width="571" height="1219"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_ga4be54a995c195a42265f6ac32d80355a_icgraph.svg" width="315" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="gafb376aac365fa068eeb370915b2d309d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafb376aac365fa068eeb370915b2d309d">&#9670;&nbsp;</a></span>mbox_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> mbox_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4" title="Mailbox was reopened. ">MX_STATUS_REOPENED</a></td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> has been reopened </td></tr>
    <tr><td class="paramname"><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b" title="New mail received in Mailbox. ">MX_STATUS_NEW_MAIL</a></td><td>New mail has arrived </td></tr>
    <tr><td class="paramname"><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432a2399001ba2822d6d9b1317e8dbe81f4b" title="Couldn&#39;t lock the Mailbox. ">MX_STATUS_LOCKED</a></td><td>Couldn't lock the file </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mbox_8c_source.html#l01023">1023</a> of file <a class="el" href="mbox_8c_source.html">mbox.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;{</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMboxAccountData.html">MboxAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="mbox_8c.html#a419147baf9061c723560f16f5624d585">mbox_adata_get</a>(m);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">if</span> (!adata)</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">if</span> (!adata-&gt;<a class="code" href="structMboxAccountData.html#a5b98e08c3191fc9525c5785a68fd6281">fp</a>)</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__mx__mbox__open.html#gaa0908167a905e8a9d3e3541e7c5a416e">mbox_mbox_open</a>(m) != <a class="code" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cadac71ca3ece0dbda0bb22552738d80905b">MX_OPEN_OK</a>)</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keyword">struct </span>stat st;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keywordtype">bool</span> unlock = <span class="keyword">false</span>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keywordtype">bool</span> modified = <span class="keyword">false</span>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">if</span> (stat(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), &amp;st) == 0)</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a>(&amp;st, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>) == 0) &amp;&amp;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        (st.st_size == m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a>))</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (st.st_size == m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a>)</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="comment">/* the file was touched, but it is still the same length, so just exit */</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>, &amp;st, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (st.st_size &gt; m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a>)</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">/* lock the file if it isn&#39;t already */</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">if</span> (!adata-&gt;<a class="code" href="structMboxAccountData.html#abbc038cf6dab4ae621b3c820f5c10251">locked</a>)</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <a class="code" href="signal_8c.html#aa6c49e5535cdffeffd2cd4eee28bc96b">mutt_sig_block</a>();</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mbox_8c.html#a1c304c29562f920b2ba11fabcc14c268">mbox_lock_mailbox</a>(m, <span class="keyword">false</span>, <span class="keyword">false</span>) == -1)</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;          <a class="code" href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a>();</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;          <span class="comment">/* we couldn&#39;t lock the mailbox, but nothing serious happened:</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">           * probably the new mail arrived: no reason to wait till we can</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">           * parse it: we&#39;ll get it on the next pass */</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432a2399001ba2822d6d9b1317e8dbe81f4b">MX_STATUS_LOCKED</a>;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        unlock = 1;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="comment">/* Check to make sure that the only change to the mailbox is that</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">       * message(s) were appended to this file.  My heuristic is that we should</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">       * see the message separator at *exactly* what used to be the end of the</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">       * folder.  */</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="keywordtype">char</span> buf[1024];</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keywordflow">if</span> (fseeko(adata-&gt;<a class="code" href="structMboxAccountData.html#a5b98e08c3191fc9525c5785a68fd6281">fp</a>, m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a>, SEEK_SET) != 0)</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;#1 fseek() failed\n&quot;</span>);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">if</span> (fgets(buf, <span class="keyword">sizeof</span>(buf), adata-&gt;<a class="code" href="structMboxAccountData.html#a5b98e08c3191fc9525c5785a68fd6281">fp</a>))</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">if</span> (((m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525">MUTT_MBOX</a>) &amp;&amp; <a class="code" href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a>(buf, <span class="stringliteral">&quot;From &quot;</span>)) ||</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            ((m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374">MUTT_MMDF</a>) &amp;&amp; <a class="code" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(buf, <a class="code" href="mbox_2lib_8h.html#a02e41ebb72c6ab451fed824a9c41283c">MMDF_SEP</a>)))</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;          <span class="keywordflow">if</span> (fseeko(adata-&gt;<a class="code" href="structMboxAccountData.html#a5b98e08c3191fc9525c5785a68fd6281">fp</a>, m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a>, SEEK_SET) != 0)</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;#2 fseek() failed\n&quot;</span>);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;          <span class="keywordtype">int</span> old_msg_count = m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;          <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525">MUTT_MBOX</a>)</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <a class="code" href="mbox_8c.html#a0c856532edc1e1040922489ada94cc0d">mbox_parse_mailbox</a>(m);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <a class="code" href="mbox_8c.html#ad71d97d10ebedc0dd20050efed3d997c">mmdf_parse_mailbox</a>(m);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;          <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &gt; old_msg_count)</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;          <span class="comment">/* Only unlock the folder if it was locked inside of this routine.</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">           * It may have been locked elsewhere, like in</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">           * mutt_checkpoint_mailbox().  */</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;          <span class="keywordflow">if</span> (unlock)</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;          {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <a class="code" href="mbox_8c.html#aad6c03c38f626757199e4fd0835253ae">mbox_unlock_mailbox</a>(m);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <a class="code" href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a>();</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>; <span class="comment">/* signal that new mail arrived */</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;          modified = <span class="keyword">true</span>;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;fgets returned NULL\n&quot;</span>);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        modified = <span class="keyword">true</span>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      modified = <span class="keyword">true</span>;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">if</span> (modified)</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mbox_8c.html#addea22f21e2c96c407018be2afe1cd90">reopen_mailbox</a>(m) != -1)</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <span class="keywordflow">if</span> (unlock)</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <a class="code" href="mbox_8c.html#aad6c03c38f626757199e4fd0835253ae">mbox_unlock_mailbox</a>(m);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a>();</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">/* fatal error */</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="mbox_8c.html#aad6c03c38f626757199e4fd0835253ae">mbox_unlock_mailbox</a>(m);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <a class="code" href="mx_8c.html#ac883dc0d1391457ac62efe762067a544">mx_fastclose_mailbox</a>(m);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <a class="code" href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a>();</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Mailbox was corrupted&quot;</span>));</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;}</div><div class="ttc" id="mutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00904">string.c:904</a></div></div>
<div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="signal_8c_html_aa9356c41baa1b35d3a7719f90570e6b7"><div class="ttname"><a href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a></div><div class="ttdeci">void mutt_sig_unblock(void)</div><div class="ttdoc">Restore previously blocked signals. </div><div class="ttdef"><b>Definition:</b> <a href="signal_8c_source.html#l00168">signal.c:168</a></div></div>
<div class="ttc" id="structMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00105">mailbox.h:105</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="structMailbox_html_ace276d581d6d299ecf227be214841148"><div class="ttname"><a href="structMailbox.html#ace276d581d6d299ecf227be214841148">Mailbox::size</a></div><div class="ttdeci">off_t size</div><div class="ttdoc">Size of the Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00087">mailbox.h:87</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="structMboxAccountData_html_abbc038cf6dab4ae621b3c820f5c10251"><div class="ttname"><a href="structMboxAccountData.html#abbc038cf6dab4ae621b3c820f5c10251">MboxAccountData::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdoc">is the mailbox locked? </div><div class="ttdef"><b>Definition:</b> <a href="mbox_2lib_8h_source.html#l00053">lib.h:53</a></div></div>
<div class="ttc" id="file_8c_html_a6a21c63cfd81ee58a7e1b111249ef85d"><div class="ttname"><a href="file_8c.html#a6a21c63cfd81ee58a7e1b111249ef85d">mutt_file_get_stat_timespec</a></div><div class="ttdeci">void mutt_file_get_stat_timespec(struct timespec *dest, struct stat *sb, enum MuttStatType type)</div><div class="ttdoc">Read the stat() time into a time value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01540">file.c:1540</a></div></div>
<div class="ttc" id="structMboxAccountData_html"><div class="ttname"><a href="structMboxAccountData.html">MboxAccountData</a></div><div class="ttdoc">Mbox-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="mbox_8c_html_a0c856532edc1e1040922489ada94cc0d"><div class="ttname"><a href="mbox_8c.html#a0c856532edc1e1040922489ada94cc0d">mbox_parse_mailbox</a></div><div class="ttdeci">static enum MxOpenReturns mbox_parse_mailbox(struct Mailbox *m)</div><div class="ttdoc">Read a mailbox from disk. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_8c_source.html#l00349">mbox.c:349</a></div></div>
<div class="ttc" id="structMailbox_html_a1c10c2f7076d9e5bf58b8c495a6d264d"><div class="ttname"><a href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">Mailbox::mtime</a></div><div class="ttdeci">struct timespec mtime</div><div class="ttdoc">Time Mailbox was last changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00107">mailbox.h:107</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a></div><div class="ttdoc">Email list was changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00180">mailbox.h:180</a></div></div>
<div class="ttc" id="mbox_8c_html_addea22f21e2c96c407018be2afe1cd90"><div class="ttname"><a href="mbox_8c.html#addea22f21e2c96c407018be2afe1cd90">reopen_mailbox</a></div><div class="ttdeci">static int reopen_mailbox(struct Mailbox *m)</div><div class="ttdoc">Close and reopen a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_8c_source.html#l00542">mbox.c:542</a></div></div>
<div class="ttc" id="mbox_8c_html_ad71d97d10ebedc0dd20050efed3d997c"><div class="ttname"><a href="mbox_8c.html#ad71d97d10ebedc0dd20050efed3d997c">mmdf_parse_mailbox</a></div><div class="ttdeci">static enum MxOpenReturns mmdf_parse_mailbox(struct Mailbox *m)</div><div class="ttdoc">Read a mailbox in MMDF format. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_8c_source.html#l00182">mbox.c:182</a></div></div>
<div class="ttc" id="mxapi_8h_html_a95aa6f9d458f82609e795a7f449f4cadac71ca3ece0dbda0bb22552738d80905b"><div class="ttname"><a href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cadac71ca3ece0dbda0bb22552738d80905b">MX_OPEN_OK</a></div><div class="ttdoc">Open succeeded. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00090">mxapi.h:90</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a></div><div class="ttdoc">Mailbox was reopened. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00081">mxapi.h:81</a></div></div>
<div class="ttc" id="mbox_8c_html_a1c304c29562f920b2ba11fabcc14c268"><div class="ttname"><a href="mbox_8c.html#a1c304c29562f920b2ba11fabcc14c268">mbox_lock_mailbox</a></div><div class="ttdeci">static int mbox_lock_mailbox(struct Mailbox *m, bool excl, bool retry)</div><div class="ttdoc">Lock a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_8c_source.html#l00140">mbox.c:140</a></div></div>
<div class="ttc" id="group__mx__mbox__open_html_gaa0908167a905e8a9d3e3541e7c5a416e"><div class="ttname"><a href="group__mx__mbox__open.html#gaa0908167a905e8a9d3e3541e7c5a416e">mbox_mbox_open</a></div><div class="ttdeci">static enum MxOpenReturns mbox_mbox_open(struct Mailbox *m)</div><div class="ttdoc">Open a Mailbox - Implements MxOps::mbox_open() -. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_8c_source.html#l00925">mbox.c:925</a></div></div>
<div class="ttc" id="mx_8c_html_ac883dc0d1391457ac62efe762067a544"><div class="ttname"><a href="mx_8c.html#ac883dc0d1391457ac62efe762067a544">mx_fastclose_mailbox</a></div><div class="ttdeci">void mx_fastclose_mailbox(struct Mailbox *m)</div><div class="ttdoc">free up memory associated with the Mailbox </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00429">mx.c:429</a></div></div>
<div class="ttc" id="file_8h_html_ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a></div><div class="ttdoc">File/dir&amp;#39;s mtime - last modified time. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00063">file.h:63</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a9bf968304f4f9b49e24215cb2e28d22d"><div class="ttname"><a href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a></div><div class="ttdeci">size_t mutt_str_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00160">string.c:160</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374">MUTT_MMDF</a></div><div class="ttdoc">&amp;#39;mmdf&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00049">mailbox.h:49</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432a2399001ba2822d6d9b1317e8dbe81f4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432a2399001ba2822d6d9b1317e8dbe81f4b">MX_STATUS_LOCKED</a></div><div class="ttdoc">Couldn&amp;#39;t lock the Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00080">mxapi.h:80</a></div></div>
<div class="ttc" id="mbox_8c_html_a419147baf9061c723560f16f5624d585"><div class="ttname"><a href="mbox_8c.html#a419147baf9061c723560f16f5624d585">mbox_adata_get</a></div><div class="ttdeci">static struct MboxAccountData * mbox_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the private data associated with a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_8c_source.html#l00100">mbox.c:100</a></div></div>
<div class="ttc" id="file_8c_html_abbb978a1060ce5d0adfe20b798b716bf"><div class="ttname"><a href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a></div><div class="ttdeci">int mutt_file_stat_timespec_compare(struct stat *sba, enum MuttStatType type, struct timespec *b)</div><div class="ttdoc">Compare stat info with a time value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01580">file.c:1580</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="mbox_2lib_8h_html_a02e41ebb72c6ab451fed824a9c41283c"><div class="ttname"><a href="mbox_2lib_8h.html#a02e41ebb72c6ab451fed824a9c41283c">MMDF_SEP</a></div><div class="ttdeci">#define MMDF_SEP</div><div class="ttdef"><b>Definition:</b> <a href="mbox_2lib_8h_source.html#l00060">lib.h:60</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525">MUTT_MBOX</a></div><div class="ttdoc">&amp;#39;mbox&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00048">mailbox.h:48</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="mbox_8c_html_aad6c03c38f626757199e4fd0835253ae"><div class="ttname"><a href="mbox_8c.html#aad6c03c38f626757199e4fd0835253ae">mbox_unlock_mailbox</a></div><div class="ttdeci">static void mbox_unlock_mailbox(struct Mailbox *m)</div><div class="ttdoc">Unlock a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_8c_source.html#l00162">mbox.c:162</a></div></div>
<div class="ttc" id="structMboxAccountData_html_a5b98e08c3191fc9525c5785a68fd6281"><div class="ttname"><a href="structMboxAccountData.html#a5b98e08c3191fc9525c5785a68fd6281">MboxAccountData::fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdoc">Mailbox file. </div><div class="ttdef"><b>Definition:</b> <a href="mbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
<div class="ttc" id="signal_8c_html_aa6c49e5535cdffeffd2cd4eee28bc96b"><div class="ttname"><a href="signal_8c.html#aa6c49e5535cdffeffd2cd4eee28bc96b">mutt_sig_block</a></div><div class="ttdeci">void mutt_sig_block(void)</div><div class="ttdoc">Block signals during critical operations. </div><div class="ttdef"><b>Definition:</b> <a href="signal_8c_source.html#l00150">signal.c:150</a></div></div>
<div class="ttc" id="mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00208">mailbox.c:208</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_gafb376aac365fa068eeb370915b2d309d_cgraph.svg" width="800" height="940"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_gafb376aac365fa068eeb370915b2d309d_icgraph.svg" width="347" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="gafc1020d6388163ca2f05c682fac382b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc1020d6388163ca2f05c682fac382b6">&#9670;&nbsp;</a></span>nntp_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> nntp_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...">MxStatus</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="nntp_8c_source.html#l02472">2472</a> of file <a class="el" href="nntp_8c_source.html">nntp.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;{</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> rc = <a class="code" href="nntp_8c.html#a7976c474921669134da49b0c5fcdc8d6">check_mailbox</a>(m);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="keywordflow">if</span> (rc == <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>)</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  {</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keyword">struct </span><a class="code" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = m-&gt;<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    <span class="keyword">struct </span><a class="code" href="structNntpAccountData.html">NntpAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = mdata-&gt;<a class="code" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <a class="code" href="nntp_2lib_8h.html#a64fdec9977db62a95daa5af59d280673">nntp_newsrc_close</a>(adata);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;}</div><div class="ttc" id="structNntpMboxData_html_a5fe54958715f3c542698ee11e6fd6687"><div class="ttname"><a href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">NntpMboxData::adata</a></div><div class="ttdeci">struct NntpAccountData * adata</div><div class="ttdef"><b>Definition:</b> <a href="nntp_2mdata_8h_source.html#l00047">mdata.h:47</a></div></div>
<div class="ttc" id="nntp_2lib_8h_html_a64fdec9977db62a95daa5af59d280673"><div class="ttname"><a href="nntp_2lib_8h.html#a64fdec9977db62a95daa5af59d280673">nntp_newsrc_close</a></div><div class="ttdeci">void nntp_newsrc_close(struct NntpAccountData *adata)</div><div class="ttdoc">Unlock and close .newsrc file. </div><div class="ttdef"><b>Definition:</b> <a href="newsrc_8c_source.html#l00118">newsrc.c:118</a></div></div>
<div class="ttc" id="structNntpAccountData_html"><div class="ttname"><a href="structNntpAccountData.html">NntpAccountData</a></div><div class="ttdoc">NNTP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="nntp_2adata_8h_source.html#l00036">adata.h:36</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="nntp_8c_html_a7976c474921669134da49b0c5fcdc8d6"><div class="ttname"><a href="nntp_8c.html#a7976c474921669134da49b0c5fcdc8d6">check_mailbox</a></div><div class="ttdeci">static enum MxStatus check_mailbox(struct Mailbox *m)</div><div class="ttdoc">Check current newsgroup for new articles. </div><div class="ttdef"><b>Definition:</b> <a href="nntp_8c_source.html#l01433">nntp.c:1433</a></div></div>
<div class="ttc" id="structNntpMboxData_html"><div class="ttname"><a href="structNntpMboxData.html">NntpMboxData</a></div><div class="ttdoc">NNTP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="nntp_2mdata_8h_source.html#l00032">mdata.h:32</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a></div><div class="ttdeci">MxStatus</div><div class="ttdoc">Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00075">mxapi.h:75</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_gafc1020d6388163ca2f05c682fac382b6_cgraph.svg" width="512" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="gafd9ac1fea250b07e3ea64493021aaa06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd9ac1fea250b07e3ea64493021aaa06">&#9670;&nbsp;</a></span>nm_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> nm_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...">MxStatus</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l02092">2092</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;{</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="keyword">struct </span><a class="code" href="structNmMboxData.html">NmMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="notmuch_2mdata_8c.html#a819fc59593f985a02abe21f26037bc74">nm_mdata_get</a>(m);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  time_t <a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a> = 0;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordflow">if</span> (!mdata || (<a class="code" href="notmuch_2db_8c.html#a8e76f30f20c116709ae6c5df78e6c349">nm_db_get_mtime</a>(m, &amp;mtime) != 0))</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordtype">int</span> new_flags = 0;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="keywordtype">bool</span> occult = <span class="keyword">false</span>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>.<a class="code" href="structtimespec.html#afc3302668d7cb5952f590da69fdd4955">tv_sec</a> &gt;= mtime)</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: check unnecessary (db=%lu mailbox=%lu)\n&quot;</span>, mtime,</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;               m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>.<a class="code" href="structtimespec.html#afc3302668d7cb5952f590da69fdd4955">tv_sec</a>);</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  }</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: checking (db=%lu mailbox=%lu)\n&quot;</span>, mtime, m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>.<a class="code" href="structtimespec.html#afc3302668d7cb5952f590da69fdd4955">tv_sec</a>);</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  notmuch_query_t *q = <a class="code" href="notmuch_8c.html#a8aa5ba34ffb0be079f29fe58bb83c280">get_query</a>(m, <span class="keyword">false</span>);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="keywordflow">if</span> (!q)</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: start checking (count=%d)\n&quot;</span>, m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>);</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  mdata-&gt;<a class="code" href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">oldmsgcount</a> = m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  {</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <span class="keywordtype">int</span> limit = <a class="code" href="notmuch_8c.html#a686a65345db081f8d66accfc760e909b">get_limit</a>(mdata);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  notmuch_messages_t *msgs = <a class="code" href="notmuch_8c.html#afebce6fa84d3ae51d9d2ce67c56448f6">get_messages</a>(q);</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="comment">// TODO: Analyze impact of removing this version guard.</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="preprocessor">#if LIBNOTMUCH_CHECK_VERSION(5, 0, 0)</span></div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="keywordflow">if</span> (!msgs)</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="preprocessor">#elif LIBNOTMUCH_CHECK_VERSION(4, 3, 0)</span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="keywordflow">if</span> (!msgs)</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keyword">struct </span><a class="code" href="structHeaderCache.html">HeaderCache</a> *h = <a class="code" href="notmuch_8c.html#a510f5d77650516cdaa69fd107baca758">nm_hcache_open</a>(m);</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; notmuch_messages_valid(msgs) &amp;&amp; ((limit == 0) || (i &lt; limit));</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;       notmuch_messages_move_to_next(msgs), i++)</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  {</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    notmuch_message_t *msg = notmuch_messages_get(msgs);</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = <a class="code" href="notmuch_8c.html#af785de5c861971b9a7767e94b5b0a04b">get_mutt_email</a>(m, msg);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    {</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      <span class="comment">/* new email */</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <a class="code" href="notmuch_8c.html#afda128ba745fba822ebb49441a35d8e3">append_message</a>(h, m, NULL, msg, <span class="keyword">false</span>);</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;      notmuch_message_destroy(msg);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <span class="comment">/* message already exists, merge flags */</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="comment">/* Check to see if the message has moved to a different subdirectory.</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">     * If so, update the associated filename.  */</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *new_file = <a class="code" href="notmuch_8c.html#a54f83e69b42ba692c5b2fce1249fde4c">get_message_last_filename</a>(msg);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordtype">char</span> old_file[<a class="code" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <a class="code" href="notmuch_8c.html#afc35975154974867ca13ae101449daab">email_get_fullpath</a>(e, old_file, <span class="keyword">sizeof</span>(old_file));</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(old_file, new_file))</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <a class="code" href="notmuch_8c.html#aa667101acb4fa8caff3610d35875da18">update_message_path</a>(e, new_file);</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>)</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    {</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="comment">/* if the user hasn&#39;t modified the flags on this message, update the</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment">       * flags we just detected.  */</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> e_tmp = { 0 };</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      e_tmp.<a class="code" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code" href="maildir_2edata_8c.html#a3dfb16b26ffe871f3aa5753f0115bcdc">maildir_edata_new</a>();</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <a class="code" href="maildir_2lib_8h.html#afad70ac642ae3a3a925778412bb64097">maildir_parse_flags</a>(&amp;e_tmp, new_file);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <a class="code" href="maildir_2lib_8h.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a>(m, e, &amp;e_tmp);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <a class="code" href="maildir_2edata_8c.html#a64d6c6eca4ddc56acc9157a876f07d63">maildir_edata_free</a>(&amp;e_tmp.<a class="code" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    }</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="notmuch_8c.html#ad709dd1e383f13bf730e1b0791b6fdac">update_email_tags</a>(e, msg) == 0)</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      new_flags++;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    notmuch_message_destroy(msg);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  }</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <a class="code" href="notmuch_8c.html#a624cee6288d0ad565125b800c83bdf4d">nm_hcache_close</a>(h);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  {</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a>)</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    {</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;      occult = <span class="keyword">true</span>;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    }</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  }</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &gt; mdata-&gt;<a class="code" href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">oldmsgcount</a>)</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;done:</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="keywordflow">if</span> (q)</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    notmuch_query_destroy(q);</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <a class="code" href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a>(m);</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>.<a class="code" href="structtimespec.html#afc3302668d7cb5952f590da69fdd4955">tv_sec</a> = <a class="code" href="date_8c.html#a97bacb1574ec0b1c69b6236fbacceccf">mutt_date_epoch</a>();</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">mtime</a>.<a class="code" href="structtimespec.html#ae3c7510dafa8cbcaede866ed13c99683">tv_nsec</a> = 0;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: ... check done [count=%d, new_flags=%d, occult=%d]\n&quot;</span>,</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;             m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>, new_flags, occult);</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="keywordflow">if</span> (occult)</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a>;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &gt; mdata-&gt;<a class="code" href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">oldmsgcount</a>)</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="keywordflow">if</span> (new_flags)</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a>;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;}</div><div class="ttc" id="mutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00904">string.c:904</a></div></div>
<div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="date_8c_html_a97bacb1574ec0b1c69b6236fbacceccf"><div class="ttname"><a href="date_8c.html#a97bacb1574ec0b1c69b6236fbacceccf">mutt_date_epoch</a></div><div class="ttdeci">time_t mutt_date_epoch(void)</div><div class="ttdoc">Return the number of seconds since the Unix epoch. </div><div class="ttdef"><b>Definition:</b> <a href="date_8c_source.html#l00427">date.c:427</a></div></div>
<div class="ttc" id="notmuch_8c_html_a8aa5ba34ffb0be079f29fe58bb83c280"><div class="ttname"><a href="notmuch_8c.html#a8aa5ba34ffb0be079f29fe58bb83c280">get_query</a></div><div class="ttdeci">static notmuch_query_t * get_query(struct Mailbox *m, bool writable)</div><div class="ttdoc">Create a new query. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00438">notmuch.c:438</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="notmuch_2db_8c_html_a8e76f30f20c116709ae6c5df78e6c349"><div class="ttname"><a href="notmuch_2db_8c.html#a8e76f30f20c116709ae6c5df78e6c349">nm_db_get_mtime</a></div><div class="ttdeci">int nm_db_get_mtime(struct Mailbox *m, time_t *mtime)</div><div class="ttdoc">Get the database modification time. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_2db_8c_source.html#l00278">db.c:278</a></div></div>
<div class="ttc" id="maildir_2lib_8h_html_a79713d04e839c3782ef9e0b7bc25e9c0"><div class="ttname"><a href="maildir_2lib_8h.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a></div><div class="ttdeci">bool maildir_update_flags(struct Mailbox *m, struct Email *e_old, struct Email *e_new)</div><div class="ttdoc">Update the mailbox flags. </div><div class="ttdef"><b>Definition:</b> <a href="shared_8c_source.html#l00122">shared.c:122</a></div></div>
<div class="ttc" id="structHeaderCache_html"><div class="ttname"><a href="structHeaderCache.html">HeaderCache</a></div><div class="ttdoc">header cache structure </div><div class="ttdef"><b>Definition:</b> <a href="hcache_2lib_8h_source.html#l00084">lib.h:84</a></div></div>
<div class="ttc" id="structMailbox_html_a1c10c2f7076d9e5bf58b8c495a6d264d"><div class="ttname"><a href="structMailbox.html#a1c10c2f7076d9e5bf58b8c495a6d264d">Mailbox::mtime</a></div><div class="ttdeci">struct timespec mtime</div><div class="ttdoc">Time Mailbox was last changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00107">mailbox.h:107</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a></div><div class="ttdoc">Nondestructive flags change (IMAP) </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00082">mxapi.h:82</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="structEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00048">email.h:48</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a></div><div class="ttdoc">Email list was changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00180">mailbox.h:180</a></div></div>
<div class="ttc" id="notmuch_8c_html_aa667101acb4fa8caff3610d35875da18"><div class="ttname"><a href="notmuch_8c.html#aa667101acb4fa8caff3610d35875da18">update_message_path</a></div><div class="ttdeci">static int update_message_path(struct Email *e, const char *path)</div><div class="ttdoc">Set the path for a message. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00520">notmuch.c:520</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a></div><div class="ttdoc">Mailbox was reopened. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00081">mxapi.h:81</a></div></div>
<div class="ttc" id="structtimespec_html_afc3302668d7cb5952f590da69fdd4955"><div class="ttname"><a href="structtimespec.html#afc3302668d7cb5952f590da69fdd4955">timespec::tv_sec</a></div><div class="ttdeci">time_t tv_sec</div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00050">file.h:50</a></div></div>
<div class="ttc" id="structNmMboxData_html_a22d92645edc04adcf160739785f1704f"><div class="ttname"><a href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">NmMboxData::oldmsgcount</a></div><div class="ttdeci">int oldmsgcount</div><div class="ttdef"><b>Definition:</b> <a href="notmuch_2mdata_8h_source.html#l00041">mdata.h:41</a></div></div>
<div class="ttc" id="notmuch_8c_html_a54f83e69b42ba692c5b2fce1249fde4c"><div class="ttname"><a href="notmuch_8c.html#a54f83e69b42ba692c5b2fce1249fde4c">get_message_last_filename</a></div><div class="ttdeci">static const char * get_message_last_filename(notmuch_message_t *msg)</div><div class="ttdoc">Get a message&amp;#39;s last filename. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00649">notmuch.c:649</a></div></div>
<div class="ttc" id="maildir_2lib_8h_html_afad70ac642ae3a3a925778412bb64097"><div class="ttname"><a href="maildir_2lib_8h.html#afad70ac642ae3a3a925778412bb64097">maildir_parse_flags</a></div><div class="ttdeci">void maildir_parse_flags(struct Email *e, const char *path)</div><div class="ttdoc">Parse Maildir file flags. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00811">maildir.c:811</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdoc">Log at debug level 2. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00041">logging.h:41</a></div></div>
<div class="ttc" id="notmuch_8c_html_a686a65345db081f8d66accfc760e909b"><div class="ttname"><a href="notmuch_8c.html#a686a65345db081f8d66accfc760e909b">get_limit</a></div><div class="ttdeci">static int get_limit(struct NmMboxData *mdata)</div><div class="ttdoc">Get the database limit. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00402">notmuch.c:402</a></div></div>
<div class="ttc" id="structNmMboxData_html"><div class="ttname"><a href="structNmMboxData.html">NmMboxData</a></div><div class="ttdoc">Notmuch-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_2mdata_8h_source.html#l00033">mdata.h:33</a></div></div>
<div class="ttc" id="notmuch_8c_html_afebce6fa84d3ae51d9d2ce67c56448f6"><div class="ttname"><a href="notmuch_8c.html#afebce6fa84d3ae51d9d2ce67c56448f6">get_messages</a></div><div class="ttdeci">static notmuch_messages_t * get_messages(notmuch_query_t *query)</div><div class="ttdoc">load messages for a query </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00901">notmuch.c:901</a></div></div>
<div class="ttc" id="structtimespec_html_ae3c7510dafa8cbcaede866ed13c99683"><div class="ttname"><a href="structtimespec.html#ae3c7510dafa8cbcaede866ed13c99683">timespec::tv_nsec</a></div><div class="ttdeci">long tv_nsec</div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00051">file.h:51</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="notmuch_2mdata_8c_html_a819fc59593f985a02abe21f26037bc74"><div class="ttname"><a href="notmuch_2mdata_8c.html#a819fc59593f985a02abe21f26037bc74">nm_mdata_get</a></div><div class="ttdeci">struct NmMboxData * nm_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Notmuch Mailbox data. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_2mdata_8c_source.html#l00098">mdata.c:98</a></div></div>
<div class="ttc" id="structEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00059">email.h:59</a></div></div>
<div class="ttc" id="mutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00040">mutt.h:40</a></div></div>
<div class="ttc" id="notmuch_8c_html_a510f5d77650516cdaa69fd107baca758"><div class="ttname"><a href="notmuch_8c.html#a510f5d77650516cdaa69fd107baca758">nm_hcache_open</a></div><div class="ttdeci">static struct HeaderCache * nm_hcache_open(struct Mailbox *m)</div><div class="ttdoc">Open a header cache. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00109">notmuch.c:109</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="maildir_2edata_8c_html_a3dfb16b26ffe871f3aa5753f0115bcdc"><div class="ttname"><a href="maildir_2edata_8c.html#a3dfb16b26ffe871f3aa5753f0115bcdc">maildir_edata_new</a></div><div class="ttdeci">struct MaildirEmailData * maildir_edata_new(void)</div><div class="ttdoc">Create a new MaildirEmailData object. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_2edata_8c_source.html#l00053">edata.c:53</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="notmuch_8c_html_a624cee6288d0ad565125b800c83bdf4d"><div class="ttname"><a href="notmuch_8c.html#a624cee6288d0ad565125b800c83bdf4d">nm_hcache_close</a></div><div class="ttdeci">static void nm_hcache_close(struct HeaderCache *h)</div><div class="ttdoc">Close the header cache. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00124">notmuch.c:124</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="notmuch_2db_8c_html_ab42f2a23cdaa9f6c5653fa7e9f9a8911"><div class="ttname"><a href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a></div><div class="ttdeci">int nm_db_release(struct Mailbox *m)</div><div class="ttdoc">Close the Notmuch database. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_2db_8c_source.html#l00196">db.c:196</a></div></div>
<div class="ttc" id="structEmail_html_a50d8a8dde5fbf0b6dba934ff7e07fb6b"><div class="ttname"><a href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">Email::edata</a></div><div class="ttdeci">void * edata</div><div class="ttdoc">Driver-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00111">email.h:111</a></div></div>
<div class="ttc" id="notmuch_8c_html_afc35975154974867ca13ae101449daab"><div class="ttname"><a href="notmuch_8c.html#afc35975154974867ca13ae101449daab">email_get_fullpath</a></div><div class="ttdeci">static char * email_get_fullpath(struct Email *e, char *buf, size_t buflen)</div><div class="ttdoc">Get the full path of an email. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00226">notmuch.c:226</a></div></div>
<div class="ttc" id="notmuch_8c_html_afda128ba745fba822ebb49441a35d8e3"><div class="ttname"><a href="notmuch_8c.html#afda128ba745fba822ebb49441a35d8e3">append_message</a></div><div class="ttdeci">static void append_message(struct HeaderCache *h, struct Mailbox *m, notmuch_query_t *q, notmuch_message_t *msg, bool dedup)</div><div class="ttdoc">Associate a message. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00737">notmuch.c:737</a></div></div>
<div class="ttc" id="notmuch_8c_html_ad709dd1e383f13bf730e1b0791b6fdac"><div class="ttname"><a href="notmuch_8c.html#ad709dd1e383f13bf730e1b0791b6fdac">update_email_tags</a></div><div class="ttdeci">static int update_email_tags(struct Email *e, notmuch_message_t *msg)</div><div class="ttdoc">Update the Email&amp;#39;s tags from Notmuch. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00470">notmuch.c:470</a></div></div>
<div class="ttc" id="notmuch_8c_html_af785de5c861971b9a7767e94b5b0a04b"><div class="ttname"><a href="notmuch_8c.html#af785de5c861971b9a7767e94b5b0a04b">get_mutt_email</a></div><div class="ttdeci">static struct Email * get_mutt_email(struct Mailbox *m, notmuch_message_t *msg)</div><div class="ttdoc">Get the Email of a Notmuch message. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00702">notmuch.c:702</a></div></div>
<div class="ttc" id="maildir_2edata_8c_html_a64d6c6eca4ddc56acc9157a876f07d63"><div class="ttname"><a href="maildir_2edata_8c.html#a64d6c6eca4ddc56acc9157a876f07d63">maildir_edata_free</a></div><div class="ttdeci">void maildir_edata_free(void **ptr)</div><div class="ttdoc">Free the private Email data - Implements Email::edata_free() </div><div class="ttdef"><b>Definition:</b> <a href="maildir_2edata_8c_source.html#l00038">edata.c:38</a></div></div>
<div class="ttc" id="mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00208">mailbox.c:208</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_gafd9ac1fea250b07e3ea64493021aaa06_cgraph.svg" width="612" height="1046"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ga5c3baa1bb7f18e3e64806fd6932290b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c3baa1bb7f18e3e64806fd6932290b7">&#9670;&nbsp;</a></span>pop_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> pop_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -. </p>

<p class="definition">Definition at line <a class="el" href="pop_8c_source.html#l00825">825</a> of file <a class="el" href="pop_8c_source.html">pop.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;{</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keyword">struct </span><a class="code" href="structPopAccountData.html">PopAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="pop_2adata_8c.html#ae2ba9262442cd65666aafbf191de30f4">pop_adata_get</a>(m);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_pop_check_interval =</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <a class="code" href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;pop_check_interval&quot;</span>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordflow">if</span> ((adata-&gt;<a class="code" href="structPopAccountData.html#a7d3b3740a49e6a24a9b89dce7c140df2">check_time</a> + c_pop_check_interval) &gt; <a class="code" href="date_8c.html#a97bacb1574ec0b1c69b6236fbacceccf">mutt_date_epoch</a>())</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="lib_8c.html#aeb87c461c48395e38564034b64ec2d37">pop_logout</a>(m);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <a class="code" href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a>(adata-&gt;<a class="code" href="structPopAccountData.html#a9b4f6edb28624aaec1821d52f7cb8d18">conn</a>);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_8c.html#a531ae6abd6cf75fb0004bf019944a3b9">pop_open_connection</a>(adata) &lt; 0)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a> = adata-&gt;<a class="code" href="structPopAccountData.html#a43d1739eef3bcc971f1bf040511eda44">size</a>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Checking for new messages...&quot;</span>));</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordtype">int</span> old_msg_count = m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="pop_8c.html#aed296290f911b6522df2dd97ce554f65">pop_fetch_headers</a>(m);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="pop_8c.html#a306deeb158f76bd338f04b1a5494d6a9">pop_clear_cache</a>(adata);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &gt; old_msg_count)</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">if</span> (rc &gt; 0)</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div><div class="ttc" id="date_8c_html_a97bacb1574ec0b1c69b6236fbacceccf"><div class="ttname"><a href="date_8c.html#a97bacb1574ec0b1c69b6236fbacceccf">mutt_date_epoch</a></div><div class="ttdeci">time_t mutt_date_epoch(void)</div><div class="ttdoc">Return the number of seconds since the Unix epoch. </div><div class="ttdef"><b>Definition:</b> <a href="date_8c_source.html#l00427">date.c:427</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="structMailbox_html_ace276d581d6d299ecf227be214841148"><div class="ttname"><a href="structMailbox.html#ace276d581d6d299ecf227be214841148">Mailbox::size</a></div><div class="ttdeci">off_t size</div><div class="ttdoc">Size of the Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00087">mailbox.h:87</a></div></div>
<div class="ttc" id="structPopAccountData_html_a43d1739eef3bcc971f1bf040511eda44"><div class="ttname"><a href="structPopAccountData.html#a43d1739eef3bcc971f1bf040511eda44">PopAccountData::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="pop_2adata_8h_source.html#l00050">adata.h:50</a></div></div>
<div class="ttc" id="lib_8c_html_a531ae6abd6cf75fb0004bf019944a3b9"><div class="ttname"><a href="lib_8c.html#a531ae6abd6cf75fb0004bf019944a3b9">pop_open_connection</a></div><div class="ttdeci">int pop_open_connection(struct PopAccountData *adata)</div><div class="ttdoc">Open connection and authenticate. </div><div class="ttdef"><b>Definition:</b> <a href="lib_8c_source.html#l00310">lib.c:310</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structPopAccountData_html_a9b4f6edb28624aaec1821d52f7cb8d18"><div class="ttname"><a href="structPopAccountData.html#a9b4f6edb28624aaec1821d52f7cb8d18">PopAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="pop_2adata_8h_source.html#l00038">adata.h:38</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a></div><div class="ttdoc">Email list was changed. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00180">mailbox.h:180</a></div></div>
<div class="ttc" id="helpers_8c_html_a96039a9f8d37daad993ae7b490510339"><div class="ttname"><a href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a></div><div class="ttdeci">short cs_subset_number(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a number config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00169">helpers.c:169</a></div></div>
<div class="ttc" id="pop_2adata_8c_html_ae2ba9262442cd65666aafbf191de30f4"><div class="ttname"><a href="pop_2adata_8c.html#ae2ba9262442cd65666aafbf191de30f4">pop_adata_get</a></div><div class="ttdeci">struct PopAccountData * pop_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="pop_2adata_8c_source.html#l00064">adata.c:64</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="pop_8c_html_aed296290f911b6522df2dd97ce554f65"><div class="ttname"><a href="pop_8c.html#aed296290f911b6522df2dd97ce554f65">pop_fetch_headers</a></div><div class="ttdeci">static int pop_fetch_headers(struct Mailbox *m)</div><div class="ttdoc">Read headers. </div><div class="ttdef"><b>Definition:</b> <a href="pop_8c_source.html#l00322">pop.c:322</a></div></div>
<div class="ttc" id="pop_8c_html_a306deeb158f76bd338f04b1a5494d6a9"><div class="ttname"><a href="pop_8c.html#a306deeb158f76bd338f04b1a5494d6a9">pop_clear_cache</a></div><div class="ttdeci">static void pop_clear_cache(struct PopAccountData *adata)</div><div class="ttdoc">delete all cached messages </div><div class="ttdef"><b>Definition:</b> <a href="pop_8c_source.html#l00495">pop.c:495</a></div></div>
<div class="ttc" id="structPopAccountData_html_a7d3b3740a49e6a24a9b89dce7c140df2"><div class="ttname"><a href="structPopAccountData.html#a7d3b3740a49e6a24a9b89dce7c140df2">PopAccountData::check_time</a></div><div class="ttdeci">time_t check_time</div><div class="ttdef"><b>Definition:</b> <a href="pop_2adata_8h_source.html#l00051">adata.h:51</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="socket_8c_html_a432eed609a221c68f457302d6e40c383"><div class="ttname"><a href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a></div><div class="ttdeci">int mutt_socket_close(struct Connection *conn)</div><div class="ttdoc">Close a socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00097">socket.c:97</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="structPopAccountData_html"><div class="ttname"><a href="structPopAccountData.html">PopAccountData</a></div><div class="ttdoc">POP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="pop_2adata_8h_source.html#l00036">adata.h:36</a></div></div>
<div class="ttc" id="mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00208">mailbox.c:208</a></div></div>
<div class="ttc" id="lib_8c_html_aeb87c461c48395e38564034b64ec2d37"><div class="ttname"><a href="lib_8c.html#aeb87c461c48395e38564034b64ec2d37">pop_logout</a></div><div class="ttdeci">void pop_logout(struct Mailbox *m)</div><div class="ttdoc">logout from a POP server </div><div class="ttdef"><b>Definition:</b> <a href="lib_8c_source.html#l00420">lib.c:420</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check_ga5c3baa1bb7f18e3e64806fd6932290b7_cgraph.svg" width="539" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
