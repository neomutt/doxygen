<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: compmbox/compress.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2021-02-05-647-g5d4e00</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('compmbox_2compress_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">compress.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Compressed mbox local mailbox type.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gui_2lib_8h_source.html">gui/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="compmbox_2lib_8h_source.html">lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="format__flags_8h_source.html">format_flags.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hook_8h_source.html">hook.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__commands_8h_source.html">mutt_commands.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__globals_8h_source.html">mutt_globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="muttlib_8h_source.html">muttlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mx_8h_source.html">mx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protos_8h_source.html">protos.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for compress.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c__incl.svg" width="1527" height="262"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="compmbox_2compress_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8440ad71a5e3d43cd2c836c777bccded"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a8440ad71a5e3d43cd2c836c777bccded">mutt_comp_init</a> (void)</td></tr>
<tr class="memdesc:a8440ad71a5e3d43cd2c836c777bccded"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup feature commands.  <a href="#a8440ad71a5e3d43cd2c836c777bccded">More...</a><br /></td></tr>
<tr class="separator:a8440ad71a5e3d43cd2c836c777bccded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c82fa05ac9a30a1cd0e5c5b472ae066"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, bool excl)</td></tr>
<tr class="memdesc:a8c82fa05ac9a30a1cd0e5c5b472ae066"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock the ctx-&gt;realpath.  <a href="#a8c82fa05ac9a30a1cd0e5c5b472ae066">More...</a><br /></td></tr>
<tr class="separator:a8c82fa05ac9a30a1cd0e5c5b472ae066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa35e239a0ed2772ae5824c317276f83a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:aa35e239a0ed2772ae5824c317276f83a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the mailbox-&gt;realpath.  <a href="#aa35e239a0ed2772ae5824c317276f83a">More...</a><br /></td></tr>
<tr class="separator:aa35e239a0ed2772ae5824c317276f83a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e1b3c821fbb441941a42b24149fbb3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a60e1b3c821fbb441941a42b24149fbb3">setup_paths</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a60e1b3c821fbb441941a42b24149fbb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the mailbox paths.  <a href="#a60e1b3c821fbb441941a42b24149fbb3">More...</a><br /></td></tr>
<tr class="separator:a60e1b3c821fbb441941a42b24149fbb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877acb05482802a48bc56da5e24c8c54"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a> (const struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a877acb05482802a48bc56da5e24c8c54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the size of the compressed file.  <a href="#a877acb05482802a48bc56da5e24c8c54">More...</a><br /></td></tr>
<tr class="separator:a877acb05482802a48bc56da5e24c8c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a958dff103de14a95ce0a8a5dd977167b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structCompressInfo.html">CompressInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a958dff103de14a95ce0a8a5dd977167b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the compress hooks for a mailbox.  <a href="#a958dff103de14a95ce0a8a5dd977167b">More...</a><br /></td></tr>
<tr class="separator:a958dff103de14a95ce0a8a5dd977167b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae987f4dda46e1423fedf6a0ac0b2de"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a5ae987f4dda46e1423fedf6a0ac0b2de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the compress info members and structure.  <a href="#a5ae987f4dda46e1423fedf6a0ac0b2de">More...</a><br /></td></tr>
<tr class="separator:a5ae987f4dda46e1423fedf6a0ac0b2de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga804a1a638527ebaddb0d693ec35d5198"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__expando__api.html#ga804a1a638527ebaddb0d693ec35d5198">compress_format_str</a> (char *buf, size_t buflen, size_t col, int cols, char op, const char *src, const char *prec, const char *if_str, const char *else_str, intptr_t data, <a class="el" href="format__flags_8h.html#ad2734d319d795141616e1b5f241be1b2">MuttFormatFlags</a> flags)</td></tr>
<tr class="memdesc:ga804a1a638527ebaddb0d693ec35d5198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand the filenames in a command string - Implements <a class="el" href="format__flags_8h.html#a72125443a8544d5a78a9057d420c83c5">format_t</a> -<table class="doxtable">
<tr>
<th align="left">Expando </th><th align="left">Description  </th></tr>
<tr>
<td align="left">%f </td><td align="left">Compressed file </td></tr>
<tr>
<td align="left">%t </td><td align="left">Plaintext, temporary file </td></tr>
</table>
 <a href="group__expando__api.html#ga804a1a638527ebaddb0d693ec35d5198">More...</a><br /></td></tr>
<tr class="separator:ga804a1a638527ebaddb0d693ec35d5198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec93f40f46e453d46cb9d7181ae39f9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#abec93f40f46e453d46cb9d7181ae39f9">expand_command_str</a> (const struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *cmd, char *buf, int buflen)</td></tr>
<tr class="memdesc:abec93f40f46e453d46cb9d7181ae39f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand placeholders in command string.  <a href="#abec93f40f46e453d46cb9d7181ae39f9">More...</a><br /></td></tr>
<tr class="separator:abec93f40f46e453d46cb9d7181ae39f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77600af8755fc3921168f6c0727abf18"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *command, const char *progress)</td></tr>
<tr class="memdesc:a77600af8755fc3921168f6c0727abf18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a system command.  <a href="#a77600af8755fc3921168f6c0727abf18">More...</a><br /></td></tr>
<tr class="separator:a77600af8755fc3921168f6c0727abf18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3c7362d3b06ea8c32ce55d5c3db5f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a9f3c7362d3b06ea8c32ce55d5c3db5f1">mutt_comp_can_append</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a9f3c7362d3b06ea8c32ce55d5c3db5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can we append to this path?  <a href="#a9f3c7362d3b06ea8c32ce55d5c3db5f1">More...</a><br /></td></tr>
<tr class="separator:a9f3c7362d3b06ea8c32ce55d5c3db5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e4caf583046a535cf5fda9933d3c74"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#af5e4caf583046a535cf5fda9933d3c74">mutt_comp_can_read</a> (const char *path)</td></tr>
<tr class="memdesc:af5e4caf583046a535cf5fda9933d3c74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can we read from this file?  <a href="#af5e4caf583046a535cf5fda9933d3c74">More...</a><br /></td></tr>
<tr class="separator:af5e4caf583046a535cf5fda9933d3c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77ea42f102d3aced8ea915e95a83bd4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ab77ea42f102d3aced8ea915e95a83bd4">mutt_comp_valid_command</a> (const char *cmd)</td></tr>
<tr class="memdesc:ab77ea42f102d3aced8ea915e95a83bd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this command string allowed?  <a href="#ab77ea42f102d3aced8ea915e95a83bd4">More...</a><br /></td></tr>
<tr class="separator:ab77ea42f102d3aced8ea915e95a83bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd2c1f164cf3e15e8391110717418a3e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__ac__owns__path.html#gadd2c1f164cf3e15e8391110717418a3e">comp_ac_owns_path</a> (struct <a class="el" href="structAccount.html">Account</a> *a, const char *path)</td></tr>
<tr class="memdesc:gadd2c1f164cf3e15e8391110717418a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> owns a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a8036f191d1b0ace220c5a5ff52f609b4">MxOps::ac_owns_path()</a> -.  <a href="group__mx__ac__owns__path.html#gadd2c1f164cf3e15e8391110717418a3e">More...</a><br /></td></tr>
<tr class="separator:gadd2c1f164cf3e15e8391110717418a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad6d5ec9cf297a30e4b0673609773f156"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__ac__add.html#gad6d5ec9cf297a30e4b0673609773f156">comp_ac_add</a> (struct <a class="el" href="structAccount.html">Account</a> *a, struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gad6d5ec9cf297a30e4b0673609773f156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> - Implements <a class="el" href="structMxOps.html#ac432a4900b0ca5a5ca2dc98319dbf737">MxOps::ac_add()</a> -.  <a href="group__mx__ac__add.html#gad6d5ec9cf297a30e4b0673609773f156">More...</a><br /></td></tr>
<tr class="separator:gad6d5ec9cf297a30e4b0673609773f156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga017f8938078bb770eb825f2de2e588b0"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cad">MxOpenReturns</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__open.html#ga017f8938078bb770eb825f2de2e588b0">comp_mbox_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga017f8938078bb770eb825f2de2e588b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45">MxOps::mbox_open()</a> -Set up a compressed mailbox to be read.  <a href="group__mx__mbox__open.html#ga017f8938078bb770eb825f2de2e588b0">More...</a><br /></td></tr>
<tr class="separator:ga017f8938078bb770eb825f2de2e588b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5411107efad334d6cfdf124b9856e673"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__open__append.html#ga5411107efad334d6cfdf124b9856e673">comp_mbox_open_append</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, <a class="el" href="mxapi_8h.html#a12d50555671e01ef64b027974fc5acfa">OpenMailboxFlags</a> flags)</td></tr>
<tr class="memdesc:ga5411107efad334d6cfdf124b9856e673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> for appending - Implements <a class="el" href="structMxOps.html#af201c2c2f87a1253cbaf8ae24f062ef3">MxOps::mbox_open_append()</a> -flags may also contain <a class="el" href="mxapi_8h.html#a3a651e08849ce73161750d86d4ac1ee6" title="Create a new folder - same as MUTT_APPEND,. ">MUTT_NEWFOLDER</a>.  <a href="group__mx__mbox__open__append.html#ga5411107efad334d6cfdf124b9856e673">More...</a><br /></td></tr>
<tr class="separator:ga5411107efad334d6cfdf124b9856e673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf3eceb782a3061fe668121697cc2e22"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gabf3eceb782a3061fe668121697cc2e22">comp_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gabf3eceb782a3061fe668121697cc2e22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="group__mx__mbox__check.html#gabf3eceb782a3061fe668121697cc2e22">More...</a><br /></td></tr>
<tr class="separator:gabf3eceb782a3061fe668121697cc2e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadeb7755ceb989e6dc91e9afa2ff9e84e"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__sync.html#gadeb7755ceb989e6dc91e9afa2ff9e84e">comp_mbox_sync</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gadeb7755ceb989e6dc91e9afa2ff9e84e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save changes to the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#aebbfeec5651637ec053cc47b95c124af">MxOps::mbox_sync()</a> -Changes in <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a> only affect the tmp file.  <a href="group__mx__mbox__sync.html#gadeb7755ceb989e6dc91e9afa2ff9e84e">More...</a><br /></td></tr>
<tr class="separator:gadeb7755ceb989e6dc91e9afa2ff9e84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac39b99d890436a70c50814a4701ed597"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__close.html#gac39b99d890436a70c50814a4701ed597">comp_mbox_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gac39b99d890436a70c50814a4701ed597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc">MxOps::mbox_close()</a> -If the mailbox has been changed then re-compress the tmp file.  <a href="group__mx__mbox__close.html#gac39b99d890436a70c50814a4701ed597">More...</a><br /></td></tr>
<tr class="separator:gac39b99d890436a70c50814a4701ed597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8f0ce1d30bcb3109c62a81979af5a15"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__open.html#gac8f0ce1d30bcb3109c62a81979af5a15">comp_msg_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg, int msgno)</td></tr>
<tr class="memdesc:gac8f0ce1d30bcb3109c62a81979af5a15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an email message in a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#afae8d734bf2f05baf8b45eb69f23a2a8">MxOps::msg_open()</a> -.  <a href="group__mx__msg__open.html#gac8f0ce1d30bcb3109c62a81979af5a15">More...</a><br /></td></tr>
<tr class="separator:gac8f0ce1d30bcb3109c62a81979af5a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c943e36f1c8e2354a8303c4435393dd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__open__new.html#ga8c943e36f1c8e2354a8303c4435393dd">comp_msg_open_new</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg, const struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:ga8c943e36f1c8e2354a8303c4435393dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new message in a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ada910d49b8f3d007c32aa8a4adc15637">MxOps::msg_open_new()</a> -.  <a href="group__mx__msg__open__new.html#ga8c943e36f1c8e2354a8303c4435393dd">More...</a><br /></td></tr>
<tr class="separator:ga8c943e36f1c8e2354a8303c4435393dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga449d225488040512f5696e4f76f36694"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__commit.html#ga449d225488040512f5696e4f76f36694">comp_msg_commit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg)</td></tr>
<tr class="memdesc:ga449d225488040512f5696e4f76f36694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save changes to an email - Implements <a class="el" href="structMxOps.html#ab59dadf81aec5575a1c690caa4822e37">MxOps::msg_commit()</a> -.  <a href="group__mx__msg__commit.html#ga449d225488040512f5696e4f76f36694">More...</a><br /></td></tr>
<tr class="separator:ga449d225488040512f5696e4f76f36694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9cedad82abc13c823ff2d0e7bc1b66f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__close.html#ga9cedad82abc13c823ff2d0e7bc1b66f9">comp_msg_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg)</td></tr>
<tr class="memdesc:ga9cedad82abc13c823ff2d0e7bc1b66f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an email - Implements <a class="el" href="structMxOps.html#ad53e3df1ff124eea52bc0488915e9ae4">MxOps::msg_close()</a> -.  <a href="group__mx__msg__close.html#ga9cedad82abc13c823ff2d0e7bc1b66f9">More...</a><br /></td></tr>
<tr class="separator:ga9cedad82abc13c823ff2d0e7bc1b66f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e6812b4bba1845ea248f4df93c06fea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__padding__size.html#ga0e6812b4bba1845ea248f4df93c06fea">comp_msg_padding_size</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga0e6812b4bba1845ea248f4df93c06fea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bytes of padding between messages - Implements <a class="el" href="structMxOps.html#a784ae2e2b98208080a641974ce4df834">MxOps::msg_padding_size()</a> -.  <a href="group__mx__msg__padding__size.html#ga0e6812b4bba1845ea248f4df93c06fea">More...</a><br /></td></tr>
<tr class="separator:ga0e6812b4bba1845ea248f4df93c06fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac329588156f6dfd55072cc812ff043cd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__save__hcache.html#gac329588156f6dfd55072cc812ff043cd">comp_msg_save_hcache</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:gac329588156f6dfd55072cc812ff043cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save message to the header cache - Implements <a class="el" href="structMxOps.html#a4c0ce9432905dfb3f6849c97ae504f84">MxOps::msg_save_hcache()</a> -.  <a href="group__mx__msg__save__hcache.html#gac329588156f6dfd55072cc812ff043cd">More...</a><br /></td></tr>
<tr class="separator:gac329588156f6dfd55072cc812ff043cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6baf16b10893271190480d29fbc8b493"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__tags__edit.html#ga6baf16b10893271190480d29fbc8b493">comp_tags_edit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *tags, char *buf, size_t buflen)</td></tr>
<tr class="memdesc:ga6baf16b10893271190480d29fbc8b493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt and validate new messages tags - Implements <a class="el" href="structMxOps.html#a0e3f825e2d93106795c85d5df78874ea">MxOps::tags_edit()</a> -.  <a href="group__mx__tags__edit.html#ga6baf16b10893271190480d29fbc8b493">More...</a><br /></td></tr>
<tr class="separator:ga6baf16b10893271190480d29fbc8b493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c0b7ffa4578c0b91fda494e873f13e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__tags__commit.html#ga1c0b7ffa4578c0b91fda494e873f13e7">comp_tags_commit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, char *buf)</td></tr>
<tr class="memdesc:ga1c0b7ffa4578c0b91fda494e873f13e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the tags to a message - Implements <a class="el" href="structMxOps.html#a9e996b21c0a4d701020aa632ecc5ae82">MxOps::tags_commit()</a> -.  <a href="group__mx__tags__commit.html#ga1c0b7ffa4578c0b91fda494e873f13e7">More...</a><br /></td></tr>
<tr class="separator:ga1c0b7ffa4578c0b91fda494e873f13e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad886126ad1805be0c69f9b2fe138db10"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921d">MailboxType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__probe.html#gad886126ad1805be0c69f9b2fe138db10">comp_path_probe</a> (const char *path, const struct stat *st)</td></tr>
<tr class="memdesc:gad886126ad1805be0c69f9b2fe138db10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this a compressed <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a>? - Implements <a class="el" href="structMxOps.html#a625a6ea0abfdb6620542e26acc499177">MxOps::path_probe()</a> -.  <a href="group__mx__path__probe.html#gad886126ad1805be0c69f9b2fe138db10">More...</a><br /></td></tr>
<tr class="separator:gad886126ad1805be0c69f9b2fe138db10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc352b335c9a8dd1d6e89bcc566dba80"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__canon.html#gafc352b335c9a8dd1d6e89bcc566dba80">comp_path_canon</a> (char *buf, size_t buflen)</td></tr>
<tr class="memdesc:gafc352b335c9a8dd1d6e89bcc566dba80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Canonicalise a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#ad7d938f02ba15c08d45128bc2ca00e28">MxOps::path_canon()</a> -.  <a href="group__mx__path__canon.html#gafc352b335c9a8dd1d6e89bcc566dba80">More...</a><br /></td></tr>
<tr class="separator:gafc352b335c9a8dd1d6e89bcc566dba80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga164a2844f1899843274d6c80a194ca86"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__pretty.html#ga164a2844f1899843274d6c80a194ca86">comp_path_pretty</a> (char *buf, size_t buflen, const char *folder)</td></tr>
<tr class="memdesc:ga164a2844f1899843274d6c80a194ca86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abbreviate a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a3a85067a3d76652ec0014ce520c565db">MxOps::path_pretty()</a> -.  <a href="group__mx__path__pretty.html#ga164a2844f1899843274d6c80a194ca86">More...</a><br /></td></tr>
<tr class="separator:ga164a2844f1899843274d6c80a194ca86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab807f84b5a28020a4250500f9fa7463c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__parent.html#gab807f84b5a28020a4250500f9fa7463c">comp_path_parent</a> (char *buf, size_t buflen)</td></tr>
<tr class="memdesc:gab807f84b5a28020a4250500f9fa7463c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the parent of a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a0816dd26eb79c12783e9ac9e7b67ecd9">MxOps::path_parent()</a> -.  <a href="group__mx__path__parent.html#gab807f84b5a28020a4250500f9fa7463c">More...</a><br /></td></tr>
<tr class="separator:gab807f84b5a28020a4250500f9fa7463c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a08818c1789d0341db65745d36f50f1b3"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="structCommand.html">Command</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a08818c1789d0341db65745d36f50f1b3">comp_commands</a> []</td></tr>
<tr class="separator:a08818c1789d0341db65745d36f50f1b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69f737b0581952c0ef57f37af78ac6c7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structMxOps.html">MxOps</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__api.html#ga69f737b0581952c0ef57f37af78ac6c7">MxCompOps</a></td></tr>
<tr class="memdesc:ga69f737b0581952c0ef57f37af78ac6c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compressed <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html">MxOps</a> -Compress only uses open, close and check.  <a href="group__mx__api.html#ga69f737b0581952c0ef57f37af78ac6c7">More...</a><br /></td></tr>
<tr class="separator:ga69f737b0581952c0ef57f37af78ac6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Compressed mbox local mailbox type. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Alain Penders</li>
<li>Richard Russon</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8440ad71a5e3d43cd2c836c777bccded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8440ad71a5e3d43cd2c836c777bccded">&#9670;&nbsp;</a></span>mutt_comp_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_comp_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup feature commands. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00069">69</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="mutt__commands_8h.html#ab11d3e73ef33f8740241999967f38580">COMMANDS_REGISTER</a>(<a class="code" href="compmbox_2compress_8c.html#a08818c1789d0341db65745d36f50f1b3">comp_commands</a>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="ttc" id="mutt__commands_8h_html_ab11d3e73ef33f8740241999967f38580"><div class="ttname"><a href="mutt__commands_8h.html#ab11d3e73ef33f8740241999967f38580">COMMANDS_REGISTER</a></div><div class="ttdeci">#define COMMANDS_REGISTER(cmds)</div><div class="ttdef"><b>Definition:</b> <a href="mutt__commands_8h_source.html#l00077">mutt_commands.h:77</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a08818c1789d0341db65745d36f50f1b3"><div class="ttname"><a href="compmbox_2compress_8c.html#a08818c1789d0341db65745d36f50f1b3">comp_commands</a></div><div class="ttdeci">static const struct Command comp_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00058">compress.c:58</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a8440ad71a5e3d43cd2c836c777bccded_icgraph.svg" width="264" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8c82fa05ac9a30a1cd0e5c5b472ae066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c82fa05ac9a30a1cd0e5c5b472ae066">&#9670;&nbsp;</a></span>lock_realpath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool lock_realpath </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>excl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to lock the ctx-&gt;realpath. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to lock </td></tr>
    <tr><td class="paramname">excl</td><td>Lock exclusively? </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success (locked or readonly) </td></tr>
    <tr><td class="paramname">false</td><td>Error (can't lock the file)</td></tr>
  </table>
  </dd>
</dl>
<p>Try to (exclusively) lock the mailbox. If we succeed, then we mark the mailbox as locked. If we fail, but we didn't want exclusive rights, then the mailbox will be marked readonly. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00085">85</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">if</span> (ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a>)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (excl)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a> = fopen(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, <span class="stringliteral">&quot;a&quot;</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a> = fopen(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordtype">int</span> r = <a class="code" href="file_8c.html#a4cdd1f9b1b370cbf5a8348f63cfe67cf">mutt_file_lock</a>(fileno(ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>), excl, <span class="keyword">true</span>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">if</span> (r == 0)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (excl)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">readonly</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">return</span> r == 0;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div><div class="ttc" id="structCompressInfo_html_a2aca1d78a4d745a6a795dab05279f8db"><div class="ttname"><a href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">CompressInfo::fp_lock</a></div><div class="ttdeci">FILE * fp_lock</div><div class="ttdoc">fp used for locking </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00054">lib.h:54</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="structCompressInfo_html_aac3530ca93433b36ec7118f2278f8280"><div class="ttname"><a href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">CompressInfo::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdoc">if realpath is locked </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00053">lib.h:53</a></div></div>
<div class="ttc" id="group__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00089">logging.h:89</a></div></div>
<div class="ttc" id="file_8c_html_a4cdd1f9b1b370cbf5a8348f63cfe67cf"><div class="ttname"><a href="file_8c.html#a4cdd1f9b1b370cbf5a8348f63cfe67cf">mutt_file_lock</a></div><div class="ttdeci">int mutt_file_lock(int fd, bool excl, bool timeout)</div><div class="ttdoc">(try to) lock a file using fcntl() </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01178">file.c:1178</a></div></div>
<div class="ttc" id="structMailbox_html_ae55237419d0e842cd6efeed0c41d27e8"><div class="ttname"><a href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">Mailbox::readonly</a></div><div class="ttdeci">bool readonly</div><div class="ttdoc">Don&amp;#39;t allow changes to the mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00119">mailbox.h:119</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a8c82fa05ac9a30a1cd0e5c5b472ae066_cgraph.svg" width="296" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a8c82fa05ac9a30a1cd0e5c5b472ae066_icgraph.svg" width="552" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa35e239a0ed2772ae5824c317276f83a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa35e239a0ed2772ae5824c317276f83a">&#9670;&nbsp;</a></span>unlock_realpath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlock_realpath </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlock the mailbox-&gt;realpath. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to unlock</td></tr>
  </table>
  </dd>
</dl>
<p>Unlock a mailbox previously locked by lock_mailbox(). </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00124">124</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a>)</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="file_8c.html#a58563edc1ad32b074fb2425a929b0f39">mutt_file_unlock</a>(fileno(ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>));</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div><div class="ttc" id="structCompressInfo_html_a2aca1d78a4d745a6a795dab05279f8db"><div class="ttname"><a href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">CompressInfo::fp_lock</a></div><div class="ttdeci">FILE * fp_lock</div><div class="ttdoc">fp used for locking </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00054">lib.h:54</a></div></div>
<div class="ttc" id="structCompressInfo_html_aac3530ca93433b36ec7118f2278f8280"><div class="ttname"><a href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">CompressInfo::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdoc">if realpath is locked </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00053">lib.h:53</a></div></div>
<div class="ttc" id="file_8c_html_a58563edc1ad32b074fb2425a929b0f39"><div class="ttname"><a href="file_8c.html#a58563edc1ad32b074fb2425a929b0f39">mutt_file_unlock</a></div><div class="ttdeci">int mutt_file_unlock(int fd)</div><div class="ttdoc">Unlock a file previously locked by mutt_file_lock() </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01226">file.c:1226</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_aa35e239a0ed2772ae5824c317276f83a_cgraph.svg" width="316" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_aa35e239a0ed2772ae5824c317276f83a_icgraph.svg" width="527" height="204"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a60e1b3c821fbb441941a42b24149fbb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60e1b3c821fbb441941a42b24149fbb3">&#9670;&nbsp;</a></span>setup_paths()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setup_paths </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the mailbox paths. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to modify </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<p>Save the compressed filename in mailbox-&gt;realpath. Create a temporary filename and put its name in mailbox-&gt;path. The temporary file is created to prevent symlink attacks. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00150">150</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">/* Setup the right paths */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">/* We will uncompress to TMPDIR */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *buf = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a>(buf);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="buffer_8c.html#ad070cb0d30bde9c0069f8c8e27ed89a8">mutt_buffer_copy</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#aa44c1232018ddd1953039aa857b23ab5">pathbuf</a>, buf);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  FILE *fp = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (!fp)</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="muttlib_8h_html_a7f1db9db6f710a84cace77248096e2ac"><div class="ttname"><a href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a></div><div class="ttdeci">#define mutt_buffer_mktemp(buf)</div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8h_source.html#l00074">muttlib.h:74</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="buffer_8c_html_ad070cb0d30bde9c0069f8c8e27ed89a8"><div class="ttname"><a href="buffer_8c.html#ad070cb0d30bde9c0069f8c8e27ed89a8">mutt_buffer_copy</a></div><div class="ttdeci">size_t mutt_buffer_copy(struct Buffer *dst, const struct Buffer *src)</div><div class="ttdoc">Copy a Buffer&amp;#39;s contents to another Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00445">buffer.c:445</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ae9b6bbaa52b6ce51f2a384fe500e028e"><div class="ttname"><a href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00446">string.c:446</a></div></div>
<div class="ttc" id="structMailbox_html_aa44c1232018ddd1953039aa857b23ab5"><div class="ttname"><a href="structMailbox.html#aa44c1232018ddd1953039aa857b23ab5">Mailbox::pathbuf</a></div><div class="ttdeci">struct Buffer pathbuf</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00083">mailbox.h:83</a></div></div>
<div class="ttc" id="file_8c_html_ae1c0c19fec03274220b3ca065ad1e2e5"><div class="ttname"><a href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a></div><div class="ttdeci">FILE * mutt_file_fopen(const char *path, const char *mode)</div><div class="ttdoc">Call fopen() safely. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00589">file.c:589</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a60e1b3c821fbb441941a42b24149fbb3_cgraph.svg" width="348" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a60e1b3c821fbb441941a42b24149fbb3_icgraph.svg" width="356" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a877acb05482802a48bc56da5e24c8c54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877acb05482802a48bc56da5e24c8c54">&#9670;&nbsp;</a></span>store_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void store_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save the size of the compressed file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a></td></tr>
  </table>
  </dd>
</dl>
<p>Save the compressed file size in the compress_info struct. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00178">178</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">size</a> = <a class="code" href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="ttc" id="file_8c_html_a75f1c8024613a5e8c23f92d229f52101"><div class="ttname"><a href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a></div><div class="ttdeci">long mutt_file_get_size(const char *path)</div><div class="ttdoc">Get the size of a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01498">file.c:1498</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="structCompressInfo_html_ae92bc129b9825e39e42d7737197c3297"><div class="ttname"><a href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">CompressInfo::size</a></div><div class="ttdeci">long size</div><div class="ttdoc">size of the compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00051">lib.h:51</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a877acb05482802a48bc56da5e24c8c54_cgraph.svg" width="288" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a877acb05482802a48bc56da5e24c8c54_icgraph.svg" width="480" height="114"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a958dff103de14a95ce0a8a5dd977167b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a958dff103de14a95ce0a8a5dd977167b">&#9670;&nbsp;</a></span>set_compress_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structCompressInfo.html">CompressInfo</a>* set_compress_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the compress hooks for a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to examine </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structCompressInfo.html" title="Private data for compress. ">CompressInfo</a> <a class="el" href="structHook.html" title="A list of user hooks. ">Hook</a> info for the mailbox's path </td></tr>
    <tr><td class="paramname">NULL</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<p>When a mailbox is opened, we check if there are any matching hooks. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00196">196</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">/* Open is compulsory */</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *o = <a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (!o)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *c = <a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *a = <a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = <a class="code" href="memory_8c.html#a4c1612d209c7825d55e6a014df352f03">mutt_mem_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structCompressInfo.html">CompressInfo</a>));</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a> = ci;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a> = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(o);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a> = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(c);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a> = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(a);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> ci;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="memory_8c_html_a4c1612d209c7825d55e6a014df352f03"><div class="ttname"><a href="memory_8c.html#a4c1612d209c7825d55e6a014df352f03">mutt_mem_calloc</a></div><div class="ttdeci">void * mutt_mem_calloc(size_t nmemb, size_t size)</div><div class="ttdoc">Allocate zeroed memory on the heap. </div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00050">memory.c:50</a></div></div>
<div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a4c2560f787bd1226b977992c16860c98"><div class="ttname"><a href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00370">string.c:370</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="hook_8h_html_a608d073646dabfa996b8460a6041393a"><div class="ttname"><a href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a></div><div class="ttdeci">#define MUTT_APPEND_HOOK</div><div class="ttdoc">append-hook: append to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00053">hook.h:53</a></div></div>
<div class="ttc" id="hook_8c_html_a5b0861b9e36e5debdf8b6509a22e6738"><div class="ttname"><a href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a></div><div class="ttdeci">char * mutt_find_hook(HookFlags type, const char *pat)</div><div class="ttdoc">Find a matching hook. </div><div class="ttdef"><b>Definition:</b> <a href="hook_8c_source.html#l00577">hook.c:577</a></div></div>
<div class="ttc" id="hook_8h_html_a4dc1443d223770a18d42c237f7748e66"><div class="ttname"><a href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a></div><div class="ttdeci">#define MUTT_CLOSE_HOOK</div><div class="ttdoc">close-hook: write to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00054">hook.h:54</a></div></div>
<div class="ttc" id="hook_8h_html_a2023ebfafb21558f2adf582b9f182523"><div class="ttname"><a href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a></div><div class="ttdeci">#define MUTT_OPEN_HOOK</div><div class="ttdoc">open-hook: to read a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00052">hook.h:52</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a958dff103de14a95ce0a8a5dd977167b_cgraph.svg" width="342" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a958dff103de14a95ce0a8a5dd977167b_icgraph.svg" width="399" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5ae987f4dda46e1423fedf6a0ac0b2de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae987f4dda46e1423fedf6a0ac0b2de">&#9670;&nbsp;</a></span>compress_info_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compress_info_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees the compress info members and structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to free compress_info for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00226">226</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a>(m);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_aa35e239a0ed2772ae5824c317276f83a"><div class="ttname"><a href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a></div><div class="ttdeci">static void unlock_realpath(struct Mailbox *m)</div><div class="ttdoc">Unlock the mailbox-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00124">compress.c:124</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a5ae987f4dda46e1423fedf6a0ac0b2de_cgraph.svg" width="336" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a5ae987f4dda46e1423fedf6a0ac0b2de_icgraph.svg" width="406" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abec93f40f46e453d46cb9d7181ae39f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abec93f40f46e453d46cb9d7181ae39f9">&#9670;&nbsp;</a></span>expand_command_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void expand_command_str </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expand placeholders in command string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> for paths </td></tr>
    <tr><td class="paramname">cmd</td><td>Template command to be expanded </td></tr>
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> to store the command </td></tr>
    <tr><td class="paramname">buflen</td><td>Size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<p>This function takes a hook command and expands the filename placeholders within it. The function calls <a class="el" href="group__expando__api.html#ga8972094c1e995739c8b072c8be3ce453" title="Expand expandos (x) in a string -. ">mutt_expando_format()</a> to do the replacement which calls our callback function <a class="el" href="group__expando__api.html#ga804a1a638527ebaddb0d693ec35d5198" title="Expand the filenames in a command string - Implements format_t -Expando Description  %f Compressed fi...">compress_format_str()</a>. e.g.</p>
<p>Template command: gzip -cd 'f' &gt; 't'</p>
<p>Result: gzip -dc '~/mail/abc.gz' &gt; '/tmp/xyz' </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00299">299</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (!m || !cmd || !buf)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="group__expando__api.html#ga8972094c1e995739c8b072c8be3ce453">mutt_expando_format</a>(buf, buflen, 0, buflen, cmd, <a class="code" href="group__expando__api.html#ga804a1a638527ebaddb0d693ec35d5198">compress_format_str</a>,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                      (intptr_t) m, <a class="code" href="format__flags_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="ttc" id="group__expando__api_html_ga8972094c1e995739c8b072c8be3ce453"><div class="ttname"><a href="group__expando__api.html#ga8972094c1e995739c8b072c8be3ce453">mutt_expando_format</a></div><div class="ttdeci">void mutt_expando_format(char *buf, size_t buflen, size_t col, int cols, const char *src, format_t callback, intptr_t data, MuttFormatFlags flags)</div><div class="ttdoc">Expand expandos (x) in a string -. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00780">muttlib.c:780</a></div></div>
<div class="ttc" id="format__flags_8h_html_a5167e8b2777abe5e02be90e0d2a816de"><div class="ttname"><a href="format__flags_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_FORMAT_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="format__flags_8h_source.html#l00030">format_flags.h:30</a></div></div>
<div class="ttc" id="group__expando__api_html_ga804a1a638527ebaddb0d693ec35d5198"><div class="ttname"><a href="group__expando__api.html#ga804a1a638527ebaddb0d693ec35d5198">compress_format_str</a></div><div class="ttdeci">static const char * compress_format_str(char *buf, size_t buflen, size_t col, int cols, char op, const char *src, const char *prec, const char *if_str, const char *else_str, intptr_t data, MuttFormatFlags flags)</div><div class="ttdoc">Expand the filenames in a command string - Implements format_t -Expando Description  %f Compressed fi...</div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00249">compress.c:249</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_abec93f40f46e453d46cb9d7181ae39f9_cgraph.svg" width="392" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_abec93f40f46e453d46cb9d7181ae39f9_icgraph.svg" width="372" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a77600af8755fc3921168f6c0727abf18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77600af8755fc3921168f6c0727abf18">&#9670;&nbsp;</a></span>execute_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int execute_command </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>progress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run a system command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to work with </td></tr>
    <tr><td class="paramname">command</td><td><a class="el" href="structCommand.html" title="A user-callable command. ">Command</a> string to execute </td></tr>
    <tr><td class="paramname">progress</td><td><a class="el" href="structMessage.html" title="A local copy of an email. ">Message</a> to show the user </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Success </td></tr>
    <tr><td class="paramname">0</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>Run the supplied command, taking care of all the <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a> requirements, such as locking files and blocking signals. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00319">319</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (!m || !command || !progress)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(progress, m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">int</span> rc = 1;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordtype">char</span> sys_cmd[<a class="code" href="string2_8h.html#a8f64b8071f8cd3a1776578dbf49495f7">STR_COMMAND</a>];</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="signal_8c.html#aa6c49e5535cdffeffd2cd4eee28bc96b">mutt_sig_block</a>();</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  endwin();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  fflush(stdout);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#abec93f40f46e453d46cb9d7181ae39f9">expand_command_str</a>(m, command, sys_cmd, <span class="keyword">sizeof</span>(sys_cmd));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a>(sys_cmd) != 0)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    rc = 0;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error running \&quot;%s\&quot;&quot;</span>), sys_cmd);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a>();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="ttc" id="signal_8c_html_aa9356c41baa1b35d3a7719f90570e6b7"><div class="ttname"><a href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a></div><div class="ttdeci">void mutt_sig_unblock(void)</div><div class="ttdoc">Restore previously blocked signals. </div><div class="ttdef"><b>Definition:</b> <a href="signal_8c_source.html#l00168">signal.c:168</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structMailbox_html_af1ff47b8f14a4503c9b8473582b13d5a"><div class="ttname"><a href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">Mailbox::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdoc">Display status messages? </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00118">mailbox.h:118</a></div></div>
<div class="ttc" id="string2_8h_html_a8f64b8071f8cd3a1776578dbf49495f7"><div class="ttname"><a href="string2_8h.html#a8f64b8071f8cd3a1776578dbf49495f7">STR_COMMAND</a></div><div class="ttdeci">#define STR_COMMAND</div><div class="ttdoc">Enough space for a long command line. </div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00035">string2.h:35</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="signal_8c_html_aa6c49e5535cdffeffd2cd4eee28bc96b"><div class="ttname"><a href="signal_8c.html#aa6c49e5535cdffeffd2cd4eee28bc96b">mutt_sig_block</a></div><div class="ttdeci">void mutt_sig_block(void)</div><div class="ttdoc">Block signals during critical operations. </div><div class="ttdef"><b>Definition:</b> <a href="signal_8c_source.html#l00150">signal.c:150</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_abec93f40f46e453d46cb9d7181ae39f9"><div class="ttname"><a href="compmbox_2compress_8c.html#abec93f40f46e453d46cb9d7181ae39f9">expand_command_str</a></div><div class="ttdeci">static void expand_command_str(const struct Mailbox *m, const char *cmd, char *buf, int buflen)</div><div class="ttdoc">Expand placeholders in command string. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00299">compress.c:299</a></div></div>
<div class="ttc" id="protos_8h_html_aa1d4ad04b000036513ca3f741059942c"><div class="ttname"><a href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a></div><div class="ttdeci">int mutt_system(const char *cmd)</div><div class="ttdoc">Run an external command. </div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00051">system.c:51</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a77600af8755fc3921168f6c0727abf18_cgraph.svg" width="404" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a77600af8755fc3921168f6c0727abf18_icgraph.svg" width="588" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9f3c7362d3b06ea8c32ce55d5c3db5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3c7362d3b06ea8c32ce55d5c3db5f1">&#9670;&nbsp;</a></span>mutt_comp_can_append()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_comp_can_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can we append to this path? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Yes, we can append to the file </td></tr>
    <tr><td class="paramname">false</td><td>No, appending isn't possible</td></tr>
  </table>
  </dd>
</dl>
<p>To append to a file we can either use an 'append-hook' or a combination of 'open-hook' and 'close-hook'.</p>
<p>A match means it's our responsibility to append to the file. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00359">359</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">/* If this succeeds, we know there&#39;s an open-hook */</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = <a class="code" href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a>(m);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (!ci)</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">/* We have an open-hook, so to append we need an append-hook,</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">   * or a close-hook. */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">if</span> (ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a> || ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>)</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t append without an append-hook or close-hook : %s&quot;</span>), <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a958dff103de14a95ce0a8a5dd977167b"><div class="ttname"><a href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a></div><div class="ttdeci">static struct CompressInfo * set_compress_info(struct Mailbox *m)</div><div class="ttdoc">Find the compress hooks for a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00196">compress.c:196</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a9f3c7362d3b06ea8c32ce55d5c3db5f1_cgraph.svg" width="543" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a9f3c7362d3b06ea8c32ce55d5c3db5f1_icgraph.svg" width="438" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af5e4caf583046a535cf5fda9933d3c74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e4caf583046a535cf5fda9933d3c74">&#9670;&nbsp;</a></span>mutt_comp_can_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_comp_can_read </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can we read from this file? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Pathname of file to be tested </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Yes, we can read the file </td></tr>
    <tr><td class="paramname">false</td><td>No, we can't read the file</td></tr>
  </table>
  </dd>
</dl>
<p>Search for an 'open-hook' with a regex that matches the path.</p>
<p>A match means it's our responsibility to open the file. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00388">388</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (!path)</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a>, path))</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="ttc" id="hook_8c_html_a5b0861b9e36e5debdf8b6509a22e6738"><div class="ttname"><a href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a></div><div class="ttdeci">char * mutt_find_hook(HookFlags type, const char *pat)</div><div class="ttdoc">Find a matching hook. </div><div class="ttdef"><b>Definition:</b> <a href="hook_8c_source.html#l00577">hook.c:577</a></div></div>
<div class="ttc" id="hook_8h_html_a2023ebfafb21558f2adf582b9f182523"><div class="ttname"><a href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a></div><div class="ttdeci">#define MUTT_OPEN_HOOK</div><div class="ttdoc">open-hook: to read a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00052">hook.h:52</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_af5e4caf583046a535cf5fda9933d3c74_cgraph.svg" width="344" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_af5e4caf583046a535cf5fda9933d3c74_icgraph.svg" width="360" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab77ea42f102d3aced8ea915e95a83bd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab77ea42f102d3aced8ea915e95a83bd4">&#9670;&nbsp;</a></span>mutt_comp_valid_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_comp_valid_command </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this command string allowed? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td><a class="el" href="structCommand.html" title="A user-callable command. ">Command</a> string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Valid command </td></tr>
    <tr><td class="paramname">0</td><td>"%f" and/or "%t" is missing</td></tr>
  </table>
  </dd>
</dl>
<p>A valid command string must have both "%f" (from file) and "%t" (to file). We don't check if we can actually run the command. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00408">408</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">if</span> (!cmd)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">return</span> strstr(cmd, <span class="stringliteral">&quot;%f&quot;</span>) &amp;&amp; strstr(cmd, <span class="stringliteral">&quot;%t&quot;</span>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div></div><!-- fragment --><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_ab77ea42f102d3aced8ea915e95a83bd4_icgraph.svg" width="400" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a08818c1789d0341db65745d36f50f1b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08818c1789d0341db65745d36f50f1b3">&#9670;&nbsp;</a></span>comp_commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structCommand.html">Command</a> comp_commands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  </div><div class="line">  { <span class="stringliteral">&quot;append-hook&quot;</span>, <a class="code" href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a>, <a class="code" href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a> },</div><div class="line">  { <span class="stringliteral">&quot;close-hook&quot;</span>,  <a class="code" href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a>, <a class="code" href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a> },</div><div class="line">  { <span class="stringliteral">&quot;open-hook&quot;</span>,   <a class="code" href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a>, <a class="code" href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a> },</div><div class="line">  </div><div class="line">}</div><div class="ttc" id="hook_8c_html_a4b6e4f5a7cf7c50a1d32450735eba6f9"><div class="ttname"><a href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a></div><div class="ttdeci">enum CommandResult mutt_parse_hook(struct Buffer *buf, struct Buffer *s, intptr_t data, struct Buffer *err)</div><div class="ttdoc">Parse the &amp;#39;hook&amp;#39; family of commands - Implements Command::parse() </div><div class="ttdef"><b>Definition:</b> <a href="hook_8c_source.html#l00082">hook.c:82</a></div></div>
<div class="ttc" id="hook_8h_html_a608d073646dabfa996b8460a6041393a"><div class="ttname"><a href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a></div><div class="ttdeci">#define MUTT_APPEND_HOOK</div><div class="ttdoc">append-hook: append to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00053">hook.h:53</a></div></div>
<div class="ttc" id="hook_8h_html_a4dc1443d223770a18d42c237f7748e66"><div class="ttname"><a href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a></div><div class="ttdeci">#define MUTT_CLOSE_HOOK</div><div class="ttdoc">close-hook: write to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00054">hook.h:54</a></div></div>
<div class="ttc" id="hook_8h_html_a2023ebfafb21558f2adf582b9f182523"><div class="ttname"><a href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a></div><div class="ttdeci">#define MUTT_OPEN_HOOK</div><div class="ttdoc">open-hook: to read a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00052">hook.h:52</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00058">58</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
