<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: compmbox/compress.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2021-02-05-584-gb5c7a7</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('compmbox_2compress_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">compress.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Compressed mbox local mailbox type.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gui_2lib_8h_source.html">gui/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="compmbox_2lib_8h_source.html">lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="format__flags_8h_source.html">format_flags.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hook_8h_source.html">hook.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__commands_8h_source.html">mutt_commands.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__globals_8h_source.html">mutt_globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="muttlib_8h_source.html">muttlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mx_8h_source.html">mx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protos_8h_source.html">protos.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for compress.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c__incl.svg" width="1527" height="262"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="compmbox_2compress_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8440ad71a5e3d43cd2c836c777bccded"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a8440ad71a5e3d43cd2c836c777bccded">mutt_comp_init</a> (void)</td></tr>
<tr class="memdesc:a8440ad71a5e3d43cd2c836c777bccded"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup feature commands.  <a href="#a8440ad71a5e3d43cd2c836c777bccded">More...</a><br /></td></tr>
<tr class="separator:a8440ad71a5e3d43cd2c836c777bccded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c82fa05ac9a30a1cd0e5c5b472ae066"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, bool excl)</td></tr>
<tr class="memdesc:a8c82fa05ac9a30a1cd0e5c5b472ae066"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock the ctx-&gt;realpath.  <a href="#a8c82fa05ac9a30a1cd0e5c5b472ae066">More...</a><br /></td></tr>
<tr class="separator:a8c82fa05ac9a30a1cd0e5c5b472ae066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa35e239a0ed2772ae5824c317276f83a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:aa35e239a0ed2772ae5824c317276f83a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the mailbox-&gt;realpath.  <a href="#aa35e239a0ed2772ae5824c317276f83a">More...</a><br /></td></tr>
<tr class="separator:aa35e239a0ed2772ae5824c317276f83a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e1b3c821fbb441941a42b24149fbb3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a60e1b3c821fbb441941a42b24149fbb3">setup_paths</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a60e1b3c821fbb441941a42b24149fbb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the mailbox paths.  <a href="#a60e1b3c821fbb441941a42b24149fbb3">More...</a><br /></td></tr>
<tr class="separator:a60e1b3c821fbb441941a42b24149fbb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877acb05482802a48bc56da5e24c8c54"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a> (const struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a877acb05482802a48bc56da5e24c8c54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the size of the compressed file.  <a href="#a877acb05482802a48bc56da5e24c8c54">More...</a><br /></td></tr>
<tr class="separator:a877acb05482802a48bc56da5e24c8c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a958dff103de14a95ce0a8a5dd977167b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structCompressInfo.html">CompressInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a958dff103de14a95ce0a8a5dd977167b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the compress hooks for a mailbox.  <a href="#a958dff103de14a95ce0a8a5dd977167b">More...</a><br /></td></tr>
<tr class="separator:a958dff103de14a95ce0a8a5dd977167b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae987f4dda46e1423fedf6a0ac0b2de"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a5ae987f4dda46e1423fedf6a0ac0b2de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the compress info members and structure.  <a href="#a5ae987f4dda46e1423fedf6a0ac0b2de">More...</a><br /></td></tr>
<tr class="separator:a5ae987f4dda46e1423fedf6a0ac0b2de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a804a1a638527ebaddb0d693ec35d5198"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a804a1a638527ebaddb0d693ec35d5198">compress_format_str</a> (char *buf, size_t buflen, size_t col, int cols, char op, const char *src, const char *prec, const char *if_str, const char *else_str, intptr_t data, <a class="el" href="format__flags_8h.html#ad2734d319d795141616e1b5f241be1b2">MuttFormatFlags</a> flags)</td></tr>
<tr class="memdesc:a804a1a638527ebaddb0d693ec35d5198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand the filenames in a command string - Implements <a class="el" href="format__flags_8h.html#a72125443a8544d5a78a9057d420c83c5" title="Prototype for a mutt_expando_format() callback function. ">format_t</a>.  <a href="#a804a1a638527ebaddb0d693ec35d5198">More...</a><br /></td></tr>
<tr class="separator:a804a1a638527ebaddb0d693ec35d5198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec93f40f46e453d46cb9d7181ae39f9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#abec93f40f46e453d46cb9d7181ae39f9">expand_command_str</a> (const struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *cmd, char *buf, int buflen)</td></tr>
<tr class="memdesc:abec93f40f46e453d46cb9d7181ae39f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand placeholders in command string.  <a href="#abec93f40f46e453d46cb9d7181ae39f9">More...</a><br /></td></tr>
<tr class="separator:abec93f40f46e453d46cb9d7181ae39f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77600af8755fc3921168f6c0727abf18"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *command, const char *progress)</td></tr>
<tr class="memdesc:a77600af8755fc3921168f6c0727abf18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a system command.  <a href="#a77600af8755fc3921168f6c0727abf18">More...</a><br /></td></tr>
<tr class="separator:a77600af8755fc3921168f6c0727abf18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3c7362d3b06ea8c32ce55d5c3db5f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a9f3c7362d3b06ea8c32ce55d5c3db5f1">mutt_comp_can_append</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a9f3c7362d3b06ea8c32ce55d5c3db5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can we append to this path?  <a href="#a9f3c7362d3b06ea8c32ce55d5c3db5f1">More...</a><br /></td></tr>
<tr class="separator:a9f3c7362d3b06ea8c32ce55d5c3db5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e4caf583046a535cf5fda9933d3c74"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#af5e4caf583046a535cf5fda9933d3c74">mutt_comp_can_read</a> (const char *path)</td></tr>
<tr class="memdesc:af5e4caf583046a535cf5fda9933d3c74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can we read from this file?  <a href="#af5e4caf583046a535cf5fda9933d3c74">More...</a><br /></td></tr>
<tr class="separator:af5e4caf583046a535cf5fda9933d3c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77ea42f102d3aced8ea915e95a83bd4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ab77ea42f102d3aced8ea915e95a83bd4">mutt_comp_valid_command</a> (const char *cmd)</td></tr>
<tr class="memdesc:ab77ea42f102d3aced8ea915e95a83bd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this command string allowed?  <a href="#ab77ea42f102d3aced8ea915e95a83bd4">More...</a><br /></td></tr>
<tr class="separator:ab77ea42f102d3aced8ea915e95a83bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add2c1f164cf3e15e8391110717418a3e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#add2c1f164cf3e15e8391110717418a3e">comp_ac_owns_path</a> (struct <a class="el" href="structAccount.html">Account</a> *a, const char *path)</td></tr>
<tr class="memdesc:add2c1f164cf3e15e8391110717418a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> owns a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a8036f191d1b0ace220c5a5ff52f609b4" title="Check whether an Account owns a Mailbox path. ">MxOps::ac_owns_path()</a>  <a href="#add2c1f164cf3e15e8391110717418a3e">More...</a><br /></td></tr>
<tr class="separator:add2c1f164cf3e15e8391110717418a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d5ec9cf297a30e4b0673609773f156"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ad6d5ec9cf297a30e4b0673609773f156">comp_ac_add</a> (struct <a class="el" href="structAccount.html">Account</a> *a, struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ad6d5ec9cf297a30e4b0673609773f156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> - Implements <a class="el" href="structMxOps.html#ac432a4900b0ca5a5ca2dc98319dbf737" title="Add a Mailbox to an Account. ">MxOps::ac_add()</a>  <a href="#ad6d5ec9cf297a30e4b0673609773f156">More...</a><br /></td></tr>
<tr class="separator:ad6d5ec9cf297a30e4b0673609773f156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017f8938078bb770eb825f2de2e588b0"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cad">MxOpenReturns</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a017f8938078bb770eb825f2de2e588b0">comp_mbox_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a017f8938078bb770eb825f2de2e588b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45" title="Open a Mailbox. ">MxOps::mbox_open()</a>  <a href="#a017f8938078bb770eb825f2de2e588b0">More...</a><br /></td></tr>
<tr class="separator:a017f8938078bb770eb825f2de2e588b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5411107efad334d6cfdf124b9856e673"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a5411107efad334d6cfdf124b9856e673">comp_mbox_open_append</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, <a class="el" href="mxapi_8h.html#a12d50555671e01ef64b027974fc5acfa">OpenMailboxFlags</a> flags)</td></tr>
<tr class="memdesc:a5411107efad334d6cfdf124b9856e673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> for appending - Implements <a class="el" href="structMxOps.html#af201c2c2f87a1253cbaf8ae24f062ef3" title="Open a Mailbox for appending. ">MxOps::mbox_open_append()</a>  <a href="#a5411107efad334d6cfdf124b9856e673">More...</a><br /></td></tr>
<tr class="separator:a5411107efad334d6cfdf124b9856e673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3eceb782a3061fe668121697cc2e22"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#abf3eceb782a3061fe668121697cc2e22">comp_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:abf3eceb782a3061fe668121697cc2e22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875" title="Check for new mail. ">MxOps::mbox_check()</a>  <a href="#abf3eceb782a3061fe668121697cc2e22">More...</a><br /></td></tr>
<tr class="separator:abf3eceb782a3061fe668121697cc2e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeb7755ceb989e6dc91e9afa2ff9e84e"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#adeb7755ceb989e6dc91e9afa2ff9e84e">comp_mbox_sync</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:adeb7755ceb989e6dc91e9afa2ff9e84e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save changes to the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#aebbfeec5651637ec053cc47b95c124af" title="Save changes to the Mailbox. ">MxOps::mbox_sync()</a>  <a href="#adeb7755ceb989e6dc91e9afa2ff9e84e">More...</a><br /></td></tr>
<tr class="separator:adeb7755ceb989e6dc91e9afa2ff9e84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac39b99d890436a70c50814a4701ed597"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ac39b99d890436a70c50814a4701ed597">comp_mbox_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ac39b99d890436a70c50814a4701ed597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc" title="Close a Mailbox. ">MxOps::mbox_close()</a>  <a href="#ac39b99d890436a70c50814a4701ed597">More...</a><br /></td></tr>
<tr class="separator:ac39b99d890436a70c50814a4701ed597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8f0ce1d30bcb3109c62a81979af5a15"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ac8f0ce1d30bcb3109c62a81979af5a15">comp_msg_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg, int msgno)</td></tr>
<tr class="memdesc:ac8f0ce1d30bcb3109c62a81979af5a15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an email message in a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#afae8d734bf2f05baf8b45eb69f23a2a8" title="Open an email message in a Mailbox. ">MxOps::msg_open()</a>  <a href="#ac8f0ce1d30bcb3109c62a81979af5a15">More...</a><br /></td></tr>
<tr class="separator:ac8f0ce1d30bcb3109c62a81979af5a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c943e36f1c8e2354a8303c4435393dd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a8c943e36f1c8e2354a8303c4435393dd">comp_msg_open_new</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg, const struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a8c943e36f1c8e2354a8303c4435393dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new message in a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ada910d49b8f3d007c32aa8a4adc15637" title="Open a new message in a Mailbox. ">MxOps::msg_open_new()</a>  <a href="#a8c943e36f1c8e2354a8303c4435393dd">More...</a><br /></td></tr>
<tr class="separator:a8c943e36f1c8e2354a8303c4435393dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a449d225488040512f5696e4f76f36694"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a449d225488040512f5696e4f76f36694">comp_msg_commit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg)</td></tr>
<tr class="memdesc:a449d225488040512f5696e4f76f36694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save changes to an email - Implements <a class="el" href="structMxOps.html#ab59dadf81aec5575a1c690caa4822e37" title="Save changes to an email. ">MxOps::msg_commit()</a>  <a href="#a449d225488040512f5696e4f76f36694">More...</a><br /></td></tr>
<tr class="separator:a449d225488040512f5696e4f76f36694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cedad82abc13c823ff2d0e7bc1b66f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a9cedad82abc13c823ff2d0e7bc1b66f9">comp_msg_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg)</td></tr>
<tr class="memdesc:a9cedad82abc13c823ff2d0e7bc1b66f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an email - Implements <a class="el" href="structMxOps.html#ad53e3df1ff124eea52bc0488915e9ae4" title="Close an email. ">MxOps::msg_close()</a>  <a href="#a9cedad82abc13c823ff2d0e7bc1b66f9">More...</a><br /></td></tr>
<tr class="separator:a9cedad82abc13c823ff2d0e7bc1b66f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e6812b4bba1845ea248f4df93c06fea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a0e6812b4bba1845ea248f4df93c06fea">comp_msg_padding_size</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a0e6812b4bba1845ea248f4df93c06fea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bytes of padding between messages - Implements <a class="el" href="structMxOps.html#a784ae2e2b98208080a641974ce4df834" title="Bytes of padding between messages. ">MxOps::msg_padding_size()</a>  <a href="#a0e6812b4bba1845ea248f4df93c06fea">More...</a><br /></td></tr>
<tr class="separator:a0e6812b4bba1845ea248f4df93c06fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac329588156f6dfd55072cc812ff043cd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ac329588156f6dfd55072cc812ff043cd">comp_msg_save_hcache</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:ac329588156f6dfd55072cc812ff043cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save message to the header cache - Implements <a class="el" href="structMxOps.html#a4c0ce9432905dfb3f6849c97ae504f84" title="Save message to the header cache. ">MxOps::msg_save_hcache()</a>  <a href="#ac329588156f6dfd55072cc812ff043cd">More...</a><br /></td></tr>
<tr class="separator:ac329588156f6dfd55072cc812ff043cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6baf16b10893271190480d29fbc8b493"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a6baf16b10893271190480d29fbc8b493">comp_tags_edit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *tags, char *buf, size_t buflen)</td></tr>
<tr class="memdesc:a6baf16b10893271190480d29fbc8b493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt and validate new messages tags - Implements <a class="el" href="structMxOps.html#a0e3f825e2d93106795c85d5df78874ea" title="Prompt and validate new messages tags. ">MxOps::tags_edit()</a>  <a href="#a6baf16b10893271190480d29fbc8b493">More...</a><br /></td></tr>
<tr class="separator:a6baf16b10893271190480d29fbc8b493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0b7ffa4578c0b91fda494e873f13e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a1c0b7ffa4578c0b91fda494e873f13e7">comp_tags_commit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, char *buf)</td></tr>
<tr class="memdesc:a1c0b7ffa4578c0b91fda494e873f13e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the tags to a message - Implements <a class="el" href="structMxOps.html#a9e996b21c0a4d701020aa632ecc5ae82" title="Save the tags to a message. ">MxOps::tags_commit()</a>  <a href="#a1c0b7ffa4578c0b91fda494e873f13e7">More...</a><br /></td></tr>
<tr class="separator:a1c0b7ffa4578c0b91fda494e873f13e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad886126ad1805be0c69f9b2fe138db10"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921d">MailboxType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ad886126ad1805be0c69f9b2fe138db10">comp_path_probe</a> (const char *path, const struct stat *st)</td></tr>
<tr class="memdesc:ad886126ad1805be0c69f9b2fe138db10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this a compressed <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a>? - Implements <a class="el" href="structMxOps.html#a625a6ea0abfdb6620542e26acc499177" title="Does this Mailbox type recognise this path? ">MxOps::path_probe()</a>  <a href="#ad886126ad1805be0c69f9b2fe138db10">More...</a><br /></td></tr>
<tr class="separator:ad886126ad1805be0c69f9b2fe138db10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc352b335c9a8dd1d6e89bcc566dba80"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#afc352b335c9a8dd1d6e89bcc566dba80">comp_path_canon</a> (char *buf, size_t buflen)</td></tr>
<tr class="memdesc:afc352b335c9a8dd1d6e89bcc566dba80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Canonicalise a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#ad7d938f02ba15c08d45128bc2ca00e28" title="Canonicalise a Mailbox path. ">MxOps::path_canon()</a>  <a href="#afc352b335c9a8dd1d6e89bcc566dba80">More...</a><br /></td></tr>
<tr class="separator:afc352b335c9a8dd1d6e89bcc566dba80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a164a2844f1899843274d6c80a194ca86"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a164a2844f1899843274d6c80a194ca86">comp_path_pretty</a> (char *buf, size_t buflen, const char *folder)</td></tr>
<tr class="memdesc:a164a2844f1899843274d6c80a194ca86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abbreviate a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a3a85067a3d76652ec0014ce520c565db" title="Abbreviate a Mailbox path. ">MxOps::path_pretty()</a>  <a href="#a164a2844f1899843274d6c80a194ca86">More...</a><br /></td></tr>
<tr class="separator:a164a2844f1899843274d6c80a194ca86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab807f84b5a28020a4250500f9fa7463c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#ab807f84b5a28020a4250500f9fa7463c">comp_path_parent</a> (char *buf, size_t buflen)</td></tr>
<tr class="memdesc:ab807f84b5a28020a4250500f9fa7463c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the parent of a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a0816dd26eb79c12783e9ac9e7b67ecd9" title="Find the parent of a Mailbox path. ">MxOps::path_parent()</a>  <a href="#ab807f84b5a28020a4250500f9fa7463c">More...</a><br /></td></tr>
<tr class="separator:ab807f84b5a28020a4250500f9fa7463c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a08818c1789d0341db65745d36f50f1b3"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="structCommand.html">Command</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a08818c1789d0341db65745d36f50f1b3">comp_commands</a> []</td></tr>
<tr class="separator:a08818c1789d0341db65745d36f50f1b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69f737b0581952c0ef57f37af78ac6c7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structMxOps.html">MxOps</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compmbox_2compress_8c.html#a69f737b0581952c0ef57f37af78ac6c7">MxCompOps</a></td></tr>
<tr class="memdesc:a69f737b0581952c0ef57f37af78ac6c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compressed <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html" title="The Mailbox API. ">MxOps</a>.  <a href="#a69f737b0581952c0ef57f37af78ac6c7">More...</a><br /></td></tr>
<tr class="separator:a69f737b0581952c0ef57f37af78ac6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Compressed mbox local mailbox type. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Alain Penders</li>
<li>Richard Russon</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8440ad71a5e3d43cd2c836c777bccded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8440ad71a5e3d43cd2c836c777bccded">&#9670;&nbsp;</a></span>mutt_comp_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_comp_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup feature commands. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00067">67</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="mutt__commands_8h.html#ab11d3e73ef33f8740241999967f38580">COMMANDS_REGISTER</a>(<a class="code" href="compmbox_2compress_8c.html#a08818c1789d0341db65745d36f50f1b3">comp_commands</a>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="ttc" id="mutt__commands_8h_html_ab11d3e73ef33f8740241999967f38580"><div class="ttname"><a href="mutt__commands_8h.html#ab11d3e73ef33f8740241999967f38580">COMMANDS_REGISTER</a></div><div class="ttdeci">#define COMMANDS_REGISTER(cmds)</div><div class="ttdef"><b>Definition:</b> <a href="mutt__commands_8h_source.html#l00077">mutt_commands.h:77</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a08818c1789d0341db65745d36f50f1b3"><div class="ttname"><a href="compmbox_2compress_8c.html#a08818c1789d0341db65745d36f50f1b3">comp_commands</a></div><div class="ttdeci">static const struct Command comp_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00056">compress.c:56</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a8440ad71a5e3d43cd2c836c777bccded_icgraph.svg" width="264" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8c82fa05ac9a30a1cd0e5c5b472ae066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c82fa05ac9a30a1cd0e5c5b472ae066">&#9670;&nbsp;</a></span>lock_realpath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool lock_realpath </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>excl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to lock the ctx-&gt;realpath. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to lock </td></tr>
    <tr><td class="paramname">excl</td><td>Lock exclusively? </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success (locked or readonly) </td></tr>
    <tr><td class="paramname">false</td><td>Error (can't lock the file)</td></tr>
  </table>
  </dd>
</dl>
<p>Try to (exclusively) lock the mailbox. If we succeed, then we mark the mailbox as locked. If we fail, but we didn't want exclusive rights, then the mailbox will be marked readonly. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00083">83</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a>)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (excl)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a> = fopen(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, <span class="stringliteral">&quot;a&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a> = fopen(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="logging_8h.html#afaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">int</span> r = <a class="code" href="file_8c.html#a4cdd1f9b1b370cbf5a8348f63cfe67cf">mutt_file_lock</a>(fileno(ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>), excl, <span class="keyword">true</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (r == 0)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (excl)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">readonly</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">return</span> r == 0;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div><div class="ttc" id="logging_8h_html_afaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="logging_8h.html#afaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="structCompressInfo_html_a2aca1d78a4d745a6a795dab05279f8db"><div class="ttname"><a href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">CompressInfo::fp_lock</a></div><div class="ttdeci">FILE * fp_lock</div><div class="ttdoc">fp used for locking </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00054">lib.h:54</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="structCompressInfo_html_aac3530ca93433b36ec7118f2278f8280"><div class="ttname"><a href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">CompressInfo::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdoc">if realpath is locked </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00053">lib.h:53</a></div></div>
<div class="ttc" id="file_8c_html_a4cdd1f9b1b370cbf5a8348f63cfe67cf"><div class="ttname"><a href="file_8c.html#a4cdd1f9b1b370cbf5a8348f63cfe67cf">mutt_file_lock</a></div><div class="ttdeci">int mutt_file_lock(int fd, bool excl, bool timeout)</div><div class="ttdoc">(try to) lock a file using fcntl() </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01178">file.c:1178</a></div></div>
<div class="ttc" id="structMailbox_html_ae55237419d0e842cd6efeed0c41d27e8"><div class="ttname"><a href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">Mailbox::readonly</a></div><div class="ttdeci">bool readonly</div><div class="ttdoc">Don&amp;#39;t allow changes to the mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00119">mailbox.h:119</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a8c82fa05ac9a30a1cd0e5c5b472ae066_cgraph.svg" width="296" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a8c82fa05ac9a30a1cd0e5c5b472ae066_icgraph.svg" width="552" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa35e239a0ed2772ae5824c317276f83a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa35e239a0ed2772ae5824c317276f83a">&#9670;&nbsp;</a></span>unlock_realpath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlock_realpath </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlock the mailbox-&gt;realpath. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to unlock</td></tr>
  </table>
  </dd>
</dl>
<p>Unlock a mailbox previously locked by lock_mailbox(). </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00122">122</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a>)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="file_8c.html#a58563edc1ad32b074fb2425a929b0f39">mutt_file_unlock</a>(fileno(ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">locked</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">fp_lock</a>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="ttc" id="structCompressInfo_html_a2aca1d78a4d745a6a795dab05279f8db"><div class="ttname"><a href="structCompressInfo.html#a2aca1d78a4d745a6a795dab05279f8db">CompressInfo::fp_lock</a></div><div class="ttdeci">FILE * fp_lock</div><div class="ttdoc">fp used for locking </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00054">lib.h:54</a></div></div>
<div class="ttc" id="structCompressInfo_html_aac3530ca93433b36ec7118f2278f8280"><div class="ttname"><a href="structCompressInfo.html#aac3530ca93433b36ec7118f2278f8280">CompressInfo::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdoc">if realpath is locked </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00053">lib.h:53</a></div></div>
<div class="ttc" id="file_8c_html_a58563edc1ad32b074fb2425a929b0f39"><div class="ttname"><a href="file_8c.html#a58563edc1ad32b074fb2425a929b0f39">mutt_file_unlock</a></div><div class="ttdeci">int mutt_file_unlock(int fd)</div><div class="ttdoc">Unlock a file previously locked by mutt_file_lock() </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01226">file.c:1226</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_aa35e239a0ed2772ae5824c317276f83a_cgraph.svg" width="316" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_aa35e239a0ed2772ae5824c317276f83a_icgraph.svg" width="527" height="204"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a60e1b3c821fbb441941a42b24149fbb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60e1b3c821fbb441941a42b24149fbb3">&#9670;&nbsp;</a></span>setup_paths()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setup_paths </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the mailbox paths. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to modify </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<p>Save the compressed filename in mailbox-&gt;realpath. Create a temporary filename and put its name in mailbox-&gt;path. The temporary file is created to prevent symlink attacks. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00148">148</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">/* Setup the right paths */</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">/* We will uncompress to TMPDIR */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *buf = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a>(buf);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="buffer_8c.html#ad070cb0d30bde9c0069f8c8e27ed89a8">mutt_buffer_copy</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#aa44c1232018ddd1953039aa857b23ab5">pathbuf</a>, buf);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  FILE *fp = <a class="code" href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">if</span> (!fp)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a>(&amp;fp);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="muttlib_8h_html_a7f1db9db6f710a84cace77248096e2ac"><div class="ttname"><a href="muttlib_8h.html#a7f1db9db6f710a84cace77248096e2ac">mutt_buffer_mktemp</a></div><div class="ttdeci">#define mutt_buffer_mktemp(buf)</div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8h_source.html#l00074">muttlib.h:74</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="buffer_8c_html_ad070cb0d30bde9c0069f8c8e27ed89a8"><div class="ttname"><a href="buffer_8c.html#ad070cb0d30bde9c0069f8c8e27ed89a8">mutt_buffer_copy</a></div><div class="ttdeci">size_t mutt_buffer_copy(struct Buffer *dst, const struct Buffer *src)</div><div class="ttdoc">Copy a Buffer&amp;#39;s contents to another Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00445">buffer.c:445</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="file_8c_html_a31f49795ff5b9558db5476e5777e63b6"><div class="ttname"><a href="file_8c.html#a31f49795ff5b9558db5476e5777e63b6">mutt_file_fclose</a></div><div class="ttdeci">int mutt_file_fclose(FILE **fp)</div><div class="ttdoc">Close a FILE handle (and NULL the pointer) </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00153">file.c:153</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ae9b6bbaa52b6ce51f2a384fe500e028e"><div class="ttname"><a href="mutt_2string_8c.html#ae9b6bbaa52b6ce51f2a384fe500e028e">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00446">string.c:446</a></div></div>
<div class="ttc" id="structMailbox_html_aa44c1232018ddd1953039aa857b23ab5"><div class="ttname"><a href="structMailbox.html#aa44c1232018ddd1953039aa857b23ab5">Mailbox::pathbuf</a></div><div class="ttdeci">struct Buffer pathbuf</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00083">mailbox.h:83</a></div></div>
<div class="ttc" id="file_8c_html_ae1c0c19fec03274220b3ca065ad1e2e5"><div class="ttname"><a href="file_8c.html#ae1c0c19fec03274220b3ca065ad1e2e5">mutt_file_fopen</a></div><div class="ttdeci">FILE * mutt_file_fopen(const char *path, const char *mode)</div><div class="ttdoc">Call fopen() safely. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00589">file.c:589</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a60e1b3c821fbb441941a42b24149fbb3_cgraph.svg" width="348" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a60e1b3c821fbb441941a42b24149fbb3_icgraph.svg" width="356" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a877acb05482802a48bc56da5e24c8c54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877acb05482802a48bc56da5e24c8c54">&#9670;&nbsp;</a></span>store_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void store_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save the size of the compressed file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a></td></tr>
  </table>
  </dd>
</dl>
<p>Save the compressed file size in the compress_info struct. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00176">176</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">size</a> = <a class="code" href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div><div class="ttc" id="file_8c_html_a75f1c8024613a5e8c23f92d229f52101"><div class="ttname"><a href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a></div><div class="ttdeci">long mutt_file_get_size(const char *path)</div><div class="ttdoc">Get the size of a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01498">file.c:1498</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="structCompressInfo_html_ae92bc129b9825e39e42d7737197c3297"><div class="ttname"><a href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">CompressInfo::size</a></div><div class="ttdeci">long size</div><div class="ttdoc">size of the compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00051">lib.h:51</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a877acb05482802a48bc56da5e24c8c54_cgraph.svg" width="288" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a877acb05482802a48bc56da5e24c8c54_icgraph.svg" width="480" height="114"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a958dff103de14a95ce0a8a5dd977167b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a958dff103de14a95ce0a8a5dd977167b">&#9670;&nbsp;</a></span>set_compress_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structCompressInfo.html">CompressInfo</a>* set_compress_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the compress hooks for a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to examine </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structCompressInfo.html" title="Private data for compress. ">CompressInfo</a> <a class="el" href="structHook.html" title="A list of user hooks. ">Hook</a> info for the mailbox's path </td></tr>
    <tr><td class="paramname">NULL</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<p>When a mailbox is opened, we check if there are any matching hooks. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00194">194</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">/* Open is compulsory */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *o = <a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (!o)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *c = <a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *a = <a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a>, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = <a class="code" href="memory_8c.html#a4c1612d209c7825d55e6a014df352f03">mutt_mem_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structCompressInfo.html">CompressInfo</a>));</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a> = ci;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a> = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(o);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a> = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(c);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a> = <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(a);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">return</span> ci;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="memory_8c_html_a4c1612d209c7825d55e6a014df352f03"><div class="ttname"><a href="memory_8c.html#a4c1612d209c7825d55e6a014df352f03">mutt_mem_calloc</a></div><div class="ttdeci">void * mutt_mem_calloc(size_t nmemb, size_t size)</div><div class="ttdoc">Allocate zeroed memory on the heap. </div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00050">memory.c:50</a></div></div>
<div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a4c2560f787bd1226b977992c16860c98"><div class="ttname"><a href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00370">string.c:370</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="hook_8h_html_a608d073646dabfa996b8460a6041393a"><div class="ttname"><a href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a></div><div class="ttdeci">#define MUTT_APPEND_HOOK</div><div class="ttdoc">append-hook: append to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00053">hook.h:53</a></div></div>
<div class="ttc" id="hook_8c_html_a5b0861b9e36e5debdf8b6509a22e6738"><div class="ttname"><a href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a></div><div class="ttdeci">char * mutt_find_hook(HookFlags type, const char *pat)</div><div class="ttdoc">Find a matching hook. </div><div class="ttdef"><b>Definition:</b> <a href="hook_8c_source.html#l00577">hook.c:577</a></div></div>
<div class="ttc" id="hook_8h_html_a4dc1443d223770a18d42c237f7748e66"><div class="ttname"><a href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a></div><div class="ttdeci">#define MUTT_CLOSE_HOOK</div><div class="ttdoc">close-hook: write to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00054">hook.h:54</a></div></div>
<div class="ttc" id="hook_8h_html_a2023ebfafb21558f2adf582b9f182523"><div class="ttname"><a href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a></div><div class="ttdeci">#define MUTT_OPEN_HOOK</div><div class="ttdoc">open-hook: to read a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00052">hook.h:52</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a958dff103de14a95ce0a8a5dd977167b_cgraph.svg" width="342" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a958dff103de14a95ce0a8a5dd977167b_icgraph.svg" width="399" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5ae987f4dda46e1423fedf6a0ac0b2de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae987f4dda46e1423fedf6a0ac0b2de">&#9670;&nbsp;</a></span>compress_info_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compress_info_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees the compress info members and structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to free compress_info for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00224">224</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a>(m);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div><div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_aa35e239a0ed2772ae5824c317276f83a"><div class="ttname"><a href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a></div><div class="ttdeci">static void unlock_realpath(struct Mailbox *m)</div><div class="ttdoc">Unlock the mailbox-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00122">compress.c:122</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a5ae987f4dda46e1423fedf6a0ac0b2de_cgraph.svg" width="336" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a5ae987f4dda46e1423fedf6a0ac0b2de_icgraph.svg" width="406" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a804a1a638527ebaddb0d693ec35d5198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a804a1a638527ebaddb0d693ec35d5198">&#9670;&nbsp;</a></span>compress_format_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* compress_format_str </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>if_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>else_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">intptr_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="format__flags_8h.html#ad2734d319d795141616e1b5f241be1b2">MuttFormatFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expand the filenames in a command string - Implements <a class="el" href="format__flags_8h.html#a72125443a8544d5a78a9057d420c83c5" title="Prototype for a mutt_expando_format() callback function. ">format_t</a>. </p>
<table class="doxtable">
<tr>
<th align="left">Expando </th><th align="left">Description  </th></tr>
<tr>
<td align="left">%f </td><td align="left">Compressed file </td></tr>
<tr>
<td align="left">%t </td><td align="left">Plaintext, temporary file </td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00247">247</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">if</span> (!buf || (data == 0))</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> src;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMailbox.html">Mailbox</a> *m = (<span class="keyword">struct </span><a class="code" href="structMailbox.html">Mailbox</a> *) data;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">/* NOTE the compressed file config vars expect %f and %t to be</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">   * surrounded by &#39;&#39; (unlike other NeoMutt config vars, which add the</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">   * outer quotes for the user).  This is why we use the</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">   * mutt_buffer_quote_filename() form with add_outer of false. */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *quoted = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">switch</span> (op)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="comment">/* Compressed file */</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="file_8c.html#a52d932a8cfb110a123fef9eb096a84e0">mutt_buffer_quote_filename</a>(quoted, m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      snprintf(buf, buflen, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(quoted));</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">/* Plaintext, temporary file */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="file_8c.html#a52d932a8cfb110a123fef9eb096a84e0">mutt_buffer_quote_filename</a>(quoted, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), <span class="keyword">false</span>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      snprintf(buf, buflen, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(quoted));</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;quoted);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">return</span> src;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="ttc" id="file_8c_html_a52d932a8cfb110a123fef9eb096a84e0"><div class="ttname"><a href="file_8c.html#a52d932a8cfb110a123fef9eb096a84e0">mutt_buffer_quote_filename</a></div><div class="ttdeci">void mutt_buffer_quote_filename(struct Buffer *buf, const char *filename, bool add_outer)</div><div class="ttdoc">Quote a filename to survive the shell&amp;#39;s quoting rules. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l00838">file.c:838</a></div></div>
<div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="structMailbox_html"><div class="ttname"><a href="structMailbox.html">Mailbox</a></div><div class="ttdoc">A mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00081">mailbox.h:81</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a804a1a638527ebaddb0d693ec35d5198_cgraph.svg" width="616" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a804a1a638527ebaddb0d693ec35d5198_icgraph.svg" width="386" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abec93f40f46e453d46cb9d7181ae39f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abec93f40f46e453d46cb9d7181ae39f9">&#9670;&nbsp;</a></span>expand_command_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void expand_command_str </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expand placeholders in command string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> for paths </td></tr>
    <tr><td class="paramname">cmd</td><td>Template command to be expanded </td></tr>
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> to store the command </td></tr>
    <tr><td class="paramname">buflen</td><td>Size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<p>This function takes a hook command and expands the filename placeholders within it. The function calls <a class="el" href="muttlib_8c.html#a8972094c1e995739c8b072c8be3ce453" title="Expand expandos (x) in a string. ">mutt_expando_format()</a> to do the replacement which calls our callback function <a class="el" href="compmbox_2compress_8c.html#a804a1a638527ebaddb0d693ec35d5198" title="Expand the filenames in a command string - Implements format_t. ">compress_format_str()</a>. e.g.</p>
<p>Template command: gzip -cd 'f' &gt; 't'</p>
<p>Result: gzip -dc '~/mail/abc.gz' &gt; '/tmp/xyz' </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00297">297</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (!m || !cmd || !buf)</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="muttlib_8c.html#a8972094c1e995739c8b072c8be3ce453">mutt_expando_format</a>(buf, buflen, 0, buflen, cmd, <a class="code" href="compmbox_2compress_8c.html#a804a1a638527ebaddb0d693ec35d5198">compress_format_str</a>,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                      (intptr_t) m, <a class="code" href="format__flags_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div><div class="ttc" id="format__flags_8h_html_a5167e8b2777abe5e02be90e0d2a816de"><div class="ttname"><a href="format__flags_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_FORMAT_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="format__flags_8h_source.html#l00030">format_flags.h:30</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a804a1a638527ebaddb0d693ec35d5198"><div class="ttname"><a href="compmbox_2compress_8c.html#a804a1a638527ebaddb0d693ec35d5198">compress_format_str</a></div><div class="ttdeci">static const char * compress_format_str(char *buf, size_t buflen, size_t col, int cols, char op, const char *src, const char *prec, const char *if_str, const char *else_str, intptr_t data, MuttFormatFlags flags)</div><div class="ttdoc">Expand the filenames in a command string - Implements format_t. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00247">compress.c:247</a></div></div>
<div class="ttc" id="muttlib_8c_html_a8972094c1e995739c8b072c8be3ce453"><div class="ttname"><a href="muttlib_8c.html#a8972094c1e995739c8b072c8be3ce453">mutt_expando_format</a></div><div class="ttdeci">void mutt_expando_format(char *buf, size_t buflen, size_t col, int cols, const char *src, format_t callback, intptr_t data, MuttFormatFlags flags)</div><div class="ttdoc">Expand expandos (x) in a string. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00780">muttlib.c:780</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_abec93f40f46e453d46cb9d7181ae39f9_cgraph.svg" width="392" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_abec93f40f46e453d46cb9d7181ae39f9_icgraph.svg" width="372" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a77600af8755fc3921168f6c0727abf18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77600af8755fc3921168f6c0727abf18">&#9670;&nbsp;</a></span>execute_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int execute_command </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>progress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run a system command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to work with </td></tr>
    <tr><td class="paramname">command</td><td><a class="el" href="structCommand.html" title="A user-callable command. ">Command</a> string to execute </td></tr>
    <tr><td class="paramname">progress</td><td><a class="el" href="structMessage.html" title="A local copy of an email. ">Message</a> to show the user </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Success </td></tr>
    <tr><td class="paramname">0</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>Run the supplied command, taking care of all the <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a> requirements, such as locking files and blocking signals. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00317">317</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;{</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (!m || !command || !progress)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="logging_8h.html#ae108f891125caafa9250cf0959c40c04">mutt_message</a>(progress, m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordtype">int</span> rc = 1;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordtype">char</span> sys_cmd[<a class="code" href="string2_8h.html#a8f64b8071f8cd3a1776578dbf49495f7">STR_COMMAND</a>];</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="signal_8c.html#aa6c49e5535cdffeffd2cd4eee28bc96b">mutt_sig_block</a>();</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  endwin();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  fflush(stdout);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#abec93f40f46e453d46cb9d7181ae39f9">expand_command_str</a>(m, command, sys_cmd, <span class="keyword">sizeof</span>(sys_cmd));</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a>(sys_cmd) != 0)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    rc = 0;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error running \&quot;%s\&quot;&quot;</span>), sys_cmd);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a>();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="ttc" id="signal_8c_html_aa9356c41baa1b35d3a7719f90570e6b7"><div class="ttname"><a href="signal_8c.html#aa9356c41baa1b35d3a7719f90570e6b7">mutt_sig_unblock</a></div><div class="ttdeci">void mutt_sig_unblock(void)</div><div class="ttdoc">Restore previously blocked signals. </div><div class="ttdef"><b>Definition:</b> <a href="signal_8c_source.html#l00168">signal.c:168</a></div></div>
<div class="ttc" id="logging_8h_html_ae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="logging_8h.html#ae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00083">logging.h:83</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structMailbox_html_af1ff47b8f14a4503c9b8473582b13d5a"><div class="ttname"><a href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">Mailbox::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdoc">Display status messages? </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00118">mailbox.h:118</a></div></div>
<div class="ttc" id="string2_8h_html_a8f64b8071f8cd3a1776578dbf49495f7"><div class="ttname"><a href="string2_8h.html#a8f64b8071f8cd3a1776578dbf49495f7">STR_COMMAND</a></div><div class="ttdeci">#define STR_COMMAND</div><div class="ttdoc">Enough space for a long command line. </div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00035">string2.h:35</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="logging_8h_html_acc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00084">logging.h:84</a></div></div>
<div class="ttc" id="signal_8c_html_aa6c49e5535cdffeffd2cd4eee28bc96b"><div class="ttname"><a href="signal_8c.html#aa6c49e5535cdffeffd2cd4eee28bc96b">mutt_sig_block</a></div><div class="ttdeci">void mutt_sig_block(void)</div><div class="ttdoc">Block signals during critical operations. </div><div class="ttdef"><b>Definition:</b> <a href="signal_8c_source.html#l00150">signal.c:150</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_abec93f40f46e453d46cb9d7181ae39f9"><div class="ttname"><a href="compmbox_2compress_8c.html#abec93f40f46e453d46cb9d7181ae39f9">expand_command_str</a></div><div class="ttdeci">static void expand_command_str(const struct Mailbox *m, const char *cmd, char *buf, int buflen)</div><div class="ttdoc">Expand placeholders in command string. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00297">compress.c:297</a></div></div>
<div class="ttc" id="protos_8h_html_aa1d4ad04b000036513ca3f741059942c"><div class="ttname"><a href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a></div><div class="ttdeci">int mutt_system(const char *cmd)</div><div class="ttdoc">Run an external command. </div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00051">system.c:51</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a77600af8755fc3921168f6c0727abf18_cgraph.svg" width="404" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a77600af8755fc3921168f6c0727abf18_icgraph.svg" width="588" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9f3c7362d3b06ea8c32ce55d5c3db5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3c7362d3b06ea8c32ce55d5c3db5f1">&#9670;&nbsp;</a></span>mutt_comp_can_append()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_comp_can_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can we append to this path? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Yes, we can append to the file </td></tr>
    <tr><td class="paramname">false</td><td>No, appending isn't possible</td></tr>
  </table>
  </dd>
</dl>
<p>To append to a file we can either use an 'append-hook' or a combination of 'open-hook' and 'close-hook'.</p>
<p>A match means it's our responsibility to append to the file. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00357">357</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">/* If this succeeds, we know there&#39;s an open-hook */</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = <a class="code" href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a>(m);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> (!ci)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">/* We have an open-hook, so to append we need an append-hook,</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">   * or a close-hook. */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a> || ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t append without an append-hook or close-hook : %s&quot;</span>), <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a958dff103de14a95ce0a8a5dd977167b"><div class="ttname"><a href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a></div><div class="ttdeci">static struct CompressInfo * set_compress_info(struct Mailbox *m)</div><div class="ttdoc">Find the compress hooks for a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00194">compress.c:194</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="logging_8h_html_acc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00084">logging.h:84</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a9f3c7362d3b06ea8c32ce55d5c3db5f1_cgraph.svg" width="543" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a9f3c7362d3b06ea8c32ce55d5c3db5f1_icgraph.svg" width="438" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af5e4caf583046a535cf5fda9933d3c74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e4caf583046a535cf5fda9933d3c74">&#9670;&nbsp;</a></span>mutt_comp_can_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_comp_can_read </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can we read from this file? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Pathname of file to be tested </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Yes, we can read the file </td></tr>
    <tr><td class="paramname">false</td><td>No, we can't read the file</td></tr>
  </table>
  </dd>
</dl>
<p>Search for an 'open-hook' with a regex that matches the path.</p>
<p>A match means it's our responsibility to open the file. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00386">386</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">if</span> (!path)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a>(<a class="code" href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a>, path))</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="ttc" id="hook_8c_html_a5b0861b9e36e5debdf8b6509a22e6738"><div class="ttname"><a href="hook_8c.html#a5b0861b9e36e5debdf8b6509a22e6738">mutt_find_hook</a></div><div class="ttdeci">char * mutt_find_hook(HookFlags type, const char *pat)</div><div class="ttdoc">Find a matching hook. </div><div class="ttdef"><b>Definition:</b> <a href="hook_8c_source.html#l00577">hook.c:577</a></div></div>
<div class="ttc" id="hook_8h_html_a2023ebfafb21558f2adf582b9f182523"><div class="ttname"><a href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a></div><div class="ttdeci">#define MUTT_OPEN_HOOK</div><div class="ttdoc">open-hook: to read a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00052">hook.h:52</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_af5e4caf583046a535cf5fda9933d3c74_cgraph.svg" width="344" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_af5e4caf583046a535cf5fda9933d3c74_icgraph.svg" width="360" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab77ea42f102d3aced8ea915e95a83bd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab77ea42f102d3aced8ea915e95a83bd4">&#9670;&nbsp;</a></span>mutt_comp_valid_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_comp_valid_command </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this command string allowed? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td><a class="el" href="structCommand.html" title="A user-callable command. ">Command</a> string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Valid command </td></tr>
    <tr><td class="paramname">0</td><td>"%f" and/or "%t" is missing</td></tr>
  </table>
  </dd>
</dl>
<p>A valid command string must have both "%f" (from file) and "%t" (to file). We don't check if we can actually run the command. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00406">406</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (!cmd)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">return</span> strstr(cmd, <span class="stringliteral">&quot;%f&quot;</span>) &amp;&amp; strstr(cmd, <span class="stringliteral">&quot;%t&quot;</span>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div></div><!-- fragment --><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_ab77ea42f102d3aced8ea915e95a83bd4_icgraph.svg" width="400" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="add2c1f164cf3e15e8391110717418a3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add2c1f164cf3e15e8391110717418a3e">&#9670;&nbsp;</a></span>comp_ac_owns_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool comp_ac_owns_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structAccount.html">Account</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> owns a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a8036f191d1b0ace220c5a5ff52f609b4" title="Check whether an Account owns a Mailbox path. ">MxOps::ac_owns_path()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00417">417</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad6d5ec9cf297a30e4b0673609773f156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6d5ec9cf297a30e4b0673609773f156">&#9670;&nbsp;</a></span>comp_ac_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool comp_ac_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structAccount.html">Account</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> - Implements <a class="el" href="structMxOps.html#ac432a4900b0ca5a5ca2dc98319dbf737" title="Add a Mailbox to an Account. ">MxOps::ac_add()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00425">425</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a017f8938078bb770eb825f2de2e588b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a017f8938078bb770eb825f2de2e588b0">&#9670;&nbsp;</a></span>comp_mbox_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cad">MxOpenReturns</a> comp_mbox_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45" title="Open a Mailbox. ">MxOps::mbox_open()</a> </p>
<p>Set up a compressed mailbox to be read. Decompress the mailbox and set up the paths and hooks needed. Then determine the type of the mailbox so we can delegate the handling of messages. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00438">438</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = <a class="code" href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a>(m);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">if</span> (!ci)</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cada43d91ff11cb6a2631b235699bed738af">MX_OPEN_ERROR</a>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">/* If there&#39;s no close-hook, or the file isn&#39;t writable */</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a> || (access(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), W_OK) != 0))</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">readonly</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="compmbox_2compress_8c.html#a60e1b3c821fbb441941a42b24149fbb3">setup_paths</a>(m) != 0)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">goto</span> cmo_fail;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a>(m);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a>(m, <span class="keyword">false</span>))</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to lock mailbox&quot;</span>));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">goto</span> cmo_fail;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a>(m, ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a>, <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Decompressing %s&quot;</span>));</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">goto</span> cmo_fail;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a>(m);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> = <a class="code" href="mx_8c.html#add36baf7d8410fb37158defdaebe9a5d">mx_path_probe</a>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608">MUTT_UNKNOWN</a>)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t identify the contents of the compressed file&quot;</span>));</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">goto</span> cmo_fail;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a> = <a class="code" href="mx_8c.html#a69fb97b5bdfa030216af32bccd9b6fed">mx_get_ops</a>(m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>)</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t find mailbox ops for mailbox type %d&quot;</span>), m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a>);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">goto</span> cmo_fail;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#ab9a4528fcd39e61bdefd4dcfdbc6252f">account</a>-&gt;<a class="code" href="structAccount.html#a1aa62f517fae4248e51123f38fd3ebba">type</a> = m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">return</span> ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>-&gt;<a class="code" href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45">mbox_open</a>(m);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;cmo_fail:</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">/* remove the partial uncompressed file */</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keyword">remove</span>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a>(m);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cada43d91ff11cb6a2631b235699bed738af">MX_OPEN_ERROR</a>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="mx_8c_html_a69fb97b5bdfa030216af32bccd9b6fed"><div class="ttname"><a href="mx_8c.html#a69fb97b5bdfa030216af32bccd9b6fed">mx_get_ops</a></div><div class="ttdeci">const struct MxOps * mx_get_ops(enum MailboxType type)</div><div class="ttdoc">Get mailbox operations. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00141">mx.c:141</a></div></div>
<div class="ttc" id="structMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00105">mailbox.h:105</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a5ae987f4dda46e1423fedf6a0ac0b2de"><div class="ttname"><a href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a></div><div class="ttdeci">static void compress_info_free(struct Mailbox *m)</div><div class="ttdoc">Frees the compress info members and structure. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00224">compress.c:224</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608">MUTT_UNKNOWN</a></div><div class="ttdoc">Mailbox wasn&amp;#39;t recognised. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00047">mailbox.h:47</a></div></div>
<div class="ttc" id="structAccount_html_a1aa62f517fae4248e51123f38fd3ebba"><div class="ttname"><a href="structAccount.html#a1aa62f517fae4248e51123f38fd3ebba">Account::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Type of Mailboxes this Account contains. </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00038">account.h:38</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a877acb05482802a48bc56da5e24c8c54"><div class="ttname"><a href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a></div><div class="ttdeci">static void store_size(const struct Mailbox *m)</div><div class="ttdoc">Save the size of the compressed file. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00176">compress.c:176</a></div></div>
<div class="ttc" id="structMailbox_html_ae55237419d0e842cd6efeed0c41d27e8"><div class="ttname"><a href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">Mailbox::readonly</a></div><div class="ttdeci">bool readonly</div><div class="ttdoc">Don&amp;#39;t allow changes to the mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00119">mailbox.h:119</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a958dff103de14a95ce0a8a5dd977167b"><div class="ttname"><a href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a></div><div class="ttdeci">static struct CompressInfo * set_compress_info(struct Mailbox *m)</div><div class="ttdoc">Find the compress hooks for a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00194">compress.c:194</a></div></div>
<div class="ttc" id="structMxOps_html_ac504b1095f3ce15cae85466ab6c7bd45"><div class="ttname"><a href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45">MxOps::mbox_open</a></div><div class="ttdeci">enum MxOpenReturns(* mbox_open)(struct Mailbox *m)</div><div class="ttdoc">Open a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00141">mxapi.h:141</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_aa35e239a0ed2772ae5824c317276f83a"><div class="ttname"><a href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a></div><div class="ttdeci">static void unlock_realpath(struct Mailbox *m)</div><div class="ttdoc">Unlock the mailbox-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00122">compress.c:122</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a77600af8755fc3921168f6c0727abf18"><div class="ttname"><a href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a></div><div class="ttdeci">static int execute_command(struct Mailbox *m, const char *command, const char *progress)</div><div class="ttdoc">Run a system command. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00317">compress.c:317</a></div></div>
<div class="ttc" id="mx_8c_html_add36baf7d8410fb37158defdaebe9a5d"><div class="ttname"><a href="mx_8c.html#add36baf7d8410fb37158defdaebe9a5d">mx_path_probe</a></div><div class="ttdeci">enum MailboxType mx_path_probe(const char *path)</div><div class="ttdoc">Find a mailbox that understands a path. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01317">mx.c:1317</a></div></div>
<div class="ttc" id="structMailbox_html_ab9a4528fcd39e61bdefd4dcfdbc6252f"><div class="ttname"><a href="structMailbox.html#ab9a4528fcd39e61bdefd4dcfdbc6252f">Mailbox::account</a></div><div class="ttdeci">struct Account * account</div><div class="ttdoc">Account that owns this Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00131">mailbox.h:131</a></div></div>
<div class="ttc" id="logging_8h_html_acc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00084">logging.h:84</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a8c82fa05ac9a30a1cd0e5c5b472ae066"><div class="ttname"><a href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a></div><div class="ttdeci">static bool lock_realpath(struct Mailbox *m, bool excl)</div><div class="ttdoc">Try to lock the ctx-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00083">compress.c:83</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="mxapi_8h_html_a95aa6f9d458f82609e795a7f449f4cada43d91ff11cb6a2631b235699bed738af"><div class="ttname"><a href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cada43d91ff11cb6a2631b235699bed738af">MX_OPEN_ERROR</a></div><div class="ttdoc">Open failed with an error. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00091">mxapi.h:91</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a60e1b3c821fbb441941a42b24149fbb3"><div class="ttname"><a href="compmbox_2compress_8c.html#a60e1b3c821fbb441941a42b24149fbb3">setup_paths</a></div><div class="ttdeci">static int setup_paths(struct Mailbox *m)</div><div class="ttdoc">Set the mailbox paths. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00148">compress.c:148</a></div></div>
</div><!-- fragment --><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a017f8938078bb770eb825f2de2e588b0_cgraph.svg" width="526" height="494"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5411107efad334d6cfdf124b9856e673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5411107efad334d6cfdf124b9856e673">&#9670;&nbsp;</a></span>comp_mbox_open_append()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool comp_mbox_open_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mxapi_8h.html#a12d50555671e01ef64b027974fc5acfa">OpenMailboxFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> for appending - Implements <a class="el" href="structMxOps.html#af201c2c2f87a1253cbaf8ae24f062ef3" title="Open a Mailbox for appending. ">MxOps::mbox_open_append()</a> </p>
<p>flags may also contain <a class="el" href="mxapi_8h.html#a3a651e08849ce73161750d86d4ac1ee6" title="Create a new folder - same as MUTT_APPEND,. ">MUTT_NEWFOLDER</a></p>
<p>To append to a compressed mailbox we need an append-hook (or both open- and close-hooks). </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00496">496</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">/* If this succeeds, we know there&#39;s an open-hook */</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = <a class="code" href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a>(m);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">if</span> (!ci)</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">/* To append we need an append-hook or a close-hook */</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a> &amp;&amp; !ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t append without an append-hook or close-hook : %s&quot;</span>),</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;               <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">goto</span> cmoa_fail1;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="compmbox_2compress_8c.html#a60e1b3c821fbb441941a42b24149fbb3">setup_paths</a>(m) != 0)</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">goto</span> cmoa_fail2;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">/* Lock the realpath for the duration of the append.</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">   * It will be unlocked in the close */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a>(m, <span class="keyword">true</span>))</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to lock mailbox&quot;</span>));</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">goto</span> cmoa_fail2;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">/* Open the existing mailbox, unless we are appending */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a> &amp;&amp; (<a class="code" href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>) &gt; 0))</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">int</span> rc = <a class="code" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a>(m, ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a>, <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Decompressing %s&quot;</span>));</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Compress command failed: %s&quot;</span>), ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a>);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">goto</span> cmoa_fail2;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> = <a class="code" href="mx_8c.html#add36baf7d8410fb37158defdaebe9a5d">mx_path_probe</a>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> = <a class="code" href="helpers_8c.html#a95398bb7e62a54dcce14a027a926a193">cs_subset_enum</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;mbox_type&quot;</span>);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">/* We can only deal with mbox and mmdf mailboxes */</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">if</span> ((m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> != <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525">MUTT_MBOX</a>) &amp;&amp; (m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> != <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374">MUTT_MMDF</a>))</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unsupported mailbox type for appending&quot;</span>));</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">goto</span> cmoa_fail2;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a> = <a class="code" href="mx_8c.html#a69fb97b5bdfa030216af32bccd9b6fed">mx_get_ops</a>(m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a>);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t find mailbox ops for mailbox type %d&quot;</span>), m-&gt;<a class="code" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">goto</span> cmoa_fail2;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>-&gt;<a class="code" href="structMxOps.html#af201c2c2f87a1253cbaf8ae24f062ef3">mbox_open_append</a>(m, flags))</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">goto</span> cmoa_fail2;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;cmoa_fail2:</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">/* remove the partial uncompressed file */</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keyword">remove</span>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;cmoa_fail1:</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">/* Free the compress_info to prevent close from trying to recompress */</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a>(m);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="mx_8c_html_a69fb97b5bdfa030216af32bccd9b6fed"><div class="ttname"><a href="mx_8c.html#a69fb97b5bdfa030216af32bccd9b6fed">mx_get_ops</a></div><div class="ttdeci">const struct MxOps * mx_get_ops(enum MailboxType type)</div><div class="ttdoc">Get mailbox operations. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00141">mx.c:141</a></div></div>
<div class="ttc" id="structMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00105">mailbox.h:105</a></div></div>
<div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a5ae987f4dda46e1423fedf6a0ac0b2de"><div class="ttname"><a href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a></div><div class="ttdeci">static void compress_info_free(struct Mailbox *m)</div><div class="ttdoc">Frees the compress info members and structure. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00224">compress.c:224</a></div></div>
<div class="ttc" id="file_8c_html_a75f1c8024613a5e8c23f92d229f52101"><div class="ttname"><a href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a></div><div class="ttdeci">long mutt_file_get_size(const char *path)</div><div class="ttdoc">Get the size of a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01498">file.c:1498</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a958dff103de14a95ce0a8a5dd977167b"><div class="ttname"><a href="compmbox_2compress_8c.html#a958dff103de14a95ce0a8a5dd977167b">set_compress_info</a></div><div class="ttdeci">static struct CompressInfo * set_compress_info(struct Mailbox *m)</div><div class="ttdoc">Find the compress hooks for a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00194">compress.c:194</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da09cef4c4e3dc42c9137860413dcdb374">MUTT_MMDF</a></div><div class="ttdoc">&amp;#39;mmdf&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00049">mailbox.h:49</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a77600af8755fc3921168f6c0727abf18"><div class="ttname"><a href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a></div><div class="ttdeci">static int execute_command(struct Mailbox *m, const char *command, const char *progress)</div><div class="ttdoc">Run a system command. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00317">compress.c:317</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da817ef3cf5f529965875400b412678525">MUTT_MBOX</a></div><div class="ttdoc">&amp;#39;mbox&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00048">mailbox.h:48</a></div></div>
<div class="ttc" id="mx_8c_html_add36baf7d8410fb37158defdaebe9a5d"><div class="ttname"><a href="mx_8c.html#add36baf7d8410fb37158defdaebe9a5d">mx_path_probe</a></div><div class="ttdeci">enum MailboxType mx_path_probe(const char *path)</div><div class="ttdoc">Find a mailbox that understands a path. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01317">mx.c:1317</a></div></div>
<div class="ttc" id="logging_8h_html_acc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00084">logging.h:84</a></div></div>
<div class="ttc" id="structMxOps_html_af201c2c2f87a1253cbaf8ae24f062ef3"><div class="ttname"><a href="structMxOps.html#af201c2c2f87a1253cbaf8ae24f062ef3">MxOps::mbox_open_append</a></div><div class="ttdeci">bool(* mbox_open_append)(struct Mailbox *m, OpenMailboxFlags flags)</div><div class="ttdoc">Open a Mailbox for appending. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00153">mxapi.h:153</a></div></div>
<div class="ttc" id="helpers_8c_html_a95398bb7e62a54dcce14a027a926a193"><div class="ttname"><a href="helpers_8c.html#a95398bb7e62a54dcce14a027a926a193">cs_subset_enum</a></div><div class="ttdeci">unsigned char cs_subset_enum(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a enumeration config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00093">helpers.c:93</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a8c82fa05ac9a30a1cd0e5c5b472ae066"><div class="ttname"><a href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a></div><div class="ttdeci">static bool lock_realpath(struct Mailbox *m, bool excl)</div><div class="ttdoc">Try to lock the ctx-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00083">compress.c:83</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a60e1b3c821fbb441941a42b24149fbb3"><div class="ttname"><a href="compmbox_2compress_8c.html#a60e1b3c821fbb441941a42b24149fbb3">setup_paths</a></div><div class="ttdeci">static int setup_paths(struct Mailbox *m)</div><div class="ttdoc">Set the mailbox paths. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00148">compress.c:148</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a5411107efad334d6cfdf124b9856e673_cgraph.svg" width="564" height="494"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abf3eceb782a3061fe668121697cc2e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3eceb782a3061fe668121697cc2e22">&#9670;&nbsp;</a></span>comp_mbox_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> comp_mbox_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875" title="Check for new mail. ">MxOps::mbox_check()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...">MxStatus</a></td></tr>
  </table>
  </dd>
</dl>
<p>If the compressed file changes in size but the mailbox hasn't been changed in <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a>, then we can close and reopen the mailbox.</p>
<p>If the mailbox has been changed in <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a>, warn the user. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00577">577</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">int</span> size = <a class="code" href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">if</span> (size == ci-&gt;<a class="code" href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">size</a>)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a>(m, <span class="keyword">false</span>))</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to lock mailbox&quot;</span>));</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a>(m, ci-&gt;<a class="code" href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">cmd_open</a>, <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Decompressing %s&quot;</span>));</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a>(m);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a>(m);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">mbox_check</a>(m);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div><div class="ttc" id="file_8c_html_a75f1c8024613a5e8c23f92d229f52101"><div class="ttname"><a href="file_8c.html#a75f1c8024613a5e8c23f92d229f52101">mutt_file_get_size</a></div><div class="ttdeci">long mutt_file_get_size(const char *path)</div><div class="ttdoc">Get the size of a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01498">file.c:1498</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structCompressInfo_html_ae92bc129b9825e39e42d7737197c3297"><div class="ttname"><a href="structCompressInfo.html#ae92bc129b9825e39e42d7737197c3297">CompressInfo::size</a></div><div class="ttdeci">long size</div><div class="ttdoc">size of the compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00051">lib.h:51</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a877acb05482802a48bc56da5e24c8c54"><div class="ttname"><a href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a></div><div class="ttdeci">static void store_size(const struct Mailbox *m)</div><div class="ttdoc">Save the size of the compressed file. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00176">compress.c:176</a></div></div>
<div class="ttc" id="structMxOps_html_af72b7c6ef064d1ca86b71ac9aff3e875"><div class="ttname"><a href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check</a></div><div class="ttdeci">enum MxStatus(* mbox_check)(struct Mailbox *m)</div><div class="ttdoc">Check for new mail. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00163">mxapi.h:163</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_aa35e239a0ed2772ae5824c317276f83a"><div class="ttname"><a href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a></div><div class="ttdeci">static void unlock_realpath(struct Mailbox *m)</div><div class="ttdoc">Unlock the mailbox-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00122">compress.c:122</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a77600af8755fc3921168f6c0727abf18"><div class="ttname"><a href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a></div><div class="ttdeci">static int execute_command(struct Mailbox *m, const char *command, const char *progress)</div><div class="ttdoc">Run a system command. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00317">compress.c:317</a></div></div>
<div class="ttc" id="logging_8h_html_acc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00084">logging.h:84</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a8c82fa05ac9a30a1cd0e5c5b472ae066"><div class="ttname"><a href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a></div><div class="ttdeci">static bool lock_realpath(struct Mailbox *m, bool excl)</div><div class="ttdoc">Try to lock the ctx-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00083">compress.c:83</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structCompressInfo_html_a7a06ea5f92a47b87b787e36aa46437a6"><div class="ttname"><a href="structCompressInfo.html#a7a06ea5f92a47b87b787e36aa46437a6">CompressInfo::cmd_open</a></div><div class="ttdeci">const char * cmd_open</div><div class="ttdoc">open-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00050">lib.h:50</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_abf3eceb782a3061fe668121697cc2e22_cgraph.svg" width="542" height="214"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_abf3eceb782a3061fe668121697cc2e22_icgraph.svg" width="344" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="adeb7755ceb989e6dc91e9afa2ff9e84e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeb7755ceb989e6dc91e9afa2ff9e84e">&#9670;&nbsp;</a></span>comp_mbox_sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> comp_mbox_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save changes to the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#aebbfeec5651637ec053cc47b95c124af" title="Save changes to the Mailbox. ">MxOps::mbox_sync()</a> </p>
<p>Changes in <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a> only affect the tmp file. Calling <a class="el" href="compmbox_2compress_8c.html#adeb7755ceb989e6dc91e9afa2ff9e84e" title="Save changes to the Mailbox - Implements MxOps::mbox_sync() ">comp_mbox_sync()</a> will commit them to the compressed file. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00613">613</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">if</span> (!ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>)</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t sync a compressed file without a close-hook&quot;</span>));</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  }</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a>(m, <span class="keyword">true</span>))</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to lock mailbox&quot;</span>));</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> check = <a class="code" href="compmbox_2compress_8c.html#abf3eceb782a3061fe668121697cc2e22">comp_mbox_check</a>(m);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordflow">if</span> (check != <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>)</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">goto</span> sync_cleanup;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  check = ops-&gt;<a class="code" href="structMxOps.html#aebbfeec5651637ec053cc47b95c124af">mbox_sync</a>(m);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">if</span> (check != <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>)</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">goto</span> sync_cleanup;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a>(m, ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>, <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Compressing %s&quot;</span>));</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    check = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">goto</span> sync_cleanup;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  check = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;sync_cleanup:</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a>(m);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a>(m);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">return</span> check;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div><div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a877acb05482802a48bc56da5e24c8c54"><div class="ttname"><a href="compmbox_2compress_8c.html#a877acb05482802a48bc56da5e24c8c54">store_size</a></div><div class="ttdeci">static void store_size(const struct Mailbox *m)</div><div class="ttdoc">Save the size of the compressed file. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00176">compress.c:176</a></div></div>
<div class="ttc" id="structMxOps_html_aebbfeec5651637ec053cc47b95c124af"><div class="ttname"><a href="structMxOps.html#aebbfeec5651637ec053cc47b95c124af">MxOps::mbox_sync</a></div><div class="ttdeci">enum MxStatus(* mbox_sync)(struct Mailbox *m)</div><div class="ttdoc">Save changes to the Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00184">mxapi.h:184</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_aa35e239a0ed2772ae5824c317276f83a"><div class="ttname"><a href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a></div><div class="ttdeci">static void unlock_realpath(struct Mailbox *m)</div><div class="ttdoc">Unlock the mailbox-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00122">compress.c:122</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a77600af8755fc3921168f6c0727abf18"><div class="ttname"><a href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a></div><div class="ttdeci">static int execute_command(struct Mailbox *m, const char *command, const char *progress)</div><div class="ttdoc">Run a system command. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00317">compress.c:317</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_abf3eceb782a3061fe668121697cc2e22"><div class="ttname"><a href="compmbox_2compress_8c.html#abf3eceb782a3061fe668121697cc2e22">comp_mbox_check</a></div><div class="ttdeci">static enum MxStatus comp_mbox_check(struct Mailbox *m)</div><div class="ttdoc">Check for new mail - Implements MxOps::mbox_check() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00577">compress.c:577</a></div></div>
<div class="ttc" id="logging_8h_html_acc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00084">logging.h:84</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a8c82fa05ac9a30a1cd0e5c5b472ae066"><div class="ttname"><a href="compmbox_2compress_8c.html#a8c82fa05ac9a30a1cd0e5c5b472ae066">lock_realpath</a></div><div class="ttdeci">static bool lock_realpath(struct Mailbox *m, bool excl)</div><div class="ttdoc">Try to lock the ctx-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00083">compress.c:83</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a></div><div class="ttdeci">MxStatus</div><div class="ttdoc">Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00075">mxapi.h:75</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_adeb7755ceb989e6dc91e9afa2ff9e84e_cgraph.svg" width="539" height="220"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac39b99d890436a70c50814a4701ed597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac39b99d890436a70c50814a4701ed597">&#9670;&nbsp;</a></span>comp_mbox_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> comp_mbox_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Close a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc" title="Close a Mailbox. ">MxOps::mbox_close()</a> </p>
<p>If the mailbox has been changed then re-compress the tmp file. Then delete the tmp file. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00665">665</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a>(m);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  ops-&gt;<a class="code" href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc">mbox_close</a>(m);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">/* sync has already been called, so we only need to delete some files */</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a2481e68c768eb0cb6e17cfcd0f255f79">append</a>)</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *append = NULL;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *msg = NULL;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">/* The file exists and we can append */</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> ((access(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>, F_OK) == 0) &amp;&amp; ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a>)</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      append = ci-&gt;<a class="code" href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">cmd_append</a>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      msg = <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Compressed-appending to %s...&quot;</span>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      append = ci-&gt;<a class="code" href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">cmd_close</a>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      msg = <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Compressing %s&quot;</span>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordtype">int</span> rc = <a class="code" href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a>(m, append, msg);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <a class="code" href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a>(NULL);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error. Preserving temporary file: %s&quot;</span>), <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keyword">remove</span>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a>(m);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">/* If the file was removed, remove the compressed folder too */</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_save_empty = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;save_empty&quot;</span>);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> ((access(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), F_OK) != 0) &amp;&amp; !c_save_empty)</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keyword">remove</span>(m-&gt;<a class="code" href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">realpath</a>);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keyword">remove</span>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a>(m);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00071">helpers.c:71</a></div></div>
<div class="ttc" id="structCompressInfo_html_a1d1c42dfa8e29b4da9f437e798978668"><div class="ttname"><a href="structCompressInfo.html#a1d1c42dfa8e29b4da9f437e798978668">CompressInfo::cmd_append</a></div><div class="ttdeci">const char * cmd_append</div><div class="ttdoc">append-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00048">lib.h:48</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a5ae987f4dda46e1423fedf6a0ac0b2de"><div class="ttname"><a href="compmbox_2compress_8c.html#a5ae987f4dda46e1423fedf6a0ac0b2de">compress_info_free</a></div><div class="ttdeci">static void compress_info_free(struct Mailbox *m)</div><div class="ttdoc">Frees the compress info members and structure. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00224">compress.c:224</a></div></div>
<div class="ttc" id="structMailbox_html_a1f36c27b2c78a6c7c216e3aca9f0c89f"><div class="ttname"><a href="structMailbox.html#a1f36c27b2c78a6c7c216e3aca9f0c89f">Mailbox::realpath</a></div><div class="ttdeci">char * realpath</div><div class="ttdoc">Used for duplicate detection, context comparison, and the sidebar. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00084">mailbox.h:84</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structCompressInfo_html_add645ff00c6cd32a44a1aae65cb7d7f2"><div class="ttname"><a href="structCompressInfo.html#add645ff00c6cd32a44a1aae65cb7d7f2">CompressInfo::cmd_close</a></div><div class="ttdeci">const char * cmd_close</div><div class="ttdoc">close-hook command </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00049">lib.h:49</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="structMailbox_html_a2481e68c768eb0cb6e17cfcd0f255f79"><div class="ttname"><a href="structMailbox.html#a2481e68c768eb0cb6e17cfcd0f255f79">Mailbox::append</a></div><div class="ttdeci">bool append</div><div class="ttdoc">Mailbox is opened in append mode. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00113">mailbox.h:113</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_aa35e239a0ed2772ae5824c317276f83a"><div class="ttname"><a href="compmbox_2compress_8c.html#aa35e239a0ed2772ae5824c317276f83a">unlock_realpath</a></div><div class="ttdeci">static void unlock_realpath(struct Mailbox *m)</div><div class="ttdoc">Unlock the mailbox-&gt;realpath. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00122">compress.c:122</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a77600af8755fc3921168f6c0727abf18"><div class="ttname"><a href="compmbox_2compress_8c.html#a77600af8755fc3921168f6c0727abf18">execute_command</a></div><div class="ttdeci">static int execute_command(struct Mailbox *m, const char *command, const char *progress)</div><div class="ttdoc">Run a system command. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00317">compress.c:317</a></div></div>
<div class="ttc" id="curs__lib_8c_html_ab6a61cdfcf8c2c73ee59381c79c79774"><div class="ttname"><a href="curs__lib_8c.html#ab6a61cdfcf8c2c73ee59381c79c79774">mutt_any_key_to_continue</a></div><div class="ttdeci">int mutt_any_key_to_continue(const char *s)</div><div class="ttdoc">Prompt the user to &amp;#39;press any key&amp;#39; and wait. </div><div class="ttdef"><b>Definition:</b> <a href="curs__lib_8c_source.html#l00455">curs_lib.c:455</a></div></div>
<div class="ttc" id="logging_8h_html_acc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="logging_8h.html#acc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00084">logging.h:84</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structMxOps_html_ae97b81d5371def5f6f2e64544cdec5fc"><div class="ttname"><a href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc">MxOps::mbox_close</a></div><div class="ttdeci">enum MxStatus(* mbox_close)(struct Mailbox *m)</div><div class="ttdoc">Close a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00194">mxapi.h:194</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_ac39b99d890436a70c50814a4701ed597_cgraph.svg" width="599" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac8f0ce1d30bcb3109c62a81979af5a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8f0ce1d30bcb3109c62a81979af5a15">&#9670;&nbsp;</a></span>comp_msg_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool comp_msg_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMessage.html">Message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msgno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open an email message in a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#afae8d734bf2f05baf8b45eb69f23a2a8" title="Open an email message in a Mailbox. ">MxOps::msg_open()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00732">732</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;{</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">/* Delegate */</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#afae8d734bf2f05baf8b45eb69f23a2a8">msg_open</a>(m, msg, msgno);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div><div class="ttc" id="structMxOps_html_afae8d734bf2f05baf8b45eb69f23a2a8"><div class="ttname"><a href="structMxOps.html#afae8d734bf2f05baf8b45eb69f23a2a8">MxOps::msg_open</a></div><div class="ttdeci">bool(* msg_open)(struct Mailbox *m, struct Message *msg, int msgno)</div><div class="ttdoc">Open an email message in a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00209">mxapi.h:209</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c943e36f1c8e2354a8303c4435393dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c943e36f1c8e2354a8303c4435393dd">&#9670;&nbsp;</a></span>comp_msg_open_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool comp_msg_open_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMessage.html">Message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open a new message in a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ada910d49b8f3d007c32aa8a4adc15637" title="Open a new message in a Mailbox. ">MxOps::msg_open_new()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00750">750</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="comment">/* Delegate */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#ada910d49b8f3d007c32aa8a4adc15637">msg_open_new</a>(m, msg, e);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div><div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMxOps_html_ada910d49b8f3d007c32aa8a4adc15637"><div class="ttname"><a href="structMxOps.html#ada910d49b8f3d007c32aa8a4adc15637">MxOps::msg_open_new</a></div><div class="ttdeci">bool(* msg_open_new)(struct Mailbox *m, struct Message *msg, const struct Email *e)</div><div class="ttdoc">Open a new message in a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00223">mxapi.h:223</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a449d225488040512f5696e4f76f36694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a449d225488040512f5696e4f76f36694">&#9670;&nbsp;</a></span>comp_msg_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_msg_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMessage.html">Message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save changes to an email - Implements <a class="el" href="structMxOps.html#ab59dadf81aec5575a1c690caa4822e37" title="Save changes to an email. ">MxOps::msg_commit()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00768">768</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;{</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="comment">/* Delegate */</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#ab59dadf81aec5575a1c690caa4822e37">msg_commit</a>(m, msg);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;}</div><div class="ttc" id="structMxOps_html_ab59dadf81aec5575a1c690caa4822e37"><div class="ttname"><a href="structMxOps.html#ab59dadf81aec5575a1c690caa4822e37">MxOps::msg_commit</a></div><div class="ttdeci">int(* msg_commit)(struct Mailbox *m, struct Message *msg)</div><div class="ttdoc">Save changes to an email. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00236">mxapi.h:236</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9cedad82abc13c823ff2d0e7bc1b66f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cedad82abc13c823ff2d0e7bc1b66f9">&#9670;&nbsp;</a></span>comp_msg_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_msg_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMessage.html">Message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Close an email - Implements <a class="el" href="structMxOps.html#ad53e3df1ff124eea52bc0488915e9ae4" title="Close an email. ">MxOps::msg_close()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00786">786</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordflow">if</span> (!ops)</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">/* Delegate */</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#ad53e3df1ff124eea52bc0488915e9ae4">msg_close</a>(m, msg);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div><div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structMxOps_html_ad53e3df1ff124eea52bc0488915e9ae4"><div class="ttname"><a href="structMxOps.html#ad53e3df1ff124eea52bc0488915e9ae4">MxOps::msg_close</a></div><div class="ttdeci">int(* msg_close)(struct Mailbox *m, struct Message *msg)</div><div class="ttdoc">Close an email. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00249">mxapi.h:249</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e6812b4bba1845ea248f4df93c06fea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e6812b4bba1845ea248f4df93c06fea">&#9670;&nbsp;</a></span>comp_msg_padding_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_msg_padding_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bytes of padding between messages - Implements <a class="el" href="structMxOps.html#a784ae2e2b98208080a641974ce4df834" title="Bytes of padding between messages. ">MxOps::msg_padding_size()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00804">804</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordflow">if</span> (!ops || !ops-&gt;<a class="code" href="structMxOps.html#a784ae2e2b98208080a641974ce4df834">msg_padding_size</a>)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#a784ae2e2b98208080a641974ce4df834">msg_padding_size</a>(m);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div><div class="ttc" id="structMxOps_html_a784ae2e2b98208080a641974ce4df834"><div class="ttname"><a href="structMxOps.html#a784ae2e2b98208080a641974ce4df834">MxOps::msg_padding_size</a></div><div class="ttdeci">int(* msg_padding_size)(struct Mailbox *m)</div><div class="ttdoc">Bytes of padding between messages. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00259">mxapi.h:259</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac329588156f6dfd55072cc812ff043cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac329588156f6dfd55072cc812ff043cd">&#9670;&nbsp;</a></span>comp_msg_save_hcache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_msg_save_hcache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save message to the header cache - Implements <a class="el" href="structMxOps.html#a4c0ce9432905dfb3f6849c97ae504f84" title="Save message to the header cache. ">MxOps::msg_save_hcache()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00821">821</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">if</span> (!ops || !ops-&gt;<a class="code" href="structMxOps.html#a4c0ce9432905dfb3f6849c97ae504f84">msg_save_hcache</a>)</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#a4c0ce9432905dfb3f6849c97ae504f84">msg_save_hcache</a>(m, e);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div><div class="ttc" id="structMxOps_html_a4c0ce9432905dfb3f6849c97ae504f84"><div class="ttname"><a href="structMxOps.html#a4c0ce9432905dfb3f6849c97ae504f84">MxOps::msg_save_hcache</a></div><div class="ttdeci">int(* msg_save_hcache)(struct Mailbox *m, struct Email *e)</div><div class="ttdoc">Save message to the header cache. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00272">mxapi.h:272</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6baf16b10893271190480d29fbc8b493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6baf16b10893271190480d29fbc8b493">&#9670;&nbsp;</a></span>comp_tags_edit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_tags_edit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prompt and validate new messages tags - Implements <a class="el" href="structMxOps.html#a0e3f825e2d93106795c85d5df78874ea" title="Prompt and validate new messages tags. ">MxOps::tags_edit()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00838">838</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;{</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">if</span> (!ops || !ops-&gt;<a class="code" href="structMxOps.html#a0e3f825e2d93106795c85d5df78874ea">tags_edit</a>)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#a0e3f825e2d93106795c85d5df78874ea">tags_edit</a>(m, tags, buf, buflen);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div><div class="ttc" id="structMxOps_html_a0e3f825e2d93106795c85d5df78874ea"><div class="ttname"><a href="structMxOps.html#a0e3f825e2d93106795c85d5df78874ea">MxOps::tags_edit</a></div><div class="ttdeci">int(* tags_edit)(struct Mailbox *m, const char *tags, char *buf, size_t buflen)</div><div class="ttdoc">Prompt and validate new messages tags. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00288">mxapi.h:288</a></div></div>
<div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c0b7ffa4578c0b91fda494e873f13e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c0b7ffa4578c0b91fda494e873f13e7">&#9670;&nbsp;</a></span>comp_tags_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_tags_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save the tags to a message - Implements <a class="el" href="structMxOps.html#a9e996b21c0a4d701020aa632ecc5ae82" title="Save the tags to a message. ">MxOps::tags_commit()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00855">855</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;{</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keyword">struct </span><a class="code" href="structCompressInfo.html">CompressInfo</a> *ci = m-&gt;<a class="code" href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">compress_info</a>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structMxOps.html">MxOps</a> *ops = ci-&gt;<a class="code" href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">child_ops</a>;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> (!ops || !ops-&gt;<a class="code" href="structMxOps.html#a9e996b21c0a4d701020aa632ecc5ae82">tags_commit</a>)</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">return</span> ops-&gt;<a class="code" href="structMxOps.html#a9e996b21c0a4d701020aa632ecc5ae82">tags_commit</a>(m, e, buf);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div><div class="ttc" id="structCompressInfo_html"><div class="ttname"><a href="structCompressInfo.html">CompressInfo</a></div><div class="ttdoc">Private data for compress. </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="structMailbox_html_adfd56243ea7dd8797f3d75f33f1d607a"><div class="ttname"><a href="structMailbox.html#adfd56243ea7dd8797f3d75f33f1d607a">Mailbox::compress_info</a></div><div class="ttdeci">void * compress_info</div><div class="ttdoc">Compressed mbox module private data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="structCompressInfo_html_a9f6c41db8d4f70ebb317146dfa5e0472"><div class="ttname"><a href="structCompressInfo.html#a9f6c41db8d4f70ebb317146dfa5e0472">CompressInfo::child_ops</a></div><div class="ttdeci">const struct MxOps * child_ops</div><div class="ttdoc">callbacks of de-compressed file </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="structMxOps_html"><div class="ttname"><a href="structMxOps.html">MxOps</a></div><div class="ttdoc">The Mailbox API. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00101">mxapi.h:101</a></div></div>
<div class="ttc" id="structMxOps_html_a9e996b21c0a4d701020aa632ecc5ae82"><div class="ttname"><a href="structMxOps.html#a9e996b21c0a4d701020aa632ecc5ae82">MxOps::tags_commit</a></div><div class="ttdeci">int(* tags_commit)(struct Mailbox *m, struct Email *e, char *buf)</div><div class="ttdoc">Save the tags to a message. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00303">mxapi.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad886126ad1805be0c69f9b2fe138db10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad886126ad1805be0c69f9b2fe138db10">&#9670;&nbsp;</a></span>comp_path_probe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921d">MailboxType</a> comp_path_probe </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is this a compressed <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a>? - Implements <a class="el" href="structMxOps.html#a625a6ea0abfdb6620542e26acc499177" title="Does this Mailbox type recognise this path? ">MxOps::path_probe()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00872">872</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;{</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span> (!st || !S_ISREG(st-&gt;st_mode))</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608">MUTT_UNKNOWN</a>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="compmbox_2compress_8c.html#af5e4caf583046a535cf5fda9933d3c74">mutt_comp_can_read</a>(path))</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dabe3e473aa651d6b7030b5ef08953eb4e">MUTT_COMPRESSED</a>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608">MUTT_UNKNOWN</a>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608">MUTT_UNKNOWN</a></div><div class="ttdoc">Mailbox wasn&amp;#39;t recognised. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00047">mailbox.h:47</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921dabe3e473aa651d6b7030b5ef08953eb4e"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dabe3e473aa651d6b7030b5ef08953eb4e">MUTT_COMPRESSED</a></div><div class="ttdoc">Compressed file Mailbox type. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00056">mailbox.h:56</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_af5e4caf583046a535cf5fda9933d3c74"><div class="ttname"><a href="compmbox_2compress_8c.html#af5e4caf583046a535cf5fda9933d3c74">mutt_comp_can_read</a></div><div class="ttdeci">bool mutt_comp_can_read(const char *path)</div><div class="ttdoc">Can we read from this file? </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00386">compress.c:386</a></div></div>
</div><!-- fragment --><div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_ad886126ad1805be0c69f9b2fe138db10_cgraph.svg" width="360" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="afc352b335c9a8dd1d6e89bcc566dba80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc352b335c9a8dd1d6e89bcc566dba80">&#9670;&nbsp;</a></span>comp_path_canon()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_path_canon </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Canonicalise a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#ad7d938f02ba15c08d45128bc2ca00e28" title="Canonicalise a Mailbox path. ">MxOps::path_canon()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00886">886</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <a class="code" href="mutt_2path_8c.html#aa0bcac4d1513357fbd5fea73f25b63a5">mutt_path_canon</a>(buf, buflen, <a class="code" href="config_2path_8c.html#a6f7b1cf93328b961c3e3a64f300d75b0">HomeDir</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div><div class="ttc" id="config_2path_8c_html_a6f7b1cf93328b961c3e3a64f300d75b0"><div class="ttname"><a href="config_2path_8c.html#a6f7b1cf93328b961c3e3a64f300d75b0">HomeDir</a></div><div class="ttdeci">char * HomeDir</div><div class="ttdoc">User&amp;#39;s home directory. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__globals_8h_source.html#l00045">mutt_globals.h:45</a></div></div>
<div class="ttc" id="mutt_2path_8c_html_aa0bcac4d1513357fbd5fea73f25b63a5"><div class="ttname"><a href="mutt_2path_8c.html#aa0bcac4d1513357fbd5fea73f25b63a5">mutt_path_canon</a></div><div class="ttdeci">bool mutt_path_canon(char *buf, size_t buflen, const char *homedir, bool is_dir)</div><div class="ttdoc">Create the canonical version of a path. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2path_8c_source.html#l00285">path.c:285</a></div></div>
</div><!-- fragment --><div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_afc352b335c9a8dd1d6e89bcc566dba80_cgraph.svg" width="334" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a164a2844f1899843274d6c80a194ca86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a164a2844f1899843274d6c80a194ca86">&#9670;&nbsp;</a></span>comp_path_pretty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_path_pretty </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>folder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Abbreviate a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a3a85067a3d76652ec0014ce520c565db" title="Abbreviate a Mailbox path. ">MxOps::path_pretty()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00895">895</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;{</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt_2path_8c.html#ac4303baa9c5b0a14f501b2a60f717df6">mutt_path_abbr_folder</a>(buf, buflen, folder))</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt_2path_8c.html#a66f58783fdc9cf47b5dc3bf663465983">mutt_path_pretty</a>(buf, buflen, <a class="code" href="config_2path_8c.html#a6f7b1cf93328b961c3e3a64f300d75b0">HomeDir</a>, <span class="keyword">false</span>))</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div><div class="ttc" id="mutt_2path_8c_html_a66f58783fdc9cf47b5dc3bf663465983"><div class="ttname"><a href="mutt_2path_8c.html#a66f58783fdc9cf47b5dc3bf663465983">mutt_path_pretty</a></div><div class="ttdeci">bool mutt_path_pretty(char *buf, size_t buflen, const char *homedir, bool is_dir)</div><div class="ttdoc">Tidy a filesystem path. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2path_8c_source.html#l00186">path.c:186</a></div></div>
<div class="ttc" id="config_2path_8c_html_a6f7b1cf93328b961c3e3a64f300d75b0"><div class="ttname"><a href="config_2path_8c.html#a6f7b1cf93328b961c3e3a64f300d75b0">HomeDir</a></div><div class="ttdeci">char * HomeDir</div><div class="ttdoc">User&amp;#39;s home directory. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__globals_8h_source.html#l00045">mutt_globals.h:45</a></div></div>
<div class="ttc" id="mutt_2path_8c_html_ac4303baa9c5b0a14f501b2a60f717df6"><div class="ttname"><a href="mutt_2path_8c.html#ac4303baa9c5b0a14f501b2a60f717df6">mutt_path_abbr_folder</a></div><div class="ttdeci">bool mutt_path_abbr_folder(char *buf, size_t buflen, const char *folder)</div><div class="ttdoc">Create a folder abbreviation. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2path_8c_source.html#l00492">path.c:492</a></div></div>
</div><!-- fragment --><div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_a164a2844f1899843274d6c80a194ca86_cgraph.svg" width="370" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab807f84b5a28020a4250500f9fa7463c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab807f84b5a28020a4250500f9fa7463c">&#9670;&nbsp;</a></span>comp_path_parent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int comp_path_parent </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the parent of a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a0816dd26eb79c12783e9ac9e7b67ecd9" title="Find the parent of a Mailbox path. ">MxOps::path_parent()</a> </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00909">909</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;{</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt_2path_8c.html#a17e7c96ef380bacd812f2d82ac4883d9">mutt_path_parent</a>(buf, buflen))</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">if</span> (buf[0] == <span class="charliteral">&#39;~&#39;</span>)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="mutt_2path_8c.html#aa0bcac4d1513357fbd5fea73f25b63a5">mutt_path_canon</a>(buf, buflen, <a class="code" href="config_2path_8c.html#a6f7b1cf93328b961c3e3a64f300d75b0">HomeDir</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt_2path_8c.html#a17e7c96ef380bacd812f2d82ac4883d9">mutt_path_parent</a>(buf, buflen))</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;}</div><div class="ttc" id="mutt_2path_8c_html_a17e7c96ef380bacd812f2d82ac4883d9"><div class="ttname"><a href="mutt_2path_8c.html#a17e7c96ef380bacd812f2d82ac4883d9">mutt_path_parent</a></div><div class="ttdeci">bool mutt_path_parent(char *buf, size_t buflen)</div><div class="ttdoc">Find the parent of a path. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2path_8c_source.html#l00459">path.c:459</a></div></div>
<div class="ttc" id="config_2path_8c_html_a6f7b1cf93328b961c3e3a64f300d75b0"><div class="ttname"><a href="config_2path_8c.html#a6f7b1cf93328b961c3e3a64f300d75b0">HomeDir</a></div><div class="ttdeci">char * HomeDir</div><div class="ttdoc">User&amp;#39;s home directory. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__globals_8h_source.html#l00045">mutt_globals.h:45</a></div></div>
<div class="ttc" id="mutt_2path_8c_html_aa0bcac4d1513357fbd5fea73f25b63a5"><div class="ttname"><a href="mutt_2path_8c.html#aa0bcac4d1513357fbd5fea73f25b63a5">mutt_path_canon</a></div><div class="ttdeci">bool mutt_path_canon(char *buf, size_t buflen, const char *homedir, bool is_dir)</div><div class="ttdoc">Create the canonical version of a path. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2path_8c_source.html#l00285">path.c:285</a></div></div>
</div><!-- fragment --><div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="compmbox_2compress_8c_ab807f84b5a28020a4250500f9fa7463c_cgraph.svg" width="340" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a08818c1789d0341db65745d36f50f1b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08818c1789d0341db65745d36f50f1b3">&#9670;&nbsp;</a></span>comp_commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structCommand.html">Command</a> comp_commands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  </div><div class="line">  { <span class="stringliteral">&quot;append-hook&quot;</span>, <a class="code" href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a>, <a class="code" href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a> },</div><div class="line">  { <span class="stringliteral">&quot;close-hook&quot;</span>,  <a class="code" href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a>, <a class="code" href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a> },</div><div class="line">  { <span class="stringliteral">&quot;open-hook&quot;</span>,   <a class="code" href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a>, <a class="code" href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a> },</div><div class="line">  </div><div class="line">}</div><div class="ttc" id="hook_8c_html_a4b6e4f5a7cf7c50a1d32450735eba6f9"><div class="ttname"><a href="hook_8c.html#a4b6e4f5a7cf7c50a1d32450735eba6f9">mutt_parse_hook</a></div><div class="ttdeci">enum CommandResult mutt_parse_hook(struct Buffer *buf, struct Buffer *s, intptr_t data, struct Buffer *err)</div><div class="ttdoc">Parse the &amp;#39;hook&amp;#39; family of commands - Implements Command::parse() </div><div class="ttdef"><b>Definition:</b> <a href="hook_8c_source.html#l00082">hook.c:82</a></div></div>
<div class="ttc" id="hook_8h_html_a608d073646dabfa996b8460a6041393a"><div class="ttname"><a href="hook_8h.html#a608d073646dabfa996b8460a6041393a">MUTT_APPEND_HOOK</a></div><div class="ttdeci">#define MUTT_APPEND_HOOK</div><div class="ttdoc">append-hook: append to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00053">hook.h:53</a></div></div>
<div class="ttc" id="hook_8h_html_a4dc1443d223770a18d42c237f7748e66"><div class="ttname"><a href="hook_8h.html#a4dc1443d223770a18d42c237f7748e66">MUTT_CLOSE_HOOK</a></div><div class="ttdeci">#define MUTT_CLOSE_HOOK</div><div class="ttdoc">close-hook: write to a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00054">hook.h:54</a></div></div>
<div class="ttc" id="hook_8h_html_a2023ebfafb21558f2adf582b9f182523"><div class="ttname"><a href="hook_8h.html#a2023ebfafb21558f2adf582b9f182523">MUTT_OPEN_HOOK</a></div><div class="ttdeci">#define MUTT_OPEN_HOOK</div><div class="ttdoc">open-hook: to read a compressed mailbox </div><div class="ttdef"><b>Definition:</b> <a href="hook_8h_source.html#l00052">hook.h:52</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00056">56</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>

</div>
</div>
<a id="a69f737b0581952c0ef57f37af78ac6c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69f737b0581952c0ef57f37af78ac6c7">&#9670;&nbsp;</a></span>MxCompOps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structMxOps.html">MxOps</a> MxCompOps</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  .type            = <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dabe3e473aa651d6b7030b5ef08953eb4e">MUTT_COMPRESSED</a>,</div><div class="line">  .name             = <span class="stringliteral">&quot;compressed&quot;</span>,</div><div class="line">  .is_local         = <span class="keyword">true</span>,</div><div class="line">  .ac_owns_path     = <a class="code" href="compmbox_2compress_8c.html#add2c1f164cf3e15e8391110717418a3e">comp_ac_owns_path</a>,</div><div class="line">  .ac_add           = <a class="code" href="compmbox_2compress_8c.html#ad6d5ec9cf297a30e4b0673609773f156">comp_ac_add</a>,</div><div class="line">  .mbox_open        = <a class="code" href="compmbox_2compress_8c.html#a017f8938078bb770eb825f2de2e588b0">comp_mbox_open</a>,</div><div class="line">  .mbox_open_append = <a class="code" href="compmbox_2compress_8c.html#a5411107efad334d6cfdf124b9856e673">comp_mbox_open_append</a>,</div><div class="line">  .mbox_check       = <a class="code" href="compmbox_2compress_8c.html#abf3eceb782a3061fe668121697cc2e22">comp_mbox_check</a>,</div><div class="line">  .mbox_check_stats = NULL,</div><div class="line">  .mbox_sync        = <a class="code" href="compmbox_2compress_8c.html#adeb7755ceb989e6dc91e9afa2ff9e84e">comp_mbox_sync</a>,</div><div class="line">  .mbox_close       = <a class="code" href="compmbox_2compress_8c.html#ac39b99d890436a70c50814a4701ed597">comp_mbox_close</a>,</div><div class="line">  .msg_open         = <a class="code" href="compmbox_2compress_8c.html#ac8f0ce1d30bcb3109c62a81979af5a15">comp_msg_open</a>,</div><div class="line">  .msg_open_new     = <a class="code" href="compmbox_2compress_8c.html#a8c943e36f1c8e2354a8303c4435393dd">comp_msg_open_new</a>,</div><div class="line">  .msg_commit       = <a class="code" href="compmbox_2compress_8c.html#a449d225488040512f5696e4f76f36694">comp_msg_commit</a>,</div><div class="line">  .msg_close        = <a class="code" href="compmbox_2compress_8c.html#a9cedad82abc13c823ff2d0e7bc1b66f9">comp_msg_close</a>,</div><div class="line">  .msg_padding_size = <a class="code" href="compmbox_2compress_8c.html#a0e6812b4bba1845ea248f4df93c06fea">comp_msg_padding_size</a>,</div><div class="line">  .msg_save_hcache  = <a class="code" href="compmbox_2compress_8c.html#ac329588156f6dfd55072cc812ff043cd">comp_msg_save_hcache</a>,</div><div class="line">  .tags_edit        = <a class="code" href="compmbox_2compress_8c.html#a6baf16b10893271190480d29fbc8b493">comp_tags_edit</a>,</div><div class="line">  .tags_commit      = <a class="code" href="compmbox_2compress_8c.html#a1c0b7ffa4578c0b91fda494e873f13e7">comp_tags_commit</a>,</div><div class="line">  .path_probe       = <a class="code" href="compmbox_2compress_8c.html#ad886126ad1805be0c69f9b2fe138db10">comp_path_probe</a>,</div><div class="line">  .path_canon       = <a class="code" href="compmbox_2compress_8c.html#afc352b335c9a8dd1d6e89bcc566dba80">comp_path_canon</a>,</div><div class="line">  .path_pretty      = <a class="code" href="compmbox_2compress_8c.html#a164a2844f1899843274d6c80a194ca86">comp_path_pretty</a>,</div><div class="line">  .path_parent      = <a class="code" href="compmbox_2compress_8c.html#ab807f84b5a28020a4250500f9fa7463c">comp_path_parent</a>,</div><div class="line">  .path_is_empty    = NULL,</div><div class="line">}</div><div class="ttc" id="compmbox_2compress_8c_html_a5411107efad334d6cfdf124b9856e673"><div class="ttname"><a href="compmbox_2compress_8c.html#a5411107efad334d6cfdf124b9856e673">comp_mbox_open_append</a></div><div class="ttdeci">static bool comp_mbox_open_append(struct Mailbox *m, OpenMailboxFlags flags)</div><div class="ttdoc">Open a Mailbox for appending - Implements MxOps::mbox_open_append() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00496">compress.c:496</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_ac39b99d890436a70c50814a4701ed597"><div class="ttname"><a href="compmbox_2compress_8c.html#ac39b99d890436a70c50814a4701ed597">comp_mbox_close</a></div><div class="ttdeci">static enum MxStatus comp_mbox_close(struct Mailbox *m)</div><div class="ttdoc">Close a Mailbox - Implements MxOps::mbox_close() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00665">compress.c:665</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_ac329588156f6dfd55072cc812ff043cd"><div class="ttname"><a href="compmbox_2compress_8c.html#ac329588156f6dfd55072cc812ff043cd">comp_msg_save_hcache</a></div><div class="ttdeci">static int comp_msg_save_hcache(struct Mailbox *m, struct Email *e)</div><div class="ttdoc">Save message to the header cache - Implements MxOps::msg_save_hcache() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00821">compress.c:821</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_ac8f0ce1d30bcb3109c62a81979af5a15"><div class="ttname"><a href="compmbox_2compress_8c.html#ac8f0ce1d30bcb3109c62a81979af5a15">comp_msg_open</a></div><div class="ttdeci">static bool comp_msg_open(struct Mailbox *m, struct Message *msg, int msgno)</div><div class="ttdoc">Open an email message in a Mailbox - Implements MxOps::msg_open() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00732">compress.c:732</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_ab807f84b5a28020a4250500f9fa7463c"><div class="ttname"><a href="compmbox_2compress_8c.html#ab807f84b5a28020a4250500f9fa7463c">comp_path_parent</a></div><div class="ttdeci">static int comp_path_parent(char *buf, size_t buflen)</div><div class="ttdoc">Find the parent of a Mailbox path - Implements MxOps::path_parent() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00909">compress.c:909</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a164a2844f1899843274d6c80a194ca86"><div class="ttname"><a href="compmbox_2compress_8c.html#a164a2844f1899843274d6c80a194ca86">comp_path_pretty</a></div><div class="ttdeci">static int comp_path_pretty(char *buf, size_t buflen, const char *folder)</div><div class="ttdoc">Abbreviate a Mailbox path - Implements MxOps::path_pretty() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00895">compress.c:895</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a6baf16b10893271190480d29fbc8b493"><div class="ttname"><a href="compmbox_2compress_8c.html#a6baf16b10893271190480d29fbc8b493">comp_tags_edit</a></div><div class="ttdeci">static int comp_tags_edit(struct Mailbox *m, const char *tags, char *buf, size_t buflen)</div><div class="ttdoc">Prompt and validate new messages tags - Implements MxOps::tags_edit() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00838">compress.c:838</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a8c943e36f1c8e2354a8303c4435393dd"><div class="ttname"><a href="compmbox_2compress_8c.html#a8c943e36f1c8e2354a8303c4435393dd">comp_msg_open_new</a></div><div class="ttdeci">static bool comp_msg_open_new(struct Mailbox *m, struct Message *msg, const struct Email *e)</div><div class="ttdoc">Open a new message in a Mailbox - Implements MxOps::msg_open_new() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00750">compress.c:750</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_ad886126ad1805be0c69f9b2fe138db10"><div class="ttname"><a href="compmbox_2compress_8c.html#ad886126ad1805be0c69f9b2fe138db10">comp_path_probe</a></div><div class="ttdeci">static enum MailboxType comp_path_probe(const char *path, const struct stat *st)</div><div class="ttdoc">Is this a compressed Mailbox? - Implements MxOps::path_probe() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00872">compress.c:872</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_adeb7755ceb989e6dc91e9afa2ff9e84e"><div class="ttname"><a href="compmbox_2compress_8c.html#adeb7755ceb989e6dc91e9afa2ff9e84e">comp_mbox_sync</a></div><div class="ttdeci">static enum MxStatus comp_mbox_sync(struct Mailbox *m)</div><div class="ttdoc">Save changes to the Mailbox - Implements MxOps::mbox_sync() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00613">compress.c:613</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a0e6812b4bba1845ea248f4df93c06fea"><div class="ttname"><a href="compmbox_2compress_8c.html#a0e6812b4bba1845ea248f4df93c06fea">comp_msg_padding_size</a></div><div class="ttdeci">static int comp_msg_padding_size(struct Mailbox *m)</div><div class="ttdoc">Bytes of padding between messages - Implements MxOps::msg_padding_size() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00804">compress.c:804</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_afc352b335c9a8dd1d6e89bcc566dba80"><div class="ttname"><a href="compmbox_2compress_8c.html#afc352b335c9a8dd1d6e89bcc566dba80">comp_path_canon</a></div><div class="ttdeci">static int comp_path_canon(char *buf, size_t buflen)</div><div class="ttdoc">Canonicalise a Mailbox path - Implements MxOps::path_canon() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00886">compress.c:886</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_add2c1f164cf3e15e8391110717418a3e"><div class="ttname"><a href="compmbox_2compress_8c.html#add2c1f164cf3e15e8391110717418a3e">comp_ac_owns_path</a></div><div class="ttdeci">static bool comp_ac_owns_path(struct Account *a, const char *path)</div><div class="ttdoc">Check whether an Account owns a Mailbox path - Implements MxOps::ac_owns_path() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00417">compress.c:417</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a1c0b7ffa4578c0b91fda494e873f13e7"><div class="ttname"><a href="compmbox_2compress_8c.html#a1c0b7ffa4578c0b91fda494e873f13e7">comp_tags_commit</a></div><div class="ttdeci">static int comp_tags_commit(struct Mailbox *m, struct Email *e, char *buf)</div><div class="ttdoc">Save the tags to a message - Implements MxOps::tags_commit() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00855">compress.c:855</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921dabe3e473aa651d6b7030b5ef08953eb4e"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dabe3e473aa651d6b7030b5ef08953eb4e">MUTT_COMPRESSED</a></div><div class="ttdoc">Compressed file Mailbox type. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00056">mailbox.h:56</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_ad6d5ec9cf297a30e4b0673609773f156"><div class="ttname"><a href="compmbox_2compress_8c.html#ad6d5ec9cf297a30e4b0673609773f156">comp_ac_add</a></div><div class="ttdeci">static bool comp_ac_add(struct Account *a, struct Mailbox *m)</div><div class="ttdoc">Add a Mailbox to an Account - Implements MxOps::ac_add() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00425">compress.c:425</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_abf3eceb782a3061fe668121697cc2e22"><div class="ttname"><a href="compmbox_2compress_8c.html#abf3eceb782a3061fe668121697cc2e22">comp_mbox_check</a></div><div class="ttdeci">static enum MxStatus comp_mbox_check(struct Mailbox *m)</div><div class="ttdoc">Check for new mail - Implements MxOps::mbox_check() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00577">compress.c:577</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a449d225488040512f5696e4f76f36694"><div class="ttname"><a href="compmbox_2compress_8c.html#a449d225488040512f5696e4f76f36694">comp_msg_commit</a></div><div class="ttdeci">static int comp_msg_commit(struct Mailbox *m, struct Message *msg)</div><div class="ttdoc">Save changes to an email - Implements MxOps::msg_commit() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00768">compress.c:768</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a9cedad82abc13c823ff2d0e7bc1b66f9"><div class="ttname"><a href="compmbox_2compress_8c.html#a9cedad82abc13c823ff2d0e7bc1b66f9">comp_msg_close</a></div><div class="ttdeci">static int comp_msg_close(struct Mailbox *m, struct Message *msg)</div><div class="ttdoc">Close an email - Implements MxOps::msg_close() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00786">compress.c:786</a></div></div>
<div class="ttc" id="compmbox_2compress_8c_html_a017f8938078bb770eb825f2de2e588b0"><div class="ttname"><a href="compmbox_2compress_8c.html#a017f8938078bb770eb825f2de2e588b0">comp_mbox_open</a></div><div class="ttdeci">static enum MxOpenReturns comp_mbox_open(struct Mailbox *m)</div><div class="ttdoc">Open a Mailbox - Implements MxOps::mbox_open() </div><div class="ttdef"><b>Definition:</b> <a href="compmbox_2compress_8c_source.html#l00438">compress.c:438</a></div></div>
</div><!-- fragment -->
<p>Compressed <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html" title="The Mailbox API. ">MxOps</a>. </p>
<p>Compress only uses open, close and check. The message functions are delegated to mbox. </p>

<p class="definition">Definition at line <a class="el" href="compmbox_2compress_8c_source.html#l00930">930</a> of file <a class="el" href="compmbox_2compress_8c_source.html">compress.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
