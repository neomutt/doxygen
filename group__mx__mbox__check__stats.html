<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: mbox_check_stats()</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2021-02-05-647-g5d4e00</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__mx__mbox__check__stats.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mbox_check_stats()<div class="ingroups"><a class="el" href="group__mx__api.html">Mailbox API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for mbox_check_stats():</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check__stats.svg" width="311" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabd37b3c43aada06f0be371fae6cae953"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#gabd37b3c43aada06f0be371fae6cae953">imap_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:gabd37b3c43aada06f0be371fae6cae953"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -.  <a href="#gabd37b3c43aada06f0be371fae6cae953">More...</a><br /></td></tr>
<tr class="separator:gabd37b3c43aada06f0be371fae6cae953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga811dbe7e0c35adf43ebb08bfc307a458"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#ga811dbe7e0c35adf43ebb08bfc307a458">maildir_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:ga811dbe7e0c35adf43ebb08bfc307a458"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -.  <a href="#ga811dbe7e0c35adf43ebb08bfc307a458">More...</a><br /></td></tr>
<tr class="separator:ga811dbe7e0c35adf43ebb08bfc307a458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8762d7e3dcc5f33d48603e0a083e600"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#gac8762d7e3dcc5f33d48603e0a083e600">mh_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:gac8762d7e3dcc5f33d48603e0a083e600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -.  <a href="#gac8762d7e3dcc5f33d48603e0a083e600">More...</a><br /></td></tr>
<tr class="separator:gac8762d7e3dcc5f33d48603e0a083e600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c619138e35972d7b2e5eb0c4bd59459"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#ga7c619138e35972d7b2e5eb0c4bd59459">mbox_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:ga7c619138e35972d7b2e5eb0c4bd59459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -.  <a href="#ga7c619138e35972d7b2e5eb0c4bd59459">More...</a><br /></td></tr>
<tr class="separator:ga7c619138e35972d7b2e5eb0c4bd59459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0ba56fedbc28eeaa260e75dae131b3a"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#gaf0ba56fedbc28eeaa260e75dae131b3a">nm_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:gaf0ba56fedbc28eeaa260e75dae131b3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -.  <a href="#gaf0ba56fedbc28eeaa260e75dae131b3a">More...</a><br /></td></tr>
<tr class="separator:gaf0ba56fedbc28eeaa260e75dae131b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to check </td></tr>
    <tr><td class="paramname">flags</td><td>Function flags </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...">MxStatus</a></td></tr>
  </table>
  </dd>
</dl>
<p><b>Contract</b></p><ul>
<li><em>m</em> is not NULL </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabd37b3c43aada06f0be371fae6cae953"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd37b3c43aada06f0be371fae6cae953">&#9670;&nbsp;</a></span>imap_mbox_check_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> imap_mbox_check_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01219">1219</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;{</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> new_msgs = <a class="code" href="imap_8c.html#a0b252c6e7f2cc646db9414ea27a11a55">imap_mailbox_status</a>(m, <span class="keyword">true</span>);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="keywordflow">if</span> (new_msgs == -1)</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (new_msgs == 0)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;}</div><div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="imap_8c_html_a0b252c6e7f2cc646db9414ea27a11a55"><div class="ttname"><a href="imap_8c.html#a0b252c6e7f2cc646db9414ea27a11a55">imap_mailbox_status</a></div><div class="ttdeci">int imap_mailbox_status(struct Mailbox *m, bool queue)</div><div class="ttdoc">Refresh the number of total and new messages. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01270">imap.c:1270</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check__stats_gabd37b3c43aada06f0be371fae6cae953_cgraph.svg" width="404" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ga811dbe7e0c35adf43ebb08bfc307a458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga811dbe7e0c35adf43ebb08bfc307a458">&#9670;&nbsp;</a></span>maildir_mbox_check_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> maildir_mbox_check_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -. </p>

<p class="definition">Definition at line <a class="el" href="maildir_8c_source.html#l01343">1343</a> of file <a class="el" href="maildir_8c_source.html">maildir.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;{</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keywordtype">bool</span> check_stats = flags;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keywordtype">bool</span> check_new = <span class="keyword">true</span>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keywordflow">if</span> (check_stats)</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  {</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> = 0;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">msg_unread</a> = 0;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">msg_flagged</a> = 0;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">msg_new</a> = 0;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <a class="code" href="maildir_8c.html#aa4ce7bc45f6b4f1426bb85851bf6b06c">maildir_check_dir</a>(m, <span class="stringliteral">&quot;new&quot;</span>, check_new, check_stats);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_maildir_check_cur =</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;maildir_check_cur&quot;</span>);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  check_new = !m-&gt;<a class="code" href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">has_new</a> &amp;&amp; c_maildir_check_cur;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">if</span> (check_new || check_stats)</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="maildir_8c.html#aa4ce7bc45f6b4f1426bb85851bf6b06c">maildir_check_dir</a>(m, <span class="stringliteral">&quot;cur&quot;</span>, check_new, check_stats);</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">return</span> m-&gt;<a class="code" href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">msg_new</a> ? <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a> : <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;}</div><div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structMailbox_html_af2632307a08699cf251e6599c8a84cac"><div class="ttname"><a href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">Mailbox::msg_unread</a></div><div class="ttdeci">int msg_unread</div><div class="ttdoc">Number of unread messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00092">mailbox.h:92</a></div></div>
<div class="ttc" id="structMailbox_html_ad8cc58166581060ab58acf36f22bfd4d"><div class="ttname"><a href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">Mailbox::msg_flagged</a></div><div class="ttdeci">int msg_flagged</div><div class="ttdoc">Number of flagged messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00093">mailbox.h:93</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structMailbox_html_a185d46a268fdf1e34ee061a28d51414e"><div class="ttname"><a href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">Mailbox::has_new</a></div><div class="ttdeci">bool has_new</div><div class="ttdoc">Mailbox has new mail. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="maildir_8c_html_aa4ce7bc45f6b4f1426bb85851bf6b06c"><div class="ttname"><a href="maildir_8c.html#aa4ce7bc45f6b4f1426bb85851bf6b06c">maildir_check_dir</a></div><div class="ttdeci">static void maildir_check_dir(struct Mailbox *m, const char *dir_name, bool check_new, bool check_stats)</div><div class="ttdoc">Check for new mail / mail counts. </div><div class="ttdef"><b>Definition:</b> <a href="maildir_8c_source.html#l00085">maildir.c:85</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="structMailbox_html_a3348499d9eb11b4e48f073d2eddb2be4"><div class="ttname"><a href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">Mailbox::msg_new</a></div><div class="ttdeci">int msg_new</div><div class="ttdoc">Number of new messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00095">mailbox.h:95</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check__stats_ga811dbe7e0c35adf43ebb08bfc307a458_cgraph.svg" width="523" height="71"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="gac8762d7e3dcc5f33d48603e0a083e600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac8762d7e3dcc5f33d48603e0a083e600">&#9670;&nbsp;</a></span>mh_mbox_check_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> mh_mbox_check_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -. </p>

<p class="definition">Definition at line <a class="el" href="mh_8c_source.html#l00189">189</a> of file <a class="el" href="mh_8c_source.html">mh.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMhSequences.html">MhSequences</a> mhs = { 0 };</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  DIR *dirp = NULL;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keyword">struct </span>dirent *de = NULL;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">/* when $mail_check_recent is set and the .mh_sequences file hasn&#39;t changed</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">   * since the last m visit, there is no &quot;new mail&quot; */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_mail_check_recent =</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;mail_check_recent&quot;</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">if</span> (c_mail_check_recent &amp;&amp; (<a class="code" href="sequence_8c.html#ab4f1d72383a002cc88374dbceace7269">mh_seq_changed</a>(m) &lt;= 0))</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="sequence_8c.html#ad5089c5888bb5f8fba2348be50c943dc">mh_seq_read</a>(&amp;mhs, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m)) &lt; 0)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> = 0;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">msg_unread</a> = 0;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">msg_flagged</a> = 0;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> rc = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">bool</span> check_new = <span class="keyword">true</span>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = mhs.<a class="code" href="structMhSequences.html#a4f50dd478cc24d2af98b7d72d99f8f6f">max</a>; i &gt; 0; i--)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="sequence_8c.html#a82a7536102418feb9b5f4542cb30b9b2">mh_seq_check</a>(&amp;mhs, i) &amp; <a class="code" href="sequence_8h.html#acd4b02f6f6422afa6b014e5795c9cc0d">MH_SEQ_FLAGGED</a>))</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      m-&gt;<a class="code" href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">msg_flagged</a>++;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="sequence_8c.html#a82a7536102418feb9b5f4542cb30b9b2">mh_seq_check</a>(&amp;mhs, i) &amp; <a class="code" href="sequence_8h.html#a28ef3736b45bc532d96b2de611073047">MH_SEQ_UNSEEN</a>)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      m-&gt;<a class="code" href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">msg_unread</a>++;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">if</span> (check_new)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">/* if the first unseen message we encounter was in the m during the</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">         * last visit, don&#39;t notify about it */</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> (!c_mail_check_recent || (<a class="code" href="mh_8c.html#ac355ba6e8c9b1ab7fa886e52ac6f5d4e">mh_already_notified</a>(m, i) == 0))</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          m-&gt;<a class="code" href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">has_new</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          rc = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">/* Because we are traversing from high to low, we can stop</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">         * checking for new mail after the first unseen message.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">         * Whether it resulted in &quot;new mail&quot; or not. */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        check_new = <span class="keyword">false</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="sequence_8c.html#a86fe1d2831cdac159da58fba06a69349">mh_seq_free</a>(&amp;mhs);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  dirp = opendir(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (dirp)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">while</span> ((de = readdir(dirp)))</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">if</span> (*de-&gt;d_name == <span class="charliteral">&#39;.&#39;</span>)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="mh_8c.html#a5fb13b8e28f2517db9e35b6a0f4d809e">mh_valid_message</a>(de-&gt;d_name))</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>++;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    closedir(dirp);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="ttc" id="sequence_8c_html_a82a7536102418feb9b5f4542cb30b9b2"><div class="ttname"><a href="sequence_8c.html#a82a7536102418feb9b5f4542cb30b9b2">mh_seq_check</a></div><div class="ttdeci">MhSeqFlags mh_seq_check(struct MhSequences *mhs, int i)</div><div class="ttdoc">Get the flags for a given sequence. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8c_source.html#l00078">sequence.c:78</a></div></div>
<div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structMailbox_html_af2632307a08699cf251e6599c8a84cac"><div class="ttname"><a href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">Mailbox::msg_unread</a></div><div class="ttdeci">int msg_unread</div><div class="ttdoc">Number of unread messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00092">mailbox.h:92</a></div></div>
<div class="ttc" id="sequence_8c_html_a86fe1d2831cdac159da58fba06a69349"><div class="ttname"><a href="sequence_8c.html#a86fe1d2831cdac159da58fba06a69349">mh_seq_free</a></div><div class="ttdeci">void mh_seq_free(struct MhSequences *mhs)</div><div class="ttdoc">Free some sequences. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8c_source.html#l00067">sequence.c:67</a></div></div>
<div class="ttc" id="structMailbox_html_ad8cc58166581060ab58acf36f22bfd4d"><div class="ttname"><a href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">Mailbox::msg_flagged</a></div><div class="ttdeci">int msg_flagged</div><div class="ttdoc">Number of flagged messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00093">mailbox.h:93</a></div></div>
<div class="ttc" id="mh_8c_html_ac355ba6e8c9b1ab7fa886e52ac6f5d4e"><div class="ttname"><a href="mh_8c.html#ac355ba6e8c9b1ab7fa886e52ac6f5d4e">mh_already_notified</a></div><div class="ttdeci">static int mh_already_notified(struct Mailbox *m, int msgno)</div><div class="ttdoc">Has the message changed. </div><div class="ttdef"><b>Definition:</b> <a href="mh_8c_source.html#l00125">mh.c:125</a></div></div>
<div class="ttc" id="sequence_8c_html_ab4f1d72383a002cc88374dbceace7269"><div class="ttname"><a href="sequence_8c.html#ab4f1d72383a002cc88374dbceace7269">mh_seq_changed</a></div><div class="ttdeci">int mh_seq_changed(struct Mailbox *m)</div><div class="ttdoc">Has the mailbox changed. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8c_source.html#l00445">sequence.c:445</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="structMhSequences_html_a4f50dd478cc24d2af98b7d72d99f8f6f"><div class="ttname"><a href="structMhSequences.html#a4f50dd478cc24d2af98b7d72d99f8f6f">MhSequences::max</a></div><div class="ttdeci">int max</div><div class="ttdoc">Number of flags stored. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00042">sequence.h:42</a></div></div>
<div class="ttc" id="sequence_8c_html_ad5089c5888bb5f8fba2348be50c943dc"><div class="ttname"><a href="sequence_8c.html#ad5089c5888bb5f8fba2348be50c943dc">mh_seq_read</a></div><div class="ttdeci">int mh_seq_read(struct MhSequences *mhs, const char *path)</div><div class="ttdoc">Read a set of MH sequences. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8c_source.html#l00381">sequence.c:381</a></div></div>
<div class="ttc" id="structMhSequences_html"><div class="ttname"><a href="structMhSequences.html">MhSequences</a></div><div class="ttdoc">Set of MH sequence numbers. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00040">sequence.h:40</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structMailbox_html_a185d46a268fdf1e34ee061a28d51414e"><div class="ttname"><a href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">Mailbox::has_new</a></div><div class="ttdeci">bool has_new</div><div class="ttdoc">Mailbox has new mail. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="mh_8c_html_a5fb13b8e28f2517db9e35b6a0f4d809e"><div class="ttname"><a href="mh_8c.html#a5fb13b8e28f2517db9e35b6a0f4d809e">mh_valid_message</a></div><div class="ttdeci">bool mh_valid_message(const char *s)</div><div class="ttdoc">Is this a valid MH message filename. </div><div class="ttdef"><b>Definition:</b> <a href="mh_8c_source.html#l00148">mh.c:148</a></div></div>
<div class="ttc" id="sequence_8h_html_acd4b02f6f6422afa6b014e5795c9cc0d"><div class="ttname"><a href="sequence_8h.html#acd4b02f6f6422afa6b014e5795c9cc0d">MH_SEQ_FLAGGED</a></div><div class="ttdeci">#define MH_SEQ_FLAGGED</div><div class="ttdoc">Email is flagged. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00035">sequence.h:35</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="sequence_8h_html_a28ef3736b45bc532d96b2de611073047"><div class="ttname"><a href="sequence_8h.html#a28ef3736b45bc532d96b2de611073047">MH_SEQ_UNSEEN</a></div><div class="ttdeci">#define MH_SEQ_UNSEEN</div><div class="ttdoc">Email hasn&amp;#39;t been read. </div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00033">sequence.h:33</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a></div><div class="ttdeci">MxStatus</div><div class="ttdoc">Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00075">mxapi.h:75</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check__stats_gac8762d7e3dcc5f33d48603e0a083e600_cgraph.svg" width="543" height="392"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ga7c619138e35972d7b2e5eb0c4bd59459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c619138e35972d7b2e5eb0c4bd59459">&#9670;&nbsp;</a></span>mbox_mbox_check_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> mbox_mbox_check_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -. </p>

<p class="definition">Definition at line <a class="el" href="mbox_8c_source.html#l01773">1773</a> of file <a class="el" href="mbox_8c_source.html">mbox.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;{</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="keyword">struct </span>stat sb = { 0 };</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keywordflow">if</span> (stat(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m), &amp;sb) != 0)</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordtype">bool</span> new_or_changed;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_check_mbox_size =</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;check_mbox_size&quot;</span>);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">if</span> (c_check_mbox_size)</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    new_or_changed = (sb.st_size &gt; m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a>);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    new_or_changed =</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        (<a class="code" href="file_8c.html#abd248b80e50a1f6bea8e64e875c1d804">mutt_file_stat_compare</a>(&amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139aaebe13aad5970939f4383a8ed082201f">MUTT_STAT_ATIME</a>) &gt; 0) ||</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        (m-&gt;<a class="code" href="structMailbox.html#a64e988bd2f8f1c9a27f4193523f4a336">newly_created</a> &amp;&amp;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;         (<a class="code" href="file_8c.html#abd248b80e50a1f6bea8e64e875c1d804">mutt_file_stat_compare</a>(&amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139a25e70e7259f84aeac06539334a6b43e2">MUTT_STAT_CTIME</a>, &amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>) == 0) &amp;&amp;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;         (<a class="code" href="file_8c.html#abd248b80e50a1f6bea8e64e875c1d804">mutt_file_stat_compare</a>(&amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139a25e70e7259f84aeac06539334a6b43e2">MUTT_STAT_CTIME</a>, &amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139aaebe13aad5970939f4383a8ed082201f">MUTT_STAT_ATIME</a>) == 0));</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="keywordflow">if</span> (new_or_changed)</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_mail_check_recent =</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;mail_check_recent&quot;</span>);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keywordflow">if</span> (!c_mail_check_recent ||</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        (<a class="code" href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a>(&amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;m-&gt;<a class="code" href="structMailbox.html#ae355489c17bcccdd40768ef3f42dfb39">last_visited</a>) &gt; 0))</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      m-&gt;<a class="code" href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">has_new</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  }</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_check_mbox_size)</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  {</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="comment">/* some other program has deleted mail from the folder */</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#ace276d581d6d299ecf227be214841148">size</a> = (off_t) sb.st_size;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  }</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a64e988bd2f8f1c9a27f4193523f4a336">newly_created</a> &amp;&amp; ((sb.st_ctime != sb.st_mtime) || (sb.st_ctime != sb.st_atime)))</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a64e988bd2f8f1c9a27f4193523f4a336">newly_created</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  if ((flags != 0) &amp;&amp; <a class="code" href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a>(&amp;sb, <a class="code" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>,</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                                                      &amp;m-&gt;<a class="code" href="structMailbox.html#ae5d22739ec36d955fa4bae571452864b">stats_last_checked</a>) &gt; 0)</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordtype">bool</span> old_peek = m-&gt;<a class="code" href="structMailbox.html#aa89cc7ae6d74bf28054b2cbdc032d7ef">peekonly</a>;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <a class="code" href="mx_8c.html#a6c4f4c51fa0b086d86a8638197c40578">mx_mbox_open</a>(m, <a class="code" href="mxapi_8h.html#a75f314042a266df29efcc524d35c4b2d">MUTT_QUIET</a> | <a class="code" href="mxapi_8h.html#a9aa2964ccc101dbfdb11771b00b1de90">MUTT_NOSORT</a> | <a class="code" href="mxapi_8h.html#a968f688cbe0d506670853e20a623c15c">MUTT_PEEK</a>);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <a class="code" href="mx_8c.html#af9e949965d56e69eb9a6a9aa640614bb">mx_mbox_close</a>(m);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#aa89cc7ae6d74bf28054b2cbdc032d7ef">peekonly</a> = old_peek;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  }</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">has_new</a> || m-&gt;<a class="code" href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">msg_new</a>)</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="structMailbox_html_ace276d581d6d299ecf227be214841148"><div class="ttname"><a href="structMailbox.html#ace276d581d6d299ecf227be214841148">Mailbox::size</a></div><div class="ttdeci">off_t size</div><div class="ttdoc">Size of the Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00087">mailbox.h:87</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="mxapi_8h_html_a968f688cbe0d506670853e20a623c15c"><div class="ttname"><a href="mxapi_8h.html#a968f688cbe0d506670853e20a623c15c">MUTT_PEEK</a></div><div class="ttdeci">#define MUTT_PEEK</div><div class="ttdoc">Revert atime back after taking a look (if applicable) </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00068">mxapi.h:68</a></div></div>
<div class="ttc" id="mx_8c_html_a6c4f4c51fa0b086d86a8638197c40578"><div class="ttname"><a href="mx_8c.html#a6c4f4c51fa0b086d86a8638197c40578">mx_mbox_open</a></div><div class="ttdeci">bool mx_mbox_open(struct Mailbox *m, OpenMailboxFlags flags)</div><div class="ttdoc">Open a mailbox and parse it. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00304">mx.c:304</a></div></div>
<div class="ttc" id="file_8h_html_ad852389693b4c5a8d79c25e84b2d1139a25e70e7259f84aeac06539334a6b43e2"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139a25e70e7259f84aeac06539334a6b43e2">MUTT_STAT_CTIME</a></div><div class="ttdoc">File/dir&amp;#39;s ctime - creation time. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00064">file.h:64</a></div></div>
<div class="ttc" id="structMailbox_html_aa89cc7ae6d74bf28054b2cbdc032d7ef"><div class="ttname"><a href="structMailbox.html#aa89cc7ae6d74bf28054b2cbdc032d7ef">Mailbox::peekonly</a></div><div class="ttdeci">bool peekonly</div><div class="ttdoc">Just taking a glance, revert atime. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00117">mailbox.h:117</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="mx_8c_html_af9e949965d56e69eb9a6a9aa640614bb"><div class="ttname"><a href="mx_8c.html#af9e949965d56e69eb9a6a9aa640614bb">mx_mbox_close</a></div><div class="ttdeci">enum MxStatus mx_mbox_close(struct Mailbox *m)</div><div class="ttdoc">Save changes and close mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00610">mx.c:610</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structMailbox_html_a185d46a268fdf1e34ee061a28d51414e"><div class="ttname"><a href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">Mailbox::has_new</a></div><div class="ttdeci">bool has_new</div><div class="ttdoc">Mailbox has new mail. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="structMailbox_html_ae355489c17bcccdd40768ef3f42dfb39"><div class="ttname"><a href="structMailbox.html#ae355489c17bcccdd40768ef3f42dfb39">Mailbox::last_visited</a></div><div class="ttdeci">struct timespec last_visited</div><div class="ttdoc">Time of last exit from this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00108">mailbox.h:108</a></div></div>
<div class="ttc" id="file_8h_html_ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a></div><div class="ttdoc">File/dir&amp;#39;s mtime - last modified time. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00063">file.h:63</a></div></div>
<div class="ttc" id="structMailbox_html_ae5d22739ec36d955fa4bae571452864b"><div class="ttname"><a href="structMailbox.html#ae5d22739ec36d955fa4bae571452864b">Mailbox::stats_last_checked</a></div><div class="ttdeci">struct timespec stats_last_checked</div><div class="ttdoc">Mtime of mailbox the last time stats where checked. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00109">mailbox.h:109</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="mxapi_8h_html_a75f314042a266df29efcc524d35c4b2d"><div class="ttname"><a href="mxapi_8h.html#a75f314042a266df29efcc524d35c4b2d">MUTT_QUIET</a></div><div class="ttdeci">#define MUTT_QUIET</div><div class="ttdoc">Do not print any messages. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00064">mxapi.h:64</a></div></div>
<div class="ttc" id="file_8c_html_abbb978a1060ce5d0adfe20b798b716bf"><div class="ttname"><a href="file_8c.html#abbb978a1060ce5d0adfe20b798b716bf">mutt_file_stat_timespec_compare</a></div><div class="ttdeci">int mutt_file_stat_timespec_compare(struct stat *sba, enum MuttStatType type, struct timespec *b)</div><div class="ttdoc">Compare stat info with a time value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01580">file.c:1580</a></div></div>
<div class="ttc" id="structMailbox_html_a64e988bd2f8f1c9a27f4193523f4a336"><div class="ttname"><a href="structMailbox.html#a64e988bd2f8f1c9a27f4193523f4a336">Mailbox::newly_created</a></div><div class="ttdeci">bool newly_created</div><div class="ttdoc">Mbox or mmdf just popped into existence. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00106">mailbox.h:106</a></div></div>
<div class="ttc" id="file_8c_html_abd248b80e50a1f6bea8e64e875c1d804"><div class="ttname"><a href="file_8c.html#abd248b80e50a1f6bea8e64e875c1d804">mutt_file_stat_compare</a></div><div class="ttdeci">int mutt_file_stat_compare(struct stat *sba, enum MuttStatType sba_type, struct stat *sbb, enum MuttStatType sbb_type)</div><div class="ttdoc">Compare two stat infos. </div><div class="ttdef"><b>Definition:</b> <a href="file_8c_source.html#l01602">file.c:1602</a></div></div>
<div class="ttc" id="structMailbox_html_a3348499d9eb11b4e48f073d2eddb2be4"><div class="ttname"><a href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">Mailbox::msg_new</a></div><div class="ttdeci">int msg_new</div><div class="ttdoc">Number of new messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00095">mailbox.h:95</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="mxapi_8h_html_a9aa2964ccc101dbfdb11771b00b1de90"><div class="ttname"><a href="mxapi_8h.html#a9aa2964ccc101dbfdb11771b00b1de90">MUTT_NOSORT</a></div><div class="ttdeci">#define MUTT_NOSORT</div><div class="ttdoc">Do not sort the mailbox after opening it. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00061">mxapi.h:61</a></div></div>
<div class="ttc" id="file_8h_html_ad852389693b4c5a8d79c25e84b2d1139aaebe13aad5970939f4383a8ed082201f"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139aaebe13aad5970939f4383a8ed082201f">MUTT_STAT_ATIME</a></div><div class="ttdoc">File/dir&amp;#39;s atime - last accessed time. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00062">file.h:62</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check__stats_ga7c619138e35972d7b2e5eb0c4bd59459_cgraph.svg" width="758" height="260"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="gaf0ba56fedbc28eeaa260e75dae131b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf0ba56fedbc28eeaa260e75dae131b3a">&#9670;&nbsp;</a></span>nm_mbox_check_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> nm_mbox_check_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01770">1770</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;{</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keyword">struct </span><a class="code" href="structUrlQuery.html">UrlQuery</a> *item = NULL;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keyword">struct </span><a class="code" href="structUrl.html">Url</a> *url = NULL;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *db_filename = NULL;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="keywordtype">char</span> *db_query = NULL;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  notmuch_database_t *db = NULL;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> rc = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_nm_db_limit = <a class="code" href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_db_limit&quot;</span>);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordtype">int</span> limit = c_nm_db_limit;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: count\n&quot;</span>);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  url = <a class="code" href="url_8c.html#a10d35f5553c8e443c38257b69ca91075">url_parse</a>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">if</span> (!url)</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  {</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to parse notmuch url: %s&quot;</span>), <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  }</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <a class="code" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(item, &amp;url-&gt;<a class="code" href="structUrl.html#a30ca5136a9649e6df583a48cbdee35d2">query_strings</a>, entries)</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">if</span> (item-&gt;<a class="code" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a> &amp;&amp; (strcmp(item-&gt;<a class="code" href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">name</a>, <span class="stringliteral">&quot;query&quot;</span>) == 0))</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      db_query = item-&gt;<a class="code" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item-&gt;<a class="code" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a> &amp;&amp; (strcmp(item-&gt;<a class="code" href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">name</a>, <span class="stringliteral">&quot;limit&quot;</span>) == 0))</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    {</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="comment">// Try to parse the limit</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="mutt_2string_8c.html#a28ed71d2f686113e100516424be6ac42">mutt_str_atoi</a>(item-&gt;<a class="code" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a>, &amp;limit) != 0)</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      {</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to parse limit: %s&quot;</span>), item-&gt;<a class="code" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a>);</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      }</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">if</span> (!db_query)</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  db_filename = url-&gt;<a class="code" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a>;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keywordflow">if</span> (!db_filename)</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_default_url =</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_default_url&quot;</span>);</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_folder = <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;folder&quot;</span>);</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordflow">if</span> (c_nm_default_url)</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    {</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__mx__path__probe.html#gad7557498adc7575505d1d53c70b64194">nm_path_probe</a>(c_nm_default_url, NULL) == <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a>)</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        db_filename = c_nm_default_url + <a class="code" href="notmuch_8c.html#a8ff34e2c5dba7a81ce5b877213be040f">NmUrlProtocolLen</a>;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        db_filename = c_nm_default_url;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    }</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_folder)</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      db_filename = c_folder;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  }</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="comment">/* don&#39;t be verbose about connection, as we&#39;re called from</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">   * sidebar/mailbox very often */</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  db = <a class="code" href="notmuch_2db_8c.html#ad4bc67a698930a49d30e6207fe7c5176">nm_db_do_open</a>(db_filename, <span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="keywordflow">if</span> (!db)</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">/* all emails */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> = <a class="code" href="notmuch_8c.html#a4407eb83838cab3b1d14b9d22de269fc">count_query</a>(db, db_query, limit);</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordflow">while</span> (m-&gt;<a class="code" href="structMailbox.html#a4b558e0bd6fab22212bd703350372555">email_max</a> &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>)</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <a class="code" href="mx_8c.html#acd0bf144d7c5ae05d86d8fb5e0058780">mx_alloc_memory</a>(m);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="comment">// holder variable for extending query to unread/flagged</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordtype">char</span> *qstr = NULL;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="comment">// unread messages</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_unread_tag =</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_unread_tag&quot;</span>);</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <a class="code" href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a>(&amp;qstr, <span class="stringliteral">&quot;( %s ) tag:%s&quot;</span>, db_query, c_nm_unread_tag);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">msg_unread</a> = <a class="code" href="notmuch_8c.html#a4407eb83838cab3b1d14b9d22de269fc">count_query</a>(db, qstr, limit);</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;qstr);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="comment">// flagged messages</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_flagged_tag =</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <a class="code" href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_flagged_tag&quot;</span>);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <a class="code" href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a>(&amp;qstr, <span class="stringliteral">&quot;( %s ) tag:%s&quot;</span>, db_query, c_nm_flagged_tag);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">msg_flagged</a> = <a class="code" href="notmuch_8c.html#a4407eb83838cab3b1d14b9d22de269fc">count_query</a>(db, qstr, limit);</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;qstr);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  rc = (m-&gt;<a class="code" href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">msg_new</a> &gt; 0) ? <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a> : <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;done:</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordflow">if</span> (db)</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <a class="code" href="notmuch_2db_8c.html#ae4338ff57a702c18d4a5f47fd1c25230">nm_db_free</a>(db);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: count close DB\n&quot;</span>);</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <a class="code" href="url_8c.html#a7b05825b8bb8f87657713fe5bc6edfaa">url_free</a>(&amp;url);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: count done [rc=%d]\n&quot;</span>, rc);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;}</div><div class="ttc" id="notmuch_2db_8c_html_ad4bc67a698930a49d30e6207fe7c5176"><div class="ttname"><a href="notmuch_2db_8c.html#ad4bc67a698930a49d30e6207fe7c5176">nm_db_do_open</a></div><div class="ttdeci">notmuch_database_t * nm_db_do_open(const char *filename, bool writable, bool verbose)</div><div class="ttdoc">Open a Notmuch database. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_2db_8c_source.html#l00090">db.c:90</a></div></div>
<div class="ttc" id="structUrlQuery_html_a5e84f8d3d31c6f77cd662a9db2bae336"><div class="ttname"><a href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">UrlQuery::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Query name. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00059">url.h:59</a></div></div>
<div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a28ed71d2f686113e100516424be6ac42"><div class="ttname"><a href="mutt_2string_8c.html#a28ed71d2f686113e100516424be6ac42">mutt_str_atoi</a></div><div class="ttdeci">int mutt_str_atoi(const char *str, int *dst)</div><div class="ttdoc">Convert ASCII string to an integer. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00252">string.c:252</a></div></div>
<div class="ttc" id="structMailbox_html_af2632307a08699cf251e6599c8a84cac"><div class="ttname"><a href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">Mailbox::msg_unread</a></div><div class="ttdeci">int msg_unread</div><div class="ttdoc">Number of unread messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00092">mailbox.h:92</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="structMailbox_html_ad8cc58166581060ab58acf36f22bfd4d"><div class="ttname"><a href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">Mailbox::msg_flagged</a></div><div class="ttdeci">int msg_flagged</div><div class="ttdoc">Number of flagged messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00093">mailbox.h:93</a></div></div>
<div class="ttc" id="structUrl_html"><div class="ttname"><a href="structUrl.html">Url</a></div><div class="ttdoc">A parsed URL proto://user:password@host:port/path?a=1&amp;b=2 </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00068">url.h:68</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="structUrlQuery_html"><div class="ttname"><a href="structUrlQuery.html">UrlQuery</a></div><div class="ttdoc">Parsed Query String. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00057">url.h:57</a></div></div>
<div class="ttc" id="mx_8c_html_acd0bf144d7c5ae05d86d8fb5e0058780"><div class="ttname"><a href="mx_8c.html#acd0bf144d7c5ae05d86d8fb5e0058780">mx_alloc_memory</a></div><div class="ttdeci">void mx_alloc_memory(struct Mailbox *m)</div><div class="ttdoc">Create storage for the emails. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01212">mx.c:1212</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structUrlQuery_html_a6e66e3d6d751fdadc6697177649a9dad"><div class="ttname"><a href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">UrlQuery::value</a></div><div class="ttdeci">char * value</div><div class="ttdoc">Query value. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00060">url.h:60</a></div></div>
<div class="ttc" id="url_8c_html_a7b05825b8bb8f87657713fe5bc6edfaa"><div class="ttname"><a href="url_8c.html#a7b05825b8bb8f87657713fe5bc6edfaa">url_free</a></div><div class="ttdeci">void url_free(struct Url **ptr)</div><div class="ttdoc">Free the contents of a URL. </div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00123">url.c:123</a></div></div>
<div class="ttc" id="helpers_8c_html_a96039a9f8d37daad993ae7b490510339"><div class="ttname"><a href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a></div><div class="ttdeci">short cs_subset_number(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a number config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00169">helpers.c:169</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structUrl_html_a30ca5136a9649e6df583a48cbdee35d2"><div class="ttname"><a href="structUrl.html#a30ca5136a9649e6df583a48cbdee35d2">Url::query_strings</a></div><div class="ttdeci">struct UrlQueryList query_strings</div><div class="ttdoc">List of query strings. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00076">url.h:76</a></div></div>
<div class="ttc" id="structMailbox_html_a4b558e0bd6fab22212bd703350372555"><div class="ttname"><a href="structMailbox.html#a4b558e0bd6fab22212bd703350372555">Mailbox::email_max</a></div><div class="ttdeci">int email_max</div><div class="ttdoc">Number of pointers in emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00100">mailbox.h:100</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="notmuch_2db_8c_html_ae4338ff57a702c18d4a5f47fd1c25230"><div class="ttname"><a href="notmuch_2db_8c.html#ae4338ff57a702c18d4a5f47fd1c25230">nm_db_free</a></div><div class="ttdeci">void nm_db_free(notmuch_database_t *db)</div><div class="ttdoc">decoupled way to close a Notmuch database </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_2db_8c_source.html#l00213">db.c:213</a></div></div>
<div class="ttc" id="helpers_8c_html_ac477c591155aa4ae0452bbabc0affffe"><div class="ttname"><a href="helpers_8c.html#ac477c591155aa4ae0452bbabc0affffe">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00317">helpers.c:317</a></div></div>
<div class="ttc" id="notmuch_8c_html_a4407eb83838cab3b1d14b9d22de269fc"><div class="ttname"><a href="notmuch_8c.html#a4407eb83838cab3b1d14b9d22de269fc">count_query</a></div><div class="ttdeci">static unsigned int count_query(notmuch_database_t *db, const char *qstr, int limit)</div><div class="ttdoc">Count the results of a query. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l01423">notmuch.c:1423</a></div></div>
<div class="ttc" id="queue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00352">queue.h:352</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="structUrl_html_ad4b772878b40b204a7e91520b0bcbed4"><div class="ttname"><a href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">Url::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00075">url.h:75</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a></div><div class="ttdoc">&amp;#39;Notmuch&amp;#39; (virtual) Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00054">mailbox.h:54</a></div></div>
<div class="ttc" id="group__mx__path__probe_html_gad7557498adc7575505d1d53c70b64194"><div class="ttname"><a href="group__mx__path__probe.html#gad7557498adc7575505d1d53c70b64194">nm_path_probe</a></div><div class="ttdeci">enum MailboxType nm_path_probe(const char *path, const struct stat *st)</div><div class="ttdoc">Is this a Notmuch Mailbox? - Implements MxOps::path_probe() -. </div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l02456">notmuch.c:2456</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="structMailbox_html_a3348499d9eb11b4e48f073d2eddb2be4"><div class="ttname"><a href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">Mailbox::msg_new</a></div><div class="ttdeci">int msg_new</div><div class="ttdoc">Number of new messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00095">mailbox.h:95</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="notmuch_8c_html_a8ff34e2c5dba7a81ce5b877213be040f"><div class="ttname"><a href="notmuch_8c.html#a8ff34e2c5dba7a81ce5b877213be040f">NmUrlProtocolLen</a></div><div class="ttdeci">const int NmUrlProtocolLen</div><div class="ttdef"><b>Definition:</b> <a href="notmuch_8c_source.html#l00094">notmuch.c:94</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a4388c16988fac9a7596dee4d4af89595"><div class="ttname"><a href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a></div><div class="ttdeci">int mutt_str_asprintf(char **strp, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l01128">string.c:1128</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a></div><div class="ttdeci">MxStatus</div><div class="ttdoc">Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00075">mxapi.h:75</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
<div class="ttc" id="url_8c_html_a10d35f5553c8e443c38257b69ca91075"><div class="ttname"><a href="url_8c.html#a10d35f5553c8e443c38257b69ca91075">url_parse</a></div><div class="ttdeci">struct Url * url_parse(const char *src)</div><div class="ttdoc">Fill in Url. </div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00234">url.c:234</a></div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__mx__mbox__check__stats_gaf0ba56fedbc28eeaa260e75dae131b3a_cgraph.svg" width="563" height="583"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
