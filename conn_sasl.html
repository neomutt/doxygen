<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: SASL authentication support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2021-02-05-584-gb5c7a7</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('conn_sasl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SASL authentication support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>SASL can stack a protection layer on top of an existing connection.</p>
<p>To handle this, we store a saslconn_t in conn-&gt;sockdata, and write wrappers which en/decode the read/write stream, then replace sockdata with an embedded copy of the old sockdata and call the underlying functions (which we've also preserved). I thought about trying to make a general stackable connection system, but it seemed like overkill - something is wrong if we have 15 filters on top of a socket. Anyway, anything else which wishes to stack can use the same method. The only disadvantage is we have to write wrappers for all the socket methods, even if we only stack over read and write. Thinking about it, the abstraction problem is that there is more in <a class="el" href="structConnection.html" title="An open network connection (socket) ">Connection</a> than there needs to be. Ideally it would have only (void*)data and methods.</p>
<table class="doxtable">
<tr>
<th align="left">Function </th><th align="left">Description  </th></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a27f79aa92f9ee0eff38ba8ba9b783c15" title="callback to retrieve authname or user from ConnAccount ">mutt_sasl_cb_authname()</a> </td><td align="left">callback to retrieve authname or user from <a class="el" href="structConnAccount.html" title="Login details for a remote server. ">ConnAccount</a> </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a6ad00b45fffbd1eef6b766e743e35ca7" title="callback to log SASL messages ">mutt_sasl_cb_log()</a> </td><td align="left">callback to log SASL messages </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a187170c6d889153e49321cc01ee59dab" title="SASL callback function to get password. ">mutt_sasl_cb_pass()</a> </td><td align="left">SASL callback function to get password </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#ad6e1863eb3486324234dea5b32516ccf" title="Wrapper for sasl_client_new() ">mutt_sasl_client_new()</a> </td><td align="left">Wrapper for sasl_client_new() </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a829bb0b8ce9d7115de445243cfc83fd1" title="close SASL connection - Implements Connection::close() ">mutt_sasl_conn_close()</a> </td><td align="left">close SASL connection - Implements <a class="el" href="structConnection.html#a7a40be1f125477cf01ced6817be10bbc" title="Close a socket Connection. ">Connection::close()</a> </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a81c5a307c99446a04d2267b9df1e0238" title="empty wrapper for underlying open function - Implements Connection::open() ">mutt_sasl_conn_open()</a> </td><td align="left">empty wrapper for underlying open function - Implements <a class="el" href="structConnection.html#ad015a1227002b6ae42d5ad0d3add33d2" title="Note about ssf: in actuality, NeoMutt uses this as a boolean to determine if the connection is &quot;secur...">Connection::open()</a> </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a7d132b90b0dc63dc7b2610ed90f54446" title="Check an SASL connection for data - Implements Connection::poll() ">mutt_sasl_conn_poll()</a> </td><td align="left">Check an SASL connection for data - Implements <a class="el" href="structConnection.html#a2fcded23739f26da564cdb378c8b0a4f" title="Check whether a socket read would block. ">Connection::poll()</a> </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#aa140cd26925aa6024eaf658098ed35ac" title="Read data from an SASL connection - Implements Connection::read() ">mutt_sasl_conn_read()</a> </td><td align="left">Read data from an SASL connection - Implements <a class="el" href="structConnection.html#afdd852b383b3926639ec9132c048590a" title="Read from a socket Connection. ">Connection::read()</a> </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a869ea2c66fec11ded4cc7588ede6156d" title="Write to an SASL connection - Implements Connection::write() ">mutt_sasl_conn_write()</a> </td><td align="left">Write to an SASL connection - Implements <a class="el" href="structConnection.html#a3b376a9471b5c0ecf43968239bf8c2db" title="Write to a socket Connection. ">Connection::write()</a> </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a8a4397f981b925ca37de266fd43d45a8" title="Invoke when processing is complete. ">mutt_sasl_done()</a> </td><td align="left">Invoke when processing is complete </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#aa523926fe2cfbc67e866f059ccc8bff5" title="Get the SASL callback functions. ">mutt_sasl_get_callbacks()</a> </td><td align="left">Get the SASL callback functions </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a69d46ce6a265526da2e547529fe2d44b" title="Perform an SASL interaction with the user. ">mutt_sasl_interact()</a> </td><td align="left">Perform an SASL interaction with the user </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#af737590d183a661ad5cc6bd2de7fe280" title="Set up an SASL connection. ">mutt_sasl_setup_conn()</a> </td><td align="left">Set up an SASL connection </td></tr>
<tr>
<td align="left"><a class="el" href="sasl_8c.html#a6a905ca367f178fe5a8a04b390b71d27" title="Initialise SASL library. ">mutt_sasl_start()</a> </td><td align="left">Initialise SASL library </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
