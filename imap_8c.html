<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: imap/imap.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2021-02-05-647-g5d4e00</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('imap_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">imap.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>IMAP network mailbox.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="imap_2private_8h_source.html">private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2lib_8h_source.html">email/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="conn_2lib_8h_source.html">conn/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gui_2lib_8h_source.html">gui/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_8h_source.html">mutt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="imap_2lib_8h_source.html">lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="progress_2lib_8h_source.html">progress/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="question_2lib_8h_source.html">question/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="imap_2adata_8h_source.html">adata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="auth_8h_source.html">auth.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="command__parse_8h_source.html">command_parse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="commands_8h_source.html">commands.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="imap_2edata_8h_source.html">edata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hook_8h_source.html">hook.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="init_8h_source.html">init.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="imap_2mdata_8h_source.html">mdata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="msn_8h_source.html">msn.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__commands_8h_source.html">mutt_commands.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__logging_8h_source.html">mutt_logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__socket_8h_source.html">mutt_socket.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="muttlib_8h_source.html">muttlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mx_8h_source.html">mx.h</a>&quot;</code><br />
<code>#include &lt;libintl.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for imap.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c__incl.svg" width="2976" height="336"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="imap_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afa7993bff64be4e3f095e7644493c902"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#afa7993bff64be4e3f095e7644493c902">imap_init</a> (void)</td></tr>
<tr class="memdesc:afa7993bff64be4e3f095e7644493c902"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup feature commands.  <a href="#afa7993bff64be4e3f095e7644493c902">More...</a><br /></td></tr>
<tr class="separator:afa7993bff64be4e3f095e7644493c902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaecd74a7bdcaae43f8a404d59607bb0b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#aaecd74a7bdcaae43f8a404d59607bb0b">check_capabilities</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata)</td></tr>
<tr class="memdesc:aaecd74a7bdcaae43f8a404d59607bb0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make sure we can log in to this server.  <a href="#aaecd74a7bdcaae43f8a404d59607bb0b">More...</a><br /></td></tr>
<tr class="separator:aaecd74a7bdcaae43f8a404d59607bb0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e4e1578eeb887571cc9a8257a3232a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#aa3e4e1578eeb887571cc9a8257a3232a">get_flags</a> (struct ListHead *hflags, char *s)</td></tr>
<tr class="memdesc:aa3e4e1578eeb887571cc9a8257a3232a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a simple list out of a FLAGS response.  <a href="#aa3e4e1578eeb887571cc9a8257a3232a">More...</a><br /></td></tr>
<tr class="separator:aa3e4e1578eeb887571cc9a8257a3232a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17330aae0c21116a3dc7ff5eff621284"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, <a class="el" href="mailbox_8h.html#a84aa4e5fc418eb5f51c6af6e5a7a0388">AclFlags</a> aclflag, bool flag, const char *str, char *flags, size_t flsize)</td></tr>
<tr class="memdesc:a17330aae0c21116a3dc7ff5eff621284"><td class="mdescLeft">&#160;</td><td class="mdescRight">append str to flags if we currently have permission according to aclflag  <a href="#a17330aae0c21116a3dc7ff5eff621284">More...</a><br /></td></tr>
<tr class="separator:a17330aae0c21116a3dc7ff5eff621284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd140a7c71090f380878212b96596fc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#aadd140a7c71090f380878212b96596fc">make_msg_set</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structBuffer.html">Buffer</a> *buf, enum <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013">MessageType</a> flag, bool changed, bool invert, int *pos)</td></tr>
<tr class="memdesc:aadd140a7c71090f380878212b96596fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a message set.  <a href="#aadd140a7c71090f380878212b96596fc">More...</a><br /></td></tr>
<tr class="separator:aadd140a7c71090f380878212b96596fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb984879ac7f2ebaef80791fdf7e7adb"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#afb984879ac7f2ebaef80791fdf7e7adb">compare_flags_for_copy</a> (struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:afb984879ac7f2ebaef80791fdf7e7adb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare local flags against the server.  <a href="#afb984879ac7f2ebaef80791fdf7e7adb">More...</a><br /></td></tr>
<tr class="separator:afb984879ac7f2ebaef80791fdf7e7adb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb8bc94d6695c477624fcb4fe2822ba"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a6bb8bc94d6695c477624fcb4fe2822ba">sync_helper</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, <a class="el" href="mailbox_8h.html#a84aa4e5fc418eb5f51c6af6e5a7a0388">AclFlags</a> right, enum <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013">MessageType</a> flag, const char *name)</td></tr>
<tr class="memdesc:a6bb8bc94d6695c477624fcb4fe2822ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync flag changes to the server.  <a href="#a6bb8bc94d6695c477624fcb4fe2822ba">More...</a><br /></td></tr>
<tr class="separator:a6bb8bc94d6695c477624fcb4fe2822ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dae2198b19fe4fbf2bfecb671c72f73"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a4dae2198b19fe4fbf2bfecb671c72f73">longest_common_prefix</a> (char *dest, const char *src, size_t start, size_t dlen)</td></tr>
<tr class="memdesc:a4dae2198b19fe4fbf2bfecb671c72f73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find longest prefix common to two strings.  <a href="#a4dae2198b19fe4fbf2bfecb671c72f73">More...</a><br /></td></tr>
<tr class="separator:a4dae2198b19fe4fbf2bfecb671c72f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac58d293937015b8560ee115503d199ff"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ac58d293937015b8560ee115503d199ff">complete_hosts</a> (char *buf, size_t buflen)</td></tr>
<tr class="memdesc:ac58d293937015b8560ee115503d199ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for completion matches for mailboxes.  <a href="#ac58d293937015b8560ee115503d199ff">More...</a><br /></td></tr>
<tr class="separator:ac58d293937015b8560ee115503d199ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee0bf2d345124a22054cbf217b6fb5f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#aee0bf2d345124a22054cbf217b6fb5f0">imap_create_mailbox</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata, char *mailbox)</td></tr>
<tr class="memdesc:aee0bf2d345124a22054cbf217b6fb5f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new mailbox.  <a href="#aee0bf2d345124a22054cbf217b6fb5f0">More...</a><br /></td></tr>
<tr class="separator:aee0bf2d345124a22054cbf217b6fb5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f5086daa8615bc5f01884b51053392"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ac9f5086daa8615bc5f01884b51053392">imap_access</a> (const char *path)</td></tr>
<tr class="memdesc:ac9f5086daa8615bc5f01884b51053392"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check permissions on an IMAP mailbox with a new connection.  <a href="#ac9f5086daa8615bc5f01884b51053392">More...</a><br /></td></tr>
<tr class="separator:ac9f5086daa8615bc5f01884b51053392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f4b46b80a1dd0e00cc956c06d377464"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a9f4b46b80a1dd0e00cc956c06d377464">imap_rename_mailbox</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata, char *oldname, const char *newname)</td></tr>
<tr class="memdesc:a9f4b46b80a1dd0e00cc956c06d377464"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename a mailbox.  <a href="#a9f4b46b80a1dd0e00cc956c06d377464">More...</a><br /></td></tr>
<tr class="separator:a9f4b46b80a1dd0e00cc956c06d377464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f78f88f04284f923f839a64ec680c35"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a8f78f88f04284f923f839a64ec680c35">imap_delete_mailbox</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, char *path)</td></tr>
<tr class="memdesc:a8f78f88f04284f923f839a64ec680c35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a mailbox.  <a href="#a8f78f88f04284f923f839a64ec680c35">More...</a><br /></td></tr>
<tr class="separator:a8f78f88f04284f923f839a64ec680c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b142599cd1c529a1ffc0bacc6a064f7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a0b142599cd1c529a1ffc0bacc6a064f7">imap_logout</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata)</td></tr>
<tr class="memdesc:a0b142599cd1c529a1ffc0bacc6a064f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully log out of server.  <a href="#a0b142599cd1c529a1ffc0bacc6a064f7">More...</a><br /></td></tr>
<tr class="separator:a0b142599cd1c529a1ffc0bacc6a064f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace40ffc72b9f8ed5f315ea2825472773"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ace40ffc72b9f8ed5f315ea2825472773">imap_logout_all</a> (void)</td></tr>
<tr class="memdesc:ace40ffc72b9f8ed5f315ea2825472773"><td class="mdescLeft">&#160;</td><td class="mdescRight">close all open connections  <a href="#ace40ffc72b9f8ed5f315ea2825472773">More...</a><br /></td></tr>
<tr class="separator:ace40ffc72b9f8ed5f315ea2825472773"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5adc6a50d981b74f9210b202ca117861"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a5adc6a50d981b74f9210b202ca117861">imap_read_literal</a> (FILE *fp, struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata, unsigned long bytes, struct <a class="el" href="structProgress.html">Progress</a> *pbar)</td></tr>
<tr class="memdesc:a5adc6a50d981b74f9210b202ca117861"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read bytes bytes from server into file.  <a href="#a5adc6a50d981b74f9210b202ca117861">More...</a><br /></td></tr>
<tr class="separator:a5adc6a50d981b74f9210b202ca117861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12008dfceea99a26fa88f26b625637a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a12008dfceea99a26fa88f26b625637a8">imap_notify_delete_email</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a12008dfceea99a26fa88f26b625637a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform IMAP that an <a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> has been deleted.  <a href="#a12008dfceea99a26fa88f26b625637a8">More...</a><br /></td></tr>
<tr class="separator:a12008dfceea99a26fa88f26b625637a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa526e62e5ec404f052c82e72f8a942b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#aa526e62e5ec404f052c82e72f8a942b8">imap_expunge_mailbox</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:aa526e62e5ec404f052c82e72f8a942b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purge messages from the server.  <a href="#aa526e62e5ec404f052c82e72f8a942b8">More...</a><br /></td></tr>
<tr class="separator:aa526e62e5ec404f052c82e72f8a942b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93ed20ff163bf6a15c46071ba357d17a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a93ed20ff163bf6a15c46071ba357d17a">imap_open_connection</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata)</td></tr>
<tr class="memdesc:a93ed20ff163bf6a15c46071ba357d17a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an IMAP connection.  <a href="#a93ed20ff163bf6a15c46071ba357d17a">More...</a><br /></td></tr>
<tr class="separator:a93ed20ff163bf6a15c46071ba357d17a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b36ce07a1b1b0fbe046f9e0e192119"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a14b36ce07a1b1b0fbe046f9e0e192119">imap_close_connection</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata)</td></tr>
<tr class="memdesc:a14b36ce07a1b1b0fbe046f9e0e192119"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an IMAP connection.  <a href="#a14b36ce07a1b1b0fbe046f9e0e192119">More...</a><br /></td></tr>
<tr class="separator:a14b36ce07a1b1b0fbe046f9e0e192119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad998b83df59b588e3643ec0e1b41af3d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ad998b83df59b588e3643ec0e1b41af3d">imap_has_flag</a> (struct ListHead *flag_list, const char *flag)</td></tr>
<tr class="memdesc:ad998b83df59b588e3643ec0e1b41af3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the flag exist in the list.  <a href="#ad998b83df59b588e3643ec0e1b41af3d">More...</a><br /></td></tr>
<tr class="separator:ad998b83df59b588e3643ec0e1b41af3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b61cb17f4f6f798ecaf11469dc30f7b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a5b61cb17f4f6f798ecaf11469dc30f7b">compare_uid</a> (const void *a, const void *b)</td></tr>
<tr class="memdesc:a5b61cb17f4f6f798ecaf11469dc30f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two Emails by UID - Implements <a class="el" href="sort_8h.html#ae599403f309e9dcfdbf62e63e628a2d8" title="Prototype for generic comparison function, compatible with qsort. ">sort_t</a>.  <a href="#a5b61cb17f4f6f798ecaf11469dc30f7b">More...</a><br /></td></tr>
<tr class="separator:a5b61cb17f4f6f798ecaf11469dc30f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62497a1d8948e9172091840079ee3155"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *pre, const char *post, enum <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013">MessageType</a> flag, bool changed, bool invert)</td></tr>
<tr class="memdesc:a62497a1d8948e9172091840079ee3155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare commands for all messages matching conditions.  <a href="#a62497a1d8948e9172091840079ee3155">More...</a><br /></td></tr>
<tr class="separator:a62497a1d8948e9172091840079ee3155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf465f5f6004ebf7bb4ad8e59a2f5b6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#abf465f5f6004ebf7bb4ad8e59a2f5b6c">imap_sync_message_for_copy</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structBuffer.html">Buffer</a> *cmd, enum <a class="el" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> *err_continue)</td></tr>
<tr class="memdesc:abf465f5f6004ebf7bb4ad8e59a2f5b6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update server to reflect the flags of a single message.  <a href="#abf465f5f6004ebf7bb4ad8e59a2f5b6c">More...</a><br /></td></tr>
<tr class="separator:abf465f5f6004ebf7bb4ad8e59a2f5b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd4b6567f210cef7e4dcffa45f263ce"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#acfd4b6567f210cef7e4dcffa45f263ce">imap_check_mailbox</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, bool force)</td></tr>
<tr class="memdesc:acfd4b6567f210cef7e4dcffa45f263ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">use the NOOP or IDLE command to poll for new mail  <a href="#acfd4b6567f210cef7e4dcffa45f263ce">More...</a><br /></td></tr>
<tr class="separator:acfd4b6567f210cef7e4dcffa45f263ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be797f9a98071e6bb8b2ca4822a0d5d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a4be797f9a98071e6bb8b2ca4822a0d5d">imap_status</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata, struct <a class="el" href="structImapMboxData.html">ImapMboxData</a> *mdata, bool queue)</td></tr>
<tr class="memdesc:a4be797f9a98071e6bb8b2ca4822a0d5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refresh the number of total and new messages.  <a href="#a4be797f9a98071e6bb8b2ca4822a0d5d">More...</a><br /></td></tr>
<tr class="separator:a4be797f9a98071e6bb8b2ca4822a0d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd37b3c43aada06f0be371fae6cae953"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#gabd37b3c43aada06f0be371fae6cae953">imap_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:gabd37b3c43aada06f0be371fae6cae953"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#af807cc5fe2889a304182e99ec91f7e0c">MxOps::mbox_check_stats()</a> -.  <a href="group__mx__mbox__check__stats.html#gabd37b3c43aada06f0be371fae6cae953">More...</a><br /></td></tr>
<tr class="separator:gabd37b3c43aada06f0be371fae6cae953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d5f24d9ba8d3ef9e95134cae1198408"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a0d5f24d9ba8d3ef9e95134cae1198408">imap_path_status</a> (const char *path, bool queue)</td></tr>
<tr class="memdesc:a0d5f24d9ba8d3ef9e95134cae1198408"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refresh the number of total and new messages.  <a href="#a0d5f24d9ba8d3ef9e95134cae1198408">More...</a><br /></td></tr>
<tr class="separator:a0d5f24d9ba8d3ef9e95134cae1198408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b252c6e7f2cc646db9414ea27a11a55"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a0b252c6e7f2cc646db9414ea27a11a55">imap_mailbox_status</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, bool queue)</td></tr>
<tr class="memdesc:a0b252c6e7f2cc646db9414ea27a11a55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refresh the number of total and new messages.  <a href="#a0b252c6e7f2cc646db9414ea27a11a55">More...</a><br /></td></tr>
<tr class="separator:a0b252c6e7f2cc646db9414ea27a11a55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36034876b5ce260ff6d70a435f8f36ca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a36034876b5ce260ff6d70a435f8f36ca">imap_subscribe</a> (char *path, bool subscribe)</td></tr>
<tr class="memdesc:a36034876b5ce260ff6d70a435f8f36ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe to a mailbox.  <a href="#a36034876b5ce260ff6d70a435f8f36ca">More...</a><br /></td></tr>
<tr class="separator:a36034876b5ce260ff6d70a435f8f36ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768ec60d7525b728f5f1b1cd6789c8e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#a768ec60d7525b728f5f1b1cd6789c8e8">imap_complete</a> (char *buf, size_t buflen, const char *path)</td></tr>
<tr class="memdesc:a768ec60d7525b728f5f1b1cd6789c8e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to complete an IMAP folder path.  <a href="#a768ec60d7525b728f5f1b1cd6789c8e8">More...</a><br /></td></tr>
<tr class="separator:a768ec60d7525b728f5f1b1cd6789c8e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab243b759db9258fd8373a350b19ed0b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ab243b759db9258fd8373a350b19ed0b8">imap_fast_trash</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *dest)</td></tr>
<tr class="memdesc:ab243b759db9258fd8373a350b19ed0b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use server COPY command to copy deleted messages to trash.  <a href="#ab243b759db9258fd8373a350b19ed0b8">More...</a><br /></td></tr>
<tr class="separator:ab243b759db9258fd8373a350b19ed0b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac964d627e8a2fad2b74d00096594d0ed"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ac964d627e8a2fad2b74d00096594d0ed">imap_sync_mailbox</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, bool expunge, bool close)</td></tr>
<tr class="memdesc:ac964d627e8a2fad2b74d00096594d0ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync all the changes to the server.  <a href="#ac964d627e8a2fad2b74d00096594d0ed">More...</a><br /></td></tr>
<tr class="separator:ac964d627e8a2fad2b74d00096594d0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga591dc58a8d2d06bfeef77452864bbb01"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__ac__owns__path.html#ga591dc58a8d2d06bfeef77452864bbb01">imap_ac_owns_path</a> (struct <a class="el" href="structAccount.html">Account</a> *a, const char *path)</td></tr>
<tr class="memdesc:ga591dc58a8d2d06bfeef77452864bbb01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> owns a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a8036f191d1b0ace220c5a5ff52f609b4">MxOps::ac_owns_path()</a> -.  <a href="group__mx__ac__owns__path.html#ga591dc58a8d2d06bfeef77452864bbb01">More...</a><br /></td></tr>
<tr class="separator:ga591dc58a8d2d06bfeef77452864bbb01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17c8a7069e5923662f22fe1e475a0bdf"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__ac__add.html#ga17c8a7069e5923662f22fe1e475a0bdf">imap_ac_add</a> (struct <a class="el" href="structAccount.html">Account</a> *a, struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga17c8a7069e5923662f22fe1e475a0bdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to an <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> - Implements <a class="el" href="structMxOps.html#ac432a4900b0ca5a5ca2dc98319dbf737">MxOps::ac_add()</a> -.  <a href="group__mx__ac__add.html#ga17c8a7069e5923662f22fe1e475a0bdf">More...</a><br /></td></tr>
<tr class="separator:ga17c8a7069e5923662f22fe1e475a0bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae508cb6f612071ea4549814aa3532c89"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ae508cb6f612071ea4549814aa3532c89">imap_mbox_select</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ae508cb6f612071ea4549814aa3532c89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a>.  <a href="#ae508cb6f612071ea4549814aa3532c89">More...</a><br /></td></tr>
<tr class="separator:ae508cb6f612071ea4549814aa3532c89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb15c04fee226298708dc044645df651"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#aeb15c04fee226298708dc044645df651">imap_login</a> (struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *adata)</td></tr>
<tr class="memdesc:aeb15c04fee226298708dc044645df651"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an IMAP connection.  <a href="#aeb15c04fee226298708dc044645df651">More...</a><br /></td></tr>
<tr class="separator:aeb15c04fee226298708dc044645df651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac97da7839145e4cf23c319967ecc7001"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cad">MxOpenReturns</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__open.html#gac97da7839145e4cf23c319967ecc7001">imap_mbox_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gac97da7839145e4cf23c319967ecc7001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a mailbox - Implements <a class="el" href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45">MxOps::mbox_open()</a> -.  <a href="group__mx__mbox__open.html#gac97da7839145e4cf23c319967ecc7001">More...</a><br /></td></tr>
<tr class="separator:gac97da7839145e4cf23c319967ecc7001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71ba8593edd07989dee356ec829be873"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__open__append.html#ga71ba8593edd07989dee356ec829be873">imap_mbox_open_append</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, <a class="el" href="mxapi_8h.html#a12d50555671e01ef64b027974fc5acfa">OpenMailboxFlags</a> flags)</td></tr>
<tr class="memdesc:ga71ba8593edd07989dee356ec829be873"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> for appending - Implements <a class="el" href="structMxOps.html#af201c2c2f87a1253cbaf8ae24f062ef3">MxOps::mbox_open_append()</a> -.  <a href="group__mx__mbox__open__append.html#ga71ba8593edd07989dee356ec829be873">More...</a><br /></td></tr>
<tr class="separator:ga71ba8593edd07989dee356ec829be873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab274718bd33e0eb6ce4e102d9483d085"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gab274718bd33e0eb6ce4e102d9483d085">imap_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gab274718bd33e0eb6ce4e102d9483d085"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <a href="group__mx__mbox__check.html#gab274718bd33e0eb6ce4e102d9483d085">More...</a><br /></td></tr>
<tr class="separator:gab274718bd33e0eb6ce4e102d9483d085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa269aaa3832160ecf23677499c936610"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__close.html#gaa269aaa3832160ecf23677499c936610">imap_mbox_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gaa269aaa3832160ecf23677499c936610"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc">MxOps::mbox_close()</a> -.  <a href="group__mx__mbox__close.html#gaa269aaa3832160ecf23677499c936610">More...</a><br /></td></tr>
<tr class="separator:gaa269aaa3832160ecf23677499c936610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa86747b94da8b5ca1643b6611752affd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__open__new.html#gaa86747b94da8b5ca1643b6611752affd">imap_msg_open_new</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg, const struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:gaa86747b94da8b5ca1643b6611752affd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new message in a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ada910d49b8f3d007c32aa8a4adc15637">MxOps::msg_open_new()</a> -.  <a href="group__mx__msg__open__new.html#gaa86747b94da8b5ca1643b6611752affd">More...</a><br /></td></tr>
<tr class="separator:gaa86747b94da8b5ca1643b6611752affd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab61a50c1694e5e41511078202a902f77"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__tags__edit.html#gab61a50c1694e5e41511078202a902f77">imap_tags_edit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *tags, char *buf, size_t buflen)</td></tr>
<tr class="memdesc:gab61a50c1694e5e41511078202a902f77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt and validate new messages tags - Implements <a class="el" href="structMxOps.html#a0e3f825e2d93106795c85d5df78874ea">MxOps::tags_edit()</a> -.  <a href="group__mx__tags__edit.html#gab61a50c1694e5e41511078202a902f77">More...</a><br /></td></tr>
<tr class="separator:gab61a50c1694e5e41511078202a902f77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga265946b35361966dfe4ff4aa3b27bc23"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__tags__commit.html#ga265946b35361966dfe4ff4aa3b27bc23">imap_tags_commit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, char *buf)</td></tr>
<tr class="memdesc:ga265946b35361966dfe4ff4aa3b27bc23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the tags to a message - Implements <a class="el" href="structMxOps.html#a9e996b21c0a4d701020aa632ecc5ae82">MxOps::tags_commit()</a> -This method update the server flags on the server by removing the last know custom flags of a header and adds the local flags.  <a href="group__mx__tags__commit.html#ga265946b35361966dfe4ff4aa3b27bc23">More...</a><br /></td></tr>
<tr class="separator:ga265946b35361966dfe4ff4aa3b27bc23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4f27af8eb857a20834f445be3f498de"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921d">MailboxType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__probe.html#gab4f27af8eb857a20834f445be3f498de">imap_path_probe</a> (const char *path, const struct stat *st)</td></tr>
<tr class="memdesc:gab4f27af8eb857a20834f445be3f498de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this an IMAP <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a>? - Implements <a class="el" href="structMxOps.html#a625a6ea0abfdb6620542e26acc499177">MxOps::path_probe()</a> -.  <a href="group__mx__path__probe.html#gab4f27af8eb857a20834f445be3f498de">More...</a><br /></td></tr>
<tr class="separator:gab4f27af8eb857a20834f445be3f498de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45a0368f1fc09168bed51ec53ad91bb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__canon.html#ga45a0368f1fc09168bed51ec53ad91bb5">imap_path_canon</a> (char *buf, size_t buflen)</td></tr>
<tr class="memdesc:ga45a0368f1fc09168bed51ec53ad91bb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Canonicalise a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#ad7d938f02ba15c08d45128bc2ca00e28">MxOps::path_canon()</a> -.  <a href="group__mx__path__canon.html#ga45a0368f1fc09168bed51ec53ad91bb5">More...</a><br /></td></tr>
<tr class="separator:ga45a0368f1fc09168bed51ec53ad91bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2645aa08902090e5e29dff471d1bb0e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#ab2645aa08902090e5e29dff471d1bb0e">imap_expand_path</a> (struct <a class="el" href="structBuffer.html">Buffer</a> *buf)</td></tr>
<tr class="memdesc:ab2645aa08902090e5e29dff471d1bb0e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> wrapper around <a class="el" href="group__mx__path__canon.html#ga45a0368f1fc09168bed51ec53ad91bb5" title="Canonicalise a Mailbox path - Implements MxOps::path_canon() -. ">imap_path_canon()</a>  <a href="#ab2645aa08902090e5e29dff471d1bb0e">More...</a><br /></td></tr>
<tr class="separator:ab2645aa08902090e5e29dff471d1bb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77266ac5e79c4aede2cbb51bbd2f8f58"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__pretty.html#ga77266ac5e79c4aede2cbb51bbd2f8f58">imap_path_pretty</a> (char *buf, size_t buflen, const char *folder)</td></tr>
<tr class="memdesc:ga77266ac5e79c4aede2cbb51bbd2f8f58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abbreviate a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a3a85067a3d76652ec0014ce520c565db">MxOps::path_pretty()</a> -.  <a href="group__mx__path__pretty.html#ga77266ac5e79c4aede2cbb51bbd2f8f58">More...</a><br /></td></tr>
<tr class="separator:ga77266ac5e79c4aede2cbb51bbd2f8f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d533f860d0f7109cfec59b860ff2e23"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__parent.html#ga7d533f860d0f7109cfec59b860ff2e23">imap_path_parent</a> (char *buf, size_t buflen)</td></tr>
<tr class="memdesc:ga7d533f860d0f7109cfec59b860ff2e23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the parent of a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a0816dd26eb79c12783e9ac9e7b67ecd9">MxOps::path_parent()</a> -.  <a href="group__mx__path__parent.html#ga7d533f860d0f7109cfec59b860ff2e23">More...</a><br /></td></tr>
<tr class="separator:ga7d533f860d0f7109cfec59b860ff2e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49ced05770a208997c1580376dc4e380"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__is__empty.html#ga49ced05770a208997c1580376dc4e380">imap_path_is_empty</a> (const char *path)</td></tr>
<tr class="memdesc:ga49ced05770a208997c1580376dc4e380"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the mailbox empty - Implements <a class="el" href="structMxOps.html#a6ef058630b8418ae080d17762c26a75d">MxOps::path_is_empty()</a> -.  <a href="group__mx__path__is__empty.html#ga49ced05770a208997c1580376dc4e380">More...</a><br /></td></tr>
<tr class="separator:ga49ced05770a208997c1580376dc4e380"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa4c20afa73454ac2b6bdcb2e7177868e"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="structCommand.html">Command</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imap_8c.html#aa4c20afa73454ac2b6bdcb2e7177868e">imap_commands</a> []</td></tr>
<tr class="separator:aa4c20afa73454ac2b6bdcb2e7177868e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9cd881485b601b78cae25ade04b475c8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structMxOps.html">MxOps</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__api.html#ga9cd881485b601b78cae25ade04b475c8">MxImapOps</a></td></tr>
<tr class="memdesc:ga9cd881485b601b78cae25ade04b475c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">IMAP <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> - Implements <a class="el" href="structMxOps.html">MxOps</a> -.  <a href="group__mx__api.html#ga9cd881485b601b78cae25ade04b475c8">More...</a><br /></td></tr>
<tr class="separator:ga9cd881485b601b78cae25ade04b475c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>IMAP network mailbox. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Michael R. Elkins</li>
<li>Brandon Long</li>
<li>Brendan Cully</li>
<li>Richard Russon</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afa7993bff64be4e3f095e7644493c902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa7993bff64be4e3f095e7644493c902">&#9670;&nbsp;</a></span>imap_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void imap_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup feature commands. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00083">83</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="mutt__commands_8h.html#ab11d3e73ef33f8740241999967f38580">COMMANDS_REGISTER</a>(<a class="code" href="imap_8c.html#aa4c20afa73454ac2b6bdcb2e7177868e">imap_commands</a>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div><div class="ttc" id="mutt__commands_8h_html_ab11d3e73ef33f8740241999967f38580"><div class="ttname"><a href="mutt__commands_8h.html#ab11d3e73ef33f8740241999967f38580">COMMANDS_REGISTER</a></div><div class="ttdeci">#define COMMANDS_REGISTER(cmds)</div><div class="ttdef"><b>Definition:</b> <a href="mutt__commands_8h_source.html#l00077">mutt_commands.h:77</a></div></div>
<div class="ttc" id="imap_8c_html_aa4c20afa73454ac2b6bdcb2e7177868e"><div class="ttname"><a href="imap_8c.html#aa4c20afa73454ac2b6bdcb2e7177868e">imap_commands</a></div><div class="ttdeci">static const struct Command imap_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00073">imap.c:73</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_afa7993bff64be4e3f095e7644493c902_icgraph.svg" width="223" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aaecd74a7bdcaae43f8a404d59607bb0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaecd74a7bdcaae43f8a404d59607bb0b">&#9670;&nbsp;</a></span>check_capabilities()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_capabilities </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make sure we can log in to this server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00094">94</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;CAPABILITY&quot;</span>, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a>(<span class="stringliteral">&quot;check_capabilities&quot;</span>, adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (!((adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a5dad25f043b2ae468f4942f0d816b3c7">IMAP_CAP_IMAP4</a>) || (adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a6217caee48af21c7f08eff5dce816dcf">IMAP_CAP_IMAP4REV1</a>)))</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;This IMAP server is ancient. NeoMutt does not work with it.&quot;</span>));</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="imap_2private_8h_html_a5dad25f043b2ae468f4942f0d816b3c7"><div class="ttname"><a href="imap_2private_8h.html#a5dad25f043b2ae468f4942f0d816b3c7">IMAP_CAP_IMAP4</a></div><div class="ttdeci">#define IMAP_CAP_IMAP4</div><div class="ttdoc">Server supports IMAP4. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00123">private.h:123</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="imap_2private_8h_html_aab316d8524d30a8813bab633aa9505e6"><div class="ttname"><a href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a></div><div class="ttdeci">void imap_error(const char *where, const char *msg)</div><div class="ttdoc">show an error and abort </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00665">util.c:665</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a6217caee48af21c7f08eff5dce816dcf"><div class="ttname"><a href="imap_2private_8h.html#a6217caee48af21c7f08eff5dce816dcf">IMAP_CAP_IMAP4REV1</a></div><div class="ttdeci">#define IMAP_CAP_IMAP4REV1</div><div class="ttdoc">Server supports IMAP4rev1. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00124">private.h:124</a></div></div>
<div class="ttc" id="structImapAccountData_html_aa1ba7fde388cdd8e1133c1784e5ed4ea"><div class="ttname"><a href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">ImapAccountData::capabilities</a></div><div class="ttdeci">ImapCapFlags capabilities</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00055">adata.h:55</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="structImapAccountData_html_ae2a1c679abb95b27819897b57ee436fd"><div class="ttname"><a href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">ImapAccountData::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00059">adata.h:59</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aaecd74a7bdcaae43f8a404d59607bb0b_cgraph.svg" width="295" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aaecd74a7bdcaae43f8a404d59607bb0b_icgraph.svg" width="374" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa3e4e1578eeb887571cc9a8257a3232a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e4e1578eeb887571cc9a8257a3232a">&#9670;&nbsp;</a></span>get_flags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_flags </td>
          <td>(</td>
          <td class="paramtype">struct ListHead *&#160;</td>
          <td class="paramname"><em>hflags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a simple list out of a FLAGS response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hflags</td><td>List to store flags </td></tr>
    <tr><td class="paramname">s</td><td>String containing flags </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>End of the flags </td></tr>
    <tr><td class="paramname">NULL</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>return stream following FLAGS response </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00121">121</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">/* sanity-check string */</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="pgppacket_8c.html#af86b82f9e1d828f6609218d3787e6ea1">plen</a> = <a class="code" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(s, <span class="stringliteral">&quot;FLAGS&quot;</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (plen == 0)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;not a FLAGS response: %s\n&quot;</span>, s);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  s += <a class="code" href="pgppacket_8c.html#af86b82f9e1d828f6609218d3787e6ea1">plen</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="string2_8h.html#aebd4477213a7b706515efaffdec64181">SKIPWS</a>(s);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span> (*s != <span class="charliteral">&#39;(&#39;</span>)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;bogus FLAGS response: %s\n&quot;</span>, s);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">/* update caller&#39;s flags handle */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">while</span> (*s &amp;&amp; (*s != <span class="charliteral">&#39;)&#39;</span>))</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    s++;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="string2_8h.html#aebd4477213a7b706515efaffdec64181">SKIPWS</a>(s);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *flag_word = s;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">while</span> (*s &amp;&amp; (*s != <span class="charliteral">&#39;)&#39;</span>) &amp;&amp; !<a class="code" href="string2_8h.html#acf2117a80b76adbb0ad9019e63adce1f">IS_SPACE</a>(*s))</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      s++;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> ctmp = *s;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    *s = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (*flag_word)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <a class="code" href="list_8c.html#ace47a64c8bec9d1b24be6524f650293d">mutt_list_insert_tail</a>(hflags, <a class="code" href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a>(flag_word));</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    *s = ctmp;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">/* note bad flags response */</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">if</span> (*s != <span class="charliteral">&#39;)&#39;</span>)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Unterminated FLAGS response: %s\n&quot;</span>, s);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="list_8c.html#ab5c53ce94cc2aafa4299dbc81a37f4a4">mutt_list_free</a>(hflags);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  s++;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div><div class="ttc" id="pgppacket_8c_html_af86b82f9e1d828f6609218d3787e6ea1"><div class="ttname"><a href="pgppacket_8c.html#af86b82f9e1d828f6609218d3787e6ea1">plen</a></div><div class="ttdeci">static size_t plen</div><div class="ttdoc">Length of cached packet. </div><div class="ttdef"><b>Definition:</b> <a href="pgppacket_8c_source.html#l00039">pgppacket.c:39</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a4c2560f787bd1226b977992c16860c98"><div class="ttname"><a href="mutt_2string_8c.html#a4c2560f787bd1226b977992c16860c98">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00370">string.c:370</a></div></div>
<div class="ttc" id="list_8c_html_ab5c53ce94cc2aafa4299dbc81a37f4a4"><div class="ttname"><a href="list_8c.html#ab5c53ce94cc2aafa4299dbc81a37f4a4">mutt_list_free</a></div><div class="ttdeci">void mutt_list_free(struct ListHead *h)</div><div class="ttdoc">Free a List AND its strings. </div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00122">list.c:122</a></div></div>
<div class="ttc" id="string2_8h_html_aebd4477213a7b706515efaffdec64181"><div class="ttname"><a href="string2_8h.html#aebd4477213a7b706515efaffdec64181">SKIPWS</a></div><div class="ttdeci">#define SKIPWS(ch)</div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00046">string2.h:46</a></div></div>
<div class="ttc" id="list_8c_html_ace47a64c8bec9d1b24be6524f650293d"><div class="ttname"><a href="list_8c.html#ace47a64c8bec9d1b24be6524f650293d">mutt_list_insert_tail</a></div><div class="ttdeci">struct ListNode * mutt_list_insert_tail(struct ListHead *h, char *s)</div><div class="ttdoc">Append a string to the end of a List. </div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00064">list.c:64</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_aebd2a8a3f8a30062c31fa1474d87cc41"><div class="ttname"><a href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a></div><div class="ttdeci">size_t mutt_istr_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix, ignoring case. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00172">string.c:172</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="string2_8h_html_acf2117a80b76adbb0ad9019e63adce1f"><div class="ttname"><a href="string2_8h.html#acf2117a80b76adbb0ad9019e63adce1f">IS_SPACE</a></div><div class="ttdeci">#define IS_SPACE(ch)</div><div class="ttdef"><b>Definition:</b> <a href="string2_8h_source.html#l00038">string2.h:38</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aa3e4e1578eeb887571cc9a8257a3232a_cgraph.svg" width="294" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aa3e4e1578eeb887571cc9a8257a3232a_icgraph.svg" width="279" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a17330aae0c21116a3dc7ff5eff621284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17330aae0c21116a3dc7ff5eff621284">&#9670;&nbsp;</a></span>set_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_flag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mailbox_8h.html#a84aa4e5fc418eb5f51c6af6e5a7a0388">AclFlags</a>&#160;</td>
          <td class="paramname"><em>aclflag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>flsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>append str to flags if we currently have permission according to aclflag </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Selected Imap <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aclflag</td><td>Permissions, see <a class="el" href="mailbox_8h.html#a84aa4e5fc418eb5f51c6af6e5a7a0388" title="ACL Rights - These show permission to... ">AclFlags</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>Does the email have the flag set? </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>Server flag name </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">flags</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> for server command </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flsize</td><td>Length of buffer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00176">176</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">rights</a> &amp; aclflag)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (flag &amp;&amp; <a class="code" href="imap_8c.html#ad998b83df59b588e3643ec0e1b41af3d">imap_has_flag</a>(&amp;<a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m)-&gt;flags, str))</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <a class="code" href="mutt_2string_8c.html#ae6900b5833f68692e265c5732b2a3556">mutt_str_cat</a>(flags, flsize, str);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="imap_8c_html_ad998b83df59b588e3643ec0e1b41af3d"><div class="ttname"><a href="imap_8c.html#ad998b83df59b588e3643ec0e1b41af3d">imap_has_flag</a></div><div class="ttdeci">bool imap_has_flag(struct ListHead *flag_list, const char *flag)</div><div class="ttdoc">Does the flag exist in the list. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00878">imap.c:878</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="structMailbox_html_a44766ec39ab823278479d0a8fe7b5f73"><div class="ttname"><a href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">Mailbox::rights</a></div><div class="ttdeci">AclFlags rights</div><div class="ttdoc">ACL bits, see AclFlags. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00121">mailbox.h:121</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ae6900b5833f68692e265c5732b2a3556"><div class="ttname"><a href="mutt_2string_8c.html#ae6900b5833f68692e265c5732b2a3556">mutt_str_cat</a></div><div class="ttdeci">char * mutt_str_cat(char *buf, size_t buflen, const char *s)</div><div class="ttdoc">Concatenate two strings. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00385">string.c:385</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a17330aae0c21116a3dc7ff5eff621284_cgraph.svg" width="264" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a17330aae0c21116a3dc7ff5eff621284_icgraph.svg" width="354" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aadd140a7c71090f380878212b96596fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadd140a7c71090f380878212b96596fc">&#9670;&nbsp;</a></span>make_msg_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int make_msg_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBuffer.html">Buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013">MessageType</a>&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>changed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a message set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Selected Imap <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> to store message set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>Flags to match, e.g. <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e" title="Deleted messages. ">MUTT_DELETED</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">changed</td><td>Matched messages that have been altered </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">invert</td><td>Flag matches should be inverted </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pos</td><td>Cursor used for multiple calls to this function </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Messages in the set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Headers must be in <a class="el" href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61" title="Sort by the order the messages appear in the mailbox. ">SORT_ORDER</a>. See <a class="el" href="imap_8c.html#a62497a1d8948e9172091840079ee3155" title="Prepare commands for all messages matching conditions. ">imap_exec_msgset()</a> for args. Pos is an opaque pointer a la strtok(). It should be 0 at first call. </dd></dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00197">197</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">int</span> count = 0;             <span class="comment">/* number of messages in message set */</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> setstart = 0; <span class="comment">/* start of current message range */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">int</span> n;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">bool</span> started = <span class="keyword">false</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (!adata || (adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a> != m))</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">for</span> (n = *pos; (n &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>) &amp;&amp; (<a class="code" href="buffer_8c.html#a6929443fb5515bb2ab749f84769d9cc7">mutt_buffer_len</a>(buf) &lt; <a class="code" href="imap_2private_8h.html#a029059dc0db17c187f8fdaee59c16e81">IMAP_MAX_CMDLEN</a>); n++)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[n];</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">bool</span> match = <span class="keyword">false</span>; <span class="comment">/* whether current message matches flag condition */</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">/* don&#39;t include pending expunged messages.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">     * TODO: can we unset active in cmd_parse_expunge() and</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">     * cmd_parse_vanished() instead of checking for index != INT_MAX. */</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> &amp;&amp; (e-&gt;<a class="code" href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">index</a> != INT_MAX))</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="keywordflow">switch</span> (flag)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e">MUTT_DELETED</a>:</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> != <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;<a class="code" href="structImapEmailData.html#ac0a8cf12be3069914cc0d4288d2124ed">deleted</a>)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            match = invert ^ e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58">MUTT_FLAG</a>:</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          if (e-&gt;<a class="code" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> != <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;<a class="code" href="structImapEmailData.html#addcfe8f2eb993fbd3de89041f090a090">flagged</a>)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            match = invert ^ e-&gt;<a class="code" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a7deaef4ebf08b54c1258f117b9ec6f50">MUTT_OLD</a>:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;          if (e-&gt;<a class="code" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> != <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;<a class="code" href="structImapEmailData.html#ac846056c32aa31d97ce6b9a2c7d2c299">old</a>)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            match = invert ^ e-&gt;<a class="code" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a>:</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;          if (e-&gt;<a class="code" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> != <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;<a class="code" href="structImapEmailData.html#adbcc9070eab67c69d1d2fcd48aa04021">read</a>)</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            match = invert ^ e-&gt;<a class="code" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a>:</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;          if (e-&gt;<a class="code" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> != <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;<a class="code" href="structImapEmailData.html#ae8e6d36ffbdfd91493fb6bf45ee6bfa5">replied</a>)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            match = invert ^ e-&gt;<a class="code" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a919d368fd60d2e1c19d331b78f415f3e">MUTT_TAG</a>:</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;          if (e-&gt;<a class="code" href="structEmail.html#af2c0a7e5c214aa9b1a42b7befaa1cffe">tagged</a>)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            match = <span class="keyword">true</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a31ab4665e994c9b34ba3aa3175f59a39">MUTT_TRASH</a>:</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;          <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> &amp;&amp; !e-&gt;<a class="code" href="structEmail.html#a1e108ee29a0c6571211290457ab60756">purge</a>)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            match = <span class="keyword">true</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (match &amp;&amp; (!<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> || e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>))</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      count++;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">if</span> (setstart == 0)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        setstart = <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;<a class="code" href="structImapEmailData.html#a64e9b3c8a5b91a1102fa09e26be67794">uid</a>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">if</span> (started)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <a class="code" href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a>(buf, <span class="stringliteral">&quot;,%u&quot;</span>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          <a class="code" href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a>(buf, <span class="stringliteral">&quot;%u&quot;</span>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          started = <span class="keyword">true</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="comment">/* tie up if the last message also matches */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n == (m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> - 1))</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a>(buf, <span class="stringliteral">&quot;:%u&quot;</span>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">/* End current set if message doesn&#39;t match or we&#39;ve reached the end</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">     * of the mailbox via inactive messages following the last match. */</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (setstart &amp;&amp; (e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> || (n == adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a>-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> - 1)))</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[n - 1])-&gt;<a class="code" href="structImapEmailData.html#a64e9b3c8a5b91a1102fa09e26be67794">uid</a> &gt; setstart)</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a>(buf, <span class="stringliteral">&quot;:%u&quot;</span>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[n - 1])-&gt;<a class="code" href="structImapEmailData.html#a64e9b3c8a5b91a1102fa09e26be67794">uid</a>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      setstart = 0;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  *pos = n;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e">MUTT_DELETED</a></div><div class="ttdoc">Deleted messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00097">mutt.h:97</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58">MUTT_FLAG</a></div><div class="ttdoc">Flagged messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00098">mutt.h:98</a></div></div>
<div class="ttc" id="structImapAccountData_html_ab08af69f675be131e1431c11bf6cf4f0"><div class="ttname"><a href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">ImapAccountData::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Current selected mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00076">adata.h:76</a></div></div>
<div class="ttc" id="structEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00048">email.h:48</a></div></div>
<div class="ttc" id="imap_2edata_8c_html_a849b9e42b71ec60e252b9fdb9c8edfbc"><div class="ttname"><a href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a></div><div class="ttdeci">struct ImapEmailData * imap_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8c_source.html#l00064">edata.c:64</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a></div><div class="ttdoc">Messages that have been replied to. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00091">mutt.h:91</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a029059dc0db17c187f8fdaee59c16e81"><div class="ttname"><a href="imap_2private_8h.html#a029059dc0db17c187f8fdaee59c16e81">IMAP_MAX_CMDLEN</a></div><div class="ttdeci">#define IMAP_MAX_CMDLEN</div><div class="ttdoc">Maximum length of command lines before they must be split (for lazy servers) </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00062">private.h:62</a></div></div>
<div class="ttc" id="structImapEmailData_html_addcfe8f2eb993fbd3de89041f090a090"><div class="ttname"><a href="structImapEmailData.html#addcfe8f2eb993fbd3de89041f090a090">ImapEmailData::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00039">edata.h:39</a></div></div>
<div class="ttc" id="structImapEmailData_html_ac0a8cf12be3069914cc0d4288d2124ed"><div class="ttname"><a href="structImapEmailData.html#ac0a8cf12be3069914cc0d4288d2124ed">ImapEmailData::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00038">edata.h:38</a></div></div>
<div class="ttc" id="structEmail_html_af2c0a7e5c214aa9b1a42b7befaa1cffe"><div class="ttname"><a href="structEmail.html#af2c0a7e5c214aa9b1a42b7befaa1cffe">Email::tagged</a></div><div class="ttdeci">bool tagged</div><div class="ttdoc">Email is tagged. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00044">email.h:44</a></div></div>
<div class="ttc" id="structEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="structEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="buffer_8c_html_ac151bca8b7bc6724124073e7b4a6a09f"><div class="ttname"><a href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a></div><div class="ttdeci">int mutt_buffer_add_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string appending a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00203">buffer.c:203</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a7deaef4ebf08b54c1258f117b9ec6f50"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a7deaef4ebf08b54c1258f117b9ec6f50">MUTT_OLD</a></div><div class="ttdoc">Old messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00090">mutt.h:90</a></div></div>
<div class="ttc" id="structEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00059">email.h:59</a></div></div>
<div class="ttc" id="structImapEmailData_html_a64e9b3c8a5b91a1102fa09e26be67794"><div class="ttname"><a href="structImapEmailData.html#a64e9b3c8a5b91a1102fa09e26be67794">ImapEmailData::uid</a></div><div class="ttdeci">unsigned int uid</div><div class="ttdoc">32-bit Message UID </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00044">edata.h:44</a></div></div>
<div class="ttc" id="buffer_8c_html_a6929443fb5515bb2ab749f84769d9cc7"><div class="ttname"><a href="buffer_8c.html#a6929443fb5515bb2ab749f84769d9cc7">mutt_buffer_len</a></div><div class="ttdeci">size_t mutt_buffer_len(const struct Buffer *buf)</div><div class="ttdoc">Calculate the length of a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00356">buffer.c:356</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a919d368fd60d2e1c19d331b78f415f3e"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a919d368fd60d2e1c19d331b78f415f3e">MUTT_TAG</a></div><div class="ttdoc">Tagged messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00099">mutt.h:99</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a></div><div class="ttdoc">Messages that have been read. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00092">mutt.h:92</a></div></div>
<div class="ttc" id="structImapEmailData_html_ae8e6d36ffbdfd91493fb6bf45ee6bfa5"><div class="ttname"><a href="structImapEmailData.html#ae8e6d36ffbdfd91493fb6bf45ee6bfa5">ImapEmailData::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00040">edata.h:40</a></div></div>
<div class="ttc" id="structImapEmailData_html_ac846056c32aa31d97ce6b9a2c7d2c299"><div class="ttname"><a href="structImapEmailData.html#ac846056c32aa31d97ce6b9a2c7d2c299">ImapEmailData::old</a></div><div class="ttdeci">bool old</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00037">edata.h:37</a></div></div>
<div class="ttc" id="structEmail_html_a1e108ee29a0c6571211290457ab60756"><div class="ttname"><a href="structEmail.html#a1e108ee29a0c6571211290457ab60756">Email::purge</a></div><div class="ttdeci">bool purge</div><div class="ttdoc">Skip trash folder when deleting. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00046">email.h:46</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="structEmail_html_a8e810bc67ce7fea04bfe8a3739093d78"><div class="ttname"><a href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">Email::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdoc">Marked important? </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00043">email.h:43</a></div></div>
<div class="ttc" id="structEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00045">email.h:45</a></div></div>
<div class="ttc" id="structEmail_html_aa26dd591f92e548bc3c56d0b7fdb3e8c"><div class="ttname"><a href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">Email::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdoc">Email has been replied to. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00054">email.h:54</a></div></div>
<div class="ttc" id="structEmail_html_ace0e20a11dbdc84ca9ea63497c05b603"><div class="ttname"><a href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">Email::index</a></div><div class="ttdeci">int index</div><div class="ttdoc">The absolute (unsorted) message number. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00086">email.h:86</a></div></div>
<div class="ttc" id="structImapEmailData_html_adbcc9070eab67c69d1d2fcd48aa04021"><div class="ttname"><a href="structImapEmailData.html#adbcc9070eab67c69d1d2fcd48aa04021">ImapEmailData::read</a></div><div class="ttdeci">bool read</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00036">edata.h:36</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a31ab4665e994c9b34ba3aa3175f59a39"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a31ab4665e994c9b34ba3aa3175f59a39">MUTT_TRASH</a></div><div class="ttdoc">Trashed messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00104">mutt.h:104</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aadd140a7c71090f380878212b96596fc_cgraph.svg" width="351" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aadd140a7c71090f380878212b96596fc_icgraph.svg" width="328" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="afb984879ac7f2ebaef80791fdf7e7adb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb984879ac7f2ebaef80791fdf7e7adb">&#9670;&nbsp;</a></span>compare_flags_for_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool compare_flags_for_copy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare local flags against the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Flags have changed </td></tr>
    <tr><td class="paramname">false</td><td>Flags match cached server flags</td></tr>
  </table>
  </dd>
</dl>
<p>The comparison of flags EXCLUDES the deleted flag. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00299">299</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapEmailData.html">ImapEmailData</a> *<a class="code" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = e-&gt;<a class="code" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> != edata-&gt;<a class="code" href="structImapEmailData.html#adbcc9070eab67c69d1d2fcd48aa04021">read</a>)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> != edata-&gt;<a class="code" href="structImapEmailData.html#ac846056c32aa31d97ce6b9a2c7d2c299">old</a>)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> != edata-&gt;<a class="code" href="structImapEmailData.html#addcfe8f2eb993fbd3de89041f090a090">flagged</a>)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> != edata-&gt;<a class="code" href="structImapEmailData.html#ae8e6d36ffbdfd91493fb6bf45ee6bfa5">replied</a>)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="ttc" id="structImapEmailData_html_addcfe8f2eb993fbd3de89041f090a090"><div class="ttname"><a href="structImapEmailData.html#addcfe8f2eb993fbd3de89041f090a090">ImapEmailData::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00039">edata.h:39</a></div></div>
<div class="ttc" id="structEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="structEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="structImapEmailData_html_ae8e6d36ffbdfd91493fb6bf45ee6bfa5"><div class="ttname"><a href="structImapEmailData.html#ae8e6d36ffbdfd91493fb6bf45ee6bfa5">ImapEmailData::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00040">edata.h:40</a></div></div>
<div class="ttc" id="structImapEmailData_html_ac846056c32aa31d97ce6b9a2c7d2c299"><div class="ttname"><a href="structImapEmailData.html#ac846056c32aa31d97ce6b9a2c7d2c299">ImapEmailData::old</a></div><div class="ttdeci">bool old</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00037">edata.h:37</a></div></div>
<div class="ttc" id="structEmail_html_a8e810bc67ce7fea04bfe8a3739093d78"><div class="ttname"><a href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">Email::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdoc">Marked important? </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00043">email.h:43</a></div></div>
<div class="ttc" id="structEmail_html_a50d8a8dde5fbf0b6dba934ff7e07fb6b"><div class="ttname"><a href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">Email::edata</a></div><div class="ttdeci">void * edata</div><div class="ttdoc">Driver-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00111">email.h:111</a></div></div>
<div class="ttc" id="structEmail_html_aa26dd591f92e548bc3c56d0b7fdb3e8c"><div class="ttname"><a href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">Email::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdoc">Email has been replied to. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00054">email.h:54</a></div></div>
<div class="ttc" id="structImapEmailData_html_adbcc9070eab67c69d1d2fcd48aa04021"><div class="ttname"><a href="structImapEmailData.html#adbcc9070eab67c69d1d2fcd48aa04021">ImapEmailData::read</a></div><div class="ttdeci">bool read</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00036">edata.h:36</a></div></div>
<div class="ttc" id="structImapEmailData_html"><div class="ttname"><a href="structImapEmailData.html">ImapEmailData</a></div><div class="ttdoc">IMAP-specific Email data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00033">edata.h:33</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_afb984879ac7f2ebaef80791fdf7e7adb_icgraph.svg" width="460" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6bb8bc94d6695c477624fcb4fe2822ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb8bc94d6695c477624fcb4fe2822ba">&#9670;&nbsp;</a></span>sync_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sync_helper </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mailbox_8h.html#a84aa4e5fc418eb5f51c6af6e5a7a0388">AclFlags</a>&#160;</td>
          <td class="paramname"><em>right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013">MessageType</a>&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sync flag changes to the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Selected Imap <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">right</td><td>ACL, see <a class="el" href="mailbox_8h.html#a84aa4e5fc418eb5f51c6af6e5a7a0388" title="ACL Rights - These show permission to... ">AclFlags</a> </td></tr>
    <tr><td class="paramname">flag</td><td><a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications. ">NeoMutt</a> flag, e.g. <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e" title="Deleted messages. ">MUTT_DELETED</a> </td></tr>
    <tr><td class="paramname">name</td><td>Name of server flag </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;=0</td><td>Success, number of messages </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00324">324</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordtype">char</span> buf[1024];</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> ((m-&gt;<a class="code" href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">rights</a> &amp; right) == 0)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">if</span> ((right == <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>) &amp;&amp; !<a class="code" href="imap_8c.html#ad998b83df59b588e3643ec0e1b41af3d">imap_has_flag</a>(&amp;<a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m)-&gt;flags, name))</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;+FLAGS.SILENT (%s)&quot;</span>, name);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  rc = <a class="code" href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a>(m, <span class="stringliteral">&quot;UID STORE&quot;</span>, buf, flag, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  count += rc;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  buf[0] = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  rc = <a class="code" href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a>(m, <span class="stringliteral">&quot;UID STORE&quot;</span>, buf, flag, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  count += rc;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div><div class="ttc" id="imap_8c_html_ad998b83df59b588e3643ec0e1b41af3d"><div class="ttname"><a href="imap_8c.html#ad998b83df59b588e3643ec0e1b41af3d">imap_has_flag</a></div><div class="ttdeci">bool imap_has_flag(struct ListHead *flag_list, const char *flag)</div><div class="ttdoc">Does the flag exist in the list. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00878">imap.c:878</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="mailbox_8h_html_ac495d1273b7f2399403a2932b6ff2fd3"><div class="ttname"><a href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a></div><div class="ttdeci">#define MUTT_ACL_WRITE</div><div class="ttdoc">Write to a message (for flagging or linking threads) </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00074">mailbox.h:74</a></div></div>
<div class="ttc" id="imap_8c_html_a62497a1d8948e9172091840079ee3155"><div class="ttname"><a href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a></div><div class="ttdeci">int imap_exec_msgset(struct Mailbox *m, const char *pre, const char *post, enum MessageType flag, bool changed, bool invert)</div><div class="ttdoc">Prepare commands for all messages matching conditions. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00927">imap.c:927</a></div></div>
<div class="ttc" id="structMailbox_html_a44766ec39ab823278479d0a8fe7b5f73"><div class="ttname"><a href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">Mailbox::rights</a></div><div class="ttdeci">AclFlags rights</div><div class="ttdoc">ACL bits, see AclFlags. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00121">mailbox.h:121</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a6bb8bc94d6695c477624fcb4fe2822ba_cgraph.svg" width="307" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a6bb8bc94d6695c477624fcb4fe2822ba_icgraph.svg" width="311" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4dae2198b19fe4fbf2bfecb671c72f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dae2198b19fe4fbf2bfecb671c72f73">&#9670;&nbsp;</a></span>longest_common_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t longest_common_prefix </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>dlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find longest prefix common to two strings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>Destination buffer </td></tr>
    <tr><td class="paramname">src</td><td>Source buffer </td></tr>
    <tr><td class="paramname">start</td><td>Starting offset into string </td></tr>
    <tr><td class="paramname">dlen</td><td>Destination buffer length </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Length of the common string</td></tr>
  </table>
  </dd>
</dl>
<p>Trim dest to the length of the longest prefix it shares with src. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00365">365</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordtype">size_t</span> pos = start;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">while</span> ((pos &lt; dlen) &amp;&amp; dest[pos] &amp;&amp; (dest[pos] == src[pos]))</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    pos++;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  dest[pos] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div></div><!-- fragment --><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a4dae2198b19fe4fbf2bfecb671c72f73_icgraph.svg" width="534" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac58d293937015b8560ee115503d199ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac58d293937015b8560ee115503d199ff">&#9670;&nbsp;</a></span>complete_hosts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int complete_hosts </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Look for completion matches for mailboxes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Partial mailbox name to complete </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>look for IMAP URLs to complete from defined mailboxes. Could be extended to complete over open connections and account/folder hooks too. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00386">386</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// struct Connection *conn = NULL;</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordtype">int</span> rc = -1;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordtype">size_t</span> matchlen;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  matchlen = <a class="code" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(buf);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keyword">struct </span>MailboxList ml = <a class="code" href="queue_8h.html#a3d41ce2c3f1dd21c0d4051d13204c321">STAILQ_HEAD_INITIALIZER</a>(ml);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="neomutt_8c.html#a74862fb7702c895aaacaebb097af8bb2">neomutt_mailboxlist_get_all</a>(&amp;ml, <a class="code" href="structNeoMutt.html">NeoMutt</a>, <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dab19ce39e3d79c72a2988457640553489">MUTT_MAILBOX_ANY</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMailboxNode.html">MailboxNode</a> *np = NULL;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(np, &amp;ml, entries)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a>(<a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(np-&gt;<a class="code" href="structMailboxNode.html#a01fd253428c6c8c3112711af2eae67f0">mailbox</a>), buf))</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (rc)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(buf, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(np-&gt;<a class="code" href="structMailboxNode.html#a01fd253428c6c8c3112711af2eae67f0">mailbox</a>), buflen);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      rc = 0;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <a class="code" href="imap_8c.html#a4dae2198b19fe4fbf2bfecb671c72f73">longest_common_prefix</a>(buf, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(np-&gt;<a class="code" href="structMailboxNode.html#a01fd253428c6c8c3112711af2eae67f0">mailbox</a>), matchlen, buflen);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="neomutt_8c.html#a124116674adb30d3bceef08eeaad6905">neomutt_mailboxlist_clear</a>(&amp;ml);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a>(conn, mutt_socket_head(), entries)</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keyword">struct </span><a class="code" href="structUrl.html">Url</a> url = { 0 };</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordtype">char</span> urlstr[1024];</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (conn-&gt;account.type != <a class="code" href="mutt__account_8h.html#a406c8474bdbb9cc2a25882558a367c2fa92699834da24bb3319dfda69cd810669">MUTT_ACCT_TYPE_IMAP</a>)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="mutt__account_8c.html#a7b58d7c236d1bea3a516cf682648bf3e">mutt_account_tourl</a>(&amp;conn-&gt;account, &amp;url);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">/* FIXME: how to handle multiple users on the same host? */</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    url.<a class="code" href="structUrl.html#a18db9f379a95b00dc4f4ae7e4ac8698b">user</a> = NULL;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    url.<a class="code" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a> = NULL;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="url_8c.html#a4cdc82c89b3fa52b384a16ef0e971d68">url_tostring</a>(&amp;url, urlstr, <span class="keyword">sizeof</span>(urlstr), <a class="code" href="url_8h.html#a04ddf99a809afcc240e4b3d517c98d20">U_NO_FLAGS</a>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(buf, urlstr, matchlen))</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> (rc)</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <a class="code" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(buf, urlstr, buflen);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        rc = 0;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="imap_8c.html#a4dae2198b19fe4fbf2bfecb671c72f73">longest_common_prefix</a>(buf, urlstr, matchlen, buflen);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div><div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="queue_8h_html_a16e5fc168e7f3494d4b1df54447d871e"><div class="ttname"><a href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a></div><div class="ttdeci">#define TAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00725">queue.h:725</a></div></div>
<div class="ttc" id="structUrl_html"><div class="ttname"><a href="structUrl.html">Url</a></div><div class="ttdoc">A parsed URL proto://user:password@host:port/path?a=1&amp;b=2 </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00068">url.h:68</a></div></div>
<div class="ttc" id="neomutt_8c_html_a124116674adb30d3bceef08eeaad6905"><div class="ttname"><a href="neomutt_8c.html#a124116674adb30d3bceef08eeaad6905">neomutt_mailboxlist_clear</a></div><div class="ttdeci">void neomutt_mailboxlist_clear(struct MailboxList *ml)</div><div class="ttdoc">Free a Mailbox List. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8c_source.html#l00141">neomutt.c:141</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921dab19ce39e3d79c72a2988457640553489"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921dab19ce39e3d79c72a2988457640553489">MUTT_MAILBOX_ANY</a></div><div class="ttdoc">Match any Mailbox type. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00045">mailbox.h:45</a></div></div>
<div class="ttc" id="neomutt_8c_html_a74862fb7702c895aaacaebb097af8bb2"><div class="ttname"><a href="neomutt_8c.html#a74862fb7702c895aaacaebb097af8bb2">neomutt_mailboxlist_get_all</a></div><div class="ttdeci">size_t neomutt_mailboxlist_get_all(struct MailboxList *head, struct NeoMutt *n, enum MailboxType type)</div><div class="ttdoc">Get a List of all Mailboxes. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8c_source.html#l00164">neomutt.c:164</a></div></div>
<div class="ttc" id="url_8h_html_a04ddf99a809afcc240e4b3d517c98d20"><div class="ttname"><a href="url_8h.html#a04ddf99a809afcc240e4b3d517c98d20">U_NO_FLAGS</a></div><div class="ttdeci">#define U_NO_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00049">url.h:49</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="mutt__account_8c_html_a7b58d7c236d1bea3a516cf682648bf3e"><div class="ttname"><a href="mutt__account_8c.html#a7b58d7c236d1bea3a516cf682648bf3e">mutt_account_tourl</a></div><div class="ttdeci">void mutt_account_tourl(struct ConnAccount *cac, struct Url *url)</div><div class="ttdoc">Fill URL with info from account. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__account_8c_source.html#l00079">mutt_account.c:79</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a9bf968304f4f9b49e24215cb2e28d22d"><div class="ttname"><a href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a></div><div class="ttdeci">size_t mutt_str_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00160">string.c:160</a></div></div>
<div class="ttc" id="structUrl_html_a18db9f379a95b00dc4f4ae7e4ac8698b"><div class="ttname"><a href="structUrl.html#a18db9f379a95b00dc4f4ae7e4ac8698b">Url::user</a></div><div class="ttdeci">char * user</div><div class="ttdoc">Username. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00071">url.h:71</a></div></div>
<div class="ttc" id="url_8c_html_a4cdc82c89b3fa52b384a16ef0e971d68"><div class="ttname"><a href="url_8c.html#a4cdc82c89b3fa52b384a16ef0e971d68">url_tostring</a></div><div class="ttdeci">int url_tostring(struct Url *url, char *dest, size_t len, uint8_t flags)</div><div class="ttdoc">Output the URL string for a given Url object. </div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00418">url.c:418</a></div></div>
<div class="ttc" id="queue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00352">queue.h:352</a></div></div>
<div class="ttc" id="mutt__account_8h_html_a406c8474bdbb9cc2a25882558a367c2fa92699834da24bb3319dfda69cd810669"><div class="ttname"><a href="mutt__account_8h.html#a406c8474bdbb9cc2a25882558a367c2fa92699834da24bb3319dfda69cd810669">MUTT_ACCT_TYPE_IMAP</a></div><div class="ttdoc">Imap Account. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__account_8h_source.html#l00037">mutt_account.h:37</a></div></div>
<div class="ttc" id="structUrl_html_ad4b772878b40b204a7e91520b0bcbed4"><div class="ttname"><a href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">Url::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00075">url.h:75</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_acca6786b903b22a5924219f9db96e10d"><div class="ttname"><a href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a></div><div class="ttdeci">size_t mutt_str_len(const char *a)</div><div class="ttdoc">Calculate the length of a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00664">string.c:664</a></div></div>
<div class="ttc" id="imap_8c_html_a4dae2198b19fe4fbf2bfecb671c72f73"><div class="ttname"><a href="imap_8c.html#a4dae2198b19fe4fbf2bfecb671c72f73">longest_common_prefix</a></div><div class="ttdeci">static size_t longest_common_prefix(char *dest, const char *src, size_t start, size_t dlen)</div><div class="ttdoc">Find longest prefix common to two strings. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00365">imap.c:365</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination) </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00749">string.c:749</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a6f574867aa9db4d434adbc8af1f5f7e7"><div class="ttname"><a href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a></div><div class="ttdeci">bool mutt_strn_equal(const char *a, const char *b, size_t num)</div><div class="ttdoc">Check for equality of two strings (to a maximum), safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00593">string.c:593</a></div></div>
<div class="ttc" id="queue_8h_html_a3d41ce2c3f1dd21c0d4051d13204c321"><div class="ttname"><a href="queue_8h.html#a3d41ce2c3f1dd21c0d4051d13204c321">STAILQ_HEAD_INITIALIZER</a></div><div class="ttdeci">#define STAILQ_HEAD_INITIALIZER(head)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00324">queue.h:324</a></div></div>
<div class="ttc" id="structMailboxNode_html"><div class="ttname"><a href="structMailboxNode.html">MailboxNode</a></div><div class="ttdoc">List of Mailboxes. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00156">mailbox.h:156</a></div></div>
<div class="ttc" id="structMailboxNode_html_a01fd253428c6c8c3112711af2eae67f0"><div class="ttname"><a href="structMailboxNode.html#a01fd253428c6c8c3112711af2eae67f0">MailboxNode::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Mailbox in the list. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00158">mailbox.h:158</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ac58d293937015b8560ee115503d199ff_cgraph.svg" width="526" height="526"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ac58d293937015b8560ee115503d199ff_icgraph.svg" width="307" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aee0bf2d345124a22054cbf217b6fb5f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee0bf2d345124a22054cbf217b6fb5f0">&#9670;&nbsp;</a></span>imap_create_mailbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_create_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mailbox</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
    <tr><td class="paramname">mailbox</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to create </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00448">448</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;{</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordtype">char</span> buf[2048], mbox[1024];</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="imap_2private_8h.html#ac9c2cdd52d28f7f494f9ddc6e62c469b">imap_munge_mbox_name</a>(adata-&gt;<a class="code" href="structImapAccountData.html#a9ce6191c36074e9613d78e22851119d0">unicode</a>, mbox, <span class="keyword">sizeof</span>(mbox), mailbox);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;CREATE %s&quot;</span>, mbox);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, buf, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;CREATE failed: %s&quot;</span>), <a class="code" href="command_8c.html#a5c81a0893e9070766af57c6cb0af0e80">imap_cmd_trailer</a>(adata));</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div><div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac9c2cdd52d28f7f494f9ddc6e62c469b"><div class="ttname"><a href="imap_2private_8h.html#ac9c2cdd52d28f7f494f9ddc6e62c469b">imap_munge_mbox_name</a></div><div class="ttdeci">void imap_munge_mbox_name(bool unicode, char *dest, size_t dlen, const char *src)</div><div class="ttdoc">Quote awkward characters in a mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00914">util.c:914</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="command_8c_html_a5c81a0893e9070766af57c6cb0af0e80"><div class="ttname"><a href="command_8c.html#a5c81a0893e9070766af57c6cb0af0e80">imap_cmd_trailer</a></div><div class="ttdeci">const char * imap_cmd_trailer(struct ImapAccountData *adata)</div><div class="ttdoc">Extra information after tagged command response if any. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01213">command.c:1213</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="structImapAccountData_html_a9ce6191c36074e9613d78e22851119d0"><div class="ttname"><a href="structImapAccountData.html#a9ce6191c36074e9613d78e22851119d0">ImapAccountData::unicode</a></div><div class="ttdeci">bool unicode</div><div class="ttdoc">If true, we can send UTF-8, and the server will use UTF8 rather than mUTF7. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00062">adata.h:62</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aee0bf2d345124a22054cbf217b6fb5f0_cgraph.svg" width="416" height="163"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aee0bf2d345124a22054cbf217b6fb5f0_icgraph.svg" width="415" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac9f5086daa8615bc5f01884b51053392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f5086daa8615bc5f01884b51053392">&#9670;&nbsp;</a></span>imap_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_access </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check permissions on an IMAP mailbox with a new connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>TODO: ACL checks. Right now we assume if it exists we can mess with it. TODO: This method should take a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> as parameter to be able to reuse the existing connection. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00474">474</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="imap_8c.html#a0d5f24d9ba8d3ef9e95134cae1198408">imap_path_status</a>(<a class="code" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a>, <span class="keyword">false</span>) &gt;= 0)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div><div class="ttc" id="imap_8c_html_a0d5f24d9ba8d3ef9e95134cae1198408"><div class="ttname"><a href="imap_8c.html#a0d5f24d9ba8d3ef9e95134cae1198408">imap_path_status</a></div><div class="ttdeci">int imap_path_status(const char *path, bool queue)</div><div class="ttdoc">Refresh the number of total and new messages. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01235">imap.c:1235</a></div></div>
<div class="ttc" id="structUrl_html_ad4b772878b40b204a7e91520b0bcbed4"><div class="ttname"><a href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">Url::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00075">url.h:75</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ac9f5086daa8615bc5f01884b51053392_cgraph.svg" width="304" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ac9f5086daa8615bc5f01884b51053392_icgraph.svg" width="260" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9f4b46b80a1dd0e00cc956c06d377464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f4b46b80a1dd0e00cc956c06d377464">&#9670;&nbsp;</a></span>imap_rename_mailbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_rename_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rename a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
    <tr><td class="paramname">oldname</td><td>Existing mailbox </td></tr>
    <tr><td class="paramname">newname</td><td>New name for mailbox </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00489">489</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordtype">char</span> oldmbox[1024];</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordtype">char</span> newmbox[1024];</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordtype">int</span> rc = 0;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="imap_2private_8h.html#ac9c2cdd52d28f7f494f9ddc6e62c469b">imap_munge_mbox_name</a>(adata-&gt;<a class="code" href="structImapAccountData.html#a9ce6191c36074e9613d78e22851119d0">unicode</a>, oldmbox, <span class="keyword">sizeof</span>(oldmbox), oldname);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="imap_2private_8h.html#ac9c2cdd52d28f7f494f9ddc6e62c469b">imap_munge_mbox_name</a>(adata-&gt;<a class="code" href="structImapAccountData.html#a9ce6191c36074e9613d78e22851119d0">unicode</a>, newmbox, <span class="keyword">sizeof</span>(newmbox), newname);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> *buf = <a class="code" href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a>();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="buffer_8c.html#ad057ee239ae5bcfd72cab3749036ab02">mutt_buffer_printf</a>(buf, <span class="stringliteral">&quot;RENAME %s %s&quot;</span>, oldmbox, newmbox);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <a class="code" href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a>(buf), <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    rc = -1;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a>(&amp;buf);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;}</div><div class="ttc" id="pool_8c_html_a2129d5ea0085753afdd37cf62161845d"><div class="ttname"><a href="pool_8c.html#a2129d5ea0085753afdd37cf62161845d">mutt_buffer_pool_get</a></div><div class="ttdeci">struct Buffer * mutt_buffer_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00101">pool.c:101</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac9c2cdd52d28f7f494f9ddc6e62c469b"><div class="ttname"><a href="imap_2private_8h.html#ac9c2cdd52d28f7f494f9ddc6e62c469b">imap_munge_mbox_name</a></div><div class="ttdeci">void imap_munge_mbox_name(bool unicode, char *dest, size_t dlen, const char *src)</div><div class="ttdoc">Quote awkward characters in a mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00914">util.c:914</a></div></div>
<div class="ttc" id="pool_8c_html_a08b48e2ac8849341888ee7429cc5093c"><div class="ttname"><a href="pool_8c.html#a08b48e2ac8849341888ee7429cc5093c">mutt_buffer_pool_release</a></div><div class="ttdeci">void mutt_buffer_pool_release(struct Buffer **pbuf)</div><div class="ttdoc">Free a Buffer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="pool_8c_source.html#l00112">pool.c:112</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="buffer_8c_html_ad057ee239ae5bcfd72cab3749036ab02"><div class="ttname"><a href="buffer_8c.html#ad057ee239ae5bcfd72cab3749036ab02">mutt_buffer_printf</a></div><div class="ttdeci">int mutt_buffer_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string overwriting a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00160">buffer.c:160</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="buffer_8h_html_a4aca040fb75bc1dfc086cbfbf14ac8cd"><div class="ttname"><a href="buffer_8h.html#a4aca040fb75bc1dfc086cbfbf14ac8cd">mutt_buffer_string</a></div><div class="ttdeci">static const char * mutt_buffer_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00077">buffer.h:77</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="structImapAccountData_html_a9ce6191c36074e9613d78e22851119d0"><div class="ttname"><a href="structImapAccountData.html#a9ce6191c36074e9613d78e22851119d0">ImapAccountData::unicode</a></div><div class="ttdeci">bool unicode</div><div class="ttdoc">If true, we can send UTF-8, and the server will use UTF8 rather than mUTF7. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00062">adata.h:62</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a9f4b46b80a1dd0e00cc956c06d377464_cgraph.svg" width="426" height="315"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a9f4b46b80a1dd0e00cc956c06d377464_icgraph.svg" width="403" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8f78f88f04284f923f839a64ec680c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f78f88f04284f923f839a64ec680c35">&#9670;&nbsp;</a></span>imap_delete_mailbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_delete_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">path</td><td>name of the mailbox to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00516">516</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordtype">char</span> buf[<a class="code" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a> + 7];</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordtype">char</span> mbox[<a class="code" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keyword">struct </span><a class="code" href="structUrl.html">Url</a> *url = <a class="code" href="url_8c.html#a10d35f5553c8e443c38257b69ca91075">url_parse</a>(<a class="code" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="imap_2private_8h.html#ac9c2cdd52d28f7f494f9ddc6e62c469b">imap_munge_mbox_name</a>(adata-&gt;<a class="code" href="structImapAccountData.html#a9ce6191c36074e9613d78e22851119d0">unicode</a>, mbox, <span class="keyword">sizeof</span>(mbox), url-&gt;<a class="code" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="url_8c.html#a7b05825b8bb8f87657713fe5bc6edfaa">url_free</a>(&amp;url);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;DELETE %s&quot;</span>, mbox);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(m-&gt;<a class="code" href="structMailbox.html#ab9a4528fcd39e61bdefd4dcfdbc6252f">account</a>-&gt;<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a>, buf, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div><div class="ttc" id="structUrl_html"><div class="ttname"><a href="structUrl.html">Url</a></div><div class="ttdoc">A parsed URL proto://user:password@host:port/path?a=1&amp;b=2 </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00068">url.h:68</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac9c2cdd52d28f7f494f9ddc6e62c469b"><div class="ttname"><a href="imap_2private_8h.html#ac9c2cdd52d28f7f494f9ddc6e62c469b">imap_munge_mbox_name</a></div><div class="ttdeci">void imap_munge_mbox_name(bool unicode, char *dest, size_t dlen, const char *src)</div><div class="ttdoc">Quote awkward characters in a mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00914">util.c:914</a></div></div>
<div class="ttc" id="url_8c_html_a7b05825b8bb8f87657713fe5bc6edfaa"><div class="ttname"><a href="url_8c.html#a7b05825b8bb8f87657713fe5bc6edfaa">url_free</a></div><div class="ttdeci">void url_free(struct Url **ptr)</div><div class="ttdoc">Free the contents of a URL. </div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00123">url.c:123</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="mutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00040">mutt.h:40</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="structUrl_html_ad4b772878b40b204a7e91520b0bcbed4"><div class="ttname"><a href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">Url::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path. </div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00075">url.h:75</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="structMailbox_html_ab9a4528fcd39e61bdefd4dcfdbc6252f"><div class="ttname"><a href="structMailbox.html#ab9a4528fcd39e61bdefd4dcfdbc6252f">Mailbox::account</a></div><div class="ttdeci">struct Account * account</div><div class="ttdoc">Account that owns this Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00131">mailbox.h:131</a></div></div>
<div class="ttc" id="structImapAccountData_html_a9ce6191c36074e9613d78e22851119d0"><div class="ttname"><a href="structImapAccountData.html#a9ce6191c36074e9613d78e22851119d0">ImapAccountData::unicode</a></div><div class="ttdeci">bool unicode</div><div class="ttdoc">If true, we can send UTF-8, and the server will use UTF8 rather than mUTF7. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00062">adata.h:62</a></div></div>
<div class="ttc" id="url_8c_html_a10d35f5553c8e443c38257b69ca91075"><div class="ttname"><a href="url_8c.html#a10d35f5553c8e443c38257b69ca91075">url_parse</a></div><div class="ttdeci">struct Url * url_parse(const char *src)</div><div class="ttdoc">Fill in Url. </div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00234">url.c:234</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a8f78f88f04284f923f839a64ec680c35_cgraph.svg" width="536" height="264"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a8f78f88f04284f923f839a64ec680c35_icgraph.svg" width="392" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0b142599cd1c529a1ffc0bacc6a064f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b142599cd1c529a1ffc0bacc6a064f7">&#9670;&nbsp;</a></span>imap_logout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void imap_logout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gracefully log out of server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00536">536</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">/* we set status here to let imap_handle_untagged know we _expect_ to</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">   * receive a bye response (so it doesn&#39;t freak out and close the conn) */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> == <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a>)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#ac6488a600297eee1e5d203872e93f9d2">status</a> = <a class="code" href="imap_2private_8h.html#ab13bb304e2a8a52e6f1c364a12638d40a168e41b1bb469a4ea1f25df11f7bfd0d">IMAP_BYE</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="command_8c.html#a07786a21982bd266c8faca5423b7f2cf">imap_cmd_start</a>(adata, <span class="stringliteral">&quot;LOGOUT&quot;</span>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_imap_poll_timeout =</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_poll_timeout&quot;</span>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">if</span> ((c_imap_poll_timeout &lt;= 0) ||</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      (<a class="code" href="socket_8c.html#a4d13f6965c151f2b7e0b3c20bd0def21">mutt_socket_poll</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>, c_imap_poll_timeout) != 0))</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a>(adata) == <a class="code" href="imap_2private_8h.html#add0869283ae9186ac31a7169b246cc6b">IMAP_RES_CONTINUE</a>)</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      ; <span class="comment">// do nothing</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;}</div><div class="ttc" id="command_8c_html_a8b9d7c9333e35981d94074e9dcc28e6f"><div class="ttname"><a href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a></div><div class="ttdeci">int imap_cmd_step(struct ImapAccountData *adata)</div><div class="ttdoc">Reads server responses from an IMAP command. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01079">command.c:1079</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ab13bb304e2a8a52e6f1c364a12638d40a168e41b1bb469a4ea1f25df11f7bfd0d"><div class="ttname"><a href="imap_2private_8h.html#ab13bb304e2a8a52e6f1c364a12638d40a168e41b1bb469a4ea1f25df11f7bfd0d">IMAP_BYE</a></div><div class="ttdoc">Logged out from server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00098">private.h:98</a></div></div>
<div class="ttc" id="structImapAccountData_html_aafe97c07683cbc20007c8dd315b2d19e"><div class="ttname"><a href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">ImapAccountData::state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">ImapState, e.g. IMAP_AUTHENTICATED. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00044">adata.h:44</a></div></div>
<div class="ttc" id="command_8c_html_a07786a21982bd266c8faca5423b7f2cf"><div class="ttname"><a href="command_8c.html#a07786a21982bd266c8faca5423b7f2cf">imap_cmd_start</a></div><div class="ttdeci">int imap_cmd_start(struct ImapAccountData *adata, const char *cmdstr)</div><div class="ttdoc">Given an IMAP command, send it to the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01065">command.c:1065</a></div></div>
<div class="ttc" id="helpers_8c_html_a96039a9f8d37daad993ae7b490510339"><div class="ttname"><a href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a></div><div class="ttdeci">short cs_subset_number(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a number config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00169">helpers.c:169</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="socket_8c_html_a4d13f6965c151f2b7e0b3c20bd0def21"><div class="ttname"><a href="socket_8c.html#a4d13f6965c151f2b7e0b3c20bd0def21">mutt_socket_poll</a></div><div class="ttdeci">int mutt_socket_poll(struct Connection *conn, time_t wait_secs)</div><div class="ttdoc">Checks whether reads would block. </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00192">socket.c:192</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a></div><div class="ttdoc">Disconnected from server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00107">private.h:107</a></div></div>
<div class="ttc" id="structImapAccountData_html_ac6488a600297eee1e5d203872e93f9d2"><div class="ttname"><a href="structImapAccountData.html#ac6488a600297eee1e5d203872e93f9d2">ImapAccountData::status</a></div><div class="ttdeci">unsigned char status</div><div class="ttdoc">ImapFlags, e.g. IMAP_FATAL. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00045">adata.h:45</a></div></div>
<div class="ttc" id="socket_8c_html_a432eed609a221c68f457302d6e40c383"><div class="ttname"><a href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a></div><div class="ttdeci">int mutt_socket_close(struct Connection *conn)</div><div class="ttdoc">Close a socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00097">socket.c:97</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="imap_2private_8h_html_add0869283ae9186ac31a7169b246cc6b"><div class="ttname"><a href="imap_2private_8h.html#add0869283ae9186ac31a7169b246cc6b">IMAP_RES_CONTINUE</a></div><div class="ttdeci">#define IMAP_RES_CONTINUE</div><div class="ttdoc">* ... </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00057">private.h:57</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a0b142599cd1c529a1ffc0bacc6a064f7_cgraph.svg" width="306" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a0b142599cd1c529a1ffc0bacc6a064f7_icgraph.svg" width="288" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ace40ffc72b9f8ed5f315ea2825472773"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace40ffc72b9f8ed5f315ea2825472773">&#9670;&nbsp;</a></span>imap_logout_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void imap_logout_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>close all open connections </p>
<p>Quick and dirty until we can make sure we've got all the context we need. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00564">564</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;{</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keyword">struct </span><a class="code" href="structAccount.html">Account</a> *np = NULL;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a>(np, &amp;<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#a6d954f6370463364dbd5b78db333fbfd">accounts</a>, entries)</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">if</span> (np-&gt;<a class="code" href="structAccount.html#a1aa62f517fae4248e51123f38fd3ebba">type</a> != <a class="code" href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b">MUTT_IMAP</a>)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = np-&gt;<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (!adata)</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keyword">struct </span><a class="code" href="structConnection.html">Connection</a> *conn = adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (!conn || (conn-&gt;<a class="code" href="structConnection.html#af805fad417c8fa7c5079ef741d8233e2">fd</a> &lt; 0))</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Closing connection to %s...&quot;</span>), conn-&gt;<a class="code" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>.<a class="code" href="structConnAccount.html#aa440323ef3111e1faaf33f6a57103a3a">host</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="imap_8c.html#a0b142599cd1c529a1ffc0bacc6a064f7">imap_logout</a>(np-&gt;<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div><div class="ttc" id="structConnection_html_ac3c39549b6611c8eaed2a25573b5c432"><div class="ttname"><a href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">Connection::account</a></div><div class="ttdeci">struct ConnAccount account</div><div class="ttdoc">Account details: username, password, etc. </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00036">connection.h:36</a></div></div>
<div class="ttc" id="queue_8h_html_a16e5fc168e7f3494d4b1df54447d871e"><div class="ttname"><a href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a></div><div class="ttdeci">#define TAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00725">queue.h:725</a></div></div>
<div class="ttc" id="structNeoMutt_html_a6d954f6370463364dbd5b78db333fbfd"><div class="ttname"><a href="structNeoMutt.html#a6d954f6370463364dbd5b78db333fbfd">NeoMutt::accounts</a></div><div class="ttdeci">struct AccountList accounts</div><div class="ttdoc">List of all Accounts. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00040">neomutt.h:40</a></div></div>
<div class="ttc" id="structAccount_html"><div class="ttname"><a href="structAccount.html">Account</a></div><div class="ttdoc">A group of associated Mailboxes. </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00036">account.h:36</a></div></div>
<div class="ttc" id="structConnection_html"><div class="ttname"><a href="structConnection.html">Connection</a></div><div class="ttdoc">An open network connection (socket) </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00034">connection.h:34</a></div></div>
<div class="ttc" id="imap_8c_html_a0b142599cd1c529a1ffc0bacc6a064f7"><div class="ttname"><a href="imap_8c.html#a0b142599cd1c529a1ffc0bacc6a064f7">imap_logout</a></div><div class="ttdeci">static void imap_logout(struct ImapAccountData *adata)</div><div class="ttdoc">Gracefully log out of server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00536">imap.c:536</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structAccount_html_a1aa62f517fae4248e51123f38fd3ebba"><div class="ttname"><a href="structAccount.html#a1aa62f517fae4248e51123f38fd3ebba">Account::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Type of Mailboxes this Account contains. </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00038">account.h:38</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structConnAccount_html_aa440323ef3111e1faaf33f6a57103a3a"><div class="ttname"><a href="structConnAccount.html#aa440323ef3111e1faaf33f6a57103a3a">ConnAccount::host</a></div><div class="ttdeci">char host[128]</div><div class="ttdoc">Server to login to. </div><div class="ttdef"><b>Definition:</b> <a href="connaccount_8h_source.html#l00053">connaccount.h:53</a></div></div>
<div class="ttc" id="mutt__logging_8c_html_af068b3f524a31fad293b2fb61dfc4534"><div class="ttname"><a href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a></div><div class="ttdeci">void mutt_clear_error(void)</div><div class="ttdoc">Clear the message line (bottom line of screen) </div><div class="ttdef"><b>Definition:</b> <a href="mutt__logging_8c_source.html#l00112">mutt_logging.c:112</a></div></div>
<div class="ttc" id="structConnection_html_af805fad417c8fa7c5079ef741d8233e2"><div class="ttname"><a href="structConnection.html#af805fad417c8fa7c5079ef741d8233e2">Connection::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">Socket file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00040">connection.h:40</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="mailbox_8h_html_af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b"><div class="ttname"><a href="mailbox_8h.html#af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b">MUTT_IMAP</a></div><div class="ttdoc">&amp;#39;IMAP&amp;#39; Mailbox type </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00053">mailbox.h:53</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ace40ffc72b9f8ed5f315ea2825472773_cgraph.svg" width="316" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ace40ffc72b9f8ed5f315ea2825472773_icgraph.svg" width="375" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5adc6a50d981b74f9210b202ca117861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5adc6a50d981b74f9210b202ca117861">&#9670;&nbsp;</a></span>imap_read_literal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_read_literal </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structProgress.html">Progress</a> *&#160;</td>
          <td class="paramname"><em>pbar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read bytes bytes from server into file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>File handle for email file </td></tr>
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes to read </td></tr>
    <tr><td class="paramname">pbar</td><td><a class="el" href="structProgress.html" title="A Progress Bar. ">Progress</a> bar </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>Not explicitly buffered, relies on FILE buffering.</p>
<dl class="section note"><dt>Note</dt><dd>Strips <code>\r</code> from <code>\r\n</code>. Apparently even literals use <code>\r\n</code>-terminated strings ?! </dd></dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00600">600</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;{</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordtype">char</span> c;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordtype">bool</span> r = <span class="keyword">false</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> buf = { 0 }; <span class="comment">// Do not allocate, maybe it won&#39;t be used</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_debug_level = <a class="code" href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;debug_level&quot;</span>);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">if</span> (c_debug_level &gt;= <a class="code" href="imap_2private_8h.html#a4c6b82e52750d9be1ea91067a0281f72">IMAP_LOG_LTRL</a>)</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="buffer_8c.html#a2837f43a0e59e6cf2f83f23c81e53498">mutt_buffer_alloc</a>(&amp;buf, bytes + 10);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;reading %ld bytes\n&quot;</span>, bytes);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> pos = 0; pos &lt; bytes; pos++)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="socket_8c.html#a8c8e2c0db6bc26a505c9a5d8c46c139e">mutt_socket_readchar</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>, &amp;c) != 1)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;error during read, %ld bytes read\n&quot;</span>, pos);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      adata-&gt;<a class="code" href="structImapAccountData.html#ac6488a600297eee1e5d203872e93f9d2">status</a> = <a class="code" href="imap_2private_8h.html#ab13bb304e2a8a52e6f1c364a12638d40a72f6a764d727fde8ab0d10a618915abe">IMAP_FATAL</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="buffer_8c.html#a59b13bca38b1b314e2bc5ad142d2df49">mutt_buffer_dealloc</a>(&amp;buf);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (r &amp;&amp; (c != <span class="charliteral">&#39;\n&#39;</span>))</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      fputc(<span class="charliteral">&#39;\r&#39;</span>, fp);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\r&#39;</span>)</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      r = <span class="keyword">true</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      r = <span class="keyword">false</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    fputc(c, fp);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (pbar &amp;&amp; !(pos % 1024))</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <a class="code" href="progress_2lib_8h.html#a7373bbf71548c41b082a305b3346727a">progress_update</a>(pbar, pos, -1);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span> (c_debug_level &gt;= <a class="code" href="imap_2private_8h.html#a4c6b82e52750d9be1ea91067a0281f72">IMAP_LOG_LTRL</a>)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <a class="code" href="buffer_8c.html#a819a9cb669c1a7e8e2218c672b794492">mutt_buffer_addch</a>(&amp;buf, c);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">if</span> (c_debug_level &gt;= <a class="code" href="imap_2private_8h.html#a4c6b82e52750d9be1ea91067a0281f72">IMAP_LOG_LTRL</a>)</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="imap_2private_8h.html#a4c6b82e52750d9be1ea91067a0281f72">IMAP_LOG_LTRL</a>, <span class="stringliteral">&quot;\n%s&quot;</span>, buf.<a class="code" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="buffer_8c.html#a59b13bca38b1b314e2bc5ad142d2df49">mutt_buffer_dealloc</a>(&amp;buf);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div><div class="ttc" id="imap_2private_8h_html_ab13bb304e2a8a52e6f1c364a12638d40a72f6a764d727fde8ab0d10a618915abe"><div class="ttname"><a href="imap_2private_8h.html#ab13bb304e2a8a52e6f1c364a12638d40a72f6a764d727fde8ab0d10a618915abe">IMAP_FATAL</a></div><div class="ttdoc">Unrecoverable error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00097">private.h:97</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="helpers_8c_html_a96039a9f8d37daad993ae7b490510339"><div class="ttname"><a href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a></div><div class="ttdeci">short cs_subset_number(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a number config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00169">helpers.c:169</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="socket_8c_html_a8c8e2c0db6bc26a505c9a5d8c46c139e"><div class="ttname"><a href="socket_8c.html#a8c8e2c0db6bc26a505c9a5d8c46c139e">mutt_socket_readchar</a></div><div class="ttdeci">int mutt_socket_readchar(struct Connection *conn, char *c)</div><div class="ttdoc">simple read buffering to speed things up </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00210">socket.c:210</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdoc">Log at debug level 2. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00041">logging.h:41</a></div></div>
<div class="ttc" id="buffer_8c_html_a59b13bca38b1b314e2bc5ad142d2df49"><div class="ttname"><a href="buffer_8c.html#a59b13bca38b1b314e2bc5ad142d2df49">mutt_buffer_dealloc</a></div><div class="ttdeci">void mutt_buffer_dealloc(struct Buffer *buf)</div><div class="ttdoc">Release the memory allocated by a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00294">buffer.c:294</a></div></div>
<div class="ttc" id="structImapAccountData_html_ac6488a600297eee1e5d203872e93f9d2"><div class="ttname"><a href="structImapAccountData.html#ac6488a600297eee1e5d203872e93f9d2">ImapAccountData::status</a></div><div class="ttdeci">unsigned char status</div><div class="ttdoc">ImapFlags, e.g. IMAP_FATAL. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00045">adata.h:45</a></div></div>
<div class="ttc" id="structBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00035">buffer.h:35</a></div></div>
<div class="ttc" id="buffer_8c_html_a819a9cb669c1a7e8e2218c672b794492"><div class="ttname"><a href="buffer_8c.html#a819a9cb669c1a7e8e2218c672b794492">mutt_buffer_addch</a></div><div class="ttdeci">size_t mutt_buffer_addch(struct Buffer *buf, char c)</div><div class="ttdoc">Add a single character to a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00240">buffer.c:240</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="progress_2lib_8h_html_a7373bbf71548c41b082a305b3346727a"><div class="ttname"><a href="progress_2lib_8h.html#a7373bbf71548c41b082a305b3346727a">progress_update</a></div><div class="ttdeci">void progress_update(struct Progress *progress, size_t pos, int percent)</div><div class="ttdoc">Update the state of the progress bar. </div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00175">progress.c:175</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a4c6b82e52750d9be1ea91067a0281f72"><div class="ttname"><a href="imap_2private_8h.html#a4c6b82e52750d9be1ea91067a0281f72">IMAP_LOG_LTRL</a></div><div class="ttdeci">#define IMAP_LOG_LTRL</div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00050">private.h:50</a></div></div>
<div class="ttc" id="buffer_8c_html_a2837f43a0e59e6cf2f83f23c81e53498"><div class="ttname"><a href="buffer_8c.html#a2837f43a0e59e6cf2f83f23c81e53498">mutt_buffer_alloc</a></div><div class="ttdeci">void mutt_buffer_alloc(struct Buffer *buf, size_t new_size)</div><div class="ttdoc">Make sure a buffer can store at least new_size bytes. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00265">buffer.c:265</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a5adc6a50d981b74f9210b202ca117861_cgraph.svg" width="362" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a5adc6a50d981b74f9210b202ca117861_icgraph.svg" width="338" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a12008dfceea99a26fa88f26b625637a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12008dfceea99a26fa88f26b625637a8">&#9670;&nbsp;</a></span>imap_notify_delete_email()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void imap_notify_delete_email </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inform IMAP that an <a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> has been deleted. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00656">656</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;{</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapEmailData.html">ImapEmailData</a> *<a class="code" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">if</span> (!mdata || !edata)</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <a class="code" href="msn_8c.html#a857ceb6db2464db60b00031c9628bce5">imap_msn_remove</a>(&amp;mdata-&gt;msn, edata-&gt;<a class="code" href="structImapEmailData.html#a8c77eb4bff1b0e97039cfc97ac898835">msn</a> - 1);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  edata-&gt;<a class="code" href="structImapEmailData.html#a8c77eb4bff1b0e97039cfc97ac898835">msn</a> = 0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="ttc" id="imap_2edata_8c_html_a849b9e42b71ec60e252b9fdb9c8edfbc"><div class="ttname"><a href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a></div><div class="ttdeci">struct ImapEmailData * imap_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8c_source.html#l00064">edata.c:64</a></div></div>
<div class="ttc" id="structImapEmailData_html_a8c77eb4bff1b0e97039cfc97ac898835"><div class="ttname"><a href="structImapEmailData.html#a8c77eb4bff1b0e97039cfc97ac898835">ImapEmailData::msn</a></div><div class="ttdeci">unsigned int msn</div><div class="ttdoc">Message Sequence Number. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00045">edata.h:45</a></div></div>
<div class="ttc" id="msn_8c_html_a857ceb6db2464db60b00031c9628bce5"><div class="ttname"><a href="msn_8c.html#a857ceb6db2464db60b00031c9628bce5">imap_msn_remove</a></div><div class="ttdeci">void imap_msn_remove(struct MSN *msn, size_t idx)</div><div class="ttdoc">Remove an entry from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="msn_8c_source.html#l00112">msn.c:112</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="structEmail_html_a50d8a8dde5fbf0b6dba934ff7e07fb6b"><div class="ttname"><a href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">Email::edata</a></div><div class="ttdeci">void * edata</div><div class="ttdoc">Driver-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00111">email.h:111</a></div></div>
<div class="ttc" id="structImapEmailData_html"><div class="ttname"><a href="structImapEmailData.html">ImapEmailData</a></div><div class="ttdoc">IMAP-specific Email data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00033">edata.h:33</a></div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a12008dfceea99a26fa88f26b625637a8_cgraph.svg" width="354" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a12008dfceea99a26fa88f26b625637a8_icgraph.svg" width="322" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa526e62e5ec404f052c82e72f8a942b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa526e62e5ec404f052c82e72f8a942b8">&#9670;&nbsp;</a></span>imap_expunge_mailbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void imap_expunge_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Purge messages from the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a></td></tr>
  </table>
  </dd>
</dl>
<p>Purge IMAP portion of expunged messages from the context. Must not be done while something has a handle on any headers (eg inside pager or editor). That is, check <a class="el" href="imap_2private_8h.html#a5605b7e95d84f1009d5aca69cc22ceec" title="Allow re-opening a folder upon expunge. ">IMAP_REOPEN_ALLOW</a>. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00676">676</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;{</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (!adata || !mdata)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = NULL;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="imap_2private_8h.html#acd75897efa210794ca144cea1e3f7ca9">imap_hcache_open</a>(adata, mdata);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">index</a> == INT_MAX)</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Expunging message UID %u\n&quot;</span>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="message_8c.html#aade70cfb183e32e948a40ba633fd711a">imap_cache_del</a>(m, e);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="imap_2private_8h.html#abe085176ac9153cc83fbfcbc722ccc58">imap_hcache_del</a>(mdata, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <a class="code" href="hash_8c.html#a3d3e3db8d8717bb83b71e157d8cc24ec">mutt_hash_int_delete</a>(mdata-&gt;<a class="code" href="structImapMboxData.html#a5d4ade771376ea3dbb3fe5816ddeac84">uid_hash</a>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid, e);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="imap_2edata_8c.html#aca39a57c385f6fdc7aa1297b87c48085">imap_edata_free</a>((<span class="keywordtype">void</span> **) &amp;e-&gt;<a class="code" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="comment">/* NeoMutt has several places where it turns off e-&gt;active as a</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">       * hack.  For example to avoid FLAG updates, or to exclude from</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">       * imap_exec_msgset.</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">       * Unfortunately, when a reopen is allowed and the IMAP_EXPUNGE_PENDING</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">       * flag becomes set (e.g. a flag update to a modified header),</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">       * this function will be called by imap_cmd_finish().</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">       * The ctx_update_tables() will free and remove these &quot;inactive&quot; headers,</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">       * despite that an EXPUNGE was not received for them.</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">       * This would result in memory leaks and segfaults due to dangling</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">       * pointers in the msn_index and uid_hash.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">       * So this is another hack to work around the hacks.  We don&#39;t want to</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">       * remove the messages, so make sure active is on.  */</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="imap_2private_8h.html#aac4c4b05fb952889e950219e16098099">imap_hcache_close</a>(mdata);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4ad0c3ae03b6a1ba8f4a91d5f8c81796ac">NT_MAILBOX_UPDATE</a>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code" href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;}</div><div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4ad0c3ae03b6a1ba8f4a91d5f8c81796ac"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4ad0c3ae03b6a1ba8f4a91d5f8c81796ac">NT_MAILBOX_UPDATE</a></div><div class="ttdoc">Update internal tables. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00183">mailbox.h:183</a></div></div>
<div class="ttc" id="imap_2private_8h_html_abe085176ac9153cc83fbfcbc722ccc58"><div class="ttname"><a href="imap_2private_8h.html#abe085176ac9153cc83fbfcbc722ccc58">imap_hcache_del</a></div><div class="ttdeci">int imap_hcache_del(struct ImapMboxData *mdata, unsigned int uid)</div><div class="ttdoc">Delete an item from the header cache. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00399">util.c:399</a></div></div>
<div class="ttc" id="message_8c_html_aade70cfb183e32e948a40ba633fd711a"><div class="ttname"><a href="message_8c.html#aade70cfb183e32e948a40ba633fd711a">imap_cache_del</a></div><div class="ttdeci">int imap_cache_del(struct Mailbox *m, struct Email *e)</div><div class="ttdoc">Delete an email from the body cache. </div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l01819">message.c:1819</a></div></div>
<div class="ttc" id="imap_2edata_8c_html_a849b9e42b71ec60e252b9fdb9c8edfbc"><div class="ttname"><a href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a></div><div class="ttdeci">struct ImapEmailData * imap_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8c_source.html#l00064">edata.c:64</a></div></div>
<div class="ttc" id="imap_2private_8h_html_aac4c4b05fb952889e950219e16098099"><div class="ttname"><a href="imap_2private_8h.html#aac4c4b05fb952889e950219e16098099">imap_hcache_close</a></div><div class="ttdeci">void imap_hcache_close(struct ImapMboxData *mdata)</div><div class="ttdoc">Close the header cache. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00340">util.c:340</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdoc">Log at debug level 2. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00041">logging.h:41</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="imap_2edata_8c_html_aca39a57c385f6fdc7aa1297b87c48085"><div class="ttname"><a href="imap_2edata_8c.html#aca39a57c385f6fdc7aa1297b87c48085">imap_edata_free</a></div><div class="ttdeci">void imap_edata_free(void **ptr)</div><div class="ttdoc">Free the private Email data - Implements Email::edata_free() </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8c_source.html#l00038">edata.c:38</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="structImapMboxData_html_a5d4ade771376ea3dbb3fe5816ddeac84"><div class="ttname"><a href="structImapMboxData.html#a5d4ade771376ea3dbb3fe5816ddeac84">ImapMboxData::uid_hash</a></div><div class="ttdeci">struct HashTable * uid_hash</div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00058">mdata.h:58</a></div></div>
<div class="ttc" id="mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f"><div class="ttname"><a href="mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a></div><div class="ttdoc">Email list needs resorting. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00181">mailbox.h:181</a></div></div>
<div class="ttc" id="structEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00059">email.h:59</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="hash_8c_html_a3d3e3db8d8717bb83b71e157d8cc24ec"><div class="ttname"><a href="hash_8c.html#a3d3e3db8d8717bb83b71e157d8cc24ec">mutt_hash_int_delete</a></div><div class="ttdeci">void mutt_hash_int_delete(struct HashTable *table, unsigned int intkey, const void *data)</div><div class="ttdoc">Remove an element from a Hash Table. </div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00436">hash.c:436</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="structEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00045">email.h:45</a></div></div>
<div class="ttc" id="structEmail_html_a50d8a8dde5fbf0b6dba934ff7e07fb6b"><div class="ttname"><a href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">Email::edata</a></div><div class="ttdeci">void * edata</div><div class="ttdoc">Driver-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00111">email.h:111</a></div></div>
<div class="ttc" id="structEmail_html_ace0e20a11dbdc84ca9ea63497c05b603"><div class="ttname"><a href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">Email::index</a></div><div class="ttdeci">int index</div><div class="ttdoc">The absolute (unsorted) message number. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00086">email.h:86</a></div></div>
<div class="ttc" id="imap_2private_8h_html_acd75897efa210794ca144cea1e3f7ca9"><div class="ttname"><a href="imap_2private_8h.html#acd75897efa210794ca144cea1e3f7ca9">imap_hcache_open</a></div><div class="ttdeci">void imap_hcache_open(struct ImapAccountData *adata, struct ImapMboxData *mdata)</div><div class="ttdoc">Open a header cache. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00297">util.c:297</a></div></div>
<div class="ttc" id="mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00208">mailbox.c:208</a></div></div>
</div><!-- fragment --><div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aa526e62e5ec404f052c82e72f8a942b8_cgraph.svg" width="580" height="486"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aa526e62e5ec404f052c82e72f8a942b8_icgraph.svg" width="419" height="104"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a93ed20ff163bf6a15c46071ba357d17a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93ed20ff163bf6a15c46071ba357d17a">&#9670;&nbsp;</a></span>imap_open_connection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_open_connection </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an IMAP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00745">745</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;{</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="socket_8c.html#ada78f2615db2775bb7ccd042e6df2774">mutt_socket_open</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>) &lt; 0)</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aadadaf209dbca6194806d5ff446358f16">IMAP_CONNECTED</a>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a>(adata) != <a class="code" href="imap_2private_8h.html#a3e63d724ab73ca87b3f8f43a772d32ba">IMAP_RES_OK</a>)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="imap_8c.html#a14b36ce07a1b1b0fbe046f9e0e192119">imap_close_connection</a>(adata);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>, <span class="stringliteral">&quot;* OK&quot;</span>))</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>, <span class="stringliteral">&quot;* OK [CAPABILITY&quot;</span>) &amp;&amp; <a class="code" href="imap_8c.html#aaecd74a7bdcaae43f8a404d59607bb0b">check_capabilities</a>(adata))</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">#ifdef USE_SSL</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">/* Attempt STARTTLS if available and desired. */</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_ssl_force_tls = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;ssl_force_tls&quot;</span>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> ((adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#a577e30cca37f125532cc73d4cbf51dcb">ssf</a> == 0) &amp;&amp;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        (c_ssl_force_tls || (adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a60d8b3a9befb96c15686ba9ad66c9650">IMAP_CAP_STARTTLS</a>)))</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keyword">enum</span> <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> ans;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_ssl_starttls =</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          <a class="code" href="helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;ssl_starttls&quot;</span>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">if</span> (c_ssl_force_tls)</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        ans = <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ans = <a class="code" href="question_2lib_8h.html#ab02047769214ff014b9a8a1782babadc">query_quadoption</a>(c_ssl_starttls,</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                       <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Secure connection with TLS?&quot;</span>))) == <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="keywordflow">if</span> (ans == <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keyword">enum</span> <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8b">ImapExecResult</a> rc = <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;STARTTLS&quot;</span>, <a class="code" href="imap_2private_8h.html#ac9d49b37a7cdffcbedee17f6bb7ac5da">IMAP_CMD_SINGLE</a>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="comment">// Clear any data after the STARTTLS acknowledgement</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="socket_8c.html#a90c5b50a98f0f9a0b73b82e90c096aba">mutt_socket_empty</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span> (rc == <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba9b47098d83a7645a43f3fb091201a456">IMAP_EXEC_FATAL</a>)</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="keywordflow">if</span> (rc != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba7bd7e415b1159bf6461c6a44cb19d7fc">IMAP_EXEC_ERROR</a>)</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="gnutls_8c.html#a23591e82bf992ceb5e62c459fd787b8a">mutt_ssl_starttls</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>))</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;          {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Could not negotiate TLS connection&quot;</span>));</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;          }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;          {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="comment">/* RFC2595 demands we recheck CAPABILITY after TLS completes. */</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;CAPABILITY&quot;</span>, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>))</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;              <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;          }</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span> (c_ssl_force_tls &amp;&amp; (adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#a577e30cca37f125532cc73d4cbf51dcb">ssf</a> == 0))</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Encrypted connection unavailable&quot;</span>));</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>, <span class="stringliteral">&quot;* PREAUTH&quot;</span>))</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">#ifdef USE_SSL</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="comment">/* Unless using a secure $tunnel, an unencrypted PREAUTH response may be a</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">     * MITM attack.  The only way to stop &quot;STARTTLS&quot; MITM attacks is via</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">     * $ssl_force_tls: an attacker can easily spoof &quot;* OK&quot; and strip the</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">     * STARTTLS capability.  So consult $ssl_force_tls, not $ssl_starttls, to</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">     * decide whether to abort. Note that if using $tunnel and</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">     * $tunnel_is_secure, adata-&gt;conn-&gt;ssf will be set to 1. */</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_ssl_force_tls = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;ssl_force_tls&quot;</span>);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">if</span> ((adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#a577e30cca37f125532cc73d4cbf51dcb">ssf</a> == 0) &amp;&amp; c_ssl_force_tls)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Encrypted connection unavailable&quot;</span>));</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="imap_8c.html#aaecd74a7bdcaae43f8a404d59607bb0b">check_capabilities</a>(adata) != 0)</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;adata-&gt;<a class="code" href="structImapAccountData.html#ac0c66b610779cc9411060acf5f2ce68d">capstr</a>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a>(<span class="stringliteral">&quot;imap_open_connection()&quot;</span>, adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">goto</span> bail;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;bail:</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <a class="code" href="imap_8c.html#a14b36ce07a1b1b0fbe046f9e0e192119">imap_close_connection</a>(adata);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;adata-&gt;<a class="code" href="structImapAccountData.html#ac0c66b610779cc9411060acf5f2ce68d">capstr</a>);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div><div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3e63d724ab73ca87b3f8f43a772d32ba"><div class="ttname"><a href="imap_2private_8h.html#a3e63d724ab73ca87b3f8f43a772d32ba">IMAP_RES_OK</a></div><div class="ttdeci">#define IMAP_RES_OK</div><div class="ttdoc">&lt;tag&gt; OK ... </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00056">private.h:56</a></div></div>
<div class="ttc" id="command_8c_html_a8b9d7c9333e35981d94074e9dcc28e6f"><div class="ttname"><a href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a></div><div class="ttdeci">int imap_cmd_step(struct ImapAccountData *adata)</div><div class="ttdoc">Reads server responses from an IMAP command. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01079">command.c:1079</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba9b47098d83a7645a43f3fb091201a456"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba9b47098d83a7645a43f3fb091201a456">IMAP_EXEC_FATAL</a></div><div class="ttdoc">Imap connection failure. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00086">private.h:86</a></div></div>
<div class="ttc" id="structConnection_html_a577e30cca37f125532cc73d4cbf51dcb"><div class="ttname"><a href="structConnection.html#a577e30cca37f125532cc73d4cbf51dcb">Connection::ssf</a></div><div class="ttdeci">unsigned int ssf</div><div class="ttdoc">Security strength factor, in bits (see below) </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00037">connection.h:37</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a></div><div class="ttdoc">Connection is authenticated. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00109">private.h:109</a></div></div>
<div class="ttc" id="structImapAccountData_html_aafe97c07683cbc20007c8dd315b2d19e"><div class="ttname"><a href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">ImapAccountData::state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">ImapState, e.g. IMAP_AUTHENTICATED. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00044">adata.h:44</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="imap_8c_html_a14b36ce07a1b1b0fbe046f9e0e192119"><div class="ttname"><a href="imap_8c.html#a14b36ce07a1b1b0fbe046f9e0e192119">imap_close_connection</a></div><div class="ttdeci">void imap_close_connection(struct ImapAccountData *adata)</div><div class="ttdoc">Close an IMAP connection. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00853">imap.c:853</a></div></div>
<div class="ttc" id="structImapAccountData_html_ac0c66b610779cc9411060acf5f2ce68d"><div class="ttname"><a href="structImapAccountData.html#ac0c66b610779cc9411060acf5f2ce68d">ImapAccountData::capstr</a></div><div class="ttdeci">char * capstr</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00054">adata.h:54</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8b"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8b">ImapExecResult</a></div><div class="ttdeci">ImapExecResult</div><div class="ttdoc">imap_exec return code </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00082">private.h:82</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a60d8b3a9befb96c15686ba9ad66c9650"><div class="ttname"><a href="imap_2private_8h.html#a60d8b3a9befb96c15686ba9ad66c9650">IMAP_CAP_STARTTLS</a></div><div class="ttdeci">#define IMAP_CAP_STARTTLS</div><div class="ttdoc">RFC2595: STARTTLS. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00132">private.h:132</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35db"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a></div><div class="ttdeci">QuadOption</div><div class="ttdoc">Possible values for a quad-option. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00035">quad.h:35</a></div></div>
<div class="ttc" id="socket_8c_html_ada78f2615db2775bb7ccd042e6df2774"><div class="ttname"><a href="socket_8c.html#ada78f2615db2775bb7ccd042e6df2774">mutt_socket_open</a></div><div class="ttdeci">int mutt_socket_open(struct Connection *conn)</div><div class="ttdoc">Simple wrapper. </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00076">socket.c:76</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aadadaf209dbca6194806d5ff446358f16"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aadadaf209dbca6194806d5ff446358f16">IMAP_CONNECTED</a></div><div class="ttdoc">Connected to server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00108">private.h:108</a></div></div>
<div class="ttc" id="question_2lib_8h_html_ab02047769214ff014b9a8a1782babadc"><div class="ttname"><a href="question_2lib_8h.html#ab02047769214ff014b9a8a1782babadc">query_quadoption</a></div><div class="ttdeci">enum QuadOption query_quadoption(enum QuadOption opt, const char *prompt)</div><div class="ttdoc">Ask the user a quad-question. </div><div class="ttdef"><b>Definition:</b> <a href="question_8c_source.html#l00347">question.c:347</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a></div><div class="ttdoc">User aborted the question (with Ctrl-G) </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00037">quad.h:37</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="imap_2private_8h_html_aab316d8524d30a8813bab633aa9505e6"><div class="ttname"><a href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a></div><div class="ttdeci">void imap_error(const char *where, const char *msg)</div><div class="ttdoc">show an error and abort </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00665">util.c:665</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_aebd2a8a3f8a30062c31fa1474d87cc41"><div class="ttname"><a href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a></div><div class="ttdeci">size_t mutt_istr_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix, ignoring case. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00172">string.c:172</a></div></div>
<div class="ttc" id="structImapAccountData_html_aa1ba7fde388cdd8e1133c1784e5ed4ea"><div class="ttname"><a href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">ImapAccountData::capabilities</a></div><div class="ttdeci">ImapCapFlags capabilities</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00055">adata.h:55</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="helpers_8c_html_a9154ba713ce99b0937f475eec7c61af9"><div class="ttname"><a href="helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a></div><div class="ttdeci">enum QuadOption cs_subset_quad(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a quad-value config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00218">helpers.c:218</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba7bd7e415b1159bf6461c6a44cb19d7fc"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba7bd7e415b1159bf6461c6a44cb19d7fc">IMAP_EXEC_ERROR</a></div><div class="ttdoc">Imap command failure. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00085">private.h:85</a></div></div>
<div class="ttc" id="socket_8c_html_a90c5b50a98f0f9a0b73b82e90c096aba"><div class="ttname"><a href="socket_8c.html#a90c5b50a98f0f9a0b73b82e90c096aba">mutt_socket_empty</a></div><div class="ttdeci">void mutt_socket_empty(struct Connection *conn)</div><div class="ttdoc">Clear out any queued data. </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00313">socket.c:313</a></div></div>
<div class="ttc" id="structImapAccountData_html_ae2a1c679abb95b27819897b57ee436fd"><div class="ttname"><a href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">ImapAccountData::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00059">adata.h:59</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="imap_8c_html_aaecd74a7bdcaae43f8a404d59607bb0b"><div class="ttname"><a href="imap_8c.html#aaecd74a7bdcaae43f8a404d59607bb0b">check_capabilities</a></div><div class="ttdeci">static int check_capabilities(struct ImapAccountData *adata)</div><div class="ttdoc">Make sure we can log in to this server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00094">imap.c:94</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac9d49b37a7cdffcbedee17f6bb7ac5da"><div class="ttname"><a href="imap_2private_8h.html#ac9d49b37a7cdffcbedee17f6bb7ac5da">IMAP_CMD_SINGLE</a></div><div class="ttdeci">#define IMAP_CMD_SINGLE</div><div class="ttdoc">Run a single command. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00077">private.h:77</a></div></div>
<div class="ttc" id="gnutls_8c_html_a23591e82bf992ceb5e62c459fd787b8a"><div class="ttname"><a href="gnutls_8c.html#a23591e82bf992ceb5e62c459fd787b8a">mutt_ssl_starttls</a></div><div class="ttdeci">int mutt_ssl_starttls(struct Connection *conn)</div><div class="ttdoc">Negotiate TLS over an already opened connection. </div><div class="ttdef"><b>Definition:</b> <a href="gnutls_8c_source.html#l01167">gnutls.c:1167</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdoc">User answered &amp;#39;Yes&amp;#39;, or assume &amp;#39;Yes&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a93ed20ff163bf6a15c46071ba357d17a_cgraph.svg" width="720" height="595"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a93ed20ff163bf6a15c46071ba357d17a_icgraph.svg" width="326" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a14b36ce07a1b1b0fbe046f9e0e192119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b36ce07a1b1b0fbe046f9e0e192119">&#9670;&nbsp;</a></span>imap_close_connection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void imap_close_connection </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close an IMAP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00853">853</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;{</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> != <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a>)</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#ae2c49c7d375308b199a53ec7a82a8cb3">seqno</a> = 0;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#aaf69f482c87523eb832135c2c23d3d3f">nextcmd</a> = 0;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#a70666035b6ee38f52c65c066080fe39d">lastcmd</a> = 0;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#ac6488a600297eee1e5d203872e93f9d2">status</a> = 0;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  memset(adata-&gt;<a class="code" href="structImapAccountData.html#ac31a4b10e692f8fe76683195086b35b9">cmds</a>, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structImapCommand.html">ImapCommand</a>) * adata-&gt;<a class="code" href="structImapAccountData.html#ae125c1635cc0a1106429a674225f8da6">cmdslots</a>);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;}</div><div class="ttc" id="structImapAccountData_html_ac31a4b10e692f8fe76683195086b35b9"><div class="ttname"><a href="structImapAccountData.html#ac31a4b10e692f8fe76683195086b35b9">ImapAccountData::cmds</a></div><div class="ttdeci">struct ImapCommand * cmds</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00069">adata.h:69</a></div></div>
<div class="ttc" id="structImapAccountData_html_ae2c49c7d375308b199a53ec7a82a8cb3"><div class="ttname"><a href="structImapAccountData.html#ae2c49c7d375308b199a53ec7a82a8cb3">ImapAccountData::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdoc">tag sequence number, e.g. &amp;#39;{seqid}0001&amp;#39; </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00057">adata.h:57</a></div></div>
<div class="ttc" id="structImapAccountData_html_aafe97c07683cbc20007c8dd315b2d19e"><div class="ttname"><a href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">ImapAccountData::state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">ImapState, e.g. IMAP_AUTHENTICATED. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00044">adata.h:44</a></div></div>
<div class="ttc" id="structImapAccountData_html_a70666035b6ee38f52c65c066080fe39d"><div class="ttname"><a href="structImapAccountData.html#a70666035b6ee38f52c65c066080fe39d">ImapAccountData::lastcmd</a></div><div class="ttdeci">int lastcmd</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00072">adata.h:72</a></div></div>
<div class="ttc" id="structImapAccountData_html_aaf69f482c87523eb832135c2c23d3d3f"><div class="ttname"><a href="structImapAccountData.html#aaf69f482c87523eb832135c2c23d3d3f">ImapAccountData::nextcmd</a></div><div class="ttdeci">int nextcmd</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00071">adata.h:71</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a></div><div class="ttdoc">Disconnected from server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00107">private.h:107</a></div></div>
<div class="ttc" id="structImapCommand_html"><div class="ttname"><a href="structImapCommand.html">ImapCommand</a></div><div class="ttdoc">IMAP command structure. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00159">private.h:159</a></div></div>
<div class="ttc" id="structImapAccountData_html_ae125c1635cc0a1106429a674225f8da6"><div class="ttname"><a href="structImapAccountData.html#ae125c1635cc0a1106429a674225f8da6">ImapAccountData::cmdslots</a></div><div class="ttdeci">int cmdslots</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00070">adata.h:70</a></div></div>
<div class="ttc" id="structImapAccountData_html_ac6488a600297eee1e5d203872e93f9d2"><div class="ttname"><a href="structImapAccountData.html#ac6488a600297eee1e5d203872e93f9d2">ImapAccountData::status</a></div><div class="ttdeci">unsigned char status</div><div class="ttdoc">ImapFlags, e.g. IMAP_FATAL. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00045">adata.h:45</a></div></div>
<div class="ttc" id="socket_8c_html_a432eed609a221c68f457302d6e40c383"><div class="ttname"><a href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a></div><div class="ttdeci">int mutt_socket_close(struct Connection *conn)</div><div class="ttdoc">Close a socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00097">socket.c:97</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a14b36ce07a1b1b0fbe046f9e0e192119_cgraph.svg" width="378" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a14b36ce07a1b1b0fbe046f9e0e192119_icgraph.svg" width="406" height="155"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad998b83df59b588e3643ec0e1b41af3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad998b83df59b588e3643ec0e1b41af3d">&#9670;&nbsp;</a></span>imap_has_flag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool imap_has_flag </td>
          <td>(</td>
          <td class="paramtype">struct ListHead *&#160;</td>
          <td class="paramname"><em>flag_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does the flag exist in the list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag_list</td><td>List of server flags </td></tr>
    <tr><td class="paramname">flag</td><td>Flag to find </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Flag exists</td></tr>
  </table>
  </dd>
</dl>
<p>Do a caseless comparison of the flag against a flag list, return true if found or flag list has '*'. Note that "flag" might contain additional whitespace at the end, so we really need to compare up to the length of each element in "flag_list". </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00878">878</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;{</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="queue_8h.html#a8427c8f43d09d73062cf6b37f303aff5">STAILQ_EMPTY</a>(flag_list))</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> flaglen = <a class="code" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(flag);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keyword">struct </span><a class="code" href="structListNode.html">ListNode</a> *np = NULL;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <a class="code" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(np, flag_list, entries)</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> nplen = strlen(np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> ((flaglen &gt;= nplen) &amp;&amp; ((flag[nplen] == <span class="charliteral">&#39;\0&#39;</span>) || (flag[nplen] == <span class="charliteral">&#39; &#39;</span>)) &amp;&amp;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="mutt_2string_8c.html#aefa17bf84a5a1cb4b41afb08cd91ceff">mutt_istrn_equal</a>(np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, flag, nplen))</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(np-&gt;<a class="code" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;\\*&quot;</span>))</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div><div class="ttc" id="mutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00904">string.c:904</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_aefa17bf84a5a1cb4b41afb08cd91ceff"><div class="ttname"><a href="mutt_2string_8c.html#aefa17bf84a5a1cb4b41afb08cd91ceff">mutt_istrn_equal</a></div><div class="ttdeci">bool mutt_istrn_equal(const char *a, const char *b, size_t num)</div><div class="ttdoc">Check for equality of two strings ignoring case (to a maximum), safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00621">string.c:621</a></div></div>
<div class="ttc" id="queue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00352">queue.h:352</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_acca6786b903b22a5924219f9db96e10d"><div class="ttname"><a href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a></div><div class="ttdeci">size_t mutt_str_len(const char *a)</div><div class="ttdoc">Calculate the length of a string, safely. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00664">string.c:664</a></div></div>
<div class="ttc" id="structListNode_html_aafe688d670318196766392d8235d00a7"><div class="ttname"><a href="structListNode.html#aafe688d670318196766392d8235d00a7">ListNode::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">String. </div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00036">list.h:36</a></div></div>
<div class="ttc" id="queue_8h_html_a8427c8f43d09d73062cf6b37f303aff5"><div class="ttname"><a href="queue_8h.html#a8427c8f43d09d73062cf6b37f303aff5">STAILQ_EMPTY</a></div><div class="ttdeci">#define STAILQ_EMPTY(head)</div><div class="ttdef"><b>Definition:</b> <a href="queue_8h_source.html#l00348">queue.h:348</a></div></div>
<div class="ttc" id="structListNode_html"><div class="ttname"><a href="structListNode.html">ListNode</a></div><div class="ttdoc">A List node for strings. </div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00034">list.h:34</a></div></div>
</div><!-- fragment --><div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ad998b83df59b588e3643ec0e1b41af3d_cgraph.svg" width="307" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ad998b83df59b588e3643ec0e1b41af3d_icgraph.svg" width="298" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5b61cb17f4f6f798ecaf11469dc30f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b61cb17f4f6f798ecaf11469dc30f7b">&#9670;&nbsp;</a></span>compare_uid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int compare_uid </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare two Emails by UID - Implements <a class="el" href="sort_8h.html#ae599403f309e9dcfdbf62e63e628a2d8" title="Prototype for generic comparison function, compatible with qsort. ">sort_t</a>. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00904">904</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;{</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *ea = *(<span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> const *<span class="keyword">const</span> *) a;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *eb = *(<span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> const *<span class="keyword">const</span> *) b;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>((<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *) ea)-&gt;<a class="code" href="structImapEmailData.html#a64e9b3c8a5b91a1102fa09e26be67794">uid</a> -</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;         <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>((<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *) eb)-&gt;<a class="code" href="structImapEmailData.html#a64e9b3c8a5b91a1102fa09e26be67794">uid</a>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div><div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="imap_2edata_8c_html_a849b9e42b71ec60e252b9fdb9c8edfbc"><div class="ttname"><a href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a></div><div class="ttdeci">struct ImapEmailData * imap_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8c_source.html#l00064">edata.c:64</a></div></div>
<div class="ttc" id="structImapEmailData_html_a64e9b3c8a5b91a1102fa09e26be67794"><div class="ttname"><a href="structImapEmailData.html#a64e9b3c8a5b91a1102fa09e26be67794">ImapEmailData::uid</a></div><div class="ttdeci">unsigned int uid</div><div class="ttdoc">32-bit Message UID </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00044">edata.h:44</a></div></div>
</div><!-- fragment --><div id="dynsection-40" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a5b61cb17f4f6f798ecaf11469dc30f7b_cgraph.svg" width="292" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-41" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a5b61cb17f4f6f798ecaf11469dc30f7b_icgraph.svg" width="514" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a62497a1d8948e9172091840079ee3155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62497a1d8948e9172091840079ee3155">&#9670;&nbsp;</a></span>imap_exec_msgset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_exec_msgset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>post</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013">MessageType</a>&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>changed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invert</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare commands for all messages matching conditions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Selected Imap <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">pre</td><td>prefix commands </td></tr>
    <tr><td class="paramname">post</td><td>postfix commands </td></tr>
    <tr><td class="paramname">flag</td><td>flag type on which to filter, e.g. <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b" title="Messages that have been replied to. ">MUTT_REPLIED</a> </td></tr>
    <tr><td class="paramname">changed</td><td>include only changed messages in message set </td></tr>
    <tr><td class="paramname">invert</td><td>invert sense of flag, eg <a class="el" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd" title="Messages that have been read. ">MUTT_READ</a> matches unread messages </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Matched messages </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>pre/post: commands are of the form "%s %s %s %s", tag, pre, message set, post Prepares commands for all messages matching conditions (must be flushed with imap_exec) </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00927">927</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;{</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">if</span> (!adata || (adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a> != m))</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> **emails = NULL;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordtype">int</span> pos;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> cmd = <a class="code" href="buffer_8c.html#a0242aaa9a400d0722a99828776c0403b">mutt_buffer_make</a>(0);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="comment">/* We make a copy of the headers just in case resorting doesn&#39;t give</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">   exactly the original order (duplicate messages?), because other parts of</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">   the ctx are tied to the header order. This may be overkill. */</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_sort = <a class="code" href="helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordflow">if</span> (c_sort != <a class="code" href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a>)</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    emails = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// We overcommit here, just in case new mail arrives whilst we&#39;re sync-ing</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a> = <a class="code" href="memory_8c.html#a264da4dc58e6dc8983285bd1f538f24d">mutt_mem_malloc</a>(m-&gt;<a class="code" href="structMailbox.html#a4b558e0bd6fab22212bd703350372555">email_max</a> * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *));</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    memcpy(m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>, emails, m-&gt;<a class="code" href="structMailbox.html#a4b558e0bd6fab22212bd703350372555">email_max</a> * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *));</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, <a class="code" href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a>, NULL);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    qsort(m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>, m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *), <a class="code" href="imap_8c.html#a5b61cb17f4f6f798ecaf11469dc30f7b">compare_uid</a>);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  pos = 0;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a>(&amp;cmd);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <a class="code" href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a>(&amp;cmd, <span class="stringliteral">&quot;%s &quot;</span>, pre);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    rc = <a class="code" href="imap_8c.html#aadd140a7c71090f380878212b96596fc">make_msg_set</a>(m, &amp;cmd, flag, changed, invert, &amp;pos);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span> (rc &gt; 0)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <a class="code" href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a>(&amp;cmd, <span class="stringliteral">&quot; %s&quot;</span>, post);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, cmd.<a class="code" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>, <a class="code" href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        rc = -1;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      count += rc;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  } <span class="keywordflow">while</span> (rc &gt; 0);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  rc = count;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;out:</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <a class="code" href="buffer_8c.html#a59b13bca38b1b314e2bc5ad142d2df49">mutt_buffer_dealloc</a>(&amp;cmd);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordflow">if</span> (c_sort != <a class="code" href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a>)</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, c_sort, NULL);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a> = emails;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  }</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;}</div><div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="buffer_8c_html_adb26acff5f6b9bb7c322669bcb7c48e3"><div class="ttname"><a href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a></div><div class="ttdeci">void mutt_buffer_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00079">buffer.c:79</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="buffer_8c_html_a0242aaa9a400d0722a99828776c0403b"><div class="ttname"><a href="buffer_8c.html#a0242aaa9a400d0722a99828776c0403b">mutt_buffer_make</a></div><div class="ttdeci">struct Buffer mutt_buffer_make(size_t size)</div><div class="ttdoc">Make a new buffer on the stack. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00061">buffer.c:61</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="structImapAccountData_html_ab08af69f675be131e1431c11bf6cf4f0"><div class="ttname"><a href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">ImapAccountData::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Current selected mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00076">adata.h:76</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="imap_8c_html_aadd140a7c71090f380878212b96596fc"><div class="ttname"><a href="imap_8c.html#aadd140a7c71090f380878212b96596fc">make_msg_set</a></div><div class="ttdeci">static int make_msg_set(struct Mailbox *m, struct Buffer *buf, enum MessageType flag, bool changed, bool invert, int *pos)</div><div class="ttdoc">Make a message set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00197">imap.c:197</a></div></div>
<div class="ttc" id="subset_8c_html_a6ee598a96defed645b11cad6e6cb6512"><div class="ttname"><a href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a></div><div class="ttdeci">int cs_subset_str_native_set(const struct ConfigSubset *sub, const char *name, intptr_t value, struct Buffer *err)</div><div class="ttdoc">Natively set the value of a string config item. </div><div class="ttdef"><b>Definition:</b> <a href="subset_8c_source.html#l00305">subset.c:305</a></div></div>
<div class="ttc" id="sort2_8h_html_ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61"><div class="ttname"><a href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a></div><div class="ttdoc">Sort by the order the messages appear in the mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="sort2_8h_source.html#l00048">sort2.h:48</a></div></div>
<div class="ttc" id="buffer_8c_html_a59b13bca38b1b314e2bc5ad142d2df49"><div class="ttname"><a href="buffer_8c.html#a59b13bca38b1b314e2bc5ad142d2df49">mutt_buffer_dealloc</a></div><div class="ttdeci">void mutt_buffer_dealloc(struct Buffer *buf)</div><div class="ttdoc">Release the memory allocated by a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00294">buffer.c:294</a></div></div>
<div class="ttc" id="buffer_8c_html_ac151bca8b7bc6724124073e7b4a6a09f"><div class="ttname"><a href="buffer_8c.html#ac151bca8b7bc6724124073e7b4a6a09f">mutt_buffer_add_printf</a></div><div class="ttdeci">int mutt_buffer_add_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string appending a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00203">buffer.c:203</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="helpers_8c_html_af7f3de51c3c2f5b8f527f40c8397a3fc"><div class="ttname"><a href="helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a></div><div class="ttdeci">short cs_subset_sort(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a sort config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00292">helpers.c:292</a></div></div>
<div class="ttc" id="structMailbox_html_a4b558e0bd6fab22212bd703350372555"><div class="ttname"><a href="structMailbox.html#a4b558e0bd6fab22212bd703350372555">Mailbox::email_max</a></div><div class="ttdeci">int email_max</div><div class="ttdoc">Number of pointers in emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00100">mailbox.h:100</a></div></div>
<div class="ttc" id="memory_8c_html_a264da4dc58e6dc8983285bd1f538f24d"><div class="ttname"><a href="memory_8c.html#a264da4dc58e6dc8983285bd1f538f24d">mutt_mem_malloc</a></div><div class="ttdeci">void * mutt_mem_malloc(size_t size)</div><div class="ttdoc">Allocate memory on the heap. </div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00090">memory.c:90</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="structBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00035">buffer.h:35</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="imap_2private_8h_html_af5a1e8e10143cb70e9af987686df4108"><div class="ttname"><a href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a></div><div class="ttdeci">#define IMAP_CMD_QUEUE</div><div class="ttdoc">Queue a command, do not execute. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00075">private.h:75</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="imap_8c_html_a5b61cb17f4f6f798ecaf11469dc30f7b"><div class="ttname"><a href="imap_8c.html#a5b61cb17f4f6f798ecaf11469dc30f7b">compare_uid</a></div><div class="ttdeci">static int compare_uid(const void *a, const void *b)</div><div class="ttdoc">Compare two Emails by UID - Implements sort_t. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00904">imap.c:904</a></div></div>
</div><!-- fragment --><div id="dynsection-42" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a62497a1d8948e9172091840079ee3155_cgraph.svg" width="611" height="563"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-43" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a62497a1d8948e9172091840079ee3155_icgraph.svg" width="574" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abf465f5f6004ebf7bb4ad8e59a2f5b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf465f5f6004ebf7bb4ad8e59a2f5b6c">&#9670;&nbsp;</a></span>imap_sync_message_for_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_sync_message_for_copy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBuffer.html">Buffer</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> *&#160;</td>
          <td class="paramname"><em>err_continue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update server to reflect the flags of a single message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email. ">Email</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> for the command string </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err_continue</td><td>Did the user force a continue? </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>Update the IMAP server to reflect the flags for a single message before performing a "UID COPY".</p>
<dl class="section note"><dt>Note</dt><dd>This does not sync the "deleted" flag state, because it is not desirable to propagate that flag into the copy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01004">1004</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">if</span> (!adata || (adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a> != m))</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordtype">char</span> flags[1024];</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordtype">char</span> *tags = NULL;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordtype">char</span> uid[11];</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="imap_8c.html#afb984879ac7f2ebaef80791fdf7e7adb">compare_flags_for_copy</a>(e))</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> == <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;deleted)</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  snprintf(uid, <span class="keyword">sizeof</span>(uid), <span class="stringliteral">&quot;%u&quot;</span>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <a class="code" href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a>(cmd);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <a class="code" href="buffer_8c.html#a958e87c1ae9de976eb76f759dbaaa601">mutt_buffer_addstr</a>(cmd, <span class="stringliteral">&quot;UID STORE &quot;</span>);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <a class="code" href="buffer_8c.html#a958e87c1ae9de976eb76f759dbaaa601">mutt_buffer_addstr</a>(cmd, uid);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  flags[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#af726790bdcf33b797e735f03aab88730">MUTT_ACL_SEEN</a>, e-&gt;<a class="code" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a>, <span class="stringliteral">&quot;\\Seen &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, e-&gt;<a class="code" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>, <span class="stringliteral">&quot;Old &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, e-&gt;<a class="code" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a>, <span class="stringliteral">&quot;\\Flagged &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, e-&gt;<a class="code" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a>, <span class="stringliteral">&quot;\\Answered &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#a7ada20153d03e30afe22e55e32d61fea">MUTT_ACL_DELETE</a>, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;deleted, <span class="stringliteral">&quot;\\Deleted &quot;</span>, flags,</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;           <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">rights</a> &amp; <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>)</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">/* restore system flags */</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;flags_system)</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <a class="code" href="mutt_2string_8c.html#ae6900b5833f68692e265c5732b2a3556">mutt_str_cat</a>(flags, <span class="keyword">sizeof</span>(flags), <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;flags_system);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">/* set custom flags */</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    tags = <a class="code" href="tags_8c.html#a98ad754cf00b7de8eaf8e3a92d8766d0">driver_tags_get_with_hidden</a>(&amp;e-&gt;<a class="code" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">if</span> (tags)</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <a class="code" href="mutt_2string_8c.html#ae6900b5833f68692e265c5732b2a3556">mutt_str_cat</a>(flags, <span class="keyword">sizeof</span>(flags), tags);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;tags);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <a class="code" href="mutt_2string_8c.html#a1d343dcbce0482f8979fe2a298913225">mutt_str_remove_trailing_ws</a>(flags);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">/* UW-IMAP is OK with null flags, Cyrus isn&#39;t. The only solution is to</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">   * explicitly revoke all system flags (if we have permission) */</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">if</span> (*flags == <span class="charliteral">&#39;\0&#39;</span>)</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#af726790bdcf33b797e735f03aab88730">MUTT_ACL_SEEN</a>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\\Seen &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, <span class="keyword">true</span>, <span class="stringliteral">&quot;Old &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\\Flagged &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\\Answered &quot;</span>, flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a>(m, <a class="code" href="mailbox_8h.html#a7ada20153d03e30afe22e55e32d61fea">MUTT_ACL_DELETE</a>, !<a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;deleted, <span class="stringliteral">&quot;\\Deleted &quot;</span>,</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;             flags, <span class="keyword">sizeof</span>(flags));</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">/* erase custom flags */</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> ((m-&gt;<a class="code" href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">rights</a> &amp; <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>) &amp;&amp; <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;flags_remote)</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="mutt_2string_8c.html#ae6900b5833f68692e265c5732b2a3556">mutt_str_cat</a>(flags, <span class="keyword">sizeof</span>(flags), <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;flags_remote);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="mutt_2string_8c.html#a1d343dcbce0482f8979fe2a298913225">mutt_str_remove_trailing_ws</a>(flags);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <a class="code" href="buffer_8c.html#a958e87c1ae9de976eb76f759dbaaa601">mutt_buffer_addstr</a>(cmd, <span class="stringliteral">&quot; -FLAGS.SILENT (&quot;</span>);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="buffer_8c.html#a958e87c1ae9de976eb76f759dbaaa601">mutt_buffer_addstr</a>(cmd, <span class="stringliteral">&quot; FLAGS.SILENT (&quot;</span>);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <a class="code" href="buffer_8c.html#a958e87c1ae9de976eb76f759dbaaa601">mutt_buffer_addstr</a>(cmd, flags);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <a class="code" href="buffer_8c.html#a958e87c1ae9de976eb76f759dbaaa601">mutt_buffer_addstr</a>(cmd, <span class="stringliteral">&quot;)&quot;</span>);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">/* after all this it&#39;s still possible to have no flags, if you</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">   * have no ACL rights */</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordflow">if</span> (*flags &amp;&amp; (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, cmd-&gt;<a class="code" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>) &amp;&amp;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      err_continue &amp;&amp; (*err_continue != <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>))</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    *err_continue = <a class="code" href="imap_2private_8h.html#a6c7cbd7c42e90cf17c1da23c5da4f247">imap_continue</a>(<span class="stringliteral">&quot;imap_sync_message: STORE failed&quot;</span>, adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (*err_continue != <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="comment">/* server have now the updated flags */</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;flags_remote);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;<a class="code" href="structImapEmailData.html#aa942cde9ad6b90d7353e448578c8f3e8">flags_remote</a> = <a class="code" href="tags_8c.html#a98ad754cf00b7de8eaf8e3a92d8766d0">driver_tags_get_with_hidden</a>(&amp;e-&gt;<a class="code" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> == <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;deleted)</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;}</div><div class="ttc" id="imap_2private_8h_html_a6c7cbd7c42e90cf17c1da23c5da4f247"><div class="ttname"><a href="imap_2private_8h.html#a6c7cbd7c42e90cf17c1da23c5da4f247">imap_continue</a></div><div class="ttdeci">enum QuadOption imap_continue(const char *msg, const char *resp)</div><div class="ttdoc">display a message and ask the user if they want to go on </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00654">util.c:654</a></div></div>
<div class="ttc" id="buffer_8c_html_adb26acff5f6b9bb7c322669bcb7c48e3"><div class="ttname"><a href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a></div><div class="ttdeci">void mutt_buffer_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00079">buffer.c:79</a></div></div>
<div class="ttc" id="imap_8c_html_a17330aae0c21116a3dc7ff5eff621284"><div class="ttname"><a href="imap_8c.html#a17330aae0c21116a3dc7ff5eff621284">set_flag</a></div><div class="ttdeci">static void set_flag(struct Mailbox *m, AclFlags aclflag, bool flag, const char *str, char *flags, size_t flsize)</div><div class="ttdoc">append str to flags if we currently have permission according to aclflag </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00176">imap.c:176</a></div></div>
<div class="ttc" id="structImapAccountData_html_ab08af69f675be131e1431c11bf6cf4f0"><div class="ttname"><a href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">ImapAccountData::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Current selected mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00076">adata.h:76</a></div></div>
<div class="ttc" id="structEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00048">email.h:48</a></div></div>
<div class="ttc" id="imap_2edata_8c_html_a849b9e42b71ec60e252b9fdb9c8edfbc"><div class="ttname"><a href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a></div><div class="ttdeci">struct ImapEmailData * imap_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8c_source.html#l00064">edata.c:64</a></div></div>
<div class="ttc" id="mailbox_8h_html_a7ada20153d03e30afe22e55e32d61fea"><div class="ttname"><a href="mailbox_8h.html#a7ada20153d03e30afe22e55e32d61fea">MUTT_ACL_DELETE</a></div><div class="ttdeci">#define MUTT_ACL_DELETE</div><div class="ttdoc">Delete a message. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00066">mailbox.h:66</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="structEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="structEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="mailbox_8h_html_ac495d1273b7f2399403a2932b6ff2fd3"><div class="ttname"><a href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a></div><div class="ttdeci">#define MUTT_ACL_WRITE</div><div class="ttdoc">Write to a message (for flagging or linking threads) </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00074">mailbox.h:74</a></div></div>
<div class="ttc" id="structEmail_html_aaa992628043f7a89ba87b8ce24f8c1b1"><div class="ttname"><a href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">Email::tags</a></div><div class="ttdeci">struct TagList tags</div><div class="ttdoc">For drivers that support server tagging. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00109">email.h:109</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="buffer_8c_html_a958e87c1ae9de976eb76f759dbaaa601"><div class="ttname"><a href="buffer_8c.html#a958e87c1ae9de976eb76f759dbaaa601">mutt_buffer_addstr</a></div><div class="ttdeci">size_t mutt_buffer_addstr(struct Buffer *buf, const char *s)</div><div class="ttdoc">Add a string to a Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00225">buffer.c:225</a></div></div>
<div class="ttc" id="structImapEmailData_html_aa942cde9ad6b90d7353e448578c8f3e8"><div class="ttname"><a href="structImapEmailData.html#aa942cde9ad6b90d7353e448578c8f3e8">ImapEmailData::flags_remote</a></div><div class="ttdeci">char * flags_remote</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00048">edata.h:48</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_a1d343dcbce0482f8979fe2a298913225"><div class="ttname"><a href="mutt_2string_8c.html#a1d343dcbce0482f8979fe2a298913225">mutt_str_remove_trailing_ws</a></div><div class="ttdeci">void mutt_str_remove_trailing_ws(char *s)</div><div class="ttdoc">Trim trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00733">string.c:733</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="structBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00035">buffer.h:35</a></div></div>
<div class="ttc" id="structMailbox_html_a44766ec39ab823278479d0a8fe7b5f73"><div class="ttname"><a href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">Mailbox::rights</a></div><div class="ttdeci">AclFlags rights</div><div class="ttdoc">ACL bits, see AclFlags. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00121">mailbox.h:121</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ae6900b5833f68692e265c5732b2a3556"><div class="ttname"><a href="mutt_2string_8c.html#ae6900b5833f68692e265c5732b2a3556">mutt_str_cat</a></div><div class="ttdeci">char * mutt_str_cat(char *buf, size_t buflen, const char *s)</div><div class="ttdoc">Concatenate two strings. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00385">string.c:385</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="tags_8c_html_a98ad754cf00b7de8eaf8e3a92d8766d0"><div class="ttname"><a href="tags_8c.html#a98ad754cf00b7de8eaf8e3a92d8766d0">driver_tags_get_with_hidden</a></div><div class="ttdeci">char * driver_tags_get_with_hidden(struct TagList *list)</div><div class="ttdoc">Get tags with hiddens. </div><div class="ttdef"><b>Definition:</b> <a href="tags_8c_source.html#l00158">tags.c:158</a></div></div>
<div class="ttc" id="imap_8c_html_afb984879ac7f2ebaef80791fdf7e7adb"><div class="ttname"><a href="imap_8c.html#afb984879ac7f2ebaef80791fdf7e7adb">compare_flags_for_copy</a></div><div class="ttdeci">static bool compare_flags_for_copy(struct Email *e)</div><div class="ttdoc">Compare local flags against the server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00299">imap.c:299</a></div></div>
<div class="ttc" id="structEmail_html_a8e810bc67ce7fea04bfe8a3739093d78"><div class="ttname"><a href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">Email::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdoc">Marked important? </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00043">email.h:43</a></div></div>
<div class="ttc" id="structImapAccountData_html_ae2a1c679abb95b27819897b57ee436fd"><div class="ttname"><a href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">ImapAccountData::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00059">adata.h:59</a></div></div>
<div class="ttc" id="structEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00045">email.h:45</a></div></div>
<div class="ttc" id="structEmail_html_aa26dd591f92e548bc3c56d0b7fdb3e8c"><div class="ttname"><a href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">Email::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdoc">Email has been replied to. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00054">email.h:54</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="mailbox_8h_html_af726790bdcf33b797e735f03aab88730"><div class="ttname"><a href="mailbox_8h.html#af726790bdcf33b797e735f03aab88730">MUTT_ACL_SEEN</a></div><div class="ttdeci">#define MUTT_ACL_SEEN</div><div class="ttdoc">Change the &amp;#39;seen&amp;#39; status of a message. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00073">mailbox.h:73</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdoc">User answered &amp;#39;Yes&amp;#39;, or assume &amp;#39;Yes&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
</div><!-- fragment --><div id="dynsection-44" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_abf465f5f6004ebf7bb4ad8e59a2f5b6c_cgraph.svg" width="644" height="584"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-45" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_abf465f5f6004ebf7bb4ad8e59a2f5b6c_icgraph.svg" width="447" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="acfd4b6567f210cef7e4dcffa45f263ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd4b6567f210cef7e4dcffa45f263ce">&#9670;&nbsp;</a></span>imap_check_mailbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> imap_check_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>use the NOOP or IDLE command to poll for new mail </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">force</td><td>Don't wait return enum MxStatus </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01103">1103</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;{</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code" href="structMailbox.html#ab9a4528fcd39e61bdefd4dcfdbc6252f">account</a>)</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">/* overload keyboard timeout to avoid many mailbox checks in a row.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">   * Most users don&#39;t like having to wait exactly when they press a key. */</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordtype">int</span> rc = 0;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">/* try IDLE first, unless force is set */</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_imap_idle = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_idle&quot;</span>);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_imap_keepalive =</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <a class="code" href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_keepalive&quot;</span>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordflow">if</span> (!force &amp;&amp; c_imap_idle &amp;&amp; (adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a0dc6eddac9eeaa0b346ad3e2356260b0">IMAP_CAP_IDLE</a>) &amp;&amp;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      ((adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> != <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaadd336b424ff9f41a60b0d217de18ba6">IMAP_IDLE</a>) || (<a class="code" href="date_8c.html#a97bacb1574ec0b1c69b6236fbacceccf">mutt_date_epoch</a>() &gt;= adata-&gt;<a class="code" href="structImapAccountData.html#a89ff311b312a9d0bc216d689161bf1a7">lastread</a> + c_imap_keepalive)))</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#a83baf2c6cadbab42aadc30edaacafac1">imap_cmd_idle</a>(adata) &lt; 0)</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> == <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaadd336b424ff9f41a60b0d217de18ba6">IMAP_IDLE</a>)</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">while</span> ((rc = <a class="code" href="socket_8c.html#a4d13f6965c151f2b7e0b3c20bd0def21">mutt_socket_poll</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>, 0)) &gt; 0)</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a>(adata) != <a class="code" href="imap_2private_8h.html#add0869283ae9186ac31a7169b246cc6b">IMAP_RES_CONTINUE</a>)</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      {</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Error reading IDLE response\n&quot;</span>);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      }</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Poll failed, disabling IDLE\n&quot;</span>);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp;= ~<a class="code" href="imap_2private_8h.html#a0dc6eddac9eeaa0b346ad3e2356260b0">IMAP_CAP_IDLE</a>; <span class="comment">// Clear the flag</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_timeout = <a class="code" href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;timeout&quot;</span>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">if</span> ((force || ((adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> != <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaadd336b424ff9f41a60b0d217de18ba6">IMAP_IDLE</a>) &amp;&amp;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                 (<a class="code" href="date_8c.html#a97bacb1574ec0b1c69b6236fbacceccf">mutt_date_epoch</a>() &gt;= adata-&gt;<a class="code" href="structImapAccountData.html#a89ff311b312a9d0bc216d689161bf1a7">lastread</a> + c_timeout))) &amp;&amp;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;NOOP&quot;</span>, <a class="code" href="imap_2private_8h.html#a53f5cb128123d9d6367486ecedfe97e1">IMAP_CMD_POLL</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>))</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">/* We call this even when we haven&#39;t run NOOP in case we have pending</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">   * changes to process, since we can reopen here. */</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <a class="code" href="command_8c.html#af2ca39cef31791d421e96e168ee1bda5">imap_cmd_finish</a>(adata);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> check = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">if</span> (mdata-&gt;<a class="code" href="structImapMboxData.html#aabd21dc6c911b4b657865b36aafef6ca">check_status</a> &amp; <a class="code" href="imap_2private_8h.html#a3689a88c930024deb05c9fd6703a451b">IMAP_EXPUNGE_PENDING</a>)</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    check = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a>;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mdata-&gt;<a class="code" href="structImapMboxData.html#aabd21dc6c911b4b657865b36aafef6ca">check_status</a> &amp; <a class="code" href="imap_2private_8h.html#a964851aa809a43363727103b694cd19c">IMAP_NEWMAIL_PENDING</a>)</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    check = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mdata-&gt;<a class="code" href="structImapMboxData.html#aabd21dc6c911b4b657865b36aafef6ca">check_status</a> &amp; <a class="code" href="imap_2private_8h.html#aab579e3799fe0846be87ed8d4b398ff0">IMAP_FLAGS_PENDING</a>)</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    check = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a>;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    check = <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  mdata-&gt;<a class="code" href="structImapMboxData.html#aabd21dc6c911b4b657865b36aafef6ca">check_status</a> = <a class="code" href="imap_2private_8h.html#a4195facb81928138f81ef68a26e6c83a">IMAP_OPEN_NO_FLAGS</a>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="keywordflow">return</span> check;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;}</div><div class="ttc" id="date_8c_html_a97bacb1574ec0b1c69b6236fbacceccf"><div class="ttname"><a href="date_8c.html#a97bacb1574ec0b1c69b6236fbacceccf">mutt_date_epoch</a></div><div class="ttdeci">time_t mutt_date_epoch(void)</div><div class="ttdoc">Return the number of seconds since the Unix epoch. </div><div class="ttdef"><b>Definition:</b> <a href="date_8c_source.html#l00427">date.c:427</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="command_8c_html_a8b9d7c9333e35981d94074e9dcc28e6f"><div class="ttname"><a href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a></div><div class="ttdeci">int imap_cmd_step(struct ImapAccountData *adata)</div><div class="ttdoc">Reads server responses from an IMAP command. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01079">command.c:1079</a></div></div>
<div class="ttc" id="structImapAccountData_html_aafe97c07683cbc20007c8dd315b2d19e"><div class="ttname"><a href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">ImapAccountData::state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">ImapState, e.g. IMAP_AUTHENTICATED. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00044">adata.h:44</a></div></div>
<div class="ttc" id="imap_2private_8h_html_aab579e3799fe0846be87ed8d4b398ff0"><div class="ttname"><a href="imap_2private_8h.html#aab579e3799fe0846be87ed8d4b398ff0">IMAP_FLAGS_PENDING</a></div><div class="ttdeci">#define IMAP_FLAGS_PENDING</div><div class="ttdoc">Flags have changed on the server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00070">private.h:70</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a></div><div class="ttdoc">Nondestructive flags change (IMAP) </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00082">mxapi.h:82</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a53f5cb128123d9d6367486ecedfe97e1"><div class="ttname"><a href="imap_2private_8h.html#a53f5cb128123d9d6367486ecedfe97e1">IMAP_CMD_POLL</a></div><div class="ttdeci">#define IMAP_CMD_POLL</div><div class="ttdoc">Poll the tcp connection before running the imap command. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00076">private.h:76</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdoc">New mail received in Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00079">mxapi.h:79</a></div></div>
<div class="ttc" id="helpers_8c_html_a96039a9f8d37daad993ae7b490510339"><div class="ttname"><a href="helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a></div><div class="ttdeci">short cs_subset_number(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a number config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00169">helpers.c:169</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a></div><div class="ttdoc">Mailbox was reopened. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00081">mxapi.h:81</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="socket_8c_html_a4d13f6965c151f2b7e0b3c20bd0def21"><div class="ttname"><a href="socket_8c.html#a4d13f6965c151f2b7e0b3c20bd0def21">mutt_socket_poll</a></div><div class="ttdeci">int mutt_socket_poll(struct Connection *conn, time_t wait_secs)</div><div class="ttdoc">Checks whether reads would block. </div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00192">socket.c:192</a></div></div>
<div class="ttc" id="command_8c_html_a83baf2c6cadbab42aadc30edaacafac1"><div class="ttname"><a href="command_8c.html#a83baf2c6cadbab42aadc30edaacafac1">imap_cmd_idle</a></div><div class="ttdeci">int imap_cmd_idle(struct ImapAccountData *adata)</div><div class="ttdoc">Enter the IDLE state. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01383">command.c:1383</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="structImapMboxData_html_aabd21dc6c911b4b657865b36aafef6ca"><div class="ttname"><a href="structImapMboxData.html#aabd21dc6c911b4b657865b36aafef6ca">ImapMboxData::check_status</a></div><div class="ttdeci">ImapOpenFlags check_status</div><div class="ttdoc">Flags, e.g. IMAP_NEWMAIL_PENDING. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00045">mdata.h:45</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdoc">No changes. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00078">mxapi.h:78</a></div></div>
<div class="ttc" id="command_8c_html_af2ca39cef31791d421e96e168ee1bda5"><div class="ttname"><a href="command_8c.html#af2ca39cef31791d421e96e168ee1bda5">imap_cmd_finish</a></div><div class="ttdeci">void imap_cmd_finish(struct ImapAccountData *adata)</div><div class="ttdoc">Attempt to perform cleanup. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01316">command.c:1316</a></div></div>
<div class="ttc" id="structImapAccountData_html_aa1ba7fde388cdd8e1133c1784e5ed4ea"><div class="ttname"><a href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">ImapAccountData::capabilities</a></div><div class="ttdeci">ImapCapFlags capabilities</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00055">adata.h:55</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a4195facb81928138f81ef68a26e6c83a"><div class="ttname"><a href="imap_2private_8h.html#a4195facb81928138f81ef68a26e6c83a">IMAP_OPEN_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_OPEN_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00065">private.h:65</a></div></div>
<div class="ttc" id="structImapAccountData_html_a89ff311b312a9d0bc216d689161bf1a7"><div class="ttname"><a href="structImapAccountData.html#a89ff311b312a9d0bc216d689161bf1a7">ImapAccountData::lastread</a></div><div class="ttdeci">time_t lastread</div><div class="ttdoc">last time we read a command for the server </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00058">adata.h:58</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aaadd336b424ff9f41a60b0d217de18ba6"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaadd336b424ff9f41a60b0d217de18ba6">IMAP_IDLE</a></div><div class="ttdoc">Connection is idle. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00113">private.h:113</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="structMailbox_html_ab9a4528fcd39e61bdefd4dcfdbc6252f"><div class="ttname"><a href="structMailbox.html#ab9a4528fcd39e61bdefd4dcfdbc6252f">Mailbox::account</a></div><div class="ttdeci">struct Account * account</div><div class="ttdoc">Account that owns this Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00131">mailbox.h:131</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a964851aa809a43363727103b694cd19c"><div class="ttname"><a href="imap_2private_8h.html#a964851aa809a43363727103b694cd19c">IMAP_NEWMAIL_PENDING</a></div><div class="ttdeci">#define IMAP_NEWMAIL_PENDING</div><div class="ttdoc">New mail is waiting on the server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00069">private.h:69</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="imap_2private_8h_html_add0869283ae9186ac31a7169b246cc6b"><div class="ttname"><a href="imap_2private_8h.html#add0869283ae9186ac31a7169b246cc6b">IMAP_RES_CONTINUE</a></div><div class="ttdeci">#define IMAP_RES_CONTINUE</div><div class="ttdoc">* ... </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00057">private.h:57</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0dc6eddac9eeaa0b346ad3e2356260b0"><div class="ttname"><a href="imap_2private_8h.html#a0dc6eddac9eeaa0b346ad3e2356260b0">IMAP_CAP_IDLE</a></div><div class="ttdeci">#define IMAP_CAP_IDLE</div><div class="ttdoc">RFC2177: IDLE. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00134">private.h:134</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3689a88c930024deb05c9fd6703a451b"><div class="ttname"><a href="imap_2private_8h.html#a3689a88c930024deb05c9fd6703a451b">IMAP_EXPUNGE_PENDING</a></div><div class="ttdeci">#define IMAP_EXPUNGE_PENDING</div><div class="ttdoc">Messages on the server have been expunged. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00068">private.h:68</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a></div><div class="ttdeci">MxStatus</div><div class="ttdoc">Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00075">mxapi.h:75</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-46" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_acfd4b6567f210cef7e4dcffa45f263ce_cgraph.svg" width="899" height="474"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-47" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_acfd4b6567f210cef7e4dcffa45f263ce_icgraph.svg" width="378" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4be797f9a98071e6bb8b2ca4822a0d5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be797f9a98071e6bb8b2ca4822a0d5d">&#9670;&nbsp;</a></span>imap_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int imap_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structImapMboxData.html">ImapMboxData</a> *&#160;</td>
          <td class="paramname"><em>mdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refresh the number of total and new messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>IMAP <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
    <tr><td class="paramname">mdata</td><td>IMAP <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> data </td></tr>
    <tr><td class="paramname">queue</td><td>Queue the STATUS command </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Total number of messages </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01176">1176</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;{</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordtype">char</span> *uidvalidity_flag = NULL;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordtype">char</span> cmd[2048];</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span> (!adata || !mdata)</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="comment">/* Don&#39;t issue STATUS on the selected mailbox, it will be NOOPed or</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">   * IDLEd elsewhere.</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">   * adata-&gt;mailbox may be NULL for connections other than the current</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">   * mailbox&#39;s. */</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a> &amp;&amp; (adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a>-&gt;<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> == mdata))</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a>-&gt;<a class="code" href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">has_new</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">return</span> mdata-&gt;<a class="code" href="structImapMboxData.html#a1c2e1c96d914106f9a2acb79b86e5acf">messages</a>;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a6217caee48af21c7f08eff5dce816dcf">IMAP_CAP_IMAP4REV1</a>)</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    uidvalidity_flag = <span class="stringliteral">&quot;UIDVALIDITY&quot;</span>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a63566903bb8f426b3ca200804f322562">IMAP_CAP_STATUS</a>)</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    uidvalidity_flag = <span class="stringliteral">&quot;UID-VALIDITY&quot;</span>;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Server doesn&#39;t support STATUS\n&quot;</span>);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  snprintf(cmd, <span class="keyword">sizeof</span>(cmd), <span class="stringliteral">&quot;STATUS %s (UIDNEXT %s UNSEEN RECENT MESSAGES)&quot;</span>,</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;           mdata-&gt;<a class="code" href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">munge_name</a>, uidvalidity_flag);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, cmd, queue ? <a class="code" href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a> : <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a> | <a class="code" href="imap_2private_8h.html#a53f5cb128123d9d6367486ecedfe97e1">IMAP_CMD_POLL</a>);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Error queueing command\n&quot;</span>);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  }</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">return</span> mdata-&gt;<a class="code" href="structImapMboxData.html#a1c2e1c96d914106f9a2acb79b86e5acf">messages</a>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;}</div><div class="ttc" id="imap_2private_8h_html_a53f5cb128123d9d6367486ecedfe97e1"><div class="ttname"><a href="imap_2private_8h.html#a53f5cb128123d9d6367486ecedfe97e1">IMAP_CMD_POLL</a></div><div class="ttdeci">#define IMAP_CMD_POLL</div><div class="ttdoc">Poll the tcp connection before running the imap command. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00076">private.h:76</a></div></div>
<div class="ttc" id="structImapAccountData_html_ab08af69f675be131e1431c11bf6cf4f0"><div class="ttname"><a href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">ImapAccountData::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Current selected mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00076">adata.h:76</a></div></div>
<div class="ttc" id="structMailbox_html_a185d46a268fdf1e34ee061a28d51414e"><div class="ttname"><a href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">Mailbox::has_new</a></div><div class="ttdeci">bool has_new</div><div class="ttdoc">Mailbox has new mail. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdoc">Log at debug level 2. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00041">logging.h:41</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a6217caee48af21c7f08eff5dce816dcf"><div class="ttname"><a href="imap_2private_8h.html#a6217caee48af21c7f08eff5dce816dcf">IMAP_CAP_IMAP4REV1</a></div><div class="ttdeci">#define IMAP_CAP_IMAP4REV1</div><div class="ttdoc">Server supports IMAP4rev1. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00124">private.h:124</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a63566903bb8f426b3ca200804f322562"><div class="ttname"><a href="imap_2private_8h.html#a63566903bb8f426b3ca200804f322562">IMAP_CAP_STATUS</a></div><div class="ttdeci">#define IMAP_CAP_STATUS</div><div class="ttdoc">Server supports STATUS command. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00125">private.h:125</a></div></div>
<div class="ttc" id="structImapAccountData_html_aa1ba7fde388cdd8e1133c1784e5ed4ea"><div class="ttname"><a href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">ImapAccountData::capabilities</a></div><div class="ttdeci">ImapCapFlags capabilities</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00055">adata.h:55</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="imap_2private_8h_html_af5a1e8e10143cb70e9af987686df4108"><div class="ttname"><a href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a></div><div class="ttdeci">#define IMAP_CMD_QUEUE</div><div class="ttdoc">Queue a command, do not execute. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00075">private.h:75</a></div></div>
<div class="ttc" id="structImapMboxData_html_ac08c3acbb69452d9db121fddbbf1637a"><div class="ttname"><a href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">ImapMboxData::munge_name</a></div><div class="ttdeci">char * munge_name</div><div class="ttdoc">Munged version of the mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00041">mdata.h:41</a></div></div>
<div class="ttc" id="structImapMboxData_html_a1c2e1c96d914106f9a2acb79b86e5acf"><div class="ttname"><a href="structImapMboxData.html#a1c2e1c96d914106f9a2acb79b86e5acf">ImapMboxData::messages</a></div><div class="ttdeci">unsigned int messages</div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00053">mdata.h:53</a></div></div>
</div><!-- fragment --><div id="dynsection-48" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a4be797f9a98071e6bb8b2ca4822a0d5d_cgraph.svg" width="255" height="62"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-49" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a4be797f9a98071e6bb8b2ca4822a0d5d_icgraph.svg" width="324" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0d5f24d9ba8d3ef9e95134cae1198408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d5f24d9ba8d3ef9e95134cae1198408">&#9670;&nbsp;</a></span>imap_path_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_path_status </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Refresh the number of total and new messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path </td></tr>
    <tr><td class="paramname">queue</td><td>Queue the STATUS command </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Total number of messages </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01235">1235</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;{</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keyword">struct </span><a class="code" href="structMailbox.html">Mailbox</a> *m = <a class="code" href="mx_8c.html#a84a2454384495994852f5c8c797070dc">mx_mbox_find2</a>(path);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> is_temp = !m;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">if</span> (is_temp)</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    m = <a class="code" href="mx_8c.html#ab437d031227dc741c63cf2791c6b4562">mx_path_resolve</a>(path);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mx_8c.html#ac32b635494a705cc5828b7686b910834">mx_mbox_ac_link</a>(m))</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="mailbox_8c.html#aba915aae97477d1ecc6428a06f92dac9">mailbox_free</a>(&amp;m);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="imap_8c.html#a0b252c6e7f2cc646db9414ea27a11a55">imap_mailbox_status</a>(m, queue);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">if</span> (is_temp)</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="mx_8c.html#a0531a5f089718b745413a38ea8d5e2a6">mx_ac_remove</a>(m);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <a class="code" href="mailbox_8c.html#aba915aae97477d1ecc6428a06f92dac9">mailbox_free</a>(&amp;m);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;}</div><div class="ttc" id="mx_8c_html_a84a2454384495994852f5c8c797070dc"><div class="ttname"><a href="mx_8c.html#a84a2454384495994852f5c8c797070dc">mx_mbox_find2</a></div><div class="ttdeci">struct Mailbox * mx_mbox_find2(const char *path)</div><div class="ttdoc">Find a Mailbox on an Account. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01640">mx.c:1640</a></div></div>
<div class="ttc" id="mailbox_8c_html_aba915aae97477d1ecc6428a06f92dac9"><div class="ttname"><a href="mailbox_8c.html#aba915aae97477d1ecc6428a06f92dac9">mailbox_free</a></div><div class="ttdeci">void mailbox_free(struct Mailbox **ptr)</div><div class="ttdoc">Free a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00087">mailbox.c:87</a></div></div>
<div class="ttc" id="structMailbox_html"><div class="ttname"><a href="structMailbox.html">Mailbox</a></div><div class="ttdoc">A mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00081">mailbox.h:81</a></div></div>
<div class="ttc" id="imap_8c_html_a0b252c6e7f2cc646db9414ea27a11a55"><div class="ttname"><a href="imap_8c.html#a0b252c6e7f2cc646db9414ea27a11a55">imap_mailbox_status</a></div><div class="ttdeci">int imap_mailbox_status(struct Mailbox *m, bool queue)</div><div class="ttdoc">Refresh the number of total and new messages. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01270">imap.c:1270</a></div></div>
<div class="ttc" id="mx_8c_html_ab437d031227dc741c63cf2791c6b4562"><div class="ttname"><a href="mx_8c.html#ab437d031227dc741c63cf2791c6b4562">mx_path_resolve</a></div><div class="ttdeci">struct Mailbox * mx_path_resolve(const char *path)</div><div class="ttdoc">Get a Mailbox for a path. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01668">mx.c:1668</a></div></div>
<div class="ttc" id="mx_8c_html_ac32b635494a705cc5828b7686b910834"><div class="ttname"><a href="mx_8c.html#ac32b635494a705cc5828b7686b910834">mx_mbox_ac_link</a></div><div class="ttdeci">bool mx_mbox_ac_link(struct Mailbox *m)</div><div class="ttdoc">Link a Mailbox to an existing or new Account. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l00267">mx.c:267</a></div></div>
<div class="ttc" id="mx_8c_html_a0531a5f089718b745413a38ea8d5e2a6"><div class="ttname"><a href="mx_8c.html#a0531a5f089718b745413a38ea8d5e2a6">mx_ac_remove</a></div><div class="ttdeci">int mx_ac_remove(struct Mailbox *m)</div><div class="ttdoc">Remove a Mailbox from an Account and delete Account if empty. </div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01769">mx.c:1769</a></div></div>
</div><!-- fragment --><div id="dynsection-50" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a0d5f24d9ba8d3ef9e95134cae1198408_cgraph.svg" width="535" height="271"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-51" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a0d5f24d9ba8d3ef9e95134cae1198408_icgraph.svg" width="362" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0b252c6e7f2cc646db9414ea27a11a55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b252c6e7f2cc646db9414ea27a11a55">&#9670;&nbsp;</a></span>imap_mailbox_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_mailbox_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Refresh the number of total and new messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">queue</td><td>Queue the STATUS command </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Total number of messages </td></tr>
    <tr><td class="paramname">-1</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Prepare the mailbox if we are not connected </dd></dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01270">1270</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;{</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="keywordflow">if</span> (!adata || !mdata)</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="imap_8c.html#a4be797f9a98071e6bb8b2ca4822a0d5d">imap_status</a>(adata, mdata, queue);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;}</div><div class="ttc" id="imap_8c_html_a4be797f9a98071e6bb8b2ca4822a0d5d"><div class="ttname"><a href="imap_8c.html#a4be797f9a98071e6bb8b2ca4822a0d5d">imap_status</a></div><div class="ttdeci">static int imap_status(struct ImapAccountData *adata, struct ImapMboxData *mdata, bool queue)</div><div class="ttdoc">Refresh the number of total and new messages. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01176">imap.c:1176</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-52" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a0b252c6e7f2cc646db9414ea27a11a55_cgraph.svg" width="354" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-53" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a0b252c6e7f2cc646db9414ea27a11a55_icgraph.svg" width="415" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a36034876b5ce260ff6d70a435f8f36ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36034876b5ce260ff6d70a435f8f36ca">&#9670;&nbsp;</a></span>imap_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_subscribe </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>subscribe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribe to a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> path </td></tr>
    <tr><td class="paramname">subscribe</td><td>True: subscribe, false: unsubscribe </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01286">1286</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;{</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = NULL;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = NULL;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordtype">char</span> buf[2048];</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> err;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="imap_2private_8h.html#ac1109505626c478d320c9817315c372b">imap_adata_find</a>(path, &amp;adata, &amp;mdata) &lt; 0)</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">if</span> (subscribe)</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Subscribing to %s...&quot;</span>), mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unsubscribing from %s...&quot;</span>), mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%sSUBSCRIBE %s&quot;</span>, subscribe ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;UN&quot;</span>, mdata-&gt;<a class="code" href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">munge_name</a>);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, buf, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="imap_2mdata_8c.html#af9402720638723993c57f16f8e84a398">imap_mdata_free</a>((<span class="keywordtype">void</span> *) &amp;mdata);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_imap_check_subscribed =</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_check_subscribed&quot;</span>);</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">if</span> (c_imap_check_subscribed)</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordtype">char</span> mbox[1024];</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="buffer_8c.html#ab807be90af362e2c91aa45993fda0d5d">mutt_buffer_init</a>(&amp;err);</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    err.dsize = 256;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    err.data = <a class="code" href="memory_8c.html#a264da4dc58e6dc8983285bd1f538f24d">mutt_mem_malloc</a>(err.dsize);</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordtype">size_t</span> len = snprintf(mbox, <span class="keyword">sizeof</span>(mbox), <span class="stringliteral">&quot;%smailboxes &quot;</span>, subscribe ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;un&quot;</span>);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="imap_2private_8h.html#a6a0f18e27558517a063dcf464f2ffd4e">imap_quote_string</a>(mbox + len, <span class="keyword">sizeof</span>(mbox) - len, path, <span class="keyword">true</span>);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="init_8c.html#a136d8ba552e1a6f982e8349e0629ee8d">mutt_parse_rc_line</a>(mbox, &amp;err))</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Error adding subscribed mailbox: %s\n&quot;</span>, err.data);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;err.data);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keywordflow">if</span> (subscribe)</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Subscribed to %s&quot;</span>), mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unsubscribed from %s&quot;</span>), mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <a class="code" href="imap_2mdata_8c.html#af9402720638723993c57f16f8e84a398">imap_mdata_free</a>((<span class="keywordtype">void</span> *) &amp;mdata);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div><div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_af9402720638723993c57f16f8e84a398"><div class="ttname"><a href="imap_2mdata_8c.html#af9402720638723993c57f16f8e84a398">imap_mdata_free</a></div><div class="ttdeci">void imap_mdata_free(void **ptr)</div><div class="ttdoc">Free the private Mailbox data - Implements Mailbox::mdata_free() </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00040">mdata.c:40</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="init_8c_html_a136d8ba552e1a6f982e8349e0629ee8d"><div class="ttname"><a href="init_8c.html#a136d8ba552e1a6f982e8349e0629ee8d">mutt_parse_rc_line</a></div><div class="ttdeci">enum CommandResult mutt_parse_rc_line(const char *line, struct Buffer *err)</div><div class="ttdoc">Parse a line of user config. </div><div class="ttdef"><b>Definition:</b> <a href="init_8c_source.html#l01039">init.c:1039</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac1109505626c478d320c9817315c372b"><div class="ttname"><a href="imap_2private_8h.html#ac1109505626c478d320c9817315c372b">imap_adata_find</a></div><div class="ttdeci">int imap_adata_find(const char *path, struct ImapAccountData **adata, struct ImapMboxData **mdata)</div><div class="ttdoc">Find the Account data for this path. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00072">util.c:72</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="memory_8c_html_a264da4dc58e6dc8983285bd1f538f24d"><div class="ttname"><a href="memory_8c.html#a264da4dc58e6dc8983285bd1f538f24d">mutt_mem_malloc</a></div><div class="ttdeci">void * mutt_mem_malloc(size_t size)</div><div class="ttdoc">Allocate memory on the heap. </div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00090">memory.c:90</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="structImapMboxData_html_ad16e4ff0444eceaf5cf6700d00cc5c9f"><div class="ttname"><a href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">ImapMboxData::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00040">mdata.h:40</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="buffer_8c_html_ab807be90af362e2c91aa45993fda0d5d"><div class="ttname"><a href="buffer_8c.html#ab807be90af362e2c91aa45993fda0d5d">mutt_buffer_init</a></div><div class="ttdeci">struct Buffer * mutt_buffer_init(struct Buffer *buf)</div><div class="ttdoc">Initialise a new Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00046">buffer.c:46</a></div></div>
<div class="ttc" id="structImapMboxData_html_ac08c3acbb69452d9db121fddbbf1637a"><div class="ttname"><a href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">ImapMboxData::munge_name</a></div><div class="ttdeci">char * munge_name</div><div class="ttdoc">Munged version of the mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00041">mdata.h:41</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a6a0f18e27558517a063dcf464f2ffd4e"><div class="ttname"><a href="imap_2private_8h.html#a6a0f18e27558517a063dcf464f2ffd4e">imap_quote_string</a></div><div class="ttdeci">void imap_quote_string(char *dest, size_t dlen, const char *src, bool quote_backtick)</div><div class="ttdoc">quote string according to IMAP rules </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00840">util.c:840</a></div></div>
</div><!-- fragment --><div id="dynsection-54" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a36034876b5ce260ff6d70a435f8f36ca_cgraph.svg" width="330" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-55" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a36034876b5ce260ff6d70a435f8f36ca_icgraph.svg" width="364" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a768ec60d7525b728f5f1b1cd6789c8e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768ec60d7525b728f5f1b1cd6789c8e8">&#9670;&nbsp;</a></span>imap_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_complete </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to complete an IMAP folder path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> for result </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of buffer </td></tr>
    <tr><td class="paramname">path</td><td>Partial mailbox name to complete </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>Given a partial IMAP folder path, return a string which adds as much to the path as is unique </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01343">1343</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;{</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = NULL;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = NULL;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="keywordtype">char</span> tmp[2048];</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapList.html">ImapList</a> listresp = { 0 };</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordtype">char</span> completion[1024];</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordtype">int</span> clen;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keywordtype">size_t</span> matchlen = 0;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordtype">int</span> completions = 0;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="imap_2private_8h.html#ac1109505626c478d320c9817315c372b">imap_adata_find</a>(path, &amp;adata, &amp;mdata) &lt; 0)</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(buf, path, buflen);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="imap_8c.html#ac58d293937015b8560ee115503d199ff">complete_hosts</a>(buf, buflen);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="comment">/* fire off command */</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_imap_list_subscribed =</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_list_subscribed&quot;</span>);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%s \&quot;\&quot; \&quot;%s%%\&quot;&quot;</span>,</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;           c_imap_list_subscribed ? <span class="stringliteral">&quot;LSUB&quot;</span> : <span class="stringliteral">&quot;LIST&quot;</span>, mdata-&gt;<a class="code" href="structImapMboxData.html#a3c6e05d5048bd093090211073ef69a4f">real_name</a>);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <a class="code" href="command_8c.html#a07786a21982bd266c8faca5423b7f2cf">imap_cmd_start</a>(adata, tmp);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">/* and see what the results are */</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <a class="code" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(completion, mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>, <span class="keyword">sizeof</span>(completion));</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <a class="code" href="imap_2mdata_8c.html#af9402720638723993c57f16f8e84a398">imap_mdata_free</a>((<span class="keywordtype">void</span> *) &amp;mdata);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#a697298f1ba714ecf1915e9a28e6ce2ad">cmdresult</a> = &amp;listresp;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  {</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    listresp.<a class="code" href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">name</a> = NULL;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    rc = <a class="code" href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a>(adata);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">if</span> ((rc == <a class="code" href="imap_2private_8h.html#add0869283ae9186ac31a7169b246cc6b">IMAP_RES_CONTINUE</a>) &amp;&amp; listresp.<a class="code" href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">name</a>)</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="comment">/* if the folder isn&#39;t selectable, append delimiter to force browse</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">       * to enter it on second tab. */</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">if</span> (listresp.<a class="code" href="structImapList.html#a18ef4b7bcc281c4f69370bc73b97b6af">noselect</a>)</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        clen = strlen(listresp.<a class="code" href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">name</a>);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        listresp.<a class="code" href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">name</a>[clen++] = listresp.<a class="code" href="structImapList.html#ae781ce990b408777cf84f7da397303fe">delim</a>;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        listresp.<a class="code" href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">name</a>[clen] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="comment">/* copy in first word */</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="keywordflow">if</span> (!completions)</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <a class="code" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(completion, listresp.<a class="code" href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">name</a>, <span class="keyword">sizeof</span>(completion));</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        matchlen = strlen(completion);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        completions++;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      matchlen = <a class="code" href="imap_8c.html#a4dae2198b19fe4fbf2bfecb671c72f73">longest_common_prefix</a>(completion, listresp.<a class="code" href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">name</a>, 0, matchlen);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      completions++;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  } <span class="keywordflow">while</span> (rc == <a class="code" href="imap_2private_8h.html#add0869283ae9186ac31a7169b246cc6b">IMAP_RES_CONTINUE</a>);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#a697298f1ba714ecf1915e9a28e6ce2ad">cmdresult</a> = NULL;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keywordflow">if</span> (completions)</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">/* reformat output */</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="imap_2private_8h.html#a1d2910263e453d3a53faa5c17afa0946">imap_qualify_path</a>(buf, buflen, &amp;adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, completion);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="dump_8c.html#ab9cf3d06c285c7d21065ef96a32aa6c6">mutt_pretty_mailbox</a>(buf, buflen);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;}</div><div class="ttc" id="dump_8c_html_ab9cf3d06c285c7d21065ef96a32aa6c6"><div class="ttname"><a href="dump_8c.html#ab9cf3d06c285c7d21065ef96a32aa6c6">mutt_pretty_mailbox</a></div><div class="ttdeci">void mutt_pretty_mailbox(char *buf, size_t buflen)</div><div class="ttdoc">Shorten a mailbox path using &amp;#39;~&amp;#39; or &amp;#39;=&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="muttlib_8c_source.html#l00526">muttlib.c:526</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a1d2910263e453d3a53faa5c17afa0946"><div class="ttname"><a href="imap_2private_8h.html#a1d2910263e453d3a53faa5c17afa0946">imap_qualify_path</a></div><div class="ttdeci">void imap_qualify_path(char *buf, size_t buflen, struct ConnAccount *conn_account, char *path)</div><div class="ttdoc">Make an absolute IMAP folder target. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00823">util.c:823</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="command_8c_html_a8b9d7c9333e35981d94074e9dcc28e6f"><div class="ttname"><a href="command_8c.html#a8b9d7c9333e35981d94074e9dcc28e6f">imap_cmd_step</a></div><div class="ttdeci">int imap_cmd_step(struct ImapAccountData *adata)</div><div class="ttdoc">Reads server responses from an IMAP command. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01079">command.c:1079</a></div></div>
<div class="ttc" id="structConnection_html_ac3c39549b6611c8eaed2a25573b5c432"><div class="ttname"><a href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">Connection::account</a></div><div class="ttdeci">struct ConnAccount account</div><div class="ttdoc">Account details: username, password, etc. </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00036">connection.h:36</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_af9402720638723993c57f16f8e84a398"><div class="ttname"><a href="imap_2mdata_8c.html#af9402720638723993c57f16f8e84a398">imap_mdata_free</a></div><div class="ttdeci">void imap_mdata_free(void **ptr)</div><div class="ttdoc">Free the private Mailbox data - Implements Mailbox::mdata_free() </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00040">mdata.c:40</a></div></div>
<div class="ttc" id="structImapList_html"><div class="ttname"><a href="structImapList.html">ImapList</a></div><div class="ttdoc">Items in an IMAP browser. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00148">private.h:148</a></div></div>
<div class="ttc" id="command_8c_html_a07786a21982bd266c8faca5423b7f2cf"><div class="ttname"><a href="command_8c.html#a07786a21982bd266c8faca5423b7f2cf">imap_cmd_start</a></div><div class="ttdeci">int imap_cmd_start(struct ImapAccountData *adata, const char *cmdstr)</div><div class="ttdoc">Given an IMAP command, send it to the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01065">command.c:1065</a></div></div>
<div class="ttc" id="structImapList_html_ae781ce990b408777cf84f7da397303fe"><div class="ttname"><a href="structImapList.html#ae781ce990b408777cf84f7da397303fe">ImapList::delim</a></div><div class="ttdeci">char delim</div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00151">private.h:151</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac1109505626c478d320c9817315c372b"><div class="ttname"><a href="imap_2private_8h.html#ac1109505626c478d320c9817315c372b">imap_adata_find</a></div><div class="ttdeci">int imap_adata_find(const char *path, struct ImapAccountData **adata, struct ImapMboxData **mdata)</div><div class="ttdoc">Find the Account data for this path. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00072">util.c:72</a></div></div>
<div class="ttc" id="imap_8c_html_ac58d293937015b8560ee115503d199ff"><div class="ttname"><a href="imap_8c.html#ac58d293937015b8560ee115503d199ff">complete_hosts</a></div><div class="ttdeci">static int complete_hosts(char *buf, size_t buflen)</div><div class="ttdoc">Look for completion matches for mailboxes. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00386">imap.c:386</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="structImapList_html_ab748e7763b4a908456f4c7a647c87012"><div class="ttname"><a href="structImapList.html#ab748e7763b4a908456f4c7a647c87012">ImapList::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00150">private.h:150</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="structImapMboxData_html_ad16e4ff0444eceaf5cf6700d00cc5c9f"><div class="ttname"><a href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">ImapMboxData::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00040">mdata.h:40</a></div></div>
<div class="ttc" id="structImapMboxData_html_a3c6e05d5048bd093090211073ef69a4f"><div class="ttname"><a href="structImapMboxData.html#a3c6e05d5048bd093090211073ef69a4f">ImapMboxData::real_name</a></div><div class="ttdeci">char * real_name</div><div class="ttdoc">Original Mailbox name, e.g.: INBOX can be just \0. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00042">mdata.h:42</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="imap_8c_html_a4dae2198b19fe4fbf2bfecb671c72f73"><div class="ttname"><a href="imap_8c.html#a4dae2198b19fe4fbf2bfecb671c72f73">longest_common_prefix</a></div><div class="ttdeci">static size_t longest_common_prefix(char *dest, const char *src, size_t start, size_t dlen)</div><div class="ttdoc">Find longest prefix common to two strings. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00365">imap.c:365</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination) </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00749">string.c:749</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="structImapAccountData_html_a697298f1ba714ecf1915e9a28e6ce2ad"><div class="ttname"><a href="structImapAccountData.html#a697298f1ba714ecf1915e9a28e6ce2ad">ImapAccountData::cmdresult</a></div><div class="ttdeci">struct ImapList * cmdresult</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00066">adata.h:66</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="imap_2private_8h_html_add0869283ae9186ac31a7169b246cc6b"><div class="ttname"><a href="imap_2private_8h.html#add0869283ae9186ac31a7169b246cc6b">IMAP_RES_CONTINUE</a></div><div class="ttdeci">#define IMAP_RES_CONTINUE</div><div class="ttdoc">* ... </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00057">private.h:57</a></div></div>
<div class="ttc" id="structImapList_html_a18ef4b7bcc281c4f69370bc73b97b6af"><div class="ttname"><a href="structImapList.html#a18ef4b7bcc281c4f69370bc73b97b6af">ImapList::noselect</a></div><div class="ttdeci">bool noselect</div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00152">private.h:152</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-56" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-56-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-56-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-56-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a768ec60d7525b728f5f1b1cd6789c8e8_cgraph.svg" width="567" height="494"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-57" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-57-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-57-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-57-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_a768ec60d7525b728f5f1b1cd6789c8e8_icgraph.svg" width="303" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab243b759db9258fd8373a350b19ed0b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab243b759db9258fd8373a350b19ed0b8">&#9670;&nbsp;</a></span>imap_fast_trash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_fast_trash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use server COPY command to copy deleted messages to trash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">dest</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> to move to </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Non-fatal error - try fetch/append </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01423">1423</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;{</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keywordtype">char</span> prompt[1024];</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keywordtype">int</span> rc = -1;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="keywordtype">bool</span> triedcreate = <span class="keyword">false</span>;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="keyword">enum</span> <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> err_continue = <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *dest_adata = NULL;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *dest_mdata = NULL;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="imap_2private_8h.html#ac1109505626c478d320c9817315c372b">imap_adata_find</a>(dest, &amp;dest_adata, &amp;dest_mdata) &lt; 0)</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="keyword">struct </span><a class="code" href="structBuffer.html">Buffer</a> sync_cmd = <a class="code" href="buffer_8c.html#a0242aaa9a400d0722a99828776c0403b">mutt_buffer_make</a>(0);</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="comment">/* check that the save-to folder is in the same account */</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="imap_2private_8h.html#ac2225c270b21b238b8f64e1f7090baf0">imap_account_match</a>(&amp;(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>), &amp;(dest_adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>)))</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a51339e1b6c72f67dcc9649e7859789c5">LL_DEBUG3</a>, <span class="stringliteral">&quot;%s not same server as %s\n&quot;</span>, dest, <a class="code" href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a>(m));</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> &amp;&amp; e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> &amp;&amp; e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> &amp;&amp; !e-&gt;<a class="code" href="structEmail.html#a1e108ee29a0c6571211290457ab60756">purge</a>)</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      rc = <a class="code" href="imap_8c.html#abf465f5f6004ebf7bb4ad8e59a2f5b6c">imap_sync_message_for_copy</a>(m, e, &amp;sync_cmd, &amp;err_continue);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;could not sync\n&quot;</span>);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    }</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="comment">/* loop in case of TRYCREATE */</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  {</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    rc = <a class="code" href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a>(m, <span class="stringliteral">&quot;UID COPY&quot;</span>, dest_mdata-&gt;<a class="code" href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">munge_name</a>, <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a31ab4665e994c9b34ba3aa3175f59a39">MUTT_TRASH</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordflow">if</span> (rc == 0)</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;No messages to trash\n&quot;</span>);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      rc = -1;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;could not queue copy\n&quot;</span>);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(ngettext(<span class="stringliteral">&quot;Copying %d message to %s...&quot;</span>, <span class="stringliteral">&quot;Copying %d messages to %s...&quot;</span>, rc),</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                   rc, dest_mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="comment">/* let&#39;s get it on */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    rc = <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, NULL, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="keywordflow">if</span> (rc == <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba7bd7e415b1159bf6461c6a44cb19d7fc">IMAP_EXEC_ERROR</a>)</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">if</span> (triedcreate)</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Already tried to create mailbox %s\n&quot;</span>, dest_mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="comment">/* bail out if command failed for reasons other than nonexistent target */</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(<a class="code" href="imap_2private_8h.html#ade12f477bcb371557bb305b920236e16">imap_get_qualifier</a>(adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>), <span class="stringliteral">&quot;[TRYCREATE]&quot;</span>))</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a51339e1b6c72f67dcc9649e7859789c5">LL_DEBUG3</a>, <span class="stringliteral">&quot;server suggests TRYCREATE\n&quot;</span>);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      snprintf(prompt, <span class="keyword">sizeof</span>(prompt), <a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Create %s?&quot;</span>), dest_mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_confirm_create =</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;          <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;confirm_create&quot;</span>);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <span class="keywordflow">if</span> (c_confirm_create &amp;&amp; (<a class="code" href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a>(prompt, <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>) != <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>))</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      {</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <a class="code" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="imap_8c.html#aee0bf2d345124a22054cbf217b6fb5f0">imap_create_mailbox</a>(adata, dest_mdata-&gt;<a class="code" href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">name</a>) &lt; 0)</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      triedcreate = <span class="keyword">true</span>;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    }</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  } <span class="keywordflow">while</span> (rc == <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba7bd7e415b1159bf6461c6a44cb19d7fc">IMAP_EXEC_ERROR</a>);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="keywordflow">if</span> (rc != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  {</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <a class="code" href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a>(<span class="stringliteral">&quot;imap_fast_trash&quot;</span>, adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="keywordflow">goto</span> out;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  }</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  rc = <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;out:</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <a class="code" href="buffer_8c.html#a59b13bca38b1b314e2bc5ad142d2df49">mutt_buffer_dealloc</a>(&amp;sync_cmd);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <a class="code" href="imap_2mdata_8c.html#af9402720638723993c57f16f8e84a398">imap_mdata_free</a>((<span class="keywordtype">void</span> *) &amp;dest_mdata);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="keywordflow">return</span> ((rc == <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>) ? 0 : -1);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;}</div><div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="mailbox_8h_html_a04aa11207205b6778388dfc8ed56ee0d"><div class="ttname"><a href="mailbox_8h.html#a04aa11207205b6778388dfc8ed56ee0d">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&amp;#39;s path string. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="structConnection_html_ac3c39549b6611c8eaed2a25573b5c432"><div class="ttname"><a href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">Connection::account</a></div><div class="ttdeci">struct ConnAccount account</div><div class="ttdoc">Account details: username, password, etc. </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00036">connection.h:36</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_af9402720638723993c57f16f8e84a398"><div class="ttname"><a href="imap_2mdata_8c.html#af9402720638723993c57f16f8e84a398">imap_mdata_free</a></div><div class="ttdeci">void imap_mdata_free(void **ptr)</div><div class="ttdoc">Free the private Mailbox data - Implements Mailbox::mdata_free() </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00040">mdata.c:40</a></div></div>
<div class="ttc" id="buffer_8c_html_a0242aaa9a400d0722a99828776c0403b"><div class="ttname"><a href="buffer_8c.html#a0242aaa9a400d0722a99828776c0403b">mutt_buffer_make</a></div><div class="ttdeci">struct Buffer mutt_buffer_make(size_t size)</div><div class="ttdoc">Make a new buffer on the stack. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00061">buffer.c:61</a></div></div>
<div class="ttc" id="structBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00033">buffer.h:33</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00048">email.h:48</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac2225c270b21b238b8f64e1f7090baf0"><div class="ttname"><a href="imap_2private_8h.html#ac2225c270b21b238b8f64e1f7090baf0">imap_account_match</a></div><div class="ttdeci">bool imap_account_match(const struct ConnAccount *a1, const struct ConnAccount *a2)</div><div class="ttdoc">Compare two Accounts. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l01049">util.c:1049</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35db"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a></div><div class="ttdeci">QuadOption</div><div class="ttdoc">Possible values for a quad-option. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00035">quad.h:35</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ac1109505626c478d320c9817315c372b"><div class="ttname"><a href="imap_2private_8h.html#ac1109505626c478d320c9817315c372b">imap_adata_find</a></div><div class="ttdeci">int imap_adata_find(const char *path, struct ImapAccountData **adata, struct ImapMboxData **mdata)</div><div class="ttdoc">Find the Account data for this path. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00072">util.c:72</a></div></div>
<div class="ttc" id="buffer_8c_html_a59b13bca38b1b314e2bc5ad142d2df49"><div class="ttname"><a href="buffer_8c.html#a59b13bca38b1b314e2bc5ad142d2df49">mutt_buffer_dealloc</a></div><div class="ttdeci">void mutt_buffer_dealloc(struct Buffer *buf)</div><div class="ttdoc">Release the memory allocated by a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00294">buffer.c:294</a></div></div>
<div class="ttc" id="mutt__logging_8c_html_af068b3f524a31fad293b2fb61dfc4534"><div class="ttname"><a href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a></div><div class="ttdeci">void mutt_clear_error(void)</div><div class="ttdoc">Clear the message line (bottom line of screen) </div><div class="ttdef"><b>Definition:</b> <a href="mutt__logging_8c_source.html#l00112">mutt_logging.c:112</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="imap_8c_html_abf465f5f6004ebf7bb4ad8e59a2f5b6c"><div class="ttname"><a href="imap_8c.html#abf465f5f6004ebf7bb4ad8e59a2f5b6c">imap_sync_message_for_copy</a></div><div class="ttdeci">int imap_sync_message_for_copy(struct Mailbox *m, struct Email *e, struct Buffer *cmd, enum QuadOption *err_continue)</div><div class="ttdoc">Update server to reflect the flags of a single message. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01004">imap.c:1004</a></div></div>
<div class="ttc" id="imap_2private_8h_html_aab316d8524d30a8813bab633aa9505e6"><div class="ttname"><a href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a></div><div class="ttdeci">void imap_error(const char *where, const char *msg)</div><div class="ttdoc">show an error and abort </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00665">util.c:665</a></div></div>
<div class="ttc" id="structEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00059">email.h:59</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="imap_8c_html_a62497a1d8948e9172091840079ee3155"><div class="ttname"><a href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a></div><div class="ttdeci">int imap_exec_msgset(struct Mailbox *m, const char *pre, const char *post, enum MessageType flag, bool changed, bool invert)</div><div class="ttdoc">Prepare commands for all messages matching conditions. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00927">imap.c:927</a></div></div>
<div class="ttc" id="structImapMboxData_html_ad16e4ff0444eceaf5cf6700d00cc5c9f"><div class="ttname"><a href="structImapMboxData.html#ad16e4ff0444eceaf5cf6700d00cc5c9f">ImapMboxData::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00040">mdata.h:40</a></div></div>
<div class="ttc" id="structMailbox_html_af1ff47b8f14a4503c9b8473582b13d5a"><div class="ttname"><a href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">Mailbox::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdoc">Display status messages? </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00118">mailbox.h:118</a></div></div>
<div class="ttc" id="structEmail_html_a1e108ee29a0c6571211290457ab60756"><div class="ttname"><a href="structEmail.html#a1e108ee29a0c6571211290457ab60756">Email::purge</a></div><div class="ttdeci">bool purge</div><div class="ttdoc">Skip trash folder when deleting. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00046">email.h:46</a></div></div>
<div class="ttc" id="mutt_2string_8c_html_aebd2a8a3f8a30062c31fa1474d87cc41"><div class="ttname"><a href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a></div><div class="ttdeci">size_t mutt_istr_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix, ignoring case. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_2string_8c_source.html#l00172">string.c:172</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="imap_8c_html_aee0bf2d345124a22054cbf217b6fb5f0"><div class="ttname"><a href="imap_8c.html#aee0bf2d345124a22054cbf217b6fb5f0">imap_create_mailbox</a></div><div class="ttdeci">int imap_create_mailbox(struct ImapAccountData *adata, char *mailbox)</div><div class="ttdoc">Create a new mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00448">imap.c:448</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="question_2lib_8h_html_a67a4f6d2c21c9de420130089bb20505c"><div class="ttname"><a href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a></div><div class="ttdeci">enum QuadOption mutt_yesorno(const char *msg, enum QuadOption def)</div><div class="ttdoc">Ask the user a Yes/No question. </div><div class="ttdef"><b>Definition:</b> <a href="question_8c_source.html#l00180">question.c:180</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba7bd7e415b1159bf6461c6a44cb19d7fc"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba7bd7e415b1159bf6461c6a44cb19d7fc">IMAP_EXEC_ERROR</a></div><div class="ttdoc">Imap command failure. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00085">private.h:85</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="imap_2private_8h_html_ade12f477bcb371557bb305b920236e16"><div class="ttname"><a href="imap_2private_8h.html#ade12f477bcb371557bb305b920236e16">imap_get_qualifier</a></div><div class="ttdeci">char * imap_get_qualifier(char *buf)</div><div class="ttdoc">Get the qualifier from a tagged response. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00775">util.c:775</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdoc">Log at debug level 1. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00040">logging.h:40</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="structImapAccountData_html_ae2a1c679abb95b27819897b57ee436fd"><div class="ttname"><a href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">ImapAccountData::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00059">adata.h:59</a></div></div>
<div class="ttc" id="structEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00045">email.h:45</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a></div><div class="ttdoc">User answered &amp;#39;No&amp;#39;, or assume &amp;#39;No&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00038">quad.h:38</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="structImapMboxData_html_ac08c3acbb69452d9db121fddbbf1637a"><div class="ttname"><a href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">ImapMboxData::munge_name</a></div><div class="ttdeci">char * munge_name</div><div class="ttdoc">Munged version of the mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00041">mdata.h:41</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a31ab4665e994c9b34ba3aa3175f59a39"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a31ab4665e994c9b34ba3aa3175f59a39">MUTT_TRASH</a></div><div class="ttdoc">Trashed messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00104">mutt.h:104</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9a51339e1b6c72f67dcc9649e7859789c5"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a51339e1b6c72f67dcc9649e7859789c5">LL_DEBUG3</a></div><div class="ttdoc">Log at debug level 3. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00042">logging.h:42</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdoc">User answered &amp;#39;Yes&amp;#39;, or assume &amp;#39;Yes&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-58" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-58-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-58-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-58-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ab243b759db9258fd8373a350b19ed0b8_cgraph.svg" width="607" height="846"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-59" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-59-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-59-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-59-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ab243b759db9258fd8373a350b19ed0b8_icgraph.svg" width="296" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac964d627e8a2fad2b74d00096594d0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac964d627e8a2fad2b74d00096594d0ed">&#9670;&nbsp;</a></span>imap_sync_mailbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> imap_sync_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>expunge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>close</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sync all the changes to the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
    <tr><td class="paramname">expunge</td><td>if true do expunge </td></tr>
    <tr><td class="paramname">close</td><td>if true we move imap state to CLOSE </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...">MxStatus</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The flag retvals come from a call to <a class="el" href="imap_8c.html#acfd4b6567f210cef7e4dcffa45f263ce" title="use the NOOP or IDLE command to poll for new mail ">imap_check_mailbox()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01534">1534</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;{</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> **emails = NULL;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> &lt; <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aad9e8eb2d142788743071016963183f21">IMAP_SELECTED</a>)</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;no mailbox selected\n&quot;</span>);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">/* This function is only called when the calling code expects the context</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">   * to be changed. */</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <a class="code" href="imap_2private_8h.html#a2d2129a01a682441eeec2eaaeb4015ce">imap_allow_reopen</a>(m);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> check = <a class="code" href="imap_8c.html#acfd4b6567f210cef7e4dcffa45f263ce">imap_check_mailbox</a>(m, <span class="keyword">false</span>);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="keywordflow">if</span> (check == <a class="code" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>)</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">return</span> check;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">/* if we are expunging anyway, we can do deleted messages very quickly... */</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="keywordflow">if</span> (expunge &amp;&amp; (m-&gt;<a class="code" href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">rights</a> &amp; <a class="code" href="mailbox_8h.html#a7ada20153d03e30afe22e55e32d61fea">MUTT_ACL_DELETE</a>))</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    rc = <a class="code" href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a>(m, <span class="stringliteral">&quot;UID STORE&quot;</span>, <span class="stringliteral">&quot;+FLAGS.SILENT (\\Deleted)&quot;</span>,</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                          <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e">MUTT_DELETED</a>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    {</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Expunge failed&quot;</span>));</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    }</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">if</span> (rc &gt; 0)</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    {</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      <span class="comment">/* mark these messages as unchanged so second pass ignores them. Done</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">       * here so BOGUS UW-IMAP 4.7 SILENT FLAGS updates are ignored. */</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> &amp;&amp; e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>)</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;          e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      }</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(ngettext(<span class="stringliteral">&quot;Marking %d message deleted...&quot;</span>,</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                              <span class="stringliteral">&quot;Marking %d messages deleted...&quot;</span>, rc),</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                     rc);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <a class="code" href="imap_2private_8h.html#acd75897efa210794ca144cea1e3f7ca9">imap_hcache_open</a>(adata, mdata);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">/* save messages with real (non-flag) changes */</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>)</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <a class="code" href="message_8c.html#aade70cfb183e32e948a40ba633fd711a">imap_cache_del</a>(m, e);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="imap_2private_8h.html#abe085176ac9153cc83fbfcbc722ccc58">imap_hcache_del</a>(mdata, <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e)-&gt;uid);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    }</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> &amp;&amp; e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>)</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <a class="code" href="imap_2private_8h.html#a4b04cf064a1da9c217a9650f0fd60e68">imap_hcache_put</a>(mdata, e);</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="comment">/* if the message has been rethreaded or attachments have been deleted</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">       * we delete the message and reupload it.</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">       * This works better if we&#39;re expunging, of course. */</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="comment">/* TODO: why the e-&gt;env check? */</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <span class="keywordflow">if</span> ((e-&gt;<a class="code" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> &amp;&amp; e-&gt;<a class="code" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code" href="structEnvelope.html#a3e2b8b426bb895a4817f9bebff11bbcc">changed</a>) || e-&gt;<a class="code" href="structEmail.html#a8d4df03be101c132581352d182ae99ae">attach_del</a>)</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="comment">/* L10N: The plural is chosen by the last %d, i.e. the total number */</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;          <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(ngettext(<span class="stringliteral">&quot;Saving changed message... [%d/%d]&quot;</span>,</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                                <span class="stringliteral">&quot;Saving changed messages... [%d/%d]&quot;</span>, m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>),</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                       i + 1, m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        }</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="keywordtype">bool</span> save_append = m-&gt;<a class="code" href="structMailbox.html#a2481e68c768eb0cb6e17cfcd0f255f79">append</a>;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        m-&gt;<a class="code" href="structMailbox.html#a2481e68c768eb0cb6e17cfcd0f255f79">append</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <a class="code" href="commands_8c.html#a610e2772a6aba82be17e4f683f743913">mutt_save_message_ctx</a>(m, e, <a class="code" href="commands_8h.html#a92125cd8a2854aafc8c436ae8c79869ba2378f5eb717755fb0c81767831962049">SAVE_MOVE</a>, <a class="code" href="commands_8h.html#a43ad43eab306bcad26dd46d38f3516c6a45bf4825b31827e943d5cda99f44b925">TRANSFORM_NONE</a>, m);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        m-&gt;<a class="code" href="structMailbox.html#a2481e68c768eb0cb6e17cfcd0f255f79">append</a> = save_append;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <span class="comment">/* TODO: why the check for e-&gt;env?  Is this possible? */</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;          e-&gt;<a class="code" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code" href="structEnvelope.html#a3e2b8b426bb895a4817f9bebff11bbcc">changed</a> = 0;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <a class="code" href="imap_2private_8h.html#aac4c4b05fb952889e950219e16098099">imap_hcache_close</a>(mdata);</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="comment">/* presort here to avoid doing 10 resorts in imap_exec_msgset */</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">short</span> c_sort = <a class="code" href="helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keywordflow">if</span> (c_sort != <a class="code" href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a>)</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  {</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    emails = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a> = <a class="code" href="memory_8c.html#a264da4dc58e6dc8983285bd1f538f24d">mutt_mem_malloc</a>(m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *));</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    memcpy(m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>, emails, m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *));</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, <a class="code" href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a>, NULL);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    qsort(m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>, m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structEmail.html">Email</a> *), <a class="code" href="imap_8c.html#a5b61cb17f4f6f798ecaf11469dc30f7b">compare_uid</a>);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  }</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  rc = <a class="code" href="imap_8c.html#a6bb8bc94d6695c477624fcb4fe2822ba">sync_helper</a>(m, <a class="code" href="mailbox_8h.html#a7ada20153d03e30afe22e55e32d61fea">MUTT_ACL_DELETE</a>, <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e">MUTT_DELETED</a>, <span class="stringliteral">&quot;\\Deleted&quot;</span>);</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keywordflow">if</span> (rc &gt;= 0)</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    rc |= <a class="code" href="imap_8c.html#a6bb8bc94d6695c477624fcb4fe2822ba">sync_helper</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58">MUTT_FLAG</a>, <span class="stringliteral">&quot;\\Flagged&quot;</span>);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="keywordflow">if</span> (rc &gt;= 0)</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    rc |= <a class="code" href="imap_8c.html#a6bb8bc94d6695c477624fcb4fe2822ba">sync_helper</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a7deaef4ebf08b54c1258f117b9ec6f50">MUTT_OLD</a>, <span class="stringliteral">&quot;Old&quot;</span>);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="keywordflow">if</span> (rc &gt;= 0)</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    rc |= <a class="code" href="imap_8c.html#a6bb8bc94d6695c477624fcb4fe2822ba">sync_helper</a>(m, <a class="code" href="mailbox_8h.html#af726790bdcf33b797e735f03aab88730">MUTT_ACL_SEEN</a>, <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a>, <span class="stringliteral">&quot;\\Seen&quot;</span>);</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keywordflow">if</span> (rc &gt;= 0)</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    rc |= <a class="code" href="imap_8c.html#a6bb8bc94d6695c477624fcb4fe2822ba">sync_helper</a>(m, <a class="code" href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a>, <a class="code" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a>, <span class="stringliteral">&quot;\\Answered&quot;</span>);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="keywordflow">if</span> (c_sort != <a class="code" href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a>)</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, c_sort, NULL);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a> = emails;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  }</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="comment">/* Flush the queued flags if any were changed in sync_helper. */</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <span class="keywordflow">if</span> (rc &gt; 0)</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, NULL, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      rc = -1;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordflow">if</span> (rc &lt; 0)</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">if</span> (close)</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error saving flags. Close anyway?&quot;</span>), <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>) == <a class="code" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a>;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      }</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    }</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <a class="code" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error saving flags&quot;</span>));</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  }</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="comment">/* Update local record of server state to reflect the synchronization just</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment">   * completed.  imap_read_headers always overwrites hcache-origin flags, so</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment">   * there is no need to mutate the hcache after flag-only changes. */</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  {</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keyword">struct </span><a class="code" href="structEmail.html">Email</a> *e = m-&gt;<a class="code" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keyword">struct </span><a class="code" href="structImapEmailData.html">ImapEmailData</a> *<a class="code" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code" href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a>(e);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    edata-&gt;<a class="code" href="structImapEmailData.html#ac0a8cf12be3069914cc0d4288d2124ed">deleted</a> = e-&gt;<a class="code" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    edata-&gt;<a class="code" href="structImapEmailData.html#addcfe8f2eb993fbd3de89041f090a090">flagged</a> = e-&gt;<a class="code" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a>;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    edata-&gt;<a class="code" href="structImapEmailData.html#ac846056c32aa31d97ce6b9a2c7d2c299">old</a> = e-&gt;<a class="code" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    edata-&gt;<a class="code" href="structImapEmailData.html#adbcc9070eab67c69d1d2fcd48aa04021">read</a> = e-&gt;<a class="code" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    edata-&gt;<a class="code" href="structImapEmailData.html#ae8e6d36ffbdfd91493fb6bf45ee6bfa5">replied</a> = e-&gt;<a class="code" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    e-&gt;<a class="code" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  }</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  m-&gt;<a class="code" href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">changed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="comment">/* We must send an EXPUNGE command if we&#39;re not closing. */</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="keywordflow">if</span> (expunge &amp;&amp; !close &amp;&amp; (m-&gt;<a class="code" href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">rights</a> &amp; <a class="code" href="mailbox_8h.html#a7ada20153d03e30afe22e55e32d61fea">MUTT_ACL_DELETE</a>))</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <a class="code" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Expunging messages from server...&quot;</span>));</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="comment">/* Set expunge bit so we don&#39;t get spurious reopened messages */</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    mdata-&gt;<a class="code" href="structImapMboxData.html#a0361d64a273edc77a83d276053da5b6d">reopen</a> |= <a class="code" href="imap_2private_8h.html#a483485dda7387c36fc50b26f8c3c2b21">IMAP_EXPUNGE_EXPECTED</a>;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;EXPUNGE&quot;</span>, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>) != <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>)</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      mdata-&gt;<a class="code" href="structImapMboxData.html#a0361d64a273edc77a83d276053da5b6d">reopen</a> &amp;= ~<a class="code" href="imap_2private_8h.html#a483485dda7387c36fc50b26f8c3c2b21">IMAP_EXPUNGE_EXPECTED</a>;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      <a class="code" href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a>(<a class="code" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;imap_sync_mailbox: EXPUNGE failed&quot;</span>), adata-&gt;<a class="code" href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">buf</a>);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    }</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    mdata-&gt;<a class="code" href="structImapMboxData.html#a0361d64a273edc77a83d276053da5b6d">reopen</a> &amp;= ~<a class="code" href="imap_2private_8h.html#a483485dda7387c36fc50b26f8c3c2b21">IMAP_EXPUNGE_EXPECTED</a>;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  }</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="keywordflow">if</span> (expunge &amp;&amp; close)</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  {</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    adata-&gt;<a class="code" href="structImapAccountData.html#a7ed31d012f389db2e60adfe46c7b1622">closing</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;CLOSE&quot;</span>, <a class="code" href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a>);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a>;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_message_cache_clean =</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;message_cache_clean&quot;</span>);</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordflow">if</span> (c_message_cache_clean)</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="message_8c.html#a12bfed71f3ebb43d6a7dd014d079370f">imap_cache_clean</a>(m);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keywordflow">return</span> check;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;}</div><div class="ttc" id="structMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aa96f399c92cf03b6f22077d3f68fb75e">MUTT_DELETED</a></div><div class="ttdoc">Deleted messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00097">mutt.h:97</a></div></div>
<div class="ttc" id="structMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00091">mailbox.h:91</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00037">email.h:37</a></div></div>
<div class="ttc" id="group__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00088">logging.h:88</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a></div><div class="ttdoc">Connection is authenticated. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00109">private.h:109</a></div></div>
<div class="ttc" id="commands_8c_html_a610e2772a6aba82be17e4f683f743913"><div class="ttname"><a href="commands_8c.html#a610e2772a6aba82be17e4f683f743913">mutt_save_message_ctx</a></div><div class="ttdeci">int mutt_save_message_ctx(struct Mailbox *m_src, struct Email *e, enum MessageSaveOpt save_opt, enum MessageTransformOpt transform_opt, struct Mailbox *m_dst)</div><div class="ttdoc">Save a message to a given mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="commands_8c_source.html#l01103">commands.c:1103</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a4b04cf064a1da9c217a9650f0fd60e68"><div class="ttname"><a href="imap_2private_8h.html#a4b04cf064a1da9c217a9650f0fd60e68">imap_hcache_put</a></div><div class="ttdeci">int imap_hcache_put(struct ImapMboxData *mdata, struct Email *e)</div><div class="ttdoc">Add an entry to the header cache. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00381">util.c:381</a></div></div>
<div class="ttc" id="imap_2private_8h_html_abe085176ac9153cc83fbfcbc722ccc58"><div class="ttname"><a href="imap_2private_8h.html#abe085176ac9153cc83fbfcbc722ccc58">imap_hcache_del</a></div><div class="ttdeci">int imap_hcache_del(struct ImapMboxData *mdata, unsigned int uid)</div><div class="ttdoc">Delete an item from the header cache. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00399">util.c:399</a></div></div>
<div class="ttc" id="structEmail_html_a8d4df03be101c132581352d182ae99ae"><div class="ttname"><a href="structEmail.html#a8d4df03be101c132581352d182ae99ae">Email::attach_del</a></div><div class="ttdeci">bool attach_del</div><div class="ttdoc">Has an attachment marked for deletion. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00049">email.h:49</a></div></div>
<div class="ttc" id="structImapAccountData_html_aafe97c07683cbc20007c8dd315b2d19e"><div class="ttname"><a href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">ImapAccountData::state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">ImapState, e.g. IMAP_AUTHENTICATED. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00044">adata.h:44</a></div></div>
<div class="ttc" id="structImapMboxData_html_a0361d64a273edc77a83d276053da5b6d"><div class="ttname"><a href="structImapMboxData.html#a0361d64a273edc77a83d276053da5b6d">ImapMboxData::reopen</a></div><div class="ttdeci">ImapOpenFlags reopen</div><div class="ttdoc">Flags, e.g. IMAP_REOPEN_ALLOW. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00044">mdata.h:44</a></div></div>
<div class="ttc" id="commands_8h_html_a43ad43eab306bcad26dd46d38f3516c6a45bf4825b31827e943d5cda99f44b925"><div class="ttname"><a href="commands_8h.html#a43ad43eab306bcad26dd46d38f3516c6a45bf4825b31827e943d5cda99f44b925">TRANSFORM_NONE</a></div><div class="ttdoc">No transformation. </div><div class="ttdef"><b>Definition:</b> <a href="commands_8h_source.html#l00041">commands.h:41</a></div></div>
<div class="ttc" id="message_8c_html_aade70cfb183e32e948a40ba633fd711a"><div class="ttname"><a href="message_8c.html#aade70cfb183e32e948a40ba633fd711a">imap_cache_del</a></div><div class="ttdeci">int imap_cache_del(struct Mailbox *m, struct Email *e)</div><div class="ttdoc">Delete an email from the body cache. </div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l01819">message.c:1819</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58">MUTT_FLAG</a></div><div class="ttdoc">Flagged messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00098">mutt.h:98</a></div></div>
<div class="ttc" id="mutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="structEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00048">email.h:48</a></div></div>
<div class="ttc" id="imap_2edata_8c_html_a849b9e42b71ec60e252b9fdb9c8edfbc"><div class="ttname"><a href="imap_2edata_8c.html#a849b9e42b71ec60e252b9fdb9c8edfbc">imap_edata_get</a></div><div class="ttdeci">struct ImapEmailData * imap_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8c_source.html#l00064">edata.c:64</a></div></div>
<div class="ttc" id="imap_8c_html_a6bb8bc94d6695c477624fcb4fe2822ba"><div class="ttname"><a href="imap_8c.html#a6bb8bc94d6695c477624fcb4fe2822ba">sync_helper</a></div><div class="ttdeci">static int sync_helper(struct Mailbox *m, AclFlags right, enum MessageType flag, const char *name)</div><div class="ttdoc">Sync flag changes to the server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00324">imap.c:324</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="mailbox_8h_html_a7ada20153d03e30afe22e55e32d61fea"><div class="ttname"><a href="mailbox_8h.html#a7ada20153d03e30afe22e55e32d61fea">MUTT_ACL_DELETE</a></div><div class="ttdeci">#define MUTT_ACL_DELETE</div><div class="ttdoc">Delete a message. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00066">mailbox.h:66</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a></div><div class="ttdoc">Messages that have been replied to. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00091">mutt.h:91</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="structImapEmailData_html_addcfe8f2eb993fbd3de89041f090a090"><div class="ttname"><a href="structImapEmailData.html#addcfe8f2eb993fbd3de89041f090a090">ImapEmailData::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00039">edata.h:39</a></div></div>
<div class="ttc" id="structEnvelope_html_a3e2b8b426bb895a4817f9bebff11bbcc"><div class="ttname"><a href="structEnvelope.html#a3e2b8b426bb895a4817f9bebff11bbcc">Envelope::changed</a></div><div class="ttdeci">unsigned char changed</div><div class="ttdoc">Changed fields, e.g. MUTT_ENV_CHANGED_SUBJECT. </div><div class="ttdef"><b>Definition:</b> <a href="envelope_8h_source.html#l00088">envelope.h:88</a></div></div>
<div class="ttc" id="subset_8c_html_a6ee598a96defed645b11cad6e6cb6512"><div class="ttname"><a href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a></div><div class="ttdeci">int cs_subset_str_native_set(const struct ConfigSubset *sub, const char *name, intptr_t value, struct Buffer *err)</div><div class="ttdoc">Natively set the value of a string config item. </div><div class="ttdef"><b>Definition:</b> <a href="subset_8c_source.html#l00305">subset.c:305</a></div></div>
<div class="ttc" id="structImapEmailData_html_ac0a8cf12be3069914cc0d4288d2124ed"><div class="ttname"><a href="structImapEmailData.html#ac0a8cf12be3069914cc0d4288d2124ed">ImapEmailData::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00038">edata.h:38</a></div></div>
<div class="ttc" id="structEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="imap_2private_8h_html_aac4c4b05fb952889e950219e16098099"><div class="ttname"><a href="imap_2private_8h.html#aac4c4b05fb952889e950219e16098099">imap_hcache_close</a></div><div class="ttdeci">void imap_hcache_close(struct ImapMboxData *mdata)</div><div class="ttdoc">Close the header cache. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00340">util.c:340</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdoc">Log at debug level 2. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00041">logging.h:41</a></div></div>
<div class="ttc" id="structEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="sort2_8h_html_ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61"><div class="ttname"><a href="sort2_8h.html#ad7fca38b521558f128d4a566729f5803a33b771290a5128beb6a0f053da322c61">SORT_ORDER</a></div><div class="ttdoc">Sort by the order the messages appear in the mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="sort2_8h_source.html#l00048">sort2.h:48</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="structEmail_html_a34cc4493729d7a3b1f4ed783e739a9ec"><div class="ttname"><a href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">Email::env</a></div><div class="ttdeci">struct Envelope * env</div><div class="ttdoc">Envelope information. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00090">email.h:90</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aad9e8eb2d142788743071016963183f21"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aad9e8eb2d142788743071016963183f21">IMAP_SELECTED</a></div><div class="ttdoc">Mailbox is selected. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00110">private.h:110</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="mailbox_8h_html_ac495d1273b7f2399403a2932b6ff2fd3"><div class="ttname"><a href="mailbox_8h.html#ac495d1273b7f2399403a2932b6ff2fd3">MUTT_ACL_WRITE</a></div><div class="ttdeci">#define MUTT_ACL_WRITE</div><div class="ttdoc">Write to a message (for flagging or linking threads) </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00074">mailbox.h:74</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="helpers_8c_html_af7f3de51c3c2f5b8f527f40c8397a3fc"><div class="ttname"><a href="helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a></div><div class="ttdeci">short cs_subset_sort(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a sort config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00292">helpers.c:292</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a7deaef4ebf08b54c1258f117b9ec6f50"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a7deaef4ebf08b54c1258f117b9ec6f50">MUTT_OLD</a></div><div class="ttdoc">Old messages. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00090">mutt.h:90</a></div></div>
<div class="ttc" id="structImapAccountData_html_a7ed31d012f389db2e60adfe46c7b1622"><div class="ttname"><a href="structImapAccountData.html#a7ed31d012f389db2e60adfe46c7b1622">ImapAccountData::closing</a></div><div class="ttdeci">bool closing</div><div class="ttdoc">If true, we are waiting for CLOSE completion. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00043">adata.h:43</a></div></div>
<div class="ttc" id="imap_2private_8h_html_aab316d8524d30a8813bab633aa9505e6"><div class="ttname"><a href="imap_2private_8h.html#aab316d8524d30a8813bab633aa9505e6">imap_error</a></div><div class="ttdeci">void imap_error(const char *where, const char *msg)</div><div class="ttdoc">show an error and abort </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00665">util.c:665</a></div></div>
<div class="ttc" id="structEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00059">email.h:59</a></div></div>
<div class="ttc" id="memory_8c_html_a264da4dc58e6dc8983285bd1f538f24d"><div class="ttname"><a href="memory_8c.html#a264da4dc58e6dc8983285bd1f538f24d">mutt_mem_malloc</a></div><div class="ttdeci">void * mutt_mem_malloc(size_t size)</div><div class="ttdoc">Allocate memory on the heap. </div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00090">memory.c:90</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="imap_8c_html_a62497a1d8948e9172091840079ee3155"><div class="ttname"><a href="imap_8c.html#a62497a1d8948e9172091840079ee3155">imap_exec_msgset</a></div><div class="ttdeci">int imap_exec_msgset(struct Mailbox *m, const char *pre, const char *post, enum MessageType flag, bool changed, bool invert)</div><div class="ttdoc">Prepare commands for all messages matching conditions. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00927">imap.c:927</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a483485dda7387c36fc50b26f8c3c2b21"><div class="ttname"><a href="imap_2private_8h.html#a483485dda7387c36fc50b26f8c3c2b21">IMAP_EXPUNGE_EXPECTED</a></div><div class="ttdeci">#define IMAP_EXPUNGE_EXPECTED</div><div class="ttdoc">Messages will be expunged from the server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00067">private.h:67</a></div></div>
<div class="ttc" id="mutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a></div><div class="ttdoc">Messages that have been read. </div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00092">mutt.h:92</a></div></div>
<div class="ttc" id="structImapEmailData_html_ae8e6d36ffbdfd91493fb6bf45ee6bfa5"><div class="ttname"><a href="structImapEmailData.html#ae8e6d36ffbdfd91493fb6bf45ee6bfa5">ImapEmailData::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00040">edata.h:40</a></div></div>
<div class="ttc" id="structImapEmailData_html_ac846056c32aa31d97ce6b9a2c7d2c299"><div class="ttname"><a href="structImapEmailData.html#ac846056c32aa31d97ce6b9a2c7d2c299">ImapEmailData::old</a></div><div class="ttdeci">bool old</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00037">edata.h:37</a></div></div>
<div class="ttc" id="structMailbox_html_a2481e68c768eb0cb6e17cfcd0f255f79"><div class="ttname"><a href="structMailbox.html#a2481e68c768eb0cb6e17cfcd0f255f79">Mailbox::append</a></div><div class="ttdeci">bool append</div><div class="ttdoc">Mailbox is opened in append mode. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00113">mailbox.h:113</a></div></div>
<div class="ttc" id="structMailbox_html_af1ff47b8f14a4503c9b8473582b13d5a"><div class="ttname"><a href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">Mailbox::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdoc">Display status messages? </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00118">mailbox.h:118</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a2d2129a01a682441eeec2eaaeb4015ce"><div class="ttname"><a href="imap_2private_8h.html#a2d2129a01a682441eeec2eaaeb4015ce">imap_allow_reopen</a></div><div class="ttdeci">void imap_allow_reopen(struct Mailbox *m)</div><div class="ttdoc">Allow re-opening a folder upon expunge. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l01021">util.c:1021</a></div></div>
<div class="ttc" id="structMailbox_html_a44766ec39ab823278479d0a8fe7b5f73"><div class="ttname"><a href="structMailbox.html#a44766ec39ab823278479d0a8fe7b5f73">Mailbox::rights</a></div><div class="ttdeci">AclFlags rights</div><div class="ttdoc">ACL bits, see AclFlags. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00121">mailbox.h:121</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="question_2lib_8h_html_a67a4f6d2c21c9de420130089bb20505c"><div class="ttname"><a href="question_2lib_8h.html#a67a4f6d2c21c9de420130089bb20505c">mutt_yesorno</a></div><div class="ttdeci">enum QuadOption mutt_yesorno(const char *msg, enum QuadOption def)</div><div class="ttdoc">Ask the user a Yes/No question. </div><div class="ttdef"><b>Definition:</b> <a href="question_8c_source.html#l00180">question.c:180</a></div></div>
<div class="ttc" id="message_8c_html_a12bfed71f3ebb43d6a7dd014d079370f"><div class="ttname"><a href="message_8c.html#a12bfed71f3ebb43d6a7dd014d079370f">imap_cache_clean</a></div><div class="ttdeci">int imap_cache_clean(struct Mailbox *m)</div><div class="ttdoc">Delete all the entries in the message cache. </div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l01838">message.c:1838</a></div></div>
<div class="ttc" id="imap_8c_html_acfd4b6567f210cef7e4dcffa45f263ce"><div class="ttname"><a href="imap_8c.html#acfd4b6567f210cef7e4dcffa45f263ce">imap_check_mailbox</a></div><div class="ttdeci">enum MxStatus imap_check_mailbox(struct Mailbox *m, bool force)</div><div class="ttdoc">use the NOOP or IDLE command to poll for new mail </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01103">imap.c:1103</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="commands_8h_html_a92125cd8a2854aafc8c436ae8c79869ba2378f5eb717755fb0c81767831962049"><div class="ttname"><a href="commands_8h.html#a92125cd8a2854aafc8c436ae8c79869ba2378f5eb717755fb0c81767831962049">SAVE_MOVE</a></div><div class="ttdoc">Move message to another mailbox, removing the original. </div><div class="ttdef"><b>Definition:</b> <a href="commands_8h_source.html#l00052">commands.h:52</a></div></div>
<div class="ttc" id="structEmail_html_a8e810bc67ce7fea04bfe8a3739093d78"><div class="ttname"><a href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">Email::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdoc">Marked important? </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00043">email.h:43</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="structImapAccountData_html_ae2a1c679abb95b27819897b57ee436fd"><div class="ttname"><a href="structImapAccountData.html#ae2a1c679abb95b27819897b57ee436fd">ImapAccountData::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00059">adata.h:59</a></div></div>
<div class="ttc" id="structEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00045">email.h:45</a></div></div>
<div class="ttc" id="structEmail_html_a50d8a8dde5fbf0b6dba934ff7e07fb6b"><div class="ttname"><a href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">Email::edata</a></div><div class="ttdeci">void * edata</div><div class="ttdoc">Driver-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00111">email.h:111</a></div></div>
<div class="ttc" id="structEmail_html_aa26dd591f92e548bc3c56d0b7fdb3e8c"><div class="ttname"><a href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">Email::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdoc">Email has been replied to. </div><div class="ttdef"><b>Definition:</b> <a href="email_8h_source.html#l00054">email.h:54</a></div></div>
<div class="ttc" id="group__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00087">logging.h:87</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="structImapEmailData_html_adbcc9070eab67c69d1d2fcd48aa04021"><div class="ttname"><a href="structImapEmailData.html#adbcc9070eab67c69d1d2fcd48aa04021">ImapEmailData::read</a></div><div class="ttdeci">bool read</div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00036">edata.h:36</a></div></div>
<div class="ttc" id="mailbox_8h_html_af726790bdcf33b797e735f03aab88730"><div class="ttname"><a href="mailbox_8h.html#af726790bdcf33b797e735f03aab88730">MUTT_ACL_SEEN</a></div><div class="ttdeci">#define MUTT_ACL_SEEN</div><div class="ttdoc">Change the &amp;#39;seen&amp;#39; status of a message. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00073">mailbox.h:73</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a></div><div class="ttdoc">User answered &amp;#39;No&amp;#39;, or assume &amp;#39;No&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00038">quad.h:38</a></div></div>
<div class="ttc" id="structMailbox_html_a12ba98c349220ae172753f4f3294ed59"><div class="ttname"><a href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">Mailbox::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Mailbox has been modified. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00114">mailbox.h:114</a></div></div>
<div class="ttc" id="imap_2private_8h_html_af5a1e8e10143cb70e9af987686df4108"><div class="ttname"><a href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a></div><div class="ttdeci">#define IMAP_CMD_QUEUE</div><div class="ttdoc">Queue a command, do not execute. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00075">private.h:75</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="structImapEmailData_html"><div class="ttname"><a href="structImapEmailData.html">ImapEmailData</a></div><div class="ttdoc">IMAP-specific Email data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2edata_8h_source.html#l00033">edata.h:33</a></div></div>
<div class="ttc" id="imap_8c_html_a5b61cb17f4f6f798ecaf11469dc30f7b"><div class="ttname"><a href="imap_8c.html#a5b61cb17f4f6f798ecaf11469dc30f7b">compare_uid</a></div><div class="ttdeci">static int compare_uid(const void *a, const void *b)</div><div class="ttdoc">Compare two Emails by UID - Implements sort_t. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00904">imap.c:904</a></div></div>
<div class="ttc" id="imap_2private_8h_html_acd75897efa210794ca144cea1e3f7ca9"><div class="ttname"><a href="imap_2private_8h.html#acd75897efa210794ca144cea1e3f7ca9">imap_hcache_open</a></div><div class="ttdeci">void imap_hcache_open(struct ImapAccountData *adata, struct ImapMboxData *mdata)</div><div class="ttdoc">Open a header cache. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00297">util.c:297</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a></div><div class="ttdeci">MxStatus</div><div class="ttdoc">Return values from mbox_check(), mbox_check_stats(), mbox_snc(), and mbox_close() ...</div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00075">mxapi.h:75</a></div></div>
<div class="ttc" id="quad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdoc">User answered &amp;#39;Yes&amp;#39;, or assume &amp;#39;Yes&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
<div class="ttc" id="mxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdoc">An error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="mxapi_8h_source.html#l00077">mxapi.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-60" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-60-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-60-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-60-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ac964d627e8a2fad2b74d00096594d0ed_cgraph.svg" width="999" height="1148"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-61" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-61-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-61-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-61-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ac964d627e8a2fad2b74d00096594d0ed_icgraph.svg" width="339" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae508cb6f612071ea4549814aa3532c89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae508cb6f612071ea4549814aa3532c89">&#9670;&nbsp;</a></span>imap_mbox_select()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void imap_mbox_select </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Select a <a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox. ">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01816">1816</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapAccountData.html">ImapAccountData</a> *<a class="code" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = <a class="code" href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a>(m);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="keyword">struct </span><a class="code" href="structImapMboxData.html">ImapMboxData</a> *<a class="code" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code" href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a>(m);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="keywordflow">if</span> (!adata || !mdata)</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *condstore = NULL;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="preprocessor">#ifdef USE_HCACHE</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_imap_condstore = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_condstore&quot;</span>);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="keywordflow">if</span> ((adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#af398c8155e94a68ac74a8092c3525430">IMAP_CAP_CONDSTORE</a>) &amp;&amp; c_imap_condstore)</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    condstore = <span class="stringliteral">&quot; (CONDSTORE)&quot;</span>;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    condstore = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordtype">char</span> buf[<a class="code" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s %s%s&quot;</span>, m-&gt;<a class="code" href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">readonly</a> ? <span class="stringliteral">&quot;EXAMINE&quot;</span> : <span class="stringliteral">&quot;SELECT&quot;</span>,</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;           mdata-&gt;<a class="code" href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">munge_name</a>, condstore);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aad9e8eb2d142788743071016963183f21">IMAP_SELECTED</a>;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <a class="code" href="command_8c.html#a07786a21982bd266c8faca5423b7f2cf">imap_cmd_start</a>(adata, buf);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;}</div><div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structImapAccountData_html_aafe97c07683cbc20007c8dd315b2d19e"><div class="ttname"><a href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">ImapAccountData::state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">ImapState, e.g. IMAP_AUTHENTICATED. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00044">adata.h:44</a></div></div>
<div class="ttc" id="command_8c_html_a07786a21982bd266c8faca5423b7f2cf"><div class="ttname"><a href="command_8c.html#a07786a21982bd266c8faca5423b7f2cf">imap_cmd_start</a></div><div class="ttdeci">int imap_cmd_start(struct ImapAccountData *adata, const char *cmdstr)</div><div class="ttdoc">Given an IMAP command, send it to the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01065">command.c:1065</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="structMailbox_html_ae55237419d0e842cd6efeed0c41d27e8"><div class="ttname"><a href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">Mailbox::readonly</a></div><div class="ttdeci">bool readonly</div><div class="ttdoc">Don&amp;#39;t allow changes to the mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00119">mailbox.h:119</a></div></div>
<div class="ttc" id="imap_2mdata_8c_html_acdbc54bfe42c13f551c58b0a9b9ba8ff"><div class="ttname"><a href="imap_2mdata_8c.html#acdbc54bfe42c13f551c58b0a9b9ba8ff">imap_mdata_get</a></div><div class="ttdeci">struct ImapMboxData * imap_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aad9e8eb2d142788743071016963183f21"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aad9e8eb2d142788743071016963183f21">IMAP_SELECTED</a></div><div class="ttdoc">Mailbox is selected. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00110">private.h:110</a></div></div>
<div class="ttc" id="structMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00136">mailbox.h:136</a></div></div>
<div class="ttc" id="mutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00040">mutt.h:40</a></div></div>
<div class="ttc" id="structAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends) </div><div class="ttdef"><b>Definition:</b> <a href="account_8h_source.html#l00043">account.h:43</a></div></div>
<div class="ttc" id="structImapAccountData_html_aa1ba7fde388cdd8e1133c1784e5ed4ea"><div class="ttname"><a href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">ImapAccountData::capabilities</a></div><div class="ttdeci">ImapCapFlags capabilities</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00055">adata.h:55</a></div></div>
<div class="ttc" id="imap_2adata_8c_html_a0ca70f0a790494cb3e6cbdaf3cb004a4"><div class="ttname"><a href="imap_2adata_8c.html#a0ca70f0a790494cb3e6cbdaf3cb004a4">imap_adata_get</a></div><div class="ttdeci">struct ImapAccountData * imap_adata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Account data for this mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8c_source.html#l00090">adata.c:90</a></div></div>
<div class="ttc" id="structImapAccountData_html"><div class="ttname"><a href="structImapAccountData.html">ImapAccountData</a></div><div class="ttdoc">IMAP-specific Account data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00039">adata.h:39</a></div></div>
<div class="ttc" id="imap_2private_8h_html_af398c8155e94a68ac74a8092c3525430"><div class="ttname"><a href="imap_2private_8h.html#af398c8155e94a68ac74a8092c3525430">IMAP_CAP_CONDSTORE</a></div><div class="ttdeci">#define IMAP_CAP_CONDSTORE</div><div class="ttdoc">RFC7162. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00137">private.h:137</a></div></div>
<div class="ttc" id="structImapMboxData_html"><div class="ttname"><a href="structImapMboxData.html">ImapMboxData</a></div><div class="ttdoc">IMAP-specific Mailbox data -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="structImapMboxData_html_ac08c3acbb69452d9db121fddbbf1637a"><div class="ttname"><a href="structImapMboxData.html#ac08c3acbb69452d9db121fddbbf1637a">ImapMboxData::munge_name</a></div><div class="ttdeci">char * munge_name</div><div class="ttdoc">Munged version of the mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2mdata_8h_source.html#l00041">mdata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-62" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-62-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-62-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-62-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ae508cb6f612071ea4549814aa3532c89_cgraph.svg" width="336" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-63" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-63-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-63-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-63-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ae508cb6f612071ea4549814aa3532c89_icgraph.svg" width="344" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aeb15c04fee226298708dc044645df651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb15c04fee226298708dc044645df651">&#9670;&nbsp;</a></span>imap_login()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_login </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structImapAccountData.html">ImapAccountData</a> *&#160;</td>
          <td class="paramname"><em>adata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an IMAP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>Imap <a class="el" href="structAccount.html" title="A group of associated Mailboxes. ">Account</a> data </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>Ensure <a class="el" href="structImapAccountData.html" title="IMAP-specific Account data -. ">ImapAccountData</a> is connected and logged into the imap server. </p>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l01849">1849</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;{</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="keywordflow">if</span> (!adata)</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> == <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a>)</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <a class="code" href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a>(&amp;adata-&gt;<a class="code" href="structImapAccountData.html#afd638dd8300b5defc46c07392d91b3b3">cmdbuf</a>); <span class="comment">// purge outstanding queued commands</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <a class="code" href="imap_8c.html#a93ed20ff163bf6a15c46071ba357d17a">imap_open_connection</a>(adata);</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> == <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aadadaf209dbca6194806d5ff446358f16">IMAP_CONNECTED</a>)</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="imap_2auth_8c.html#ad4f9217f1dee3172d9fb97cff8f4d2a3">imap_authenticate</a>(adata) == <a class="code" href="auth_8h.html#aba20e35487bf461507e63b783243dbada544df33a559dae35b9b71951782eb897">IMAP_AUTH_SUCCESS</a>)</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> = <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a>;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <a class="code" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;adata-&gt;<a class="code" href="structImapAccountData.html#ac0c66b610779cc9411060acf5f2ce68d">capstr</a>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#a577e30cca37f125532cc73d4cbf51dcb">ssf</a> != 0)</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Communication encrypted at %d bits\n&quot;</span>,</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                   adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#a577e30cca37f125532cc73d4cbf51dcb">ssf</a>);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    }</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <a class="code" href="connaccount_8c.html#a6ccdd2f86849cff1d35afa7608d51c2b">mutt_account_unsetpass</a>(&amp;adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> == <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a>)</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  {</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="comment">/* capabilities may have changed */</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;CAPABILITY&quot;</span>, <a class="code" href="imap_2private_8h.html#a771c673c032c91069650ab8ffadce881">IMAP_CMD_PASS</a>);</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="preprocessor">#ifdef USE_ZLIB</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="comment">/* RFC4978 */</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_imap_deflate = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_deflate&quot;</span>);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">if</span> ((adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#ab68194d22ce0ff39b2a7d7a3078a79ac">IMAP_CAP_COMPRESS</a>) &amp;&amp; c_imap_deflate &amp;&amp;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        (<a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;COMPRESS DEFLATE&quot;</span>, <a class="code" href="imap_2private_8h.html#a771c673c032c91069650ab8ffadce881">IMAP_CMD_PASS</a>) == <a class="code" href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a>))</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      <a class="code" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code" href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;IMAP compression is enabled on connection to %s\n&quot;</span>,</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                 adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>-&gt;<a class="code" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>.<a class="code" href="structConnAccount.html#aa440323ef3111e1faaf33f6a57103a3a">host</a>);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      <a class="code" href="zstrm_8c.html#adcfd8956bdba49fd5bcddda82f39f155">mutt_zstrm_wrap_conn</a>(adata-&gt;<a class="code" href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">conn</a>);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    }</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="comment">/* enable RFC6855, if the server supports that */</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_imap_rfc5161 = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_rfc5161&quot;</span>);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">if</span> (c_imap_rfc5161 &amp;&amp; (adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a086e36b564633941625b16173ef6928c">IMAP_CAP_ENABLE</a>))</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;ENABLE UTF8=ACCEPT&quot;</span>, <a class="code" href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a>);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="comment">/* enable QRESYNC.  Advertising QRESYNC also means CONDSTORE</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment">     * is supported (even if not advertised), so flip that bit. */</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> &amp; <a class="code" href="imap_2private_8h.html#a8d4ace12f8c715e25698841b547d420d">IMAP_CAP_QRESYNC</a>)</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      adata-&gt;<a class="code" href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">capabilities</a> |= <a class="code" href="imap_2private_8h.html#af398c8155e94a68ac74a8092c3525430">IMAP_CAP_CONDSTORE</a>;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_imap_qresync = <a class="code" href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;imap_qresync&quot;</span>);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">if</span> (c_imap_rfc5161 &amp;&amp; c_imap_qresync)</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;ENABLE QRESYNC&quot;</span>, <a class="code" href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a>);</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    }</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="comment">/* get root delimiter, &#39;/&#39; as default */</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    adata-&gt;<a class="code" href="structImapAccountData.html#a02bf8e48eeec528eadf8bd63a2cbb6b4">delim</a> = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, <span class="stringliteral">&quot;LIST \&quot;\&quot; \&quot;\&quot;&quot;</span>, <a class="code" href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a>);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="comment">/* we may need the root delimiter before we open a mailbox */</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <a class="code" href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a>(adata, NULL, <a class="code" href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a>);</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="comment">/* select the mailbox that used to be open before disconnect */</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a>)</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <a class="code" href="imap_8c.html#ae508cb6f612071ea4549814aa3532c89">imap_mbox_select</a>(adata-&gt;<a class="code" href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">mailbox</a>);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  }</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="keywordflow">if</span> (adata-&gt;<a class="code" href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">state</a> &lt; <a class="code" href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a>)</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;}</div><div class="ttc" id="imap_2private_8h_html_ab68194d22ce0ff39b2a7d7a3078a79ac"><div class="ttname"><a href="imap_2private_8h.html#ab68194d22ce0ff39b2a7d7a3078a79ac">IMAP_CAP_COMPRESS</a></div><div class="ttdeci">#define IMAP_CAP_COMPRESS</div><div class="ttdoc">RFC4978: COMPRESS=DEFLATE. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00140">private.h:140</a></div></div>
<div class="ttc" id="zstrm_8c_html_adcfd8956bdba49fd5bcddda82f39f155"><div class="ttname"><a href="zstrm_8c.html#adcfd8956bdba49fd5bcddda82f39f155">mutt_zstrm_wrap_conn</a></div><div class="ttdeci">void mutt_zstrm_wrap_conn(struct Connection *conn)</div><div class="ttdoc">Wrap a compression layer around a Connection. </div><div class="ttdef"><b>Definition:</b> <a href="zstrm_8c_source.html#l00288">zstrm.c:288</a></div></div>
<div class="ttc" id="buffer_8c_html_adb26acff5f6b9bb7c322669bcb7c48e3"><div class="ttname"><a href="buffer_8c.html#adb26acff5f6b9bb7c322669bcb7c48e3">mutt_buffer_reset</a></div><div class="ttdeci">void mutt_buffer_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00079">buffer.c:79</a></div></div>
<div class="ttc" id="helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name. </div><div class="ttdef"><b>Definition:</b> <a href="helpers_8c_source.html#l00073">helpers.c:73</a></div></div>
<div class="ttc" id="structConnection_html_ac3c39549b6611c8eaed2a25573b5c432"><div class="ttname"><a href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">Connection::account</a></div><div class="ttdeci">struct ConnAccount account</div><div class="ttdoc">Account details: username, password, etc. </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00036">connection.h:36</a></div></div>
<div class="ttc" id="structConnection_html_a577e30cca37f125532cc73d4cbf51dcb"><div class="ttname"><a href="structConnection.html#a577e30cca37f125532cc73d4cbf51dcb">Connection::ssf</a></div><div class="ttdeci">unsigned int ssf</div><div class="ttdoc">Security strength factor, in bits (see below) </div><div class="ttdef"><b>Definition:</b> <a href="connection_8h_source.html#l00037">connection.h:37</a></div></div>
<div class="ttc" id="imap_8c_html_a93ed20ff163bf6a15c46071ba357d17a"><div class="ttname"><a href="imap_8c.html#a93ed20ff163bf6a15c46071ba357d17a">imap_open_connection</a></div><div class="ttdeci">int imap_open_connection(struct ImapAccountData *adata)</div><div class="ttdoc">Open an IMAP connection. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l00745">imap.c:745</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aaccebf236e9a58144ad76895c753f4fa0">IMAP_AUTHENTICATED</a></div><div class="ttdoc">Connection is authenticated. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00109">private.h:109</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a086e36b564633941625b16173ef6928c"><div class="ttname"><a href="imap_2private_8h.html#a086e36b564633941625b16173ef6928c">IMAP_CAP_ENABLE</a></div><div class="ttdeci">#define IMAP_CAP_ENABLE</div><div class="ttdoc">RFC5161. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00136">private.h:136</a></div></div>
<div class="ttc" id="structImapAccountData_html_aafe97c07683cbc20007c8dd315b2d19e"><div class="ttname"><a href="structImapAccountData.html#aafe97c07683cbc20007c8dd315b2d19e">ImapAccountData::state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">ImapState, e.g. IMAP_AUTHENTICATED. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00044">adata.h:44</a></div></div>
<div class="ttc" id="structImapAccountData_html_ab08af69f675be131e1431c11bf6cf4f0"><div class="ttname"><a href="structImapAccountData.html#ab08af69f675be131e1431c11bf6cf4f0">ImapAccountData::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Current selected mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00076">adata.h:76</a></div></div>
<div class="ttc" id="structImapAccountData_html_ac0c66b610779cc9411060acf5f2ce68d"><div class="ttname"><a href="structImapAccountData.html#ac0c66b610779cc9411060acf5f2ce68d">ImapAccountData::capstr</a></div><div class="ttdeci">char * capstr</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00054">adata.h:54</a></div></div>
<div class="ttc" id="structNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00036">neomutt.h:36</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05"><div class="ttname"><a href="imap_2private_8h.html#a7d2237d34a8faf227e075b550e768a8ba5fa631101ee3d1ae330868c967e67a05">IMAP_EXEC_SUCCESS</a></div><div class="ttdoc">Imap command executed or queued successfully. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00084">private.h:84</a></div></div>
<div class="ttc" id="structConnAccount_html_aa440323ef3111e1faaf33f6a57103a3a"><div class="ttname"><a href="structConnAccount.html#aa440323ef3111e1faaf33f6a57103a3a">ConnAccount::host</a></div><div class="ttdeci">char host[128]</div><div class="ttdoc">Server to login to. </div><div class="ttdef"><b>Definition:</b> <a href="connaccount_8h_source.html#l00053">connaccount.h:53</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aa3a2a71272eac0688ac86b7f0b87025dc">IMAP_DISCONNECTED</a></div><div class="ttdoc">Disconnected from server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00107">private.h:107</a></div></div>
<div class="ttc" id="logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdoc">Log at debug level 2. </div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00041">logging.h:41</a></div></div>
<div class="ttc" id="structImapAccountData_html_afd638dd8300b5defc46c07392d91b3b3"><div class="ttname"><a href="structImapAccountData.html#afd638dd8300b5defc46c07392d91b3b3">ImapAccountData::cmdbuf</a></div><div class="ttdeci">struct Buffer cmdbuf</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00073">adata.h:73</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a3207e3d0454924e85cf684412e72ed7aadadaf209dbca6194806d5ff446358f16"><div class="ttname"><a href="imap_2private_8h.html#a3207e3d0454924e85cf684412e72ed7aadadaf209dbca6194806d5ff446358f16">IMAP_CONNECTED</a></div><div class="ttdoc">Connected to server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00108">private.h:108</a></div></div>
<div class="ttc" id="structImapAccountData_html_a02bf8e48eeec528eadf8bd63a2cbb6b4"><div class="ttname"><a href="structImapAccountData.html#a02bf8e48eeec528eadf8bd63a2cbb6b4">ImapAccountData::delim</a></div><div class="ttdeci">char delim</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00075">adata.h:75</a></div></div>
<div class="ttc" id="command_8c_html_adeef1f9ecc4cb80dbddee9264200d7bd"><div class="ttname"><a href="command_8c.html#adeef1f9ecc4cb80dbddee9264200d7bd">imap_exec</a></div><div class="ttdeci">int imap_exec(struct ImapAccountData *adata, const char *cmdstr, ImapCmdFlags flags)</div><div class="ttdoc">Execute a command and wait for the response from the server. </div><div class="ttdef"><b>Definition:</b> <a href="command_8c_source.html#l01250">command.c:1250</a></div></div>
<div class="ttc" id="connaccount_8c_html_a6ccdd2f86849cff1d35afa7608d51c2b"><div class="ttname"><a href="connaccount_8c.html#a6ccdd2f86849cff1d35afa7608d51c2b">mutt_account_unsetpass</a></div><div class="ttdeci">void mutt_account_unsetpass(struct ConnAccount *cac)</div><div class="ttdoc">Unset ConnAccount&amp;#39;s password. </div><div class="ttdef"><b>Definition:</b> <a href="connaccount_8c_source.html#l00140">connaccount.c:140</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a771c673c032c91069650ab8ffadce881"><div class="ttname"><a href="imap_2private_8h.html#a771c673c032c91069650ab8ffadce881">IMAP_CMD_PASS</a></div><div class="ttdeci">#define IMAP_CMD_PASS</div><div class="ttdoc">Command contains a password. Suppress logging. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00074">private.h:74</a></div></div>
<div class="ttc" id="structImapAccountData_html_aa1ba7fde388cdd8e1133c1784e5ed4ea"><div class="ttname"><a href="structImapAccountData.html#aa1ba7fde388cdd8e1133c1784e5ed4ea">ImapAccountData::capabilities</a></div><div class="ttdeci">ImapCapFlags capabilities</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00055">adata.h:55</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a0fb5e3a6b094a19b398e095d1305cdad"><div class="ttname"><a href="imap_2private_8h.html#a0fb5e3a6b094a19b398e095d1305cdad">IMAP_CMD_NO_FLAGS</a></div><div class="ttdeci">#define IMAP_CMD_NO_FLAGS</div><div class="ttdoc">No flags are set. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00073">private.h:73</a></div></div>
<div class="ttc" id="group__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00085">logging.h:85</a></div></div>
<div class="ttc" id="imap_8c_html_ae508cb6f612071ea4549814aa3532c89"><div class="ttname"><a href="imap_8c.html#ae508cb6f612071ea4549814aa3532c89">imap_mbox_select</a></div><div class="ttdeci">static void imap_mbox_select(struct Mailbox *m)</div><div class="ttdoc">Select a Mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l01816">imap.c:1816</a></div></div>
<div class="ttc" id="imap_2private_8h_html_af398c8155e94a68ac74a8092c3525430"><div class="ttname"><a href="imap_2private_8h.html#af398c8155e94a68ac74a8092c3525430">IMAP_CAP_CONDSTORE</a></div><div class="ttdeci">#define IMAP_CAP_CONDSTORE</div><div class="ttdoc">RFC7162. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00137">private.h:137</a></div></div>
<div class="ttc" id="imap_2private_8h_html_a8d4ace12f8c715e25698841b547d420d"><div class="ttname"><a href="imap_2private_8h.html#a8d4ace12f8c715e25698841b547d420d">IMAP_CAP_QRESYNC</a></div><div class="ttdeci">#define IMAP_CAP_QRESYNC</div><div class="ttdoc">RFC7162. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00138">private.h:138</a></div></div>
<div class="ttc" id="memory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00040">memory.h:40</a></div></div>
<div class="ttc" id="imap_2auth_8c_html_ad4f9217f1dee3172d9fb97cff8f4d2a3"><div class="ttname"><a href="imap_2auth_8c.html#ad4f9217f1dee3172d9fb97cff8f4d2a3">imap_authenticate</a></div><div class="ttdeci">int imap_authenticate(struct ImapAccountData *adata)</div><div class="ttdoc">Authenticate to an IMAP server. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2auth_8c_source.html#l00107">auth.c:107</a></div></div>
<div class="ttc" id="imap_2private_8h_html_af5a1e8e10143cb70e9af987686df4108"><div class="ttname"><a href="imap_2private_8h.html#af5a1e8e10143cb70e9af987686df4108">IMAP_CMD_QUEUE</a></div><div class="ttdeci">#define IMAP_CMD_QUEUE</div><div class="ttdoc">Queue a command, do not execute. </div><div class="ttdef"><b>Definition:</b> <a href="imap_2private_8h_source.html#l00075">private.h:75</a></div></div>
<div class="ttc" id="structNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items. </div><div class="ttdef"><b>Definition:</b> <a href="neomutt_8h_source.html#l00039">neomutt.h:39</a></div></div>
<div class="ttc" id="auth_8h_html_aba20e35487bf461507e63b783243dbada544df33a559dae35b9b71951782eb897"><div class="ttname"><a href="auth_8h.html#aba20e35487bf461507e63b783243dbada544df33a559dae35b9b71951782eb897">IMAP_AUTH_SUCCESS</a></div><div class="ttdoc">Authentication successful. </div><div class="ttdef"><b>Definition:</b> <a href="auth_8h_source.html#l00039">auth.h:39</a></div></div>
<div class="ttc" id="structImapAccountData_html_af7d73598916e5b0b789c78c904ff47a4"><div class="ttname"><a href="structImapAccountData.html#af7d73598916e5b0b789c78c904ff47a4">ImapAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdef"><b>Definition:</b> <a href="imap_2adata_8h_source.html#l00041">adata.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-64" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-64-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-64-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-64-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aeb15c04fee226298708dc044645df651_cgraph.svg" width="507" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-65" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-65-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-65-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-65-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_aeb15c04fee226298708dc044645df651_icgraph.svg" width="292" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab2645aa08902090e5e29dff471d1bb0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2645aa08902090e5e29dff471d1bb0e">&#9670;&nbsp;</a></span>imap_expand_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int imap_expand_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBuffer.html">Buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="structBuffer.html" title="String manipulation buffer. ">Buffer</a> wrapper around <a class="el" href="group__mx__path__canon.html#ga45a0368f1fc09168bed51ec53ad91bb5" title="Canonicalise a Mailbox path - Implements MxOps::path_canon() -. ">imap_path_canon()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Path to expand </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The path is expanded in place </dd></dl>

<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l02442">2442</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;{</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <a class="code" href="buffer_8c.html#a2837f43a0e59e6cf2f83f23c81e53498">mutt_buffer_alloc</a>(buf, <a class="code" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__mx__path__canon.html#ga45a0368f1fc09168bed51ec53ad91bb5">imap_path_canon</a>(buf-&gt;<a class="code" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>, <a class="code" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;}</div><div class="ttc" id="group__mx__path__canon_html_ga45a0368f1fc09168bed51ec53ad91bb5"><div class="ttname"><a href="group__mx__path__canon.html#ga45a0368f1fc09168bed51ec53ad91bb5">imap_path_canon</a></div><div class="ttdeci">int imap_path_canon(char *buf, size_t buflen)</div><div class="ttdoc">Canonicalise a Mailbox path - Implements MxOps::path_canon() -. </div><div class="ttdef"><b>Definition:</b> <a href="imap_8c_source.html#l02416">imap.c:2416</a></div></div>
<div class="ttc" id="mutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00040">mutt.h:40</a></div></div>
<div class="ttc" id="structBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00035">buffer.h:35</a></div></div>
<div class="ttc" id="buffer_8c_html_a2837f43a0e59e6cf2f83f23c81e53498"><div class="ttname"><a href="buffer_8c.html#a2837f43a0e59e6cf2f83f23c81e53498">mutt_buffer_alloc</a></div><div class="ttdeci">void mutt_buffer_alloc(struct Buffer *buf, size_t new_size)</div><div class="ttdoc">Make sure a buffer can store at least new_size bytes. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00265">buffer.c:265</a></div></div>
</div><!-- fragment --><div id="dynsection-66" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-66-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-66-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-66-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ab2645aa08902090e5e29dff471d1bb0e_cgraph.svg" width="343" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-67" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-67-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-67-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-67-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="imap_8c_ab2645aa08902090e5e29dff471d1bb0e_icgraph.svg" width="359" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa4c20afa73454ac2b6bdcb2e7177868e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4c20afa73454ac2b6bdcb2e7177868e">&#9670;&nbsp;</a></span>imap_commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structCommand.html">Command</a> imap_commands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  </div><div class="line">  { <span class="stringliteral">&quot;subscribe-to&quot;</span>,     <a class="code" href="command__parse_8c.html#a7efc4ec1c2dc8ab06a302452b9c66d38">parse_subscribe_to</a>,     0 },</div><div class="line">  { <span class="stringliteral">&quot;unsubscribe-from&quot;</span>, <a class="code" href="command__parse_8c.html#a4de6648a96f0b42657a3b5bb3eccfa22">parse_unsubscribe_from</a>, 0 },</div><div class="line">  </div><div class="line">}</div><div class="ttc" id="command__parse_8c_html_a4de6648a96f0b42657a3b5bb3eccfa22"><div class="ttname"><a href="command__parse_8c.html#a4de6648a96f0b42657a3b5bb3eccfa22">parse_unsubscribe_from</a></div><div class="ttdeci">enum CommandResult parse_unsubscribe_from(struct Buffer *buf, struct Buffer *s, intptr_t data, struct Buffer *err)</div><div class="ttdoc">Parse the &amp;#39;unsubscribe-from&amp;#39; command - Implements Command::parse() </div><div class="ttdef"><b>Definition:</b> <a href="command__parse_8c_source.html#l01645">command_parse.c:1645</a></div></div>
<div class="ttc" id="command__parse_8c_html_a7efc4ec1c2dc8ab06a302452b9c66d38"><div class="ttname"><a href="command__parse_8c.html#a7efc4ec1c2dc8ab06a302452b9c66d38">parse_subscribe_to</a></div><div class="ttdeci">enum CommandResult parse_subscribe_to(struct Buffer *buf, struct Buffer *s, intptr_t data, struct Buffer *err)</div><div class="ttdoc">Parse the &amp;#39;subscribe-to&amp;#39; command - Implements Command::parse() </div><div class="ttdef"><b>Definition:</b> <a href="command__parse_8c_source.html#l01313">command_parse.c:1313</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="imap_8c_source.html#l00073">73</a> of file <a class="el" href="imap_8c_source.html">imap.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
